(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1876:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"RichContentAdapter",(function(){return module_8008f8e9_RichContentAdapter})),__webpack_require__.d(__webpack_exports__,"RicosTiptapEditor",(function(){return RicosTiptapEditor})),__webpack_require__.d(__webpack_exports__,"draftBlockDataToTiptap",(function(){return draftBlockDataToTiptap})),__webpack_require__.d(__webpack_exports__,"draftToTiptap",(function(){return draftToTiptap})),__webpack_require__.d(__webpack_exports__,"fromTiptap",(function(){return fromTiptap})),__webpack_require__.d(__webpack_exports__,"tiptapNodeDataToDraft",(function(){return tiptapNodeDataToDraft})),__webpack_require__.d(__webpack_exports__,"tiptapToDraft",(function(){return tiptapToDraft})),__webpack_require__.d(__webpack_exports__,"toTiptap",(function(){return toTiptap}));var helpers_extends=__webpack_require__(3),extends_default=__webpack_require__.n(helpers_extends),objectWithoutPropertiesLoose=__webpack_require__(14),objectWithoutPropertiesLoose_default=__webpack_require__.n(objectWithoutPropertiesLoose),react=__webpack_require__(0),react_default=__webpack_require__.n(react);function OrderedMap(content){this.content=content}OrderedMap.prototype={constructor:OrderedMap,find:function(key){for(var i=0;i<this.content.length;i+=2)if(this.content[i]===key)return i;return-1},get:function(key){var found=this.find(key);return-1==found?void 0:this.content[found+1]},update:function(key,value,newKey){var self=newKey&&newKey!=key?this.remove(newKey):this,found=self.find(key),content=self.content.slice();return-1==found?content.push(newKey||key,value):(content[found+1]=value,newKey&&(content[found]=newKey)),new OrderedMap(content)},remove:function(key){var found=this.find(key);if(-1==found)return this;var content=this.content.slice();return content.splice(found,2),new OrderedMap(content)},addToStart:function(key,value){return new OrderedMap([key,value].concat(this.remove(key).content))},addToEnd:function(key,value){var content=this.remove(key).content.slice();return content.push(key,value),new OrderedMap(content)},addBefore:function(place,key,value){var without=this.remove(key),content=without.content.slice(),found=without.find(place);return content.splice(-1==found?content.length:found,0,key,value),new OrderedMap(content)},forEach:function(f){for(var i=0;i<this.content.length;i+=2)f(this.content[i],this.content[i+1])},prepend:function(map){return(map=OrderedMap.from(map)).size?new OrderedMap(map.content.concat(this.subtract(map).content)):this},append:function(map){return(map=OrderedMap.from(map)).size?new OrderedMap(this.subtract(map).content.concat(map.content)):this},subtract:function(map){var result=this;map=OrderedMap.from(map);for(var i=0;i<map.content.length;i+=2)result=result.remove(map.content[i]);return result},get size(){return this.content.length>>1}},OrderedMap.from=function(value){if(value instanceof OrderedMap)return value;var content=[];if(value)for(var prop in value)content.push(prop,value[prop]);return new OrderedMap(content)};var index_es=OrderedMap;function findDiffStart(a,b,pos){for(var i=0;;i++){if(i==a.childCount||i==b.childCount)return a.childCount==b.childCount?null:pos;var childA=a.child(i),childB=b.child(i);if(childA!=childB){if(!childA.sameMarkup(childB))return pos;if(childA.isText&&childA.text!=childB.text){for(var j=0;childA.text[j]==childB.text[j];j++)pos++;return pos}if(childA.content.size||childB.content.size){var inner=findDiffStart(childA.content,childB.content,pos+1);if(null!=inner)return inner}pos+=childA.nodeSize}else pos+=childA.nodeSize}}function findDiffEnd(a,b,posA,posB){for(var iA=a.childCount,iB=b.childCount;;){if(0==iA||0==iB)return iA==iB?null:{a:posA,b:posB};var childA=a.child(--iA),childB=b.child(--iB),size=childA.nodeSize;if(childA!=childB){if(!childA.sameMarkup(childB))return{a:posA,b:posB};if(childA.isText&&childA.text!=childB.text){for(var same=0,minSize=Math.min(childA.text.length,childB.text.length);same<minSize&&childA.text[childA.text.length-same-1]==childB.text[childB.text.length-same-1];)same++,posA--,posB--;return{a:posA,b:posB}}if(childA.content.size||childB.content.size){var inner=findDiffEnd(childA.content,childB.content,posA-1,posB-1);if(inner)return inner}posA-=size,posB-=size}else posA-=size,posB-=size}}var Fragment=function Fragment(content,size){if(this.content=content,this.size=size||0,null==size)for(var i=0;i<content.length;i++)this.size+=content[i].nodeSize},index_es_prototypeAccessors={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Fragment.prototype.nodesBetween=function nodesBetween(from,to,f,nodeStart,parent){void 0===nodeStart&&(nodeStart=0);for(var i=0,pos=0;pos<to;i++){var child=this.content[i],end=pos+child.nodeSize;if(end>from&&!1!==f(child,nodeStart+pos,parent,i)&&child.content.size){var start=pos+1;child.nodesBetween(Math.max(0,from-start),Math.min(child.content.size,to-start),f,nodeStart+start)}pos=end}},Fragment.prototype.descendants=function descendants(f){this.nodesBetween(0,this.size,f)},Fragment.prototype.textBetween=function textBetween(from,to,blockSeparator,leafText){var text="",separated=!0;return this.nodesBetween(from,to,(function(node,pos){node.isText?(text+=node.text.slice(Math.max(from,pos)-pos,to-pos),separated=!blockSeparator):node.isLeaf&&leafText?(text+=leafText,separated=!blockSeparator):!separated&&node.isBlock&&(text+=blockSeparator,separated=!0)}),0),text},Fragment.prototype.append=function append(other){if(!other.size)return this;if(!this.size)return other;var last=this.lastChild,first=other.firstChild,content=this.content.slice(),i=0;for(last.isText&&last.sameMarkup(first)&&(content[content.length-1]=last.withText(last.text+first.text),i=1);i<other.content.length;i++)content.push(other.content[i]);return new Fragment(content,this.size+other.size)},Fragment.prototype.cut=function cut(from,to){if(null==to&&(to=this.size),0==from&&to==this.size)return this;var result=[],size=0;if(to>from)for(var i=0,pos=0;pos<to;i++){var child=this.content[i],end=pos+child.nodeSize;end>from&&((pos<from||end>to)&&(child=child.isText?child.cut(Math.max(0,from-pos),Math.min(child.text.length,to-pos)):child.cut(Math.max(0,from-pos-1),Math.min(child.content.size,to-pos-1))),result.push(child),size+=child.nodeSize),pos=end}return new Fragment(result,size)},Fragment.prototype.cutByIndex=function cutByIndex(from,to){return from==to?Fragment.empty:0==from&&to==this.content.length?this:new Fragment(this.content.slice(from,to))},Fragment.prototype.replaceChild=function replaceChild(index,node){var current=this.content[index];if(current==node)return this;var copy=this.content.slice(),size=this.size+node.nodeSize-current.nodeSize;return copy[index]=node,new Fragment(copy,size)},Fragment.prototype.addToStart=function addToStart(node){return new Fragment([node].concat(this.content),this.size+node.nodeSize)},Fragment.prototype.addToEnd=function addToEnd(node){return new Fragment(this.content.concat(node),this.size+node.nodeSize)},Fragment.prototype.eq=function eq(other){if(this.content.length!=other.content.length)return!1;for(var i=0;i<this.content.length;i++)if(!this.content[i].eq(other.content[i]))return!1;return!0},index_es_prototypeAccessors.firstChild.get=function(){return this.content.length?this.content[0]:null},index_es_prototypeAccessors.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},index_es_prototypeAccessors.childCount.get=function(){return this.content.length},Fragment.prototype.child=function child(index){var found=this.content[index];if(!found)throw new RangeError("Index "+index+" out of range for "+this);return found},Fragment.prototype.maybeChild=function maybeChild(index){return this.content[index]},Fragment.prototype.forEach=function forEach(f){for(var i=0,p=0;i<this.content.length;i++){var child=this.content[i];f(child,p,i),p+=child.nodeSize}},Fragment.prototype.findDiffStart=function findDiffStart$1(other,pos){return void 0===pos&&(pos=0),findDiffStart(this,other,pos)},Fragment.prototype.findDiffEnd=function findDiffEnd$1(other,pos,otherPos){return void 0===pos&&(pos=this.size),void 0===otherPos&&(otherPos=other.size),findDiffEnd(this,other,pos,otherPos)},Fragment.prototype.findIndex=function findIndex(pos,round){if(void 0===round&&(round=-1),0==pos)return retIndex(0,pos);if(pos==this.size)return retIndex(this.content.length,pos);if(pos>this.size||pos<0)throw new RangeError("Position "+pos+" outside of fragment ("+this+")");for(var i=0,curPos=0;;i++){var end=curPos+this.child(i).nodeSize;if(end>=pos)return end==pos||round>0?retIndex(i+1,end):retIndex(i,curPos);curPos=end}},Fragment.prototype.toString=function toString(){return"<"+this.toStringInner()+">"},Fragment.prototype.toStringInner=function toStringInner(){return this.content.join(", ")},Fragment.prototype.toJSON=function toJSON(){return this.content.length?this.content.map((function(n){return n.toJSON()})):null},Fragment.fromJSON=function fromJSON(schema,value){if(!value)return Fragment.empty;if(!Array.isArray(value))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(value.map(schema.nodeFromJSON))},Fragment.fromArray=function fromArray(array){if(!array.length)return Fragment.empty;for(var joined,size=0,i=0;i<array.length;i++){var node=array[i];size+=node.nodeSize,i&&node.isText&&array[i-1].sameMarkup(node)?(joined||(joined=array.slice(0,i)),joined[joined.length-1]=node.withText(joined[joined.length-1].text+node.text)):joined&&joined.push(node)}return new Fragment(joined||array,size)},Fragment.from=function from(nodes){if(!nodes)return Fragment.empty;if(nodes instanceof Fragment)return nodes;if(Array.isArray(nodes))return this.fromArray(nodes);if(nodes.attrs)return new Fragment([nodes],nodes.nodeSize);throw new RangeError("Can not convert "+nodes+" to a Fragment"+(nodes.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Fragment.prototype,index_es_prototypeAccessors);var index_es_found={index:0,offset:0};function retIndex(index,offset){return index_es_found.index=index,index_es_found.offset=offset,index_es_found}function compareDeep(a,b){if(a===b)return!0;if(!a||"object"!=typeof a||!b||"object"!=typeof b)return!1;var array=Array.isArray(a);if(Array.isArray(b)!=array)return!1;if(array){if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!compareDeep(a[i],b[i]))return!1}else{for(var p in a)if(!(p in b)||!compareDeep(a[p],b[p]))return!1;for(var p$1 in b)if(!(p$1 in a))return!1}return!0}Fragment.empty=new Fragment([],0);var index_es_Mark=function Mark(type,attrs){this.type=type,this.attrs=attrs};function ReplaceError(message){var err=Error.call(this,message);return err.__proto__=ReplaceError.prototype,err}index_es_Mark.prototype.addToSet=function addToSet(set){for(var copy,placed=!1,i=0;i<set.length;i++){var other=set[i];if(this.eq(other))return set;if(this.type.excludes(other.type))copy||(copy=set.slice(0,i));else{if(other.type.excludes(this.type))return set;!placed&&other.type.rank>this.type.rank&&(copy||(copy=set.slice(0,i)),copy.push(this),placed=!0),copy&&copy.push(other)}}return copy||(copy=set.slice()),placed||copy.push(this),copy},index_es_Mark.prototype.removeFromSet=function removeFromSet(set){for(var i=0;i<set.length;i++)if(this.eq(set[i]))return set.slice(0,i).concat(set.slice(i+1));return set},index_es_Mark.prototype.isInSet=function isInSet(set){for(var i=0;i<set.length;i++)if(this.eq(set[i]))return!0;return!1},index_es_Mark.prototype.eq=function eq(other){return this==other||this.type==other.type&&compareDeep(this.attrs,other.attrs)},index_es_Mark.prototype.toJSON=function toJSON(){var obj={type:this.type.name};for(var _ in this.attrs){obj.attrs=this.attrs;break}return obj},index_es_Mark.fromJSON=function fromJSON(schema,json){if(!json)throw new RangeError("Invalid input for Mark.fromJSON");var type=schema.marks[json.type];if(!type)throw new RangeError("There is no mark type "+json.type+" in this schema");return type.create(json.attrs)},index_es_Mark.sameSet=function sameSet(a,b){if(a==b)return!0;if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!a[i].eq(b[i]))return!1;return!0},index_es_Mark.setFrom=function setFrom(marks){if(!marks||0==marks.length)return index_es_Mark.none;if(marks instanceof index_es_Mark)return[marks];var copy=marks.slice();return copy.sort((function(a,b){return a.type.rank-b.type.rank})),copy},index_es_Mark.none=[],ReplaceError.prototype=Object.create(Error.prototype),ReplaceError.prototype.constructor=ReplaceError,ReplaceError.prototype.name="ReplaceError";var Slice=function Slice(content,openStart,openEnd){this.content=content,this.openStart=openStart,this.openEnd=openEnd},index_es_prototypeAccessors$1={size:{configurable:!0}};function removeRange(content,from,to){var ref=content.findIndex(from),index=ref.index,offset=ref.offset,child=content.maybeChild(index),ref$1=content.findIndex(to),indexTo=ref$1.index,offsetTo=ref$1.offset;if(offset==from||child.isText){if(offsetTo!=to&&!content.child(indexTo).isText)throw new RangeError("Removing non-flat range");return content.cut(0,from).append(content.cut(to))}if(index!=indexTo)throw new RangeError("Removing non-flat range");return content.replaceChild(index,child.copy(removeRange(child.content,from-offset-1,to-offset-1)))}function insertInto(content,dist,insert,parent){var ref=content.findIndex(dist),index=ref.index,offset=ref.offset,child=content.maybeChild(index);if(offset==dist||child.isText)return parent&&!parent.canReplace(index,index,insert)?null:content.cut(0,dist).append(insert).append(content.cut(dist));var inner=insertInto(child.content,dist-offset-1,insert);return inner&&content.replaceChild(index,child.copy(inner))}function index_es_replace($from,$to,slice){if(slice.openStart>$from.depth)throw new ReplaceError("Inserted content deeper than insertion position");if($from.depth-slice.openStart!=$to.depth-slice.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter($from,$to,slice,0)}function replaceOuter($from,$to,slice,depth){var index=$from.index(depth),node=$from.node(depth);if(index==$to.index(depth)&&depth<$from.depth-slice.openStart){var inner=replaceOuter($from,$to,slice,depth+1);return node.copy(node.content.replaceChild(index,inner))}if(slice.content.size){if(slice.openStart||slice.openEnd||$from.depth!=depth||$to.depth!=depth){var ref=function prepareSliceForReplace(slice,$along){for(var extra=$along.depth-slice.openStart,node=$along.node(extra).copy(slice.content),i=extra-1;i>=0;i--)node=$along.node(i).copy(Fragment.from(node));return{start:node.resolveNoCache(slice.openStart+extra),end:node.resolveNoCache(node.content.size-slice.openEnd-extra)}}(slice,$from);return index_es_close(node,replaceThreeWay($from,ref.start,ref.end,$to,depth))}var parent=$from.parent,content=parent.content;return index_es_close(parent,content.cut(0,$from.parentOffset).append(slice.content).append(content.cut($to.parentOffset)))}return index_es_close(node,replaceTwoWay($from,$to,depth))}function checkJoin(main,sub){if(!sub.type.compatibleContent(main.type))throw new ReplaceError("Cannot join "+sub.type.name+" onto "+main.type.name)}function index_es_joinable($before,$after,depth){var node=$before.node(depth);return checkJoin(node,$after.node(depth)),node}function addNode(child,target){var last=target.length-1;last>=0&&child.isText&&child.sameMarkup(target[last])?target[last]=child.withText(target[last].text+child.text):target.push(child)}function addRange($start,$end,depth,target){var node=($end||$start).node(depth),startIndex=0,endIndex=$end?$end.index(depth):node.childCount;$start&&(startIndex=$start.index(depth),$start.depth>depth?startIndex++:$start.textOffset&&(addNode($start.nodeAfter,target),startIndex++));for(var i=startIndex;i<endIndex;i++)addNode(node.child(i),target);$end&&$end.depth==depth&&$end.textOffset&&addNode($end.nodeBefore,target)}function index_es_close(node,content){if(!node.type.validContent(content))throw new ReplaceError("Invalid content for node "+node.type.name);return node.copy(content)}function replaceThreeWay($from,$start,$end,$to,depth){var openStart=$from.depth>depth&&index_es_joinable($from,$start,depth+1),openEnd=$to.depth>depth&&index_es_joinable($end,$to,depth+1),content=[];return addRange(null,$from,depth,content),openStart&&openEnd&&$start.index(depth)==$end.index(depth)?(checkJoin(openStart,openEnd),addNode(index_es_close(openStart,replaceThreeWay($from,$start,$end,$to,depth+1)),content)):(openStart&&addNode(index_es_close(openStart,replaceTwoWay($from,$start,depth+1)),content),addRange($start,$end,depth,content),openEnd&&addNode(index_es_close(openEnd,replaceTwoWay($end,$to,depth+1)),content)),addRange($to,null,depth,content),new Fragment(content)}function replaceTwoWay($from,$to,depth){var content=[];(addRange(null,$from,depth,content),$from.depth>depth)&&addNode(index_es_close(index_es_joinable($from,$to,depth+1),replaceTwoWay($from,$to,depth+1)),content);return addRange($to,null,depth,content),new Fragment(content)}index_es_prototypeAccessors$1.size.get=function(){return this.content.size-this.openStart-this.openEnd},Slice.prototype.insertAt=function insertAt(pos,fragment){var content=insertInto(this.content,pos+this.openStart,fragment,null);return content&&new Slice(content,this.openStart,this.openEnd)},Slice.prototype.removeBetween=function removeBetween(from,to){return new Slice(removeRange(this.content,from+this.openStart,to+this.openStart),this.openStart,this.openEnd)},Slice.prototype.eq=function eq(other){return this.content.eq(other.content)&&this.openStart==other.openStart&&this.openEnd==other.openEnd},Slice.prototype.toString=function toString(){return this.content+"("+this.openStart+","+this.openEnd+")"},Slice.prototype.toJSON=function toJSON(){if(!this.content.size)return null;var json={content:this.content.toJSON()};return this.openStart>0&&(json.openStart=this.openStart),this.openEnd>0&&(json.openEnd=this.openEnd),json},Slice.fromJSON=function fromJSON(schema,json){if(!json)return Slice.empty;var openStart=json.openStart||0,openEnd=json.openEnd||0;if("number"!=typeof openStart||"number"!=typeof openEnd)throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(schema,json.content),openStart,openEnd)},Slice.maxOpen=function maxOpen(fragment,openIsolating){void 0===openIsolating&&(openIsolating=!0);for(var openStart=0,openEnd=0,n=fragment.firstChild;n&&!n.isLeaf&&(openIsolating||!n.type.spec.isolating);n=n.firstChild)openStart++;for(var n$1=fragment.lastChild;n$1&&!n$1.isLeaf&&(openIsolating||!n$1.type.spec.isolating);n$1=n$1.lastChild)openEnd++;return new Slice(fragment,openStart,openEnd)},Object.defineProperties(Slice.prototype,index_es_prototypeAccessors$1),Slice.empty=new Slice(Fragment.empty,0,0);var ResolvedPos=function ResolvedPos(pos,path,parentOffset){this.pos=pos,this.path=path,this.depth=path.length/3-1,this.parentOffset=parentOffset},prototypeAccessors$2={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};ResolvedPos.prototype.resolveDepth=function resolveDepth(val){return null==val?this.depth:val<0?this.depth+val:val},prototypeAccessors$2.parent.get=function(){return this.node(this.depth)},prototypeAccessors$2.doc.get=function(){return this.node(0)},ResolvedPos.prototype.node=function node(depth){return this.path[3*this.resolveDepth(depth)]},ResolvedPos.prototype.index=function index(depth){return this.path[3*this.resolveDepth(depth)+1]},ResolvedPos.prototype.indexAfter=function indexAfter(depth){return depth=this.resolveDepth(depth),this.index(depth)+(depth!=this.depth||this.textOffset?1:0)},ResolvedPos.prototype.start=function start(depth){return 0==(depth=this.resolveDepth(depth))?0:this.path[3*depth-1]+1},ResolvedPos.prototype.end=function end(depth){return depth=this.resolveDepth(depth),this.start(depth)+this.node(depth).content.size},ResolvedPos.prototype.before=function before(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position before the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]},ResolvedPos.prototype.after=function after(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position after the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]+this.path[3*depth].nodeSize},prototypeAccessors$2.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},prototypeAccessors$2.nodeAfter.get=function(){var parent=this.parent,index=this.index(this.depth);if(index==parent.childCount)return null;var dOff=this.pos-this.path[this.path.length-1],child=parent.child(index);return dOff?parent.child(index).cut(dOff):child},prototypeAccessors$2.nodeBefore.get=function(){var index=this.index(this.depth),dOff=this.pos-this.path[this.path.length-1];return dOff?this.parent.child(index).cut(0,dOff):0==index?null:this.parent.child(index-1)},ResolvedPos.prototype.posAtIndex=function posAtIndex(index,depth){depth=this.resolveDepth(depth);for(var node=this.path[3*depth],pos=0==depth?0:this.path[3*depth-1]+1,i=0;i<index;i++)pos+=node.child(i).nodeSize;return pos},ResolvedPos.prototype.marks=function marks(){var parent=this.parent,index=this.index();if(0==parent.content.size)return index_es_Mark.none;if(this.textOffset)return parent.child(index).marks;var main=parent.maybeChild(index-1),other=parent.maybeChild(index);if(!main){var tmp=main;main=other,other=tmp}for(var marks=main.marks,i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||other&&marks[i].isInSet(other.marks)||(marks=marks[i--].removeFromSet(marks));return marks},ResolvedPos.prototype.marksAcross=function marksAcross($end){var after=this.parent.maybeChild(this.index());if(!after||!after.isInline)return null;for(var marks=after.marks,next=$end.parent.maybeChild($end.index()),i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||next&&marks[i].isInSet(next.marks)||(marks=marks[i--].removeFromSet(marks));return marks},ResolvedPos.prototype.sharedDepth=function sharedDepth(pos){for(var depth=this.depth;depth>0;depth--)if(this.start(depth)<=pos&&this.end(depth)>=pos)return depth;return 0},ResolvedPos.prototype.blockRange=function blockRange(other,pred){if(void 0===other&&(other=this),other.pos<this.pos)return other.blockRange(this);for(var d=this.depth-(this.parent.inlineContent||this.pos==other.pos?1:0);d>=0;d--)if(other.pos<=this.end(d)&&(!pred||pred(this.node(d))))return new NodeRange(this,other,d)},ResolvedPos.prototype.sameParent=function sameParent(other){return this.pos-this.parentOffset==other.pos-other.parentOffset},ResolvedPos.prototype.max=function max(other){return other.pos>this.pos?other:this},ResolvedPos.prototype.min=function min(other){return other.pos<this.pos?other:this},ResolvedPos.prototype.toString=function toString(){for(var str="",i=1;i<=this.depth;i++)str+=(str?"/":"")+this.node(i).type.name+"_"+this.index(i-1);return str+":"+this.parentOffset},ResolvedPos.resolve=function resolve(doc,pos){if(!(pos>=0&&pos<=doc.content.size))throw new RangeError("Position "+pos+" out of range");for(var path=[],start=0,parentOffset=pos,node=doc;;){var ref=node.content.findIndex(parentOffset),index=ref.index,offset=ref.offset,rem=parentOffset-offset;if(path.push(node,index,start+offset),!rem)break;if((node=node.child(index)).isText)break;parentOffset=rem-1,start+=offset+1}return new ResolvedPos(pos,path,parentOffset)},ResolvedPos.resolveCached=function resolveCached(doc,pos){for(var i=0;i<resolveCache.length;i++){var cached=resolveCache[i];if(cached.pos==pos&&cached.doc==doc)return cached}var result=resolveCache[resolveCachePos]=ResolvedPos.resolve(doc,pos);return resolveCachePos=(resolveCachePos+1)%resolveCacheSize,result},Object.defineProperties(ResolvedPos.prototype,prototypeAccessors$2);var resolveCache=[],resolveCachePos=0,resolveCacheSize=12,NodeRange=function NodeRange($from,$to,depth){this.$from=$from,this.$to=$to,this.depth=depth},prototypeAccessors$1$1={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};prototypeAccessors$1$1.start.get=function(){return this.$from.before(this.depth+1)},prototypeAccessors$1$1.end.get=function(){return this.$to.after(this.depth+1)},prototypeAccessors$1$1.parent.get=function(){return this.$from.node(this.depth)},prototypeAccessors$1$1.startIndex.get=function(){return this.$from.index(this.depth)},prototypeAccessors$1$1.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(NodeRange.prototype,prototypeAccessors$1$1);var emptyAttrs=Object.create(null),index_es_Node=function Node(type,attrs,content,marks){this.type=type,this.attrs=attrs,this.content=content||Fragment.empty,this.marks=marks||index_es_Mark.none},index_es_prototypeAccessors$3={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};index_es_prototypeAccessors$3.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},index_es_prototypeAccessors$3.childCount.get=function(){return this.content.childCount},index_es_Node.prototype.child=function child(index){return this.content.child(index)},index_es_Node.prototype.maybeChild=function maybeChild(index){return this.content.maybeChild(index)},index_es_Node.prototype.forEach=function forEach(f){this.content.forEach(f)},index_es_Node.prototype.nodesBetween=function nodesBetween(from,to,f,startPos){void 0===startPos&&(startPos=0),this.content.nodesBetween(from,to,f,startPos,this)},index_es_Node.prototype.descendants=function descendants(f){this.nodesBetween(0,this.content.size,f)},index_es_prototypeAccessors$3.textContent.get=function(){return this.textBetween(0,this.content.size,"")},index_es_Node.prototype.textBetween=function textBetween(from,to,blockSeparator,leafText){return this.content.textBetween(from,to,blockSeparator,leafText)},index_es_prototypeAccessors$3.firstChild.get=function(){return this.content.firstChild},index_es_prototypeAccessors$3.lastChild.get=function(){return this.content.lastChild},index_es_Node.prototype.eq=function eq(other){return this==other||this.sameMarkup(other)&&this.content.eq(other.content)},index_es_Node.prototype.sameMarkup=function sameMarkup(other){return this.hasMarkup(other.type,other.attrs,other.marks)},index_es_Node.prototype.hasMarkup=function hasMarkup(type,attrs,marks){return this.type==type&&compareDeep(this.attrs,attrs||type.defaultAttrs||emptyAttrs)&&index_es_Mark.sameSet(this.marks,marks||index_es_Mark.none)},index_es_Node.prototype.copy=function copy(content){return void 0===content&&(content=null),content==this.content?this:new this.constructor(this.type,this.attrs,content,this.marks)},index_es_Node.prototype.mark=function mark(marks){return marks==this.marks?this:new this.constructor(this.type,this.attrs,this.content,marks)},index_es_Node.prototype.cut=function cut(from,to){return 0==from&&to==this.content.size?this:this.copy(this.content.cut(from,to))},index_es_Node.prototype.slice=function slice(from,to,includeParents){if(void 0===to&&(to=this.content.size),void 0===includeParents&&(includeParents=!1),from==to)return Slice.empty;var $from=this.resolve(from),$to=this.resolve(to),depth=includeParents?0:$from.sharedDepth(to),start=$from.start(depth),content=$from.node(depth).content.cut($from.pos-start,$to.pos-start);return new Slice(content,$from.depth-depth,$to.depth-depth)},index_es_Node.prototype.replace=function replace$1(from,to,slice){return index_es_replace(this.resolve(from),this.resolve(to),slice)},index_es_Node.prototype.nodeAt=function nodeAt(pos){for(var node=this;;){var ref=node.content.findIndex(pos),index=ref.index,offset=ref.offset;if(!(node=node.maybeChild(index)))return null;if(offset==pos||node.isText)return node;pos-=offset+1}},index_es_Node.prototype.childAfter=function childAfter(pos){var ref=this.content.findIndex(pos),index=ref.index,offset=ref.offset;return{node:this.content.maybeChild(index),index:index,offset:offset}},index_es_Node.prototype.childBefore=function childBefore(pos){if(0==pos)return{node:null,index:0,offset:0};var ref=this.content.findIndex(pos),index=ref.index,offset=ref.offset;if(offset<pos)return{node:this.content.child(index),index:index,offset:offset};var node=this.content.child(index-1);return{node:node,index:index-1,offset:offset-node.nodeSize}},index_es_Node.prototype.resolve=function resolve(pos){return ResolvedPos.resolveCached(this,pos)},index_es_Node.prototype.resolveNoCache=function resolveNoCache(pos){return ResolvedPos.resolve(this,pos)},index_es_Node.prototype.rangeHasMark=function rangeHasMark(from,to,type){var found=!1;return to>from&&this.nodesBetween(from,to,(function(node){return type.isInSet(node.marks)&&(found=!0),!found})),found},index_es_prototypeAccessors$3.isBlock.get=function(){return this.type.isBlock},index_es_prototypeAccessors$3.isTextblock.get=function(){return this.type.isTextblock},index_es_prototypeAccessors$3.inlineContent.get=function(){return this.type.inlineContent},index_es_prototypeAccessors$3.isInline.get=function(){return this.type.isInline},index_es_prototypeAccessors$3.isText.get=function(){return this.type.isText},index_es_prototypeAccessors$3.isLeaf.get=function(){return this.type.isLeaf},index_es_prototypeAccessors$3.isAtom.get=function(){return this.type.isAtom},index_es_Node.prototype.toString=function toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var name=this.type.name;return this.content.size&&(name+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,name)},index_es_Node.prototype.contentMatchAt=function contentMatchAt(index){var match=this.type.contentMatch.matchFragment(this.content,0,index);if(!match)throw new Error("Called contentMatchAt on a node with invalid content");return match},index_es_Node.prototype.canReplace=function canReplace(from,to,replacement,start,end){void 0===replacement&&(replacement=Fragment.empty),void 0===start&&(start=0),void 0===end&&(end=replacement.childCount);var one=this.contentMatchAt(from).matchFragment(replacement,start,end),two=one&&one.matchFragment(this.content,to);if(!two||!two.validEnd)return!1;for(var i=start;i<end;i++)if(!this.type.allowsMarks(replacement.child(i).marks))return!1;return!0},index_es_Node.prototype.canReplaceWith=function canReplaceWith(from,to,type,marks){if(marks&&!this.type.allowsMarks(marks))return!1;var start=this.contentMatchAt(from).matchType(type),end=start&&start.matchFragment(this.content,to);return!!end&&end.validEnd},index_es_Node.prototype.canAppend=function canAppend(other){return other.content.size?this.canReplace(this.childCount,this.childCount,other.content):this.type.compatibleContent(other.type)},index_es_Node.prototype.check=function check(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var copy=index_es_Mark.none,i=0;i<this.marks.length;i++)copy=this.marks[i].addToSet(copy);if(!index_es_Mark.sameSet(copy,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(m){return m.type.name})));this.content.forEach((function(node){return node.check()}))},index_es_Node.prototype.toJSON=function toJSON(){var obj={type:this.type.name};for(var _ in this.attrs){obj.attrs=this.attrs;break}return this.content.size&&(obj.content=this.content.toJSON()),this.marks.length&&(obj.marks=this.marks.map((function(n){return n.toJSON()}))),obj},index_es_Node.fromJSON=function fromJSON(schema,json){if(!json)throw new RangeError("Invalid input for Node.fromJSON");var marks=null;if(json.marks){if(!Array.isArray(json.marks))throw new RangeError("Invalid mark data for Node.fromJSON");marks=json.marks.map(schema.markFromJSON)}if("text"==json.type){if("string"!=typeof json.text)throw new RangeError("Invalid text node in JSON");return schema.text(json.text,marks)}var content=Fragment.fromJSON(schema,json.content);return schema.nodeType(json.type).create(json.attrs,content,marks)},Object.defineProperties(index_es_Node.prototype,index_es_prototypeAccessors$3);var TextNode=function(Node){function TextNode(type,attrs,content,marks){if(Node.call(this,type,attrs,null,marks),!content)throw new RangeError("Empty text nodes are not allowed");this.text=content}Node&&(TextNode.__proto__=Node),TextNode.prototype=Object.create(Node&&Node.prototype),TextNode.prototype.constructor=TextNode;var prototypeAccessors$1={textContent:{configurable:!0},nodeSize:{configurable:!0}};return TextNode.prototype.toString=function toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))},prototypeAccessors$1.textContent.get=function(){return this.text},TextNode.prototype.textBetween=function textBetween(from,to){return this.text.slice(from,to)},prototypeAccessors$1.nodeSize.get=function(){return this.text.length},TextNode.prototype.mark=function mark(marks){return marks==this.marks?this:new TextNode(this.type,this.attrs,this.text,marks)},TextNode.prototype.withText=function withText(text){return text==this.text?this:new TextNode(this.type,this.attrs,text,this.marks)},TextNode.prototype.cut=function cut(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.text.length),0==from&&to==this.text.length?this:this.withText(this.text.slice(from,to))},TextNode.prototype.eq=function eq(other){return this.sameMarkup(other)&&this.text==other.text},TextNode.prototype.toJSON=function toJSON(){var base=Node.prototype.toJSON.call(this);return base.text=this.text,base},Object.defineProperties(TextNode.prototype,prototypeAccessors$1),TextNode}(index_es_Node);function wrapMarks(marks,str){for(var i=marks.length-1;i>=0;i--)str=marks[i].type.name+"("+str+")";return str}var ContentMatch=function ContentMatch(validEnd){this.validEnd=validEnd,this.next=[],this.wrapCache=[]},prototypeAccessors$4={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};ContentMatch.parse=function parse(string,nodeTypes){var stream=new TokenStream(string,nodeTypes);if(null==stream.next)return ContentMatch.empty;var expr=parseExpr(stream);stream.next&&stream.err("Unexpected trailing text");var match=function dfa(nfa){var labeled=Object.create(null);return explore(nullFrom(nfa,0));function explore(states){var out=[];states.forEach((function(node){nfa[node].forEach((function(ref){var term=ref.term,to=ref.to;if(term){var known=out.indexOf(term),set=known>-1&&out[known+1];nullFrom(nfa,to).forEach((function(node){set||out.push(term,set=[]),-1==set.indexOf(node)&&set.push(node)}))}}))}));for(var state=labeled[states.join(",")]=new ContentMatch(states.indexOf(nfa.length-1)>-1),i=0;i<out.length;i+=2){var states$1=out[i+1].sort(cmp);state.next.push(out[i],labeled[states$1.join(",")]||explore(states$1))}return state}}(function nfa(expr){var nfa=[[]];return connect(compile(expr,0),node()),nfa;function node(){return nfa.push([])-1}function edge(from,to,term){var edge={term:term,to:to};return nfa[from].push(edge),edge}function connect(edges,to){edges.forEach((function(edge){return edge.to=to}))}function compile(expr,from){if("choice"==expr.type)return expr.exprs.reduce((function(out,expr){return out.concat(compile(expr,from))}),[]);if("seq"==expr.type)for(var i=0;;i++){var next=compile(expr.exprs[i],from);if(i==expr.exprs.length-1)return next;connect(next,from=node())}else{if("star"==expr.type){var loop=node();return edge(from,loop),connect(compile(expr.expr,loop),loop),[edge(loop)]}if("plus"==expr.type){var loop$1=node();return connect(compile(expr.expr,from),loop$1),connect(compile(expr.expr,loop$1),loop$1),[edge(loop$1)]}if("opt"==expr.type)return[edge(from)].concat(compile(expr.expr,from));if("range"==expr.type){for(var cur=from,i$1=0;i$1<expr.min;i$1++){var next$1=node();connect(compile(expr.expr,cur),next$1),cur=next$1}if(-1==expr.max)connect(compile(expr.expr,cur),cur);else for(var i$2=expr.min;i$2<expr.max;i$2++){var next$2=node();edge(cur,next$2),connect(compile(expr.expr,cur),next$2),cur=next$2}return[edge(cur)]}if("name"==expr.type)return[edge(from,null,expr.value)]}}}(expr));return function checkForDeadEnds(match,stream){for(var i=0,work=[match];i<work.length;i++){for(var state=work[i],dead=!state.validEnd,nodes=[],j=0;j<state.next.length;j+=2){var node=state.next[j],next=state.next[j+1];nodes.push(node.name),!dead||node.isText||node.hasRequiredAttrs()||(dead=!1),-1==work.indexOf(next)&&work.push(next)}dead&&stream.err("Only non-generatable nodes ("+nodes.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(match,stream),match},ContentMatch.prototype.matchType=function matchType(type){for(var i=0;i<this.next.length;i+=2)if(this.next[i]==type)return this.next[i+1];return null},ContentMatch.prototype.matchFragment=function matchFragment(frag,start,end){void 0===start&&(start=0),void 0===end&&(end=frag.childCount);for(var cur=this,i=start;cur&&i<end;i++)cur=cur.matchType(frag.child(i).type);return cur},prototypeAccessors$4.inlineContent.get=function(){var first=this.next[0];return!!first&&first.isInline},prototypeAccessors$4.defaultType.get=function(){for(var i=0;i<this.next.length;i+=2){var type=this.next[i];if(!type.isText&&!type.hasRequiredAttrs())return type}},ContentMatch.prototype.compatible=function compatible(other){for(var i=0;i<this.next.length;i+=2)for(var j=0;j<other.next.length;j+=2)if(this.next[i]==other.next[j])return!0;return!1},ContentMatch.prototype.fillBefore=function fillBefore(after,toEnd,startIndex){void 0===toEnd&&(toEnd=!1),void 0===startIndex&&(startIndex=0);var seen=[this];return function search(match,types){var finished=match.matchFragment(after,startIndex);if(finished&&(!toEnd||finished.validEnd))return Fragment.from(types.map((function(tp){return tp.createAndFill()})));for(var i=0;i<match.next.length;i+=2){var type=match.next[i],next=match.next[i+1];if(!type.isText&&!type.hasRequiredAttrs()&&-1==seen.indexOf(next)){seen.push(next);var found=search(next,types.concat(type));if(found)return found}}}(this,[])},ContentMatch.prototype.findWrapping=function findWrapping(target){for(var i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==target)return this.wrapCache[i+1];var computed=this.computeWrapping(target);return this.wrapCache.push(target,computed),computed},ContentMatch.prototype.computeWrapping=function computeWrapping(target){for(var seen=Object.create(null),active=[{match:this,type:null,via:null}];active.length;){var current=active.shift(),match=current.match;if(match.matchType(target)){for(var result=[],obj=current;obj.type;obj=obj.via)result.push(obj.type);return result.reverse()}for(var i=0;i<match.next.length;i+=2){var type=match.next[i];type.isLeaf||type.hasRequiredAttrs()||type.name in seen||current.type&&!match.next[i+1].validEnd||(active.push({match:type.contentMatch,type:type,via:current}),seen[type.name]=!0)}}},prototypeAccessors$4.edgeCount.get=function(){return this.next.length>>1},ContentMatch.prototype.edge=function edge(n){var i=n<<1;if(i>=this.next.length)throw new RangeError("There's no "+n+"th edge in this content match");return{type:this.next[i],next:this.next[i+1]}},ContentMatch.prototype.toString=function toString(){var seen=[];return function scan(m){seen.push(m);for(var i=1;i<m.next.length;i+=2)-1==seen.indexOf(m.next[i])&&scan(m.next[i])}(this),seen.map((function(m,i){for(var out=i+(m.validEnd?"*":" ")+" ",i$1=0;i$1<m.next.length;i$1+=2)out+=(i$1?", ":"")+m.next[i$1].name+"->"+seen.indexOf(m.next[i$1+1]);return out})).join("\n")},Object.defineProperties(ContentMatch.prototype,prototypeAccessors$4),ContentMatch.empty=new ContentMatch(!0);var TokenStream=function TokenStream(string,nodeTypes){this.string=string,this.nodeTypes=nodeTypes,this.inline=null,this.pos=0,this.tokens=string.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},prototypeAccessors$1$2={next:{configurable:!0}};function parseExpr(stream){var exprs=[];do{exprs.push(parseExprSeq(stream))}while(stream.eat("|"));return 1==exprs.length?exprs[0]:{type:"choice",exprs:exprs}}function parseExprSeq(stream){var exprs=[];do{exprs.push(parseExprSubscript(stream))}while(stream.next&&")"!=stream.next&&"|"!=stream.next);return 1==exprs.length?exprs[0]:{type:"seq",exprs:exprs}}function parseExprSubscript(stream){for(var expr=function parseExprAtom(stream){if(stream.eat("(")){var expr=parseExpr(stream);return stream.eat(")")||stream.err("Missing closing paren"),expr}if(!/\W/.test(stream.next)){var exprs=function resolveName(stream,name){var types=stream.nodeTypes,type=types[name];if(type)return[type];var result=[];for(var typeName in types){var type$1=types[typeName];type$1.groups.indexOf(name)>-1&&result.push(type$1)}0==result.length&&stream.err("No node type or group '"+name+"' found");return result}(stream,stream.next).map((function(type){return null==stream.inline?stream.inline=type.isInline:stream.inline!=type.isInline&&stream.err("Mixing inline and block content"),{type:"name",value:type}}));return stream.pos++,1==exprs.length?exprs[0]:{type:"choice",exprs:exprs}}stream.err("Unexpected token '"+stream.next+"'")}(stream);;)if(stream.eat("+"))expr={type:"plus",expr:expr};else if(stream.eat("*"))expr={type:"star",expr:expr};else if(stream.eat("?"))expr={type:"opt",expr:expr};else{if(!stream.eat("{"))break;expr=parseExprRange(stream,expr)}return expr}function parseNum(stream){/\D/.test(stream.next)&&stream.err("Expected number, got '"+stream.next+"'");var result=Number(stream.next);return stream.pos++,result}function parseExprRange(stream,expr){var min=parseNum(stream),max=min;return stream.eat(",")&&(max="}"!=stream.next?parseNum(stream):-1),stream.eat("}")||stream.err("Unclosed braced range"),{type:"range",min:min,max:max,expr:expr}}function cmp(a,b){return b-a}function nullFrom(nfa,node){var result=[];return function scan(node){var edges=nfa[node];if(1==edges.length&&!edges[0].term)return scan(edges[0].to);result.push(node);for(var i=0;i<edges.length;i++){var ref=edges[i],term=ref.term,to=ref.to;term||-1!=result.indexOf(to)||scan(to)}}(node),result.sort(cmp)}function defaultAttrs(attrs){var defaults=Object.create(null);for(var attrName in attrs){var attr=attrs[attrName];if(!attr.hasDefault)return null;defaults[attrName]=attr.default}return defaults}function computeAttrs(attrs,value){var built=Object.create(null);for(var name in attrs){var given=value&&value[name];if(void 0===given){var attr=attrs[name];if(!attr.hasDefault)throw new RangeError("No value supplied for attribute "+name);given=attr.default}built[name]=given}return built}function initAttrs(attrs){var result=Object.create(null);if(attrs)for(var name in attrs)result[name]=new Attribute(attrs[name]);return result}prototypeAccessors$1$2.next.get=function(){return this.tokens[this.pos]},TokenStream.prototype.eat=function eat(tok){return this.next==tok&&(this.pos++||!0)},TokenStream.prototype.err=function err(str){throw new SyntaxError(str+" (in content expression '"+this.string+"')")},Object.defineProperties(TokenStream.prototype,prototypeAccessors$1$2);var NodeType=function NodeType(name,schema,spec){this.name=name,this.schema=schema,this.spec=spec,this.groups=spec.group?spec.group.split(" "):[],this.attrs=initAttrs(spec.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(spec.inline||"text"==name),this.isText="text"==name},prototypeAccessors$5={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};prototypeAccessors$5.isInline.get=function(){return!this.isBlock},prototypeAccessors$5.isTextblock.get=function(){return this.isBlock&&this.inlineContent},prototypeAccessors$5.isLeaf.get=function(){return this.contentMatch==ContentMatch.empty},prototypeAccessors$5.isAtom.get=function(){return this.isLeaf||this.spec.atom},NodeType.prototype.hasRequiredAttrs=function hasRequiredAttrs(){for(var n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1},NodeType.prototype.compatibleContent=function compatibleContent(other){return this==other||this.contentMatch.compatible(other.contentMatch)},NodeType.prototype.computeAttrs=function computeAttrs$1(attrs){return!attrs&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,attrs)},NodeType.prototype.create=function create(attrs,content,marks){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new index_es_Node(this,this.computeAttrs(attrs),Fragment.from(content),index_es_Mark.setFrom(marks))},NodeType.prototype.createChecked=function createChecked(attrs,content,marks){if(content=Fragment.from(content),!this.validContent(content))throw new RangeError("Invalid content for node "+this.name);return new index_es_Node(this,this.computeAttrs(attrs),content,index_es_Mark.setFrom(marks))},NodeType.prototype.createAndFill=function createAndFill(attrs,content,marks){if(attrs=this.computeAttrs(attrs),(content=Fragment.from(content)).size){var before=this.contentMatch.fillBefore(content);if(!before)return null;content=before.append(content)}var after=this.contentMatch.matchFragment(content).fillBefore(Fragment.empty,!0);return after?new index_es_Node(this,attrs,content.append(after),index_es_Mark.setFrom(marks)):null},NodeType.prototype.validContent=function validContent(content){var result=this.contentMatch.matchFragment(content);if(!result||!result.validEnd)return!1;for(var i=0;i<content.childCount;i++)if(!this.allowsMarks(content.child(i).marks))return!1;return!0},NodeType.prototype.allowsMarkType=function allowsMarkType(markType){return null==this.markSet||this.markSet.indexOf(markType)>-1},NodeType.prototype.allowsMarks=function allowsMarks(marks){if(null==this.markSet)return!0;for(var i=0;i<marks.length;i++)if(!this.allowsMarkType(marks[i].type))return!1;return!0},NodeType.prototype.allowedMarks=function allowedMarks(marks){if(null==this.markSet)return marks;for(var copy,i=0;i<marks.length;i++)this.allowsMarkType(marks[i].type)?copy&&copy.push(marks[i]):copy||(copy=marks.slice(0,i));return copy?copy.length?copy:index_es_Mark.empty:marks},NodeType.compile=function compile(nodes,schema){var result=Object.create(null);nodes.forEach((function(name,spec){return result[name]=new NodeType(name,schema,spec)}));var topType=schema.spec.topNode||"doc";if(!result[topType])throw new RangeError("Schema is missing its top node type ('"+topType+"')");if(!result.text)throw new RangeError("Every schema needs a 'text' type");for(var _ in result.text.attrs)throw new RangeError("The text node type should not have attributes");return result},Object.defineProperties(NodeType.prototype,prototypeAccessors$5);var Attribute=function Attribute(options){this.hasDefault=Object.prototype.hasOwnProperty.call(options,"default"),this.default=options.default},prototypeAccessors$1$3={isRequired:{configurable:!0}};prototypeAccessors$1$3.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Attribute.prototype,prototypeAccessors$1$3);var MarkType=function MarkType(name,rank,schema,spec){this.name=name,this.schema=schema,this.spec=spec,this.attrs=initAttrs(spec.attrs),this.rank=rank,this.excluded=null;var defaults=defaultAttrs(this.attrs);this.instance=defaults&&new index_es_Mark(this,defaults)};MarkType.prototype.create=function create(attrs){return!attrs&&this.instance?this.instance:new index_es_Mark(this,computeAttrs(this.attrs,attrs))},MarkType.compile=function compile(marks,schema){var result=Object.create(null),rank=0;return marks.forEach((function(name,spec){return result[name]=new MarkType(name,rank++,schema,spec)})),result},MarkType.prototype.removeFromSet=function removeFromSet(set){for(var i=0;i<set.length;i++)set[i].type==this&&(set=set.slice(0,i).concat(set.slice(i+1)),i--);return set},MarkType.prototype.isInSet=function isInSet(set){for(var i=0;i<set.length;i++)if(set[i].type==this)return set[i]},MarkType.prototype.excludes=function excludes(other){return this.excluded.indexOf(other)>-1};var index_es_Schema=function Schema(spec){for(var prop in this.spec={},spec)this.spec[prop]=spec[prop];this.spec.nodes=index_es.from(spec.nodes),this.spec.marks=index_es.from(spec.marks),this.nodes=NodeType.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);var contentExprCache=Object.create(null);for(var prop$1 in this.nodes){if(prop$1 in this.marks)throw new RangeError(prop$1+" can not be both a node and a mark");var type=this.nodes[prop$1],contentExpr=type.spec.content||"",markExpr=type.spec.marks;type.contentMatch=contentExprCache[contentExpr]||(contentExprCache[contentExpr]=ContentMatch.parse(contentExpr,this.nodes)),type.inlineContent=type.contentMatch.inlineContent,type.markSet="_"==markExpr?null:markExpr?gatherMarks(this,markExpr.split(" ")):""!=markExpr&&type.inlineContent?null:[]}for(var prop$2 in this.marks){var type$1=this.marks[prop$2],excl=type$1.spec.excludes;type$1.excluded=null==excl?[type$1]:""==excl?[]:gatherMarks(this,excl.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function gatherMarks(schema,marks){for(var found=[],i=0;i<marks.length;i++){var name=marks[i],mark=schema.marks[name],ok=mark;if(mark)found.push(mark);else for(var prop in schema.marks){var mark$1=schema.marks[prop];("_"==name||mark$1.spec.group&&mark$1.spec.group.split(" ").indexOf(name)>-1)&&found.push(ok=mark$1)}if(!ok)throw new SyntaxError("Unknown mark type: '"+marks[i]+"'")}return found}index_es_Schema.prototype.node=function node(type,attrs,content,marks){if("string"==typeof type)type=this.nodeType(type);else{if(!(type instanceof NodeType))throw new RangeError("Invalid node type: "+type);if(type.schema!=this)throw new RangeError("Node type from different schema used ("+type.name+")")}return type.createChecked(attrs,content,marks)},index_es_Schema.prototype.text=function text(text$1,marks){var type=this.nodes.text;return new TextNode(type,type.defaultAttrs,text$1,index_es_Mark.setFrom(marks))},index_es_Schema.prototype.mark=function mark(type,attrs){return"string"==typeof type&&(type=this.marks[type]),type.create(attrs)},index_es_Schema.prototype.nodeFromJSON=function nodeFromJSON(json){return index_es_Node.fromJSON(this,json)},index_es_Schema.prototype.markFromJSON=function markFromJSON(json){return index_es_Mark.fromJSON(this,json)},index_es_Schema.prototype.nodeType=function nodeType(name){var found=this.nodes[name];if(!found)throw new RangeError("Unknown node type: "+name);return found};var DOMParser=function DOMParser(schema,rules){var this$1=this;this.schema=schema,this.rules=rules,this.tags=[],this.styles=[],rules.forEach((function(rule){rule.tag?this$1.tags.push(rule):rule.style&&this$1.styles.push(rule)})),this.normalizeLists=!this.tags.some((function(r){if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;var node=schema.nodes[r.node];return node.contentMatch.matchType(node)}))};DOMParser.prototype.parse=function parse(dom,options){void 0===options&&(options={});var context=new ParseContext(this,options,!1);return context.addAll(dom,null,options.from,options.to),context.finish()},DOMParser.prototype.parseSlice=function parseSlice(dom,options){void 0===options&&(options={});var context=new ParseContext(this,options,!0);return context.addAll(dom,null,options.from,options.to),Slice.maxOpen(context.finish())},DOMParser.prototype.matchTag=function matchTag(dom,context,after){for(var i=after?this.tags.indexOf(after)+1:0;i<this.tags.length;i++){var rule=this.tags[i];if(index_es_matches(dom,rule.tag)&&(void 0===rule.namespace||dom.namespaceURI==rule.namespace)&&(!rule.context||context.matchesContext(rule.context))){if(rule.getAttrs){var result=rule.getAttrs(dom);if(!1===result)continue;rule.attrs=result}return rule}}},DOMParser.prototype.matchStyle=function matchStyle(prop,value,context,after){for(var i=after?this.styles.indexOf(after)+1:0;i<this.styles.length;i++){var rule=this.styles[i];if(!(0!=rule.style.indexOf(prop)||rule.context&&!context.matchesContext(rule.context)||rule.style.length>prop.length&&(61!=rule.style.charCodeAt(prop.length)||rule.style.slice(prop.length+1)!=value))){if(rule.getAttrs){var result=rule.getAttrs(value);if(!1===result)continue;rule.attrs=result}return rule}}},DOMParser.schemaRules=function schemaRules(schema){var result=[];function insert(rule){for(var priority=null==rule.priority?50:rule.priority,i=0;i<result.length;i++){var next=result[i];if((null==next.priority?50:next.priority)<priority)break}result.splice(i,0,rule)}var loop=function(name){var rules=schema.marks[name].spec.parseDOM;rules&&rules.forEach((function(rule){insert(rule=copy(rule)),rule.mark=name}))};for(var name in schema.marks)loop(name);var rules$1;for(var name$1 in schema.nodes)rules$1=void 0,(rules$1=schema.nodes[name$1].spec.parseDOM)&&rules$1.forEach((function(rule){insert(rule=copy(rule)),rule.node=name$1}));return result},DOMParser.fromSchema=function fromSchema(schema){return schema.cached.domParser||(schema.cached.domParser=new DOMParser(schema,DOMParser.schemaRules(schema)))};var blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0};function wsOptionsFor(preserveWhitespace){return(preserveWhitespace?1:0)|("full"===preserveWhitespace?2:0)}var NodeContext=function NodeContext(type,attrs,marks,pendingMarks,solid,match,options){this.type=type,this.attrs=attrs,this.solid=solid,this.match=match||(4&options?null:type.contentMatch),this.options=options,this.content=[],this.marks=marks,this.activeMarks=index_es_Mark.none,this.pendingMarks=pendingMarks,this.stashMarks=[]};NodeContext.prototype.findWrapping=function findWrapping(node){if(!this.match){if(!this.type)return[];var fill=this.type.contentMatch.fillBefore(Fragment.from(node));if(!fill){var wrap,start=this.type.contentMatch;return(wrap=start.findWrapping(node.type))?(this.match=start,wrap):null}this.match=this.type.contentMatch.matchFragment(fill)}return this.match.findWrapping(node.type)},NodeContext.prototype.finish=function finish(openEnd){if(!(1&this.options)){var m,last=this.content[this.content.length-1];last&&last.isText&&(m=/[ \t\r\n\u000c]+$/.exec(last.text))&&(last.text.length==m[0].length?this.content.pop():this.content[this.content.length-1]=last.withText(last.text.slice(0,last.text.length-m[0].length)))}var content=Fragment.from(this.content);return!openEnd&&this.match&&(content=content.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,content,this.marks):content},NodeContext.prototype.popFromStashMark=function popFromStashMark(mark){for(var i=this.stashMarks.length-1;i>=0;i--)if(mark.eq(this.stashMarks[i]))return this.stashMarks.splice(i,1)[0]},NodeContext.prototype.applyPending=function applyPending(nextType){for(var i=0,pending=this.pendingMarks;i<pending.length;i++){var mark=pending[i];(this.type?this.type.allowsMarkType(mark.type):markMayApply(mark.type,nextType))&&!mark.isInSet(this.activeMarks)&&(this.activeMarks=mark.addToSet(this.activeMarks),this.pendingMarks=mark.removeFromSet(this.pendingMarks))}},NodeContext.prototype.inlineContext=function inlineContext(node){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:node.parentNode&&!blockTags.hasOwnProperty(node.parentNode.nodeName.toLowerCase())};var ParseContext=function ParseContext(parser,options,open){this.parser=parser,this.options=options,this.isOpen=open;var topContext,topNode=options.topNode,topOptions=wsOptionsFor(options.preserveWhitespace)|(open?4:0);topContext=topNode?new NodeContext(topNode.type,topNode.attrs,index_es_Mark.none,index_es_Mark.none,!0,options.topMatch||topNode.type.contentMatch,topOptions):new NodeContext(open?null:parser.schema.topNodeType,null,index_es_Mark.none,index_es_Mark.none,!0,null,topOptions),this.nodes=[topContext],this.open=0,this.find=options.findPositions,this.needsBlock=!1},prototypeAccessors$6={top:{configurable:!0},currentPos:{configurable:!0}};function index_es_matches(dom,selector){return(dom.matches||dom.msMatchesSelector||dom.webkitMatchesSelector||dom.mozMatchesSelector).call(dom,selector)}function copy(obj){var copy={};for(var prop in obj)copy[prop]=obj[prop];return copy}function markMayApply(markType,nodeType){var nodes=nodeType.schema.nodes,loop=function(name){var parent=nodes[name];if(parent.allowsMarkType(markType)){var seen=[],scan=function(match){seen.push(match);for(var i=0;i<match.edgeCount;i++){var ref=match.edge(i),type=ref.type,next=ref.next;if(type==nodeType)return!0;if(seen.indexOf(next)<0&&scan(next))return!0}};return scan(parent.contentMatch)?{v:!0}:void 0}};for(var name in nodes){var returned=loop(name);if(returned)return returned.v}}prototypeAccessors$6.top.get=function(){return this.nodes[this.open]},ParseContext.prototype.addDOM=function addDOM(dom){if(3==dom.nodeType)this.addTextNode(dom);else if(1==dom.nodeType){var style=dom.getAttribute("style"),marks=style?this.readStyles(function parseStyles(style){var m,re=/\s*([\w-]+)\s*:\s*([^;]+)/g,result=[];for(;m=re.exec(style);)result.push(m[1],m[2].trim());return result}(style)):null,top=this.top;if(null!=marks)for(var i=0;i<marks.length;i++)this.addPendingMark(marks[i]);if(this.addElement(dom),null!=marks)for(var i$1=0;i$1<marks.length;i$1++)this.removePendingMark(marks[i$1],top)}},ParseContext.prototype.addTextNode=function addTextNode(dom){var value=dom.nodeValue,top=this.top;if(2&top.options||top.inlineContext(dom)||/[^ \t\r\n\u000c]/.test(value)){if(1&top.options)value=2&top.options?value.replace(/\r\n?/g,"\n"):value.replace(/\r?\n|\r/g," ");else if(value=value.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(value)&&this.open==this.nodes.length-1){var nodeBefore=top.content[top.content.length-1],domNodeBefore=dom.previousSibling;(!nodeBefore||domNodeBefore&&"BR"==domNodeBefore.nodeName||nodeBefore.isText&&/[ \t\r\n\u000c]$/.test(nodeBefore.text))&&(value=value.slice(1))}value&&this.insertNode(this.parser.schema.text(value)),this.findInText(dom)}else this.findInside(dom)},ParseContext.prototype.addElement=function addElement(dom,matchAfter){var ruleID,name=dom.nodeName.toLowerCase();listTags.hasOwnProperty(name)&&this.parser.normalizeLists&&function normalizeList(dom){for(var child=dom.firstChild,prevItem=null;child;child=child.nextSibling){var name=1==child.nodeType?child.nodeName.toLowerCase():null;name&&listTags.hasOwnProperty(name)&&prevItem?(prevItem.appendChild(child),child=prevItem):"li"==name?prevItem=child:name&&(prevItem=null)}}(dom);var rule=this.options.ruleFromNode&&this.options.ruleFromNode(dom)||(ruleID=this.parser.matchTag(dom,this,matchAfter));if(rule?rule.ignore:ignoreTags.hasOwnProperty(name))this.findInside(dom),this.ignoreFallback(dom);else if(!rule||rule.skip||rule.closeParent){rule&&rule.closeParent?this.open=Math.max(0,this.open-1):rule&&rule.skip.nodeType&&(dom=rule.skip);var sync,top=this.top,oldNeedsBlock=this.needsBlock;if(blockTags.hasOwnProperty(name))sync=!0,top.type||(this.needsBlock=!0);else if(!dom.firstChild)return void this.leafFallback(dom);this.addAll(dom),sync&&this.sync(top),this.needsBlock=oldNeedsBlock}else this.addElementByRule(dom,rule,!1===rule.consuming?ruleID:null)},ParseContext.prototype.leafFallback=function leafFallback(dom){"BR"==dom.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(dom.ownerDocument.createTextNode("\n"))},ParseContext.prototype.ignoreFallback=function ignoreFallback(dom){"BR"!=dom.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},ParseContext.prototype.readStyles=function readStyles(styles){var marks=index_es_Mark.none;style:for(var i=0;i<styles.length;i+=2)for(var after=null;;){var rule=this.parser.matchStyle(styles[i],styles[i+1],this,after);if(!rule)continue style;if(rule.ignore)return null;if(marks=this.parser.schema.marks[rule.mark].create(rule.attrs).addToSet(marks),!1!==rule.consuming)break;after=rule}return marks},ParseContext.prototype.addElementByRule=function addElementByRule(dom,rule,continueAfter){var sync,nodeType,mark,this$1=this;rule.node?(nodeType=this.parser.schema.nodes[rule.node]).isLeaf?this.insertNode(nodeType.create(rule.attrs))||this.leafFallback(dom):sync=this.enter(nodeType,rule.attrs,rule.preserveWhitespace):(mark=this.parser.schema.marks[rule.mark].create(rule.attrs),this.addPendingMark(mark));var startIn=this.top;if(nodeType&&nodeType.isLeaf)this.findInside(dom);else if(continueAfter)this.addElement(dom,continueAfter);else if(rule.getContent)this.findInside(dom),rule.getContent(dom,this.parser.schema).forEach((function(node){return this$1.insertNode(node)}));else{var contentDOM=rule.contentElement;"string"==typeof contentDOM?contentDOM=dom.querySelector(contentDOM):"function"==typeof contentDOM&&(contentDOM=contentDOM(dom)),contentDOM||(contentDOM=dom),this.findAround(dom,contentDOM,!0),this.addAll(contentDOM,sync)}sync&&(this.sync(startIn),this.open--),mark&&this.removePendingMark(mark,startIn)},ParseContext.prototype.addAll=function addAll(parent,sync,startIndex,endIndex){for(var index=startIndex||0,dom=startIndex?parent.childNodes[startIndex]:parent.firstChild,end=null==endIndex?null:parent.childNodes[endIndex];dom!=end;dom=dom.nextSibling,++index)this.findAtPoint(parent,index),this.addDOM(dom),sync&&blockTags.hasOwnProperty(dom.nodeName.toLowerCase())&&this.sync(sync);this.findAtPoint(parent,index)},ParseContext.prototype.findPlace=function findPlace(node){for(var route,sync,depth=this.open;depth>=0;depth--){var cx=this.nodes[depth],found=cx.findWrapping(node);if(found&&(!route||route.length>found.length)&&(route=found,sync=cx,!found.length))break;if(cx.solid)break}if(!route)return!1;this.sync(sync);for(var i=0;i<route.length;i++)this.enterInner(route[i],null,!1);return!0},ParseContext.prototype.insertNode=function insertNode(node){if(node.isInline&&this.needsBlock&&!this.top.type){var block=this.textblockFromContext();block&&this.enterInner(block)}if(this.findPlace(node)){this.closeExtra();var top=this.top;top.applyPending(node.type),top.match&&(top.match=top.match.matchType(node.type));for(var marks=top.activeMarks,i=0;i<node.marks.length;i++)top.type&&!top.type.allowsMarkType(node.marks[i].type)||(marks=node.marks[i].addToSet(marks));return top.content.push(node.mark(marks)),!0}return!1},ParseContext.prototype.enter=function enter(type,attrs,preserveWS){var ok=this.findPlace(type.create(attrs));return ok&&this.enterInner(type,attrs,!0,preserveWS),ok},ParseContext.prototype.enterInner=function enterInner(type,attrs,solid,preserveWS){this.closeExtra();var top=this.top;top.applyPending(type),top.match=top.match&&top.match.matchType(type,attrs);var options=null==preserveWS?-5&top.options:wsOptionsFor(preserveWS);4&top.options&&0==top.content.length&&(options|=4),this.nodes.push(new NodeContext(type,attrs,top.activeMarks,top.pendingMarks,solid,null,options)),this.open++},ParseContext.prototype.closeExtra=function closeExtra(openEnd){var i=this.nodes.length-1;if(i>this.open){for(;i>this.open;i--)this.nodes[i-1].content.push(this.nodes[i].finish(openEnd));this.nodes.length=this.open+1}},ParseContext.prototype.finish=function finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},ParseContext.prototype.sync=function sync(to){for(var i=this.open;i>=0;i--)if(this.nodes[i]==to)return void(this.open=i)},prototypeAccessors$6.currentPos.get=function(){this.closeExtra();for(var pos=0,i=this.open;i>=0;i--){for(var content=this.nodes[i].content,j=content.length-1;j>=0;j--)pos+=content[j].nodeSize;i&&pos++}return pos},ParseContext.prototype.findAtPoint=function findAtPoint(parent,offset){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==parent&&this.find[i].offset==offset&&(this.find[i].pos=this.currentPos)},ParseContext.prototype.findInside=function findInside(parent){if(this.find)for(var i=0;i<this.find.length;i++)null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node)&&(this.find[i].pos=this.currentPos)},ParseContext.prototype.findAround=function findAround(parent,content,before){if(parent!=content&&this.find)for(var i=0;i<this.find.length;i++){if(null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node))content.compareDocumentPosition(this.find[i].node)&(before?2:4)&&(this.find[i].pos=this.currentPos)}},ParseContext.prototype.findInText=function findInText(textNode){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==textNode&&(this.find[i].pos=this.currentPos-(textNode.nodeValue.length-this.find[i].offset))},ParseContext.prototype.matchesContext=function matchesContext(context){var this$1=this;if(context.indexOf("|")>-1)return context.split(/\s*\|\s*/).some(this.matchesContext,this);var parts=context.split("/"),option=this.options.context,useRoot=!(this.isOpen||option&&option.parent.type!=this.nodes[0].type),minDepth=-(option?option.depth+1:0)+(useRoot?0:1),match=function(i,depth){for(;i>=0;i--){var part=parts[i];if(""==part){if(i==parts.length-1||0==i)continue;for(;depth>=minDepth;depth--)if(match(i-1,depth))return!0;return!1}var next=depth>0||0==depth&&useRoot?this$1.nodes[depth].type:option&&depth>=minDepth?option.node(depth-minDepth).type:null;if(!next||next.name!=part&&-1==next.groups.indexOf(part))return!1;depth--}return!0};return match(parts.length-1,this.open)},ParseContext.prototype.textblockFromContext=function textblockFromContext(){var $context=this.options.context;if($context)for(var d=$context.depth;d>=0;d--){var deflt=$context.node(d).contentMatchAt($context.indexAfter(d)).defaultType;if(deflt&&deflt.isTextblock&&deflt.defaultAttrs)return deflt}for(var name in this.parser.schema.nodes){var type=this.parser.schema.nodes[name];if(type.isTextblock&&type.defaultAttrs)return type}},ParseContext.prototype.addPendingMark=function addPendingMark(mark){var found=function findSameMarkInSet(mark,set){for(var i=0;i<set.length;i++)if(mark.eq(set[i]))return set[i]}(mark,this.top.pendingMarks);found&&this.top.stashMarks.push(found),this.top.pendingMarks=mark.addToSet(this.top.pendingMarks)},ParseContext.prototype.removePendingMark=function removePendingMark(mark,upto){for(var depth=this.open;depth>=0;depth--){var level=this.nodes[depth];if(level.pendingMarks.lastIndexOf(mark)>-1)level.pendingMarks=mark.removeFromSet(level.pendingMarks);else{level.activeMarks=mark.removeFromSet(level.activeMarks);var stashMark=level.popFromStashMark(mark);stashMark&&level.type&&level.type.allowsMarkType(stashMark.type)&&(level.activeMarks=stashMark.addToSet(level.activeMarks))}if(level==upto)break}},Object.defineProperties(ParseContext.prototype,prototypeAccessors$6);var DOMSerializer=function DOMSerializer(nodes,marks){this.nodes=nodes||{},this.marks=marks||{}};function gatherToDOM(obj){var result={};for(var name in obj){var toDOM=obj[name].spec.toDOM;toDOM&&(result[name]=toDOM)}return result}function index_es_doc(options){return options.document||window.document}DOMSerializer.prototype.serializeFragment=function serializeFragment(fragment,options,target){var this$1=this;void 0===options&&(options={}),target||(target=index_es_doc(options).createDocumentFragment());var top=target,active=null;return fragment.forEach((function(node){if(active||node.marks.length){active||(active=[]);for(var keep=0,rendered=0;keep<active.length&&rendered<node.marks.length;){var next=node.marks[rendered];if(this$1.marks[next.type.name]){if(!next.eq(active[keep])||!1===next.type.spec.spanning)break;keep+=2,rendered++}else rendered++}for(;keep<active.length;)top=active.pop(),active.pop();for(;rendered<node.marks.length;){var add=node.marks[rendered++],markDOM=this$1.serializeMark(add,node.isInline,options);markDOM&&(active.push(add,top),top.appendChild(markDOM.dom),top=markDOM.contentDOM||markDOM.dom)}}top.appendChild(this$1.serializeNode(node,options))})),target},DOMSerializer.prototype.serializeNode=function serializeNode(node,options){void 0===options&&(options={});var ref=DOMSerializer.renderSpec(index_es_doc(options),this.nodes[node.type.name](node)),dom=ref.dom,contentDOM=ref.contentDOM;if(contentDOM){if(node.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");options.onContent?options.onContent(node,contentDOM,options):this.serializeFragment(node.content,options,contentDOM)}return dom},DOMSerializer.prototype.serializeNodeAndMarks=function serializeNodeAndMarks(node,options){void 0===options&&(options={});for(var dom=this.serializeNode(node,options),i=node.marks.length-1;i>=0;i--){var wrap=this.serializeMark(node.marks[i],node.isInline,options);wrap&&((wrap.contentDOM||wrap.dom).appendChild(dom),dom=wrap.dom)}return dom},DOMSerializer.prototype.serializeMark=function serializeMark(mark,inline,options){void 0===options&&(options={});var toDOM=this.marks[mark.type.name];return toDOM&&DOMSerializer.renderSpec(index_es_doc(options),toDOM(mark,inline))},DOMSerializer.renderSpec=function renderSpec(doc,structure,xmlNS){if(void 0===xmlNS&&(xmlNS=null),"string"==typeof structure)return{dom:doc.createTextNode(structure)};if(null!=structure.nodeType)return{dom:structure};if(structure.dom&&null!=structure.dom.nodeType)return structure;var tagName=structure[0],space=tagName.indexOf(" ");space>0&&(xmlNS=tagName.slice(0,space),tagName=tagName.slice(space+1));var contentDOM=null,dom=xmlNS?doc.createElementNS(xmlNS,tagName):doc.createElement(tagName),attrs=structure[1],start=1;if(attrs&&"object"==typeof attrs&&null==attrs.nodeType&&!Array.isArray(attrs))for(var name in start=2,attrs)if(null!=attrs[name]){var space$1=name.indexOf(" ");space$1>0?dom.setAttributeNS(name.slice(0,space$1),name.slice(space$1+1),attrs[name]):dom.setAttribute(name,attrs[name])}for(var i=start;i<structure.length;i++){var child=structure[i];if(0===child){if(i<structure.length-1||i>start)throw new RangeError("Content hole must be the only child of its parent node");return{dom:dom,contentDOM:dom}}var ref=DOMSerializer.renderSpec(doc,child,xmlNS),inner=ref.dom,innerContent=ref.contentDOM;if(dom.appendChild(inner),innerContent){if(contentDOM)throw new RangeError("Multiple content holes");contentDOM=innerContent}}return{dom:dom,contentDOM:contentDOM}},DOMSerializer.fromSchema=function fromSchema(schema){return schema.cached.domSerializer||(schema.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(schema),this.marksFromSchema(schema)))},DOMSerializer.nodesFromSchema=function nodesFromSchema(schema){var result=gatherToDOM(schema.nodes);return result.text||(result.text=function(node){return node.text}),result},DOMSerializer.marksFromSchema=function marksFromSchema(schema){return gatherToDOM(schema.marks)};var factor16=Math.pow(2,16);function recoverIndex(value){return 65535&value}var MapResult=function MapResult(pos,deleted,recover){void 0===deleted&&(deleted=!1),void 0===recover&&(recover=null),this.pos=pos,this.deleted=deleted,this.recover=recover},StepMap=function StepMap(ranges,inverted){void 0===inverted&&(inverted=!1),this.ranges=ranges,this.inverted=inverted};StepMap.prototype.recover=function recover(value){var diff=0,index=recoverIndex(value);if(!this.inverted)for(var i=0;i<index;i++)diff+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*index]+diff+function recoverOffset(value){return(value-(65535&value))/factor16}(value)},StepMap.prototype.mapResult=function mapResult(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!1)},StepMap.prototype.map=function map(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!0)},StepMap.prototype._map=function _map(pos,assoc,simple){for(var diff=0,oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;var oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex],end=start+oldSize;if(pos<=end){var result=start+diff+((oldSize?pos==start?-1:pos==end?1:assoc:assoc)<0?0:newSize);if(simple)return result;var recover=pos==(assoc<0?start:end)?null:i/3+(pos-start)*factor16;return new MapResult(result,assoc<0?pos!=start:pos!=end,recover)}diff+=newSize-oldSize}return simple?pos+diff:new MapResult(pos+diff)},StepMap.prototype.touches=function touches(pos,recover){for(var diff=0,index=recoverIndex(recover),oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;var oldSize=this.ranges[i+oldIndex];if(pos<=start+oldSize&&i==3*index)return!0;diff+=this.ranges[i+newIndex]-oldSize}return!1},StepMap.prototype.forEach=function forEach(f){for(var oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0,diff=0;i<this.ranges.length;i+=3){var start=this.ranges[i],oldStart=start-(this.inverted?diff:0),newStart=start+(this.inverted?0:diff),oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex];f(oldStart,oldStart+oldSize,newStart,newStart+newSize),diff+=newSize-oldSize}},StepMap.prototype.invert=function invert(){return new StepMap(this.ranges,!this.inverted)},StepMap.prototype.toString=function toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},StepMap.offset=function offset(n){return 0==n?StepMap.empty:new StepMap(n<0?[0,-n,0]:[0,0,n])},StepMap.empty=new StepMap([]);var Mapping=function Mapping(maps,mirror,from,to){this.maps=maps||[],this.from=from||0,this.to=null==to?this.maps.length:to,this.mirror=mirror};function TransformError(message){var err=Error.call(this,message);return err.__proto__=TransformError.prototype,err}Mapping.prototype.slice=function slice(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.maps.length),new Mapping(this.maps,this.mirror,from,to)},Mapping.prototype.copy=function copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Mapping.prototype.appendMap=function appendMap(map,mirrors){this.to=this.maps.push(map),null!=mirrors&&this.setMirror(this.maps.length-1,mirrors)},Mapping.prototype.appendMapping=function appendMapping(mapping){for(var i=0,startSize=this.maps.length;i<mapping.maps.length;i++){var mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i],null!=mirr&&mirr<i?startSize+mirr:null)}},Mapping.prototype.getMirror=function getMirror(n){if(this.mirror)for(var i=0;i<this.mirror.length;i++)if(this.mirror[i]==n)return this.mirror[i+(i%2?-1:1)]},Mapping.prototype.setMirror=function setMirror(n,m){this.mirror||(this.mirror=[]),this.mirror.push(n,m)},Mapping.prototype.appendMappingInverted=function appendMappingInverted(mapping){for(var i=mapping.maps.length-1,totalSize=this.maps.length+mapping.maps.length;i>=0;i--){var mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i].invert(),null!=mirr&&mirr>i?totalSize-mirr-1:null)}},Mapping.prototype.invert=function invert(){var inverse=new Mapping;return inverse.appendMappingInverted(this),inverse},Mapping.prototype.map=function map(pos,assoc){if(void 0===assoc&&(assoc=1),this.mirror)return this._map(pos,assoc,!0);for(var i=this.from;i<this.to;i++)pos=this.maps[i].map(pos,assoc);return pos},Mapping.prototype.mapResult=function mapResult(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!1)},Mapping.prototype._map=function _map(pos,assoc,simple){for(var deleted=!1,i=this.from;i<this.to;i++){var result=this.maps[i].mapResult(pos,assoc);if(null!=result.recover){var corr=this.getMirror(i);if(null!=corr&&corr>i&&corr<this.to){i=corr,pos=this.maps[corr].recover(result.recover);continue}}result.deleted&&(deleted=!0),pos=result.pos}return simple?pos:new MapResult(pos,deleted)},TransformError.prototype=Object.create(Error.prototype),TransformError.prototype.constructor=TransformError,TransformError.prototype.name="TransformError";var index_es_Transform=function Transform(doc){this.doc=doc,this.steps=[],this.docs=[],this.mapping=new Mapping},dist_index_es_prototypeAccessors={before:{configurable:!0},docChanged:{configurable:!0}};function mustOverride(){throw new Error("Override me")}dist_index_es_prototypeAccessors.before.get=function(){return this.docs.length?this.docs[0]:this.doc},index_es_Transform.prototype.step=function step(object){var result=this.maybeStep(object);if(result.failed)throw new TransformError(result.failed);return this},index_es_Transform.prototype.maybeStep=function maybeStep(step){var result=step.apply(this.doc);return result.failed||this.addStep(step,result.doc),result},dist_index_es_prototypeAccessors.docChanged.get=function(){return this.steps.length>0},index_es_Transform.prototype.addStep=function addStep(step,doc){this.docs.push(this.doc),this.steps.push(step),this.mapping.appendMap(step.getMap()),this.doc=doc},Object.defineProperties(index_es_Transform.prototype,dist_index_es_prototypeAccessors);var stepsByID=Object.create(null),index_es_Step=function Step(){};index_es_Step.prototype.apply=function apply(_doc){return mustOverride()},index_es_Step.prototype.getMap=function getMap(){return StepMap.empty},index_es_Step.prototype.invert=function invert(_doc){return mustOverride()},index_es_Step.prototype.map=function map(_mapping){return mustOverride()},index_es_Step.prototype.merge=function merge(_other){return null},index_es_Step.prototype.toJSON=function toJSON(){return mustOverride()},index_es_Step.fromJSON=function fromJSON(schema,json){if(!json||!json.stepType)throw new RangeError("Invalid input for Step.fromJSON");var type=stepsByID[json.stepType];if(!type)throw new RangeError("No step type "+json.stepType+" defined");return type.fromJSON(schema,json)},index_es_Step.jsonID=function jsonID(id,stepClass){if(id in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+id);return stepsByID[id]=stepClass,stepClass.prototype.jsonID=id,stepClass};var StepResult=function StepResult(doc,failed){this.doc=doc,this.failed=failed};StepResult.ok=function ok(doc){return new StepResult(doc,null)},StepResult.fail=function fail(message){return new StepResult(null,message)},StepResult.fromReplace=function fromReplace(doc,from,to,slice){try{return StepResult.ok(doc.replace(from,to,slice))}catch(e){if(e instanceof ReplaceError)return StepResult.fail(e.message);throw e}};var index_es_ReplaceStep=function(Step){function ReplaceStep(from,to,slice,structure){Step.call(this),this.from=from,this.to=to,this.slice=slice,this.structure=!!structure}return Step&&(ReplaceStep.__proto__=Step),ReplaceStep.prototype=Object.create(Step&&Step.prototype),ReplaceStep.prototype.constructor=ReplaceStep,ReplaceStep.prototype.apply=function apply(doc){return this.structure&&contentBetween(doc,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(doc,this.from,this.to,this.slice)},ReplaceStep.prototype.getMap=function getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])},ReplaceStep.prototype.invert=function invert(doc){return new ReplaceStep(this.from,this.from+this.slice.size,doc.slice(this.from,this.to))},ReplaceStep.prototype.map=function map(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted?null:new ReplaceStep(from.pos,Math.max(from.pos,to.pos),this.slice)},ReplaceStep.prototype.merge=function merge(other){if(!(other instanceof ReplaceStep)||other.structure||this.structure)return null;if(this.from+this.slice.size!=other.from||this.slice.openEnd||other.slice.openStart){if(other.to!=this.from||this.slice.openStart||other.slice.openEnd)return null;var slice$1=this.slice.size+other.slice.size==0?Slice.empty:new Slice(other.slice.content.append(this.slice.content),other.slice.openStart,this.slice.openEnd);return new ReplaceStep(other.from,this.to,slice$1,this.structure)}var slice=this.slice.size+other.slice.size==0?Slice.empty:new Slice(this.slice.content.append(other.slice.content),this.slice.openStart,other.slice.openEnd);return new ReplaceStep(this.from,this.to+(other.to-other.from),slice,this.structure)},ReplaceStep.prototype.toJSON=function toJSON(){var json={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json},ReplaceStep.fromJSON=function fromJSON(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(json.from,json.to,Slice.fromJSON(schema,json.slice),!!json.structure)},ReplaceStep}(index_es_Step);index_es_Step.jsonID("replace",index_es_ReplaceStep);var index_es_ReplaceAroundStep=function(Step){function ReplaceAroundStep(from,to,gapFrom,gapTo,slice,insert,structure){Step.call(this),this.from=from,this.to=to,this.gapFrom=gapFrom,this.gapTo=gapTo,this.slice=slice,this.insert=insert,this.structure=!!structure}return Step&&(ReplaceAroundStep.__proto__=Step),ReplaceAroundStep.prototype=Object.create(Step&&Step.prototype),ReplaceAroundStep.prototype.constructor=ReplaceAroundStep,ReplaceAroundStep.prototype.apply=function apply(doc){if(this.structure&&(contentBetween(doc,this.from,this.gapFrom)||contentBetween(doc,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");var gap=doc.slice(this.gapFrom,this.gapTo);if(gap.openStart||gap.openEnd)return StepResult.fail("Gap is not a flat range");var inserted=this.slice.insertAt(this.insert,gap.content);return inserted?StepResult.fromReplace(doc,this.from,this.to,inserted):StepResult.fail("Content does not fit in gap")},ReplaceAroundStep.prototype.getMap=function getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},ReplaceAroundStep.prototype.invert=function invert(doc){var gap=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+gap,this.from+this.insert,this.from+this.insert+gap,doc.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},ReplaceAroundStep.prototype.map=function map(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1),gapFrom=mapping.map(this.gapFrom,-1),gapTo=mapping.map(this.gapTo,1);return from.deleted&&to.deleted||gapFrom<from.pos||gapTo>to.pos?null:new ReplaceAroundStep(from.pos,to.pos,gapFrom,gapTo,this.slice,this.insert,this.structure)},ReplaceAroundStep.prototype.toJSON=function toJSON(){var json={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json},ReplaceAroundStep.fromJSON=function fromJSON(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to||"number"!=typeof json.gapFrom||"number"!=typeof json.gapTo||"number"!=typeof json.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(json.from,json.to,json.gapFrom,json.gapTo,Slice.fromJSON(schema,json.slice),json.insert,!!json.structure)},ReplaceAroundStep}(index_es_Step);function contentBetween(doc,from,to){for(var $from=doc.resolve(from),dist=to-from,depth=$from.depth;dist>0&&depth>0&&$from.indexAfter(depth)==$from.node(depth).childCount;)depth--,dist--;if(dist>0)for(var next=$from.node(depth).maybeChild($from.indexAfter(depth));dist>0;){if(!next||next.isLeaf)return!0;next=next.firstChild,dist--}return!1}function canCut(node,start,end){return(0==start||node.canReplace(start,node.childCount))&&(end==node.childCount||node.canReplace(0,end))}function liftTarget(range){for(var content=range.parent.content.cutByIndex(range.startIndex,range.endIndex),depth=range.depth;;--depth){var node=range.$from.node(depth),index=range.$from.index(depth),endIndex=range.$to.indexAfter(depth);if(depth<range.depth&&node.canReplace(index,endIndex,content))return depth;if(0==depth||node.type.spec.isolating||!canCut(node,index,endIndex))break}}function findWrapping(range,nodeType,attrs,innerRange){void 0===innerRange&&(innerRange=range);var around=function findWrappingOutside(range,type){var parent=range.parent,startIndex=range.startIndex,endIndex=range.endIndex,around=parent.contentMatchAt(startIndex).findWrapping(type);if(!around)return null;var outer=around.length?around[0]:type;return parent.canReplaceWith(startIndex,endIndex,outer)?around:null}(range,nodeType),inner=around&&function findWrappingInside(range,type){var parent=range.parent,startIndex=range.startIndex,endIndex=range.endIndex,inner=parent.child(startIndex),inside=type.contentMatch.findWrapping(inner.type);if(!inside)return null;for(var innerMatch=(inside.length?inside[inside.length-1]:type).contentMatch,i=startIndex;innerMatch&&i<endIndex;i++)innerMatch=innerMatch.matchType(parent.child(i).type);if(!innerMatch||!innerMatch.validEnd)return null;return inside}(innerRange,nodeType);return inner?around.map(withAttrs).concat({type:nodeType,attrs:attrs}).concat(inner.map(withAttrs)):null}function withAttrs(type){return{type:type,attrs:null}}function canSplit(doc,pos,depth,typesAfter){void 0===depth&&(depth=1);var $pos=doc.resolve(pos),base=$pos.depth-depth,innerType=typesAfter&&typesAfter[typesAfter.length-1]||$pos.parent;if(base<0||$pos.parent.type.spec.isolating||!$pos.parent.canReplace($pos.index(),$pos.parent.childCount)||!innerType.type.validContent($pos.parent.content.cutByIndex($pos.index(),$pos.parent.childCount)))return!1;for(var d=$pos.depth-1,i=depth-2;d>base;d--,i--){var node=$pos.node(d),index$1=$pos.index(d);if(node.type.spec.isolating)return!1;var rest=node.content.cutByIndex(index$1,node.childCount),after=typesAfter&&typesAfter[i]||node;if(after!=node&&(rest=rest.replaceChild(0,after.type.create(after.attrs))),!node.canReplace(index$1+1,node.childCount)||!after.type.validContent(rest))return!1}var index=$pos.indexAfter(base),baseType=typesAfter&&typesAfter[0];return $pos.node(base).canReplaceWith(index,index,baseType?baseType.type:$pos.node(base+1).type)}function canJoin(doc,pos){var $pos=doc.resolve(pos),index=$pos.index();return dist_index_es_joinable($pos.nodeBefore,$pos.nodeAfter)&&$pos.parent.canReplace(index,index+1)}function dist_index_es_joinable(a,b){return a&&b&&!a.isLeaf&&a.canAppend(b)}function mapFragment(fragment,f,parent){for(var mapped=[],i=0;i<fragment.childCount;i++){var child=fragment.child(i);child.content.size&&(child=child.copy(mapFragment(child.content,f,child))),child.isInline&&(child=f(child,parent,i)),mapped.push(child)}return Fragment.fromArray(mapped)}index_es_Step.jsonID("replaceAround",index_es_ReplaceAroundStep),index_es_Transform.prototype.lift=function(range,target){for(var $from=range.$from,$to=range.$to,depth=range.depth,gapStart=$from.before(depth+1),gapEnd=$to.after(depth+1),start=gapStart,end=gapEnd,before=Fragment.empty,openStart=0,d=depth,splitting=!1;d>target;d--)splitting||$from.index(d)>0?(splitting=!0,before=Fragment.from($from.node(d).copy(before)),openStart++):start--;for(var after=Fragment.empty,openEnd=0,d$1=depth,splitting$1=!1;d$1>target;d$1--)splitting$1||$to.after(d$1+1)<$to.end(d$1)?(splitting$1=!0,after=Fragment.from($to.node(d$1).copy(after)),openEnd++):end++;return this.step(new index_es_ReplaceAroundStep(start,end,gapStart,gapEnd,new Slice(before.append(after),openStart,openEnd),before.size-openStart,!0))},index_es_Transform.prototype.wrap=function(range,wrappers){for(var content=Fragment.empty,i=wrappers.length-1;i>=0;i--)content=Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content));var start=range.start,end=range.end;return this.step(new index_es_ReplaceAroundStep(start,end,start,end,new Slice(content,0,0),wrappers.length,!0))},index_es_Transform.prototype.setBlockType=function(from,to,type,attrs){var this$1=this;if(void 0===to&&(to=from),!type.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var mapFrom=this.steps.length;return this.doc.nodesBetween(from,to,(function(node,pos){if(node.isTextblock&&!node.hasMarkup(type,attrs)&&function canChangeType(doc,pos,type){var $pos=doc.resolve(pos),index=$pos.index();return $pos.parent.canReplaceWith(index,index+1,type)}(this$1.doc,this$1.mapping.slice(mapFrom).map(pos),type)){this$1.clearIncompatible(this$1.mapping.slice(mapFrom).map(pos,1),type);var mapping=this$1.mapping.slice(mapFrom),startM=mapping.map(pos,1),endM=mapping.map(pos+node.nodeSize,1);return this$1.step(new index_es_ReplaceAroundStep(startM,endM,startM+1,endM-1,new Slice(Fragment.from(type.create(attrs,null,node.marks)),0,0),1,!0)),!1}})),this},index_es_Transform.prototype.setNodeMarkup=function(pos,type,attrs,marks){var node=this.doc.nodeAt(pos);if(!node)throw new RangeError("No node at given position");type||(type=node.type);var newNode=type.create(attrs,null,marks||node.marks);if(node.isLeaf)return this.replaceWith(pos,pos+node.nodeSize,newNode);if(!type.validContent(node.content))throw new RangeError("Invalid content for node type "+type.name);return this.step(new index_es_ReplaceAroundStep(pos,pos+node.nodeSize,pos+1,pos+node.nodeSize-1,new Slice(Fragment.from(newNode),0,0),1,!0))},index_es_Transform.prototype.split=function(pos,depth,typesAfter){void 0===depth&&(depth=1);for(var $pos=this.doc.resolve(pos),before=Fragment.empty,after=Fragment.empty,d=$pos.depth,e=$pos.depth-depth,i=depth-1;d>e;d--,i--){before=Fragment.from($pos.node(d).copy(before));var typeAfter=typesAfter&&typesAfter[i];after=Fragment.from(typeAfter?typeAfter.type.create(typeAfter.attrs,after):$pos.node(d).copy(after))}return this.step(new index_es_ReplaceStep(pos,pos,new Slice(before.append(after),depth,depth),!0))},index_es_Transform.prototype.join=function(pos,depth){void 0===depth&&(depth=1);var step=new index_es_ReplaceStep(pos-depth,pos+depth,Slice.empty,!0);return this.step(step)};var index_es_AddMarkStep=function(Step){function AddMarkStep(from,to,mark){Step.call(this),this.from=from,this.to=to,this.mark=mark}return Step&&(AddMarkStep.__proto__=Step),AddMarkStep.prototype=Object.create(Step&&Step.prototype),AddMarkStep.prototype.constructor=AddMarkStep,AddMarkStep.prototype.apply=function apply(doc){var this$1=this,oldSlice=doc.slice(this.from,this.to),$from=doc.resolve(this.from),parent=$from.node($from.sharedDepth(this.to)),slice=new Slice(mapFragment(oldSlice.content,(function(node,parent){return node.isAtom&&parent.type.allowsMarkType(this$1.mark.type)?node.mark(this$1.mark.addToSet(node.marks)):node}),parent),oldSlice.openStart,oldSlice.openEnd);return StepResult.fromReplace(doc,this.from,this.to,slice)},AddMarkStep.prototype.invert=function invert(){return new index_es_RemoveMarkStep(this.from,this.to,this.mark)},AddMarkStep.prototype.map=function map(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new AddMarkStep(from.pos,to.pos,this.mark)},AddMarkStep.prototype.merge=function merge(other){if(other instanceof AddMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from)return new AddMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark)},AddMarkStep.prototype.toJSON=function toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},AddMarkStep.fromJSON=function fromJSON(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(json.from,json.to,schema.markFromJSON(json.mark))},AddMarkStep}(index_es_Step);index_es_Step.jsonID("addMark",index_es_AddMarkStep);var index_es_RemoveMarkStep=function(Step){function RemoveMarkStep(from,to,mark){Step.call(this),this.from=from,this.to=to,this.mark=mark}return Step&&(RemoveMarkStep.__proto__=Step),RemoveMarkStep.prototype=Object.create(Step&&Step.prototype),RemoveMarkStep.prototype.constructor=RemoveMarkStep,RemoveMarkStep.prototype.apply=function apply(doc){var this$1=this,oldSlice=doc.slice(this.from,this.to),slice=new Slice(mapFragment(oldSlice.content,(function(node){return node.mark(this$1.mark.removeFromSet(node.marks))})),oldSlice.openStart,oldSlice.openEnd);return StepResult.fromReplace(doc,this.from,this.to,slice)},RemoveMarkStep.prototype.invert=function invert(){return new index_es_AddMarkStep(this.from,this.to,this.mark)},RemoveMarkStep.prototype.map=function map(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new RemoveMarkStep(from.pos,to.pos,this.mark)},RemoveMarkStep.prototype.merge=function merge(other){if(other instanceof RemoveMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from)return new RemoveMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark)},RemoveMarkStep.prototype.toJSON=function toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},RemoveMarkStep.fromJSON=function fromJSON(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(json.from,json.to,schema.markFromJSON(json.mark))},RemoveMarkStep}(index_es_Step);function fitsTrivially($from,$to,slice){return!slice.openStart&&!slice.openEnd&&$from.start()==$to.start()&&$from.parent.canReplace($from.index(),$to.index(),slice.content)}index_es_Step.jsonID("removeMark",index_es_RemoveMarkStep),index_es_Transform.prototype.addMark=function(from,to,mark){var this$1=this,removed=[],added=[],removing=null,adding=null;return this.doc.nodesBetween(from,to,(function(node,pos,parent){if(node.isInline){var marks=node.marks;if(!mark.isInSet(marks)&&parent.type.allowsMarkType(mark.type)){for(var start=Math.max(pos,from),end=Math.min(pos+node.nodeSize,to),newSet=mark.addToSet(marks),i=0;i<marks.length;i++)marks[i].isInSet(newSet)||(removing&&removing.to==start&&removing.mark.eq(marks[i])?removing.to=end:removed.push(removing=new index_es_RemoveMarkStep(start,end,marks[i])));adding&&adding.to==start?adding.to=end:added.push(adding=new index_es_AddMarkStep(start,end,mark))}}})),removed.forEach((function(s){return this$1.step(s)})),added.forEach((function(s){return this$1.step(s)})),this},index_es_Transform.prototype.removeMark=function(from,to,mark){var this$1=this;void 0===mark&&(mark=null);var matched=[],step=0;return this.doc.nodesBetween(from,to,(function(node,pos){if(node.isInline){step++;var toRemove=null;if(mark instanceof MarkType)for(var found,set=node.marks;found=mark.isInSet(set);)(toRemove||(toRemove=[])).push(found),set=found.removeFromSet(set);else mark?mark.isInSet(node.marks)&&(toRemove=[mark]):toRemove=node.marks;if(toRemove&&toRemove.length)for(var end=Math.min(pos+node.nodeSize,to),i=0;i<toRemove.length;i++){for(var style=toRemove[i],found$1=void 0,j=0;j<matched.length;j++){var m=matched[j];m.step==step-1&&style.eq(matched[j].style)&&(found$1=m)}found$1?(found$1.to=end,found$1.step=step):matched.push({style:style,from:Math.max(pos,from),to:end,step:step})}}})),matched.forEach((function(m){return this$1.step(new index_es_RemoveMarkStep(m.from,m.to,m.style))})),this},index_es_Transform.prototype.clearIncompatible=function(pos,parentType,match){void 0===match&&(match=parentType.contentMatch);for(var node=this.doc.nodeAt(pos),delSteps=[],cur=pos+1,i=0;i<node.childCount;i++){var child=node.child(i),end=cur+child.nodeSize,allowed=match.matchType(child.type,child.attrs);if(allowed){match=allowed;for(var j=0;j<child.marks.length;j++)parentType.allowsMarkType(child.marks[j].type)||this.step(new index_es_RemoveMarkStep(cur,end,child.marks[j]))}else delSteps.push(new index_es_ReplaceStep(cur,end,Slice.empty));cur=end}if(!match.validEnd){var fill=match.fillBefore(Fragment.empty,!0);this.replace(cur,cur,new Slice(fill,0,0))}for(var i$1=delSteps.length-1;i$1>=0;i$1--)this.step(delSteps[i$1]);return this},index_es_Transform.prototype.replace=function(from,to,slice){void 0===to&&(to=from),void 0===slice&&(slice=Slice.empty);var step=function replaceStep(doc,from,to,slice){if(void 0===to&&(to=from),void 0===slice&&(slice=Slice.empty),from==to&&!slice.size)return null;var $from=doc.resolve(from),$to=doc.resolve(to);return fitsTrivially($from,$to,slice)?new index_es_ReplaceStep(from,to,slice):new index_es_Fitter($from,$to,slice).fit()}(this.doc,from,to,slice);return step&&this.step(step),this},index_es_Transform.prototype.replaceWith=function(from,to,content){return this.replace(from,to,new Slice(Fragment.from(content),0,0))},index_es_Transform.prototype.delete=function(from,to){return this.replace(from,to,Slice.empty)},index_es_Transform.prototype.insert=function(pos,content){return this.replaceWith(pos,pos,content)};var index_es_Fitter=function Fitter($from,$to,slice){this.$to=$to,this.$from=$from,this.unplaced=slice,this.frontier=[];for(var i=0;i<=$from.depth;i++){var node=$from.node(i);this.frontier.push({type:node.type,match:node.contentMatchAt($from.indexAfter(i))})}this.placed=Fragment.empty;for(var i$1=$from.depth;i$1>0;i$1--)this.placed=Fragment.from($from.node(i$1).copy(this.placed))},dist_index_es_prototypeAccessors$1={depth:{configurable:!0}};function dropFromFragment(fragment,depth,count){return 0==depth?fragment.cutByIndex(count):fragment.replaceChild(0,fragment.firstChild.copy(dropFromFragment(fragment.firstChild.content,depth-1,count)))}function addToFragment(fragment,depth,content){return 0==depth?fragment.append(content):fragment.replaceChild(fragment.childCount-1,fragment.lastChild.copy(addToFragment(fragment.lastChild.content,depth-1,content)))}function contentAt(fragment,depth){for(var i=0;i<depth;i++)fragment=fragment.firstChild.content;return fragment}function closeNodeStart(node,openStart,openEnd){if(openStart<=0)return node;var frag=node.content;return openStart>1&&(frag=frag.replaceChild(0,closeNodeStart(frag.firstChild,openStart-1,1==frag.childCount?openEnd-1:0))),openStart>0&&(frag=node.type.contentMatch.fillBefore(frag).append(frag),openEnd<=0&&(frag=frag.append(node.type.contentMatch.matchFragment(frag).fillBefore(Fragment.empty,!0)))),node.copy(frag)}function contentAfterFits($to,depth,type,match,open){var node=$to.node(depth),index=open?$to.indexAfter(depth):$to.index(depth);if(index==node.childCount&&!type.compatibleContent(node.type))return null;var fit=match.fillBefore(node.content,!0,index);return fit&&!function invalidMarks(type,fragment,start){for(var i=start;i<fragment.childCount;i++)if(!type.allowsMarks(fragment.child(i).marks))return!0;return!1}(type,node.content,index)?fit:null}function closeFragment(fragment,depth,oldOpen,newOpen,parent){if(depth<oldOpen){var first=fragment.firstChild;fragment=fragment.replaceChild(0,first.copy(closeFragment(first.content,depth+1,oldOpen,newOpen,first)))}if(depth>newOpen){var match=parent.contentMatchAt(0),start=match.fillBefore(fragment).append(fragment);fragment=start.append(match.matchFragment(start).fillBefore(Fragment.empty,!0))}return fragment}function coveredDepths($from,$to){for(var result=[],d=Math.min($from.depth,$to.depth);d>=0;d--){var start=$from.start(d);if(start<$from.pos-($from.depth-d)||$to.end(d)>$to.pos+($to.depth-d)||$from.node(d).type.spec.isolating||$to.node(d).type.spec.isolating)break;start==$to.start(d)&&result.push(d)}return result}dist_index_es_prototypeAccessors$1.depth.get=function(){return this.frontier.length-1},index_es_Fitter.prototype.fit=function fit(){for(;this.unplaced.size;){var fit=this.findFittable();fit?this.placeNodes(fit):this.openMore()||this.dropNode()}var moveInline=this.mustMoveInline(),placedSize=this.placed.size-this.depth-this.$from.depth,$from=this.$from,$to=this.close(moveInline<0?this.$to:$from.doc.resolve(moveInline));if(!$to)return null;for(var content=this.placed,openStart=$from.depth,openEnd=$to.depth;openStart&&openEnd&&1==content.childCount;)content=content.firstChild.content,openStart--,openEnd--;var slice=new Slice(content,openStart,openEnd);return moveInline>-1?new index_es_ReplaceAroundStep($from.pos,moveInline,this.$to.pos,this.$to.end(),slice,placedSize):slice.size||$from.pos!=this.$to.pos?new index_es_ReplaceStep($from.pos,$to.pos,slice):void 0},index_es_Fitter.prototype.findFittable=function findFittable(){for(var pass=1;pass<=2;pass++)for(var sliceDepth=this.unplaced.openStart;sliceDepth>=0;sliceDepth--)for(var parent=void 0,first=(sliceDepth?(parent=contentAt(this.unplaced.content,sliceDepth-1).firstChild).content:this.unplaced.content).firstChild,frontierDepth=this.depth;frontierDepth>=0;frontierDepth--){var ref=this.frontier[frontierDepth],type=ref.type,match=ref.match,wrap=void 0,inject=void 0;if(1==pass&&(first?match.matchType(first.type)||(inject=match.fillBefore(Fragment.from(first),!1)):type.compatibleContent(parent.type)))return{sliceDepth:sliceDepth,frontierDepth:frontierDepth,parent:parent,inject:inject};if(2==pass&&first&&(wrap=match.findWrapping(first.type)))return{sliceDepth:sliceDepth,frontierDepth:frontierDepth,parent:parent,wrap:wrap};if(parent&&match.matchType(parent.type))break}},index_es_Fitter.prototype.openMore=function openMore(){var ref=this.unplaced,content=ref.content,openStart=ref.openStart,openEnd=ref.openEnd,inner=contentAt(content,openStart);return!(!inner.childCount||inner.firstChild.isLeaf)&&(this.unplaced=new Slice(content,openStart+1,Math.max(openEnd,inner.size+openStart>=content.size-openEnd?openStart+1:0)),!0)},index_es_Fitter.prototype.dropNode=function dropNode(){var ref=this.unplaced,content=ref.content,openStart=ref.openStart,openEnd=ref.openEnd,inner=contentAt(content,openStart);if(inner.childCount<=1&&openStart>0){var openAtEnd=content.size-openStart<=openStart+inner.size;this.unplaced=new Slice(dropFromFragment(content,openStart-1,1),openStart-1,openAtEnd?openStart-1:openEnd)}else this.unplaced=new Slice(dropFromFragment(content,openStart,1),openStart,openEnd)},index_es_Fitter.prototype.placeNodes=function placeNodes(ref){for(var sliceDepth=ref.sliceDepth,frontierDepth=ref.frontierDepth,parent=ref.parent,inject=ref.inject,wrap=ref.wrap;this.depth>frontierDepth;)this.closeFrontierNode();if(wrap)for(var i=0;i<wrap.length;i++)this.openFrontierNode(wrap[i]);var slice=this.unplaced,fragment=parent?parent.content:slice.content,openStart=slice.openStart-sliceDepth,taken=0,add=[],ref$1=this.frontier[frontierDepth],match=ref$1.match,type=ref$1.type;if(inject){for(var i$1=0;i$1<inject.childCount;i$1++)add.push(inject.child(i$1));match=match.matchFragment(inject)}for(var openEndCount=fragment.size+sliceDepth-(slice.content.size-slice.openEnd);taken<fragment.childCount;){var next=fragment.child(taken),matches=match.matchType(next.type);if(!matches)break;(++taken>1||0==openStart||next.content.size)&&(match=matches,add.push(closeNodeStart(next.mark(type.allowedMarks(next.marks)),1==taken?openStart:0,taken==fragment.childCount?openEndCount:-1)))}var toEnd=taken==fragment.childCount;toEnd||(openEndCount=-1),this.placed=addToFragment(this.placed,frontierDepth,Fragment.from(add)),this.frontier[frontierDepth].match=match,toEnd&&openEndCount<0&&parent&&parent.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var i$2=0,cur=fragment;i$2<openEndCount;i$2++){var node=cur.lastChild;this.frontier.push({type:node.type,match:node.contentMatchAt(node.childCount)}),cur=node.content}this.unplaced=toEnd?0==sliceDepth?Slice.empty:new Slice(dropFromFragment(slice.content,sliceDepth-1,1),sliceDepth-1,openEndCount<0?slice.openEnd:sliceDepth-1):new Slice(dropFromFragment(slice.content,sliceDepth,taken),slice.openStart,slice.openEnd)},index_es_Fitter.prototype.mustMoveInline=function mustMoveInline(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var level,top=this.frontier[this.depth];if(!top.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,top.type,top.match,!1)||this.$to.depth==this.depth&&(level=this.findCloseLevel(this.$to))&&level.depth==this.depth)return-1;for(var depth=this.$to.depth,after=this.$to.after(depth);depth>1&&after==this.$to.end(--depth);)++after;return after},index_es_Fitter.prototype.findCloseLevel=function findCloseLevel($to){scan:for(var i=Math.min(this.depth,$to.depth);i>=0;i--){var ref=this.frontier[i],match=ref.match,type=ref.type,dropInner=i<$to.depth&&$to.end(i+1)==$to.pos+($to.depth-(i+1)),fit=contentAfterFits($to,i,type,match,dropInner);if(fit){for(var d=i-1;d>=0;d--){var ref$1=this.frontier[d],match$1=ref$1.match,matches=contentAfterFits($to,d,ref$1.type,match$1,!0);if(!matches||matches.childCount)continue scan}return{depth:i,fit:fit,move:dropInner?$to.doc.resolve($to.after(i+1)):$to}}}},index_es_Fitter.prototype.close=function close($to){var close=this.findCloseLevel($to);if(!close)return null;for(;this.depth>close.depth;)this.closeFrontierNode();close.fit.childCount&&(this.placed=addToFragment(this.placed,close.depth,close.fit)),$to=close.move;for(var d=close.depth+1;d<=$to.depth;d++){var node=$to.node(d),add=node.type.contentMatch.fillBefore(node.content,!0,$to.index(d));this.openFrontierNode(node.type,node.attrs,add)}return $to},index_es_Fitter.prototype.openFrontierNode=function openFrontierNode(type,attrs,content){var top=this.frontier[this.depth];top.match=top.match.matchType(type),this.placed=addToFragment(this.placed,this.depth,Fragment.from(type.create(attrs,content))),this.frontier.push({type:type,match:type.contentMatch})},index_es_Fitter.prototype.closeFrontierNode=function closeFrontierNode(){var add=this.frontier.pop().match.fillBefore(Fragment.empty,!0);add.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,add))},Object.defineProperties(index_es_Fitter.prototype,dist_index_es_prototypeAccessors$1),index_es_Transform.prototype.replaceRange=function(from,to,slice){if(!slice.size)return this.deleteRange(from,to);var $from=this.doc.resolve(from),$to=this.doc.resolve(to);if(fitsTrivially($from,$to,slice))return this.step(new index_es_ReplaceStep(from,to,slice));var targetDepths=coveredDepths($from,this.doc.resolve(to));0==targetDepths[targetDepths.length-1]&&targetDepths.pop();var preferredTarget=-($from.depth+1);targetDepths.unshift(preferredTarget);for(var d=$from.depth,pos=$from.pos-1;d>0;d--,pos--){var spec=$from.node(d).type.spec;if(spec.defining||spec.isolating)break;targetDepths.indexOf(d)>-1?preferredTarget=d:$from.before(d)==pos&&targetDepths.splice(1,0,-d)}for(var preferredTargetIndex=targetDepths.indexOf(preferredTarget),leftNodes=[],preferredDepth=slice.openStart,content=slice.content,i=0;;i++){var node=content.firstChild;if(leftNodes.push(node),i==slice.openStart)break;content=node.content}preferredDepth>0&&leftNodes[preferredDepth-1].type.spec.defining&&$from.node(preferredTargetIndex).type!=leftNodes[preferredDepth-1].type?preferredDepth-=1:preferredDepth>=2&&leftNodes[preferredDepth-1].isTextblock&&leftNodes[preferredDepth-2].type.spec.defining&&$from.node(preferredTargetIndex).type!=leftNodes[preferredDepth-2].type&&(preferredDepth-=2);for(var j=slice.openStart;j>=0;j--){var openDepth=(j+preferredDepth+1)%(slice.openStart+1),insert=leftNodes[openDepth];if(insert)for(var i$1=0;i$1<targetDepths.length;i$1++){var targetDepth=targetDepths[(i$1+preferredTargetIndex)%targetDepths.length],expand=!0;targetDepth<0&&(expand=!1,targetDepth=-targetDepth);var parent=$from.node(targetDepth-1),index=$from.index(targetDepth-1);if(parent.canReplaceWith(index,index,insert.type,insert.marks))return this.replace($from.before(targetDepth),expand?$to.after(targetDepth):to,new Slice(closeFragment(slice.content,0,slice.openStart,openDepth),openDepth,slice.openEnd))}}for(var startSteps=this.steps.length,i$2=targetDepths.length-1;i$2>=0&&(this.replace(from,to,slice),!(this.steps.length>startSteps));i$2--){var depth=targetDepths[i$2];depth<0||(from=$from.before(depth),to=$to.after(depth))}return this},index_es_Transform.prototype.replaceRangeWith=function(from,to,node){if(!node.isInline&&from==to&&this.doc.resolve(from).parent.content.size){var point=function insertPoint(doc,pos,nodeType){var $pos=doc.resolve(pos);if($pos.parent.canReplaceWith($pos.index(),$pos.index(),nodeType))return pos;if(0==$pos.parentOffset)for(var d=$pos.depth-1;d>=0;d--){var index=$pos.index(d);if($pos.node(d).canReplaceWith(index,index,nodeType))return $pos.before(d+1);if(index>0)return null}if($pos.parentOffset==$pos.parent.content.size)for(var d$1=$pos.depth-1;d$1>=0;d$1--){var index$1=$pos.indexAfter(d$1);if($pos.node(d$1).canReplaceWith(index$1,index$1,nodeType))return $pos.after(d$1+1);if(index$1<$pos.node(d$1).childCount)return null}}(this.doc,from,node.type);null!=point&&(from=to=point)}return this.replaceRange(from,to,new Slice(Fragment.from(node),0,0))},index_es_Transform.prototype.deleteRange=function(from,to){for(var $from=this.doc.resolve(from),$to=this.doc.resolve(to),covered=coveredDepths($from,$to),i=0;i<covered.length;i++){var depth=covered[i],last=i==covered.length-1;if(last&&0==depth||$from.node(depth).type.contentMatch.validEnd)return this.delete($from.start(depth),$to.end(depth));if(depth>0&&(last||$from.node(depth-1).canReplace($from.index(depth-1),$to.indexAfter(depth-1))))return this.delete($from.before(depth),$to.after(depth))}for(var d=1;d<=$from.depth&&d<=$to.depth;d++)if(from-$from.start(d)==$from.depth-d&&to>$from.end(d)&&$to.end(d)-to!=$to.depth-d)return this.delete($from.before(d),to);return this.delete(from,to)};var classesById=Object.create(null),index_es_Selection=function Selection($anchor,$head,ranges){this.ranges=ranges||[new SelectionRange($anchor.min($head),$anchor.max($head))],this.$anchor=$anchor,this.$head=$head},prosemirror_state_dist_index_es_prototypeAccessors={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};prosemirror_state_dist_index_es_prototypeAccessors.anchor.get=function(){return this.$anchor.pos},prosemirror_state_dist_index_es_prototypeAccessors.head.get=function(){return this.$head.pos},prosemirror_state_dist_index_es_prototypeAccessors.from.get=function(){return this.$from.pos},prosemirror_state_dist_index_es_prototypeAccessors.to.get=function(){return this.$to.pos},prosemirror_state_dist_index_es_prototypeAccessors.$from.get=function(){return this.ranges[0].$from},prosemirror_state_dist_index_es_prototypeAccessors.$to.get=function(){return this.ranges[0].$to},prosemirror_state_dist_index_es_prototypeAccessors.empty.get=function(){for(var ranges=this.ranges,i=0;i<ranges.length;i++)if(ranges[i].$from.pos!=ranges[i].$to.pos)return!1;return!0},index_es_Selection.prototype.content=function content(){return this.$from.node(0).slice(this.from,this.to,!0)},index_es_Selection.prototype.replace=function replace(tr,content){void 0===content&&(content=Slice.empty);for(var lastNode=content.content.lastChild,lastParent=null,i=0;i<content.openEnd;i++)lastParent=lastNode,lastNode=lastNode.lastChild;for(var mapFrom=tr.steps.length,ranges=this.ranges,i$1=0;i$1<ranges.length;i$1++){var ref=ranges[i$1],$from=ref.$from,$to=ref.$to,mapping=tr.mapping.slice(mapFrom);tr.replaceRange(mapping.map($from.pos),mapping.map($to.pos),i$1?Slice.empty:content),0==i$1&&selectionToInsertionEnd(tr,mapFrom,(lastNode?lastNode.isInline:lastParent&&lastParent.isTextblock)?-1:1)}},index_es_Selection.prototype.replaceWith=function replaceWith(tr,node){for(var mapFrom=tr.steps.length,ranges=this.ranges,i=0;i<ranges.length;i++){var ref=ranges[i],$from=ref.$from,$to=ref.$to,mapping=tr.mapping.slice(mapFrom),from=mapping.map($from.pos),to=mapping.map($to.pos);i?tr.deleteRange(from,to):(tr.replaceRangeWith(from,to,node),selectionToInsertionEnd(tr,mapFrom,node.isInline?-1:1))}},index_es_Selection.findFrom=function findFrom($pos,dir,textOnly){var inner=$pos.parent.inlineContent?new index_es_TextSelection($pos):findSelectionIn($pos.node(0),$pos.parent,$pos.pos,$pos.index(),dir,textOnly);if(inner)return inner;for(var depth=$pos.depth-1;depth>=0;depth--){var found=dir<0?findSelectionIn($pos.node(0),$pos.node(depth),$pos.before(depth+1),$pos.index(depth),dir,textOnly):findSelectionIn($pos.node(0),$pos.node(depth),$pos.after(depth+1),$pos.index(depth)+1,dir,textOnly);if(found)return found}},index_es_Selection.near=function near($pos,bias){return void 0===bias&&(bias=1),this.findFrom($pos,bias)||this.findFrom($pos,-bias)||new index_es_AllSelection($pos.node(0))},index_es_Selection.atStart=function atStart(doc){return findSelectionIn(doc,doc,0,0,1)||new index_es_AllSelection(doc)},index_es_Selection.atEnd=function atEnd(doc){return findSelectionIn(doc,doc,doc.content.size,doc.childCount,-1)||new index_es_AllSelection(doc)},index_es_Selection.fromJSON=function fromJSON(doc,json){if(!json||!json.type)throw new RangeError("Invalid input for Selection.fromJSON");var cls=classesById[json.type];if(!cls)throw new RangeError("No selection type "+json.type+" defined");return cls.fromJSON(doc,json)},index_es_Selection.jsonID=function jsonID(id,selectionClass){if(id in classesById)throw new RangeError("Duplicate use of selection JSON ID "+id);return classesById[id]=selectionClass,selectionClass.prototype.jsonID=id,selectionClass},index_es_Selection.prototype.getBookmark=function getBookmark(){return index_es_TextSelection.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(index_es_Selection.prototype,prosemirror_state_dist_index_es_prototypeAccessors),index_es_Selection.prototype.visible=!0;var SelectionRange=function SelectionRange($from,$to){this.$from=$from,this.$to=$to},index_es_TextSelection=function(Selection){function TextSelection($anchor,$head){void 0===$head&&($head=$anchor),Selection.call(this,$anchor,$head)}Selection&&(TextSelection.__proto__=Selection),TextSelection.prototype=Object.create(Selection&&Selection.prototype),TextSelection.prototype.constructor=TextSelection;var prototypeAccessors$1={$cursor:{configurable:!0}};return prototypeAccessors$1.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},TextSelection.prototype.map=function map(doc,mapping){var $head=doc.resolve(mapping.map(this.head));if(!$head.parent.inlineContent)return Selection.near($head);var $anchor=doc.resolve(mapping.map(this.anchor));return new TextSelection($anchor.parent.inlineContent?$anchor:$head,$head)},TextSelection.prototype.replace=function replace(tr,content){if(void 0===content&&(content=Slice.empty),Selection.prototype.replace.call(this,tr,content),content==Slice.empty){var marks=this.$from.marksAcross(this.$to);marks&&tr.ensureMarks(marks)}},TextSelection.prototype.eq=function eq(other){return other instanceof TextSelection&&other.anchor==this.anchor&&other.head==this.head},TextSelection.prototype.getBookmark=function getBookmark(){return new TextBookmark(this.anchor,this.head)},TextSelection.prototype.toJSON=function toJSON(){return{type:"text",anchor:this.anchor,head:this.head}},TextSelection.fromJSON=function fromJSON(doc,json){if("number"!=typeof json.anchor||"number"!=typeof json.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(doc.resolve(json.anchor),doc.resolve(json.head))},TextSelection.create=function create(doc,anchor,head){void 0===head&&(head=anchor);var $anchor=doc.resolve(anchor);return new this($anchor,head==anchor?$anchor:doc.resolve(head))},TextSelection.between=function between($anchor,$head,bias){var dPos=$anchor.pos-$head.pos;if(bias&&!dPos||(bias=dPos>=0?1:-1),!$head.parent.inlineContent){var found=Selection.findFrom($head,bias,!0)||Selection.findFrom($head,-bias,!0);if(!found)return Selection.near($head,bias);$head=found.$head}return $anchor.parent.inlineContent||(0==dPos||($anchor=(Selection.findFrom($anchor,-bias,!0)||Selection.findFrom($anchor,bias,!0)).$anchor).pos<$head.pos!=dPos<0)&&($anchor=$head),new TextSelection($anchor,$head)},Object.defineProperties(TextSelection.prototype,prototypeAccessors$1),TextSelection}(index_es_Selection);index_es_Selection.jsonID("text",index_es_TextSelection);var TextBookmark=function TextBookmark(anchor,head){this.anchor=anchor,this.head=head};TextBookmark.prototype.map=function map(mapping){return new TextBookmark(mapping.map(this.anchor),mapping.map(this.head))},TextBookmark.prototype.resolve=function resolve(doc){return index_es_TextSelection.between(doc.resolve(this.anchor),doc.resolve(this.head))};var index_es_NodeSelection=function(Selection){function NodeSelection($pos){var node=$pos.nodeAfter,$end=$pos.node(0).resolve($pos.pos+node.nodeSize);Selection.call(this,$pos,$end),this.node=node}return Selection&&(NodeSelection.__proto__=Selection),NodeSelection.prototype=Object.create(Selection&&Selection.prototype),NodeSelection.prototype.constructor=NodeSelection,NodeSelection.prototype.map=function map(doc,mapping){var ref=mapping.mapResult(this.anchor),deleted=ref.deleted,pos=ref.pos,$pos=doc.resolve(pos);return deleted?Selection.near($pos):new NodeSelection($pos)},NodeSelection.prototype.content=function content(){return new Slice(Fragment.from(this.node),0,0)},NodeSelection.prototype.eq=function eq(other){return other instanceof NodeSelection&&other.anchor==this.anchor},NodeSelection.prototype.toJSON=function toJSON(){return{type:"node",anchor:this.anchor}},NodeSelection.prototype.getBookmark=function getBookmark(){return new NodeBookmark(this.anchor)},NodeSelection.fromJSON=function fromJSON(doc,json){if("number"!=typeof json.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(doc.resolve(json.anchor))},NodeSelection.create=function create(doc,from){return new this(doc.resolve(from))},NodeSelection.isSelectable=function isSelectable(node){return!node.isText&&!1!==node.type.spec.selectable},NodeSelection}(index_es_Selection);index_es_NodeSelection.prototype.visible=!1,index_es_Selection.jsonID("node",index_es_NodeSelection);var NodeBookmark=function NodeBookmark(anchor){this.anchor=anchor};NodeBookmark.prototype.map=function map(mapping){var ref=mapping.mapResult(this.anchor),deleted=ref.deleted,pos=ref.pos;return deleted?new TextBookmark(pos,pos):new NodeBookmark(pos)},NodeBookmark.prototype.resolve=function resolve(doc){var $pos=doc.resolve(this.anchor),node=$pos.nodeAfter;return node&&index_es_NodeSelection.isSelectable(node)?new index_es_NodeSelection($pos):index_es_Selection.near($pos)};var index_es_AllSelection=function(Selection){function AllSelection(doc){Selection.call(this,doc.resolve(0),doc.resolve(doc.content.size))}return Selection&&(AllSelection.__proto__=Selection),AllSelection.prototype=Object.create(Selection&&Selection.prototype),AllSelection.prototype.constructor=AllSelection,AllSelection.prototype.replace=function replace(tr,content){if(void 0===content&&(content=Slice.empty),content==Slice.empty){tr.delete(0,tr.doc.content.size);var sel=Selection.atStart(tr.doc);sel.eq(tr.selection)||tr.setSelection(sel)}else Selection.prototype.replace.call(this,tr,content)},AllSelection.prototype.toJSON=function toJSON(){return{type:"all"}},AllSelection.fromJSON=function fromJSON(doc){return new AllSelection(doc)},AllSelection.prototype.map=function map(doc){return new AllSelection(doc)},AllSelection.prototype.eq=function eq(other){return other instanceof AllSelection},AllSelection.prototype.getBookmark=function getBookmark(){return AllBookmark},AllSelection}(index_es_Selection);index_es_Selection.jsonID("all",index_es_AllSelection);var AllBookmark={map:function map(){return this},resolve:function resolve(doc){return new index_es_AllSelection(doc)}};function findSelectionIn(doc,node,pos,index,dir,text){if(node.inlineContent)return index_es_TextSelection.create(doc,pos);for(var i=index-(dir>0?0:1);dir>0?i<node.childCount:i>=0;i+=dir){var child=node.child(i);if(child.isAtom){if(!text&&index_es_NodeSelection.isSelectable(child))return index_es_NodeSelection.create(doc,pos-(dir<0?child.nodeSize:0))}else{var inner=findSelectionIn(doc,child,pos+dir,dir<0?child.childCount:0,dir,text);if(inner)return inner}pos+=child.nodeSize*dir}}function selectionToInsertionEnd(tr,startLen,bias){var last=tr.steps.length-1;if(!(last<startLen)){var end,step=tr.steps[last];if(step instanceof index_es_ReplaceStep||step instanceof index_es_ReplaceAroundStep)tr.mapping.maps[last].forEach((function(_from,_to,_newFrom,newTo){null==end&&(end=newTo)})),tr.setSelection(index_es_Selection.near(tr.doc.resolve(end),bias))}}var index_es_Transaction=function(Transform){function Transaction(state){Transform.call(this,state.doc),this.time=Date.now(),this.curSelection=state.selection,this.curSelectionFor=0,this.storedMarks=state.storedMarks,this.updated=0,this.meta=Object.create(null)}Transform&&(Transaction.__proto__=Transform),Transaction.prototype=Object.create(Transform&&Transform.prototype),Transaction.prototype.constructor=Transaction;var prototypeAccessors={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return prototypeAccessors.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},Transaction.prototype.setSelection=function setSelection(selection){if(selection.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=selection,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},prototypeAccessors.selectionSet.get=function(){return(1&this.updated)>0},Transaction.prototype.setStoredMarks=function setStoredMarks(marks){return this.storedMarks=marks,this.updated|=2,this},Transaction.prototype.ensureMarks=function ensureMarks(marks){return index_es_Mark.sameSet(this.storedMarks||this.selection.$from.marks(),marks)||this.setStoredMarks(marks),this},Transaction.prototype.addStoredMark=function addStoredMark(mark){return this.ensureMarks(mark.addToSet(this.storedMarks||this.selection.$head.marks()))},Transaction.prototype.removeStoredMark=function removeStoredMark(mark){return this.ensureMarks(mark.removeFromSet(this.storedMarks||this.selection.$head.marks()))},prototypeAccessors.storedMarksSet.get=function(){return(2&this.updated)>0},Transaction.prototype.addStep=function addStep(step,doc){Transform.prototype.addStep.call(this,step,doc),this.updated=-3&this.updated,this.storedMarks=null},Transaction.prototype.setTime=function setTime(time){return this.time=time,this},Transaction.prototype.replaceSelection=function replaceSelection(slice){return this.selection.replace(this,slice),this},Transaction.prototype.replaceSelectionWith=function replaceSelectionWith(node,inheritMarks){var selection=this.selection;return!1!==inheritMarks&&(node=node.mark(this.storedMarks||(selection.empty?selection.$from.marks():selection.$from.marksAcross(selection.$to)||index_es_Mark.none))),selection.replaceWith(this,node),this},Transaction.prototype.deleteSelection=function deleteSelection(){return this.selection.replace(this),this},Transaction.prototype.insertText=function insertText(text,from,to){void 0===to&&(to=from);var schema=this.doc.type.schema;if(null==from)return text?this.replaceSelectionWith(schema.text(text),!0):this.deleteSelection();if(!text)return this.deleteRange(from,to);var marks=this.storedMarks;if(!marks){var $from=this.doc.resolve(from);marks=to==from?$from.marks():$from.marksAcross(this.doc.resolve(to))}return this.replaceRangeWith(from,to,schema.text(text,marks)),this.selection.empty||this.setSelection(index_es_Selection.near(this.selection.$to)),this},Transaction.prototype.setMeta=function setMeta(key,value){return this.meta["string"==typeof key?key:key.key]=value,this},Transaction.prototype.getMeta=function getMeta(key){return this.meta["string"==typeof key?key:key.key]},prototypeAccessors.isGeneric.get=function(){for(var _ in this.meta)return!1;return!0},Transaction.prototype.scrollIntoView=function scrollIntoView(){return this.updated|=4,this},prototypeAccessors.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(Transaction.prototype,prototypeAccessors),Transaction}(index_es_Transform);function bind(f,self){return self&&f?f.bind(self):f}var FieldDesc=function FieldDesc(name,desc,self){this.name=name,this.init=bind(desc.init,self),this.apply=bind(desc.apply,self)},baseFields=[new FieldDesc("doc",{init:function init(config){return config.doc||config.schema.topNodeType.createAndFill()},apply:function apply(tr){return tr.doc}}),new FieldDesc("selection",{init:function init(config,instance){return config.selection||index_es_Selection.atStart(instance.doc)},apply:function apply(tr){return tr.selection}}),new FieldDesc("storedMarks",{init:function init(config){return config.storedMarks||null},apply:function apply(tr,_marks,_old,state){return state.selection.$cursor?tr.storedMarks:null}}),new FieldDesc("scrollToSelection",{init:function init(){return 0},apply:function apply(tr,prev){return tr.scrolledIntoView?prev+1:prev}})],Configuration=function Configuration(schema,plugins){var this$1=this;this.schema=schema,this.fields=baseFields.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),plugins&&plugins.forEach((function(plugin){if(this$1.pluginsByKey[plugin.key])throw new RangeError("Adding different instances of a keyed plugin ("+plugin.key+")");this$1.plugins.push(plugin),this$1.pluginsByKey[plugin.key]=plugin,plugin.spec.state&&this$1.fields.push(new FieldDesc(plugin.key,plugin.spec.state,plugin))}))},EditorState=function EditorState(config){this.config=config},prosemirror_state_dist_index_es_prototypeAccessors$1={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};prosemirror_state_dist_index_es_prototypeAccessors$1.schema.get=function(){return this.config.schema},prosemirror_state_dist_index_es_prototypeAccessors$1.plugins.get=function(){return this.config.plugins},EditorState.prototype.apply=function apply(tr){return this.applyTransaction(tr).state},EditorState.prototype.filterTransaction=function filterTransaction(tr,ignore){void 0===ignore&&(ignore=-1);for(var i=0;i<this.config.plugins.length;i++)if(i!=ignore){var plugin=this.config.plugins[i];if(plugin.spec.filterTransaction&&!plugin.spec.filterTransaction.call(plugin,tr,this))return!1}return!0},EditorState.prototype.applyTransaction=function applyTransaction(rootTr){if(!this.filterTransaction(rootTr))return{state:this,transactions:[]};for(var trs=[rootTr],newState=this.applyInner(rootTr),seen=null;;){for(var haveNew=!1,i=0;i<this.config.plugins.length;i++){var plugin=this.config.plugins[i];if(plugin.spec.appendTransaction){var n=seen?seen[i].n:0,oldState=seen?seen[i].state:this,tr=n<trs.length&&plugin.spec.appendTransaction.call(plugin,n?trs.slice(n):trs,oldState,newState);if(tr&&newState.filterTransaction(tr,i)){if(tr.setMeta("appendedTransaction",rootTr),!seen){seen=[];for(var j=0;j<this.config.plugins.length;j++)seen.push(j<i?{state:newState,n:trs.length}:{state:this,n:0})}trs.push(tr),newState=newState.applyInner(tr),haveNew=!0}seen&&(seen[i]={state:newState,n:trs.length})}}if(!haveNew)return{state:newState,transactions:trs}}},EditorState.prototype.applyInner=function applyInner(tr){if(!tr.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var newInstance=new EditorState(this.config),fields=this.config.fields,i=0;i<fields.length;i++){var field=fields[i];newInstance[field.name]=field.apply(tr,this[field.name],this,newInstance)}for(var i$1=0;i$1<applyListeners.length;i$1++)applyListeners[i$1](this,tr,newInstance);return newInstance},prosemirror_state_dist_index_es_prototypeAccessors$1.tr.get=function(){return new index_es_Transaction(this)},EditorState.create=function create(config){for(var $config=new Configuration(config.doc?config.doc.type.schema:config.schema,config.plugins),instance=new EditorState($config),i=0;i<$config.fields.length;i++)instance[$config.fields[i].name]=$config.fields[i].init(config,instance);return instance},EditorState.prototype.reconfigure=function reconfigure(config){for(var $config=new Configuration(this.schema,config.plugins),fields=$config.fields,instance=new EditorState($config),i=0;i<fields.length;i++){var name=fields[i].name;instance[name]=this.hasOwnProperty(name)?this[name]:fields[i].init(config,instance)}return instance},EditorState.prototype.toJSON=function toJSON(pluginFields){var result={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(result.storedMarks=this.storedMarks.map((function(m){return m.toJSON()}))),pluginFields&&"object"==typeof pluginFields)for(var prop in pluginFields){if("doc"==prop||"selection"==prop)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var plugin=pluginFields[prop],state=plugin.spec.state;state&&state.toJSON&&(result[prop]=state.toJSON.call(plugin,this[plugin.key]))}return result},EditorState.fromJSON=function fromJSON(config,json,pluginFields){if(!json)throw new RangeError("Invalid input for EditorState.fromJSON");if(!config.schema)throw new RangeError("Required config field 'schema' missing");var $config=new Configuration(config.schema,config.plugins),instance=new EditorState($config);return $config.fields.forEach((function(field){if("doc"==field.name)instance.doc=index_es_Node.fromJSON(config.schema,json.doc);else if("selection"==field.name)instance.selection=index_es_Selection.fromJSON(instance.doc,json.selection);else if("storedMarks"==field.name)json.storedMarks&&(instance.storedMarks=json.storedMarks.map(config.schema.markFromJSON));else{if(pluginFields)for(var prop in pluginFields){var plugin=pluginFields[prop],state=plugin.spec.state;if(plugin.key==field.name&&state&&state.fromJSON&&Object.prototype.hasOwnProperty.call(json,prop))return void(instance[field.name]=state.fromJSON.call(plugin,config,json[prop],instance))}instance[field.name]=field.init(config,instance)}})),instance},EditorState.addApplyListener=function addApplyListener(f){applyListeners.push(f)},EditorState.removeApplyListener=function removeApplyListener(f){var found=applyListeners.indexOf(f);found>-1&&applyListeners.splice(found,1)},Object.defineProperties(EditorState.prototype,prosemirror_state_dist_index_es_prototypeAccessors$1);var applyListeners=[];function bindProps(obj,self,target){for(var prop in obj){var val=obj[prop];val instanceof Function?val=val.bind(self):"handleDOMEvents"==prop&&(val=bindProps(val,self,{})),target[prop]=val}return target}var Plugin=function Plugin(spec){this.props={},spec.props&&bindProps(spec.props,this,this.props),this.spec=spec,this.key=spec.key?spec.key.key:createKey("plugin")};Plugin.prototype.getState=function getState(state){return state[this.key]};var index_es_keys=Object.create(null);function createKey(name){return name in index_es_keys?name+"$"+ ++index_es_keys[name]:(index_es_keys[name]=0,name+"$")}var PluginKey=function PluginKey(name){void 0===name&&(name="key"),this.key=createKey(name)};PluginKey.prototype.get=function get(state){return state.config.pluginsByKey[this.key]},PluginKey.prototype.getState=function getState(state){return state[this.key]};var index_es_result={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var ie_edge=/Edge\/(\d+)/.exec(navigator.userAgent),ie_upto10=/MSIE \d/.test(navigator.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);index_es_result.mac=/Mac/.test(navigator.platform);var ie=index_es_result.ie=!!(ie_upto10||ie_11up||ie_edge);index_es_result.ie_version=ie_upto10?document.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:null,index_es_result.gecko=!ie&&/gecko\/(\d+)/i.test(navigator.userAgent),index_es_result.gecko_version=index_es_result.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var chrome=!ie&&/Chrome\/(\d+)/.exec(navigator.userAgent);index_es_result.chrome=!!chrome,index_es_result.chrome_version=chrome&&+chrome[1],index_es_result.safari=!ie&&/Apple Computer/.test(navigator.vendor),index_es_result.ios=index_es_result.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),index_es_result.android=/Android \d/.test(navigator.userAgent),index_es_result.webkit="webkitFontSmoothing"in document.documentElement.style,index_es_result.webkit_version=index_es_result.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var domIndex=function(node){for(var index=0;;index++)if(!(node=node.previousSibling))return index},parentNode=function(node){var parent=node.assignedSlot||node.parentNode;return parent&&11==parent.nodeType?parent.host:parent},reusedRange=null,textRange=function(node,from,to){var range=reusedRange||(reusedRange=document.createRange());return range.setEnd(node,null==to?node.nodeValue.length:to),range.setStart(node,from||0),range},isEquivalentPosition=function(node,off,targetNode,targetOff){return targetNode&&(scanFor(node,off,targetNode,targetOff,-1)||scanFor(node,off,targetNode,targetOff,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(node,off,targetNode,targetOff,dir){for(;;){if(node==targetNode&&off==targetOff)return!0;if(off==(dir<0?0:nodeSize(node))){var parent=node.parentNode;if(1!=parent.nodeType||hasBlockDesc(node)||atomElements.test(node.nodeName)||"false"==node.contentEditable)return!1;off=domIndex(node)+(dir<0?0:1),node=parent}else{if(1!=node.nodeType)return!1;if("false"==(node=node.childNodes[off+(dir<0?-1:0)]).contentEditable)return!1;off=dir<0?nodeSize(node):0}}}function nodeSize(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function hasBlockDesc(dom){for(var desc,cur=dom;cur&&!(desc=cur.pmViewDesc);cur=cur.parentNode);return desc&&desc.node&&desc.node.isBlock&&(desc.dom==dom||desc.contentDOM==dom)}var selectionCollapsed=function(domSel){var collapsed=domSel.isCollapsed;return collapsed&&index_es_result.chrome&&domSel.rangeCount&&!domSel.getRangeAt(0).collapsed&&(collapsed=!1),collapsed};function keyEvent(keyCode,key){var event=document.createEvent("Event");return event.initEvent("keydown",!0,!0),event.keyCode=keyCode,event.key=event.code=key,event}function windowRect(doc){return{left:0,right:doc.documentElement.clientWidth,top:0,bottom:doc.documentElement.clientHeight}}function getSide(value,side){return"number"==typeof value?value:value[side]}function clientRect(node){var rect=node.getBoundingClientRect(),scaleX=rect.width/node.offsetWidth||1,scaleY=rect.height/node.offsetHeight||1;return{left:rect.left,right:rect.left+node.clientWidth*scaleX,top:rect.top,bottom:rect.top+node.clientHeight*scaleY}}function scrollRectIntoView(view,rect,startDOM){for(var scrollThreshold=view.someProp("scrollThreshold")||0,scrollMargin=view.someProp("scrollMargin")||5,doc=view.dom.ownerDocument,parent=startDOM||view.dom;parent;parent=parentNode(parent))if(1==parent.nodeType){var atTop=parent==doc.body||1!=parent.nodeType,bounding=atTop?windowRect(doc):clientRect(parent),moveX=0,moveY=0;if(rect.top<bounding.top+getSide(scrollThreshold,"top")?moveY=-(bounding.top-rect.top+getSide(scrollMargin,"top")):rect.bottom>bounding.bottom-getSide(scrollThreshold,"bottom")&&(moveY=rect.bottom-bounding.bottom+getSide(scrollMargin,"bottom")),rect.left<bounding.left+getSide(scrollThreshold,"left")?moveX=-(bounding.left-rect.left+getSide(scrollMargin,"left")):rect.right>bounding.right-getSide(scrollThreshold,"right")&&(moveX=rect.right-bounding.right+getSide(scrollMargin,"right")),moveX||moveY)if(atTop)doc.defaultView.scrollBy(moveX,moveY);else{var startX=parent.scrollLeft,startY=parent.scrollTop;moveY&&(parent.scrollTop+=moveY),moveX&&(parent.scrollLeft+=moveX);var dX=parent.scrollLeft-startX,dY=parent.scrollTop-startY;rect={left:rect.left-dX,top:rect.top-dY,right:rect.right-dX,bottom:rect.bottom-dY}}if(atTop)break}}function scrollStack(dom){for(var stack=[],doc=dom.ownerDocument;dom&&(stack.push({dom:dom,top:dom.scrollTop,left:dom.scrollLeft}),dom!=doc);dom=parentNode(dom));return stack}function restoreScrollStack(stack,dTop){for(var i=0;i<stack.length;i++){var ref=stack[i],dom=ref.dom,top=ref.top,left=ref.left;dom.scrollTop!=top+dTop&&(dom.scrollTop=top+dTop),dom.scrollLeft!=left&&(dom.scrollLeft=left)}}var preventScrollSupported=null;function findOffsetInNode(node,coords){for(var closest,coordsClosest,dxClosest=2e8,offset=0,rowBot=coords.top,rowTop=coords.top,child=node.firstChild,childIndex=0;child;child=child.nextSibling,childIndex++){var rects=void 0;if(1==child.nodeType)rects=child.getClientRects();else{if(3!=child.nodeType)continue;rects=textRange(child).getClientRects()}for(var i=0;i<rects.length;i++){var rect=rects[i];if(rect.top<=rowBot&&rect.bottom>=rowTop){rowBot=Math.max(rect.bottom,rowBot),rowTop=Math.min(rect.top,rowTop);var dx=rect.left>coords.left?rect.left-coords.left:rect.right<coords.left?coords.left-rect.right:0;if(dx<dxClosest){closest=child,dxClosest=dx,coordsClosest=dx&&3==closest.nodeType?{left:rect.right<coords.left?rect.right:rect.left,top:coords.top}:coords,1==child.nodeType&&dx&&(offset=childIndex+(coords.left>=(rect.left+rect.right)/2?1:0));continue}}!closest&&(coords.left>=rect.right&&coords.top>=rect.top||coords.left>=rect.left&&coords.top>=rect.bottom)&&(offset=childIndex+1)}}return closest&&3==closest.nodeType?function findOffsetInText(node,coords){for(var len=node.nodeValue.length,range=document.createRange(),i=0;i<len;i++){range.setEnd(node,i+1),range.setStart(node,i);var rect=singleRect(range,1);if(rect.top!=rect.bottom&&inRect(coords,rect))return{node:node,offset:i+(coords.left>=(rect.left+rect.right)/2?1:0)}}return{node:node,offset:0}}(closest,coordsClosest):!closest||dxClosest&&1==closest.nodeType?{node:node,offset:offset}:findOffsetInNode(closest,coordsClosest)}function inRect(coords,rect){return coords.left>=rect.left-1&&coords.left<=rect.right+1&&coords.top>=rect.top-1&&coords.top<=rect.bottom+1}function elementFromPoint(element,coords,box){var len=element.childNodes.length;if(len&&box.top<box.bottom)for(var startI=Math.max(0,Math.min(len-1,Math.floor(len*(coords.top-box.top)/(box.bottom-box.top))-2)),i=startI;;){var child=element.childNodes[i];if(1==child.nodeType)for(var rects=child.getClientRects(),j=0;j<rects.length;j++){var rect=rects[j];if(inRect(coords,rect))return elementFromPoint(child,coords,rect)}if((i=(i+1)%len)==startI)break}return element}function posAtCoords(view,coords){var assign,assign$1,node,offset,root=view.root;if(root.caretPositionFromPoint)try{var pos$1=root.caretPositionFromPoint(coords.left,coords.top);pos$1&&(node=(assign=pos$1).offsetNode,offset=assign.offset)}catch(_){}if(!node&&root.caretRangeFromPoint){var range=root.caretRangeFromPoint(coords.left,coords.top);range&&(node=(assign$1=range).startContainer,offset=assign$1.startOffset)}var pos,elt=root.elementFromPoint(coords.left,coords.top+1);if(!elt||!view.dom.contains(1!=elt.nodeType?elt.parentNode:elt)){var box=view.dom.getBoundingClientRect();if(!inRect(coords,box))return null;if(!(elt=elementFromPoint(view.dom,coords,box)))return null}if(index_es_result.safari)for(var p=elt;node&&p;p=parentNode(p))p.draggable&&(node=offset=null);if(elt=function targetKludge(dom,coords){var parent=dom.parentNode;return parent&&/^li$/i.test(parent.nodeName)&&coords.left<dom.getBoundingClientRect().left?parent:dom}(elt,coords),node){if(index_es_result.gecko&&1==node.nodeType&&(offset=Math.min(offset,node.childNodes.length))<node.childNodes.length){var box$1,next=node.childNodes[offset];"IMG"==next.nodeName&&(box$1=next.getBoundingClientRect()).right<=coords.left&&box$1.bottom>coords.top&&offset++}node==view.dom&&offset==node.childNodes.length-1&&1==node.lastChild.nodeType&&coords.top>node.lastChild.getBoundingClientRect().bottom?pos=view.state.doc.content.size:0!=offset&&1==node.nodeType&&"BR"==node.childNodes[offset-1].nodeName||(pos=function posFromCaret(view,node,offset,coords){for(var outside=-1,cur=node;cur!=view.dom;){var desc=view.docView.nearestDesc(cur,!0);if(!desc)return null;if(desc.node.isBlock&&desc.parent){var rect=desc.dom.getBoundingClientRect();if(rect.left>coords.left||rect.top>coords.top)outside=desc.posBefore;else{if(!(rect.right<coords.left||rect.bottom<coords.top))break;outside=desc.posAfter}}cur=desc.dom.parentNode}return outside>-1?outside:view.docView.posFromDOM(node,offset)}(view,node,offset,coords))}null==pos&&(pos=function posFromElement(view,elt,coords){var ref=findOffsetInNode(elt,coords),node=ref.node,offset=ref.offset,bias=-1;if(1==node.nodeType&&!node.firstChild){var rect=node.getBoundingClientRect();bias=rect.left!=rect.right&&coords.left>(rect.left+rect.right)/2?1:-1}return view.docView.posFromDOM(node,offset,bias)}(view,elt,coords));var desc=view.docView.nearestDesc(elt,!0);return{pos:pos,inside:desc?desc.posAtStart-desc.border:-1}}function singleRect(object,bias){var rects=object.getClientRects();return rects.length?rects[bias<0?0:rects.length-1]:object.getBoundingClientRect()}var BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(view,pos,side){var ref=view.docView.domFromPos(pos,side<0?-1:1),node=ref.node,offset=ref.offset,supportEmptyRange=index_es_result.webkit||index_es_result.gecko;if(3==node.nodeType){if(!supportEmptyRange||!BIDI.test(node.nodeValue)&&(side<0?offset:offset!=node.nodeValue.length)){var from=offset,to=offset,takeSide=side<0?1:-1;return side<0&&!offset?(to++,takeSide=-1):side>=0&&offset==node.nodeValue.length?(from--,takeSide=1):side<0?from--:to++,flattenV(singleRect(textRange(node,from,to),takeSide),takeSide<0)}var rect=singleRect(textRange(node,offset,offset),side);if(index_es_result.gecko&&offset&&/\s/.test(node.nodeValue[offset-1])&&offset<node.nodeValue.length){var rectBefore=singleRect(textRange(node,offset-1,offset-1),-1);if(rectBefore.top==rect.top){var rectAfter=singleRect(textRange(node,offset,offset+1),-1);if(rectAfter.top!=rect.top)return flattenV(rectAfter,rectAfter.left<rectBefore.left)}}return rect}if(!view.state.doc.resolve(pos).parent.inlineContent){if(offset&&(side<0||offset==nodeSize(node))){var before=node.childNodes[offset-1];if(1==before.nodeType)return flattenH(before.getBoundingClientRect(),!1)}if(offset<nodeSize(node)){var after=node.childNodes[offset];if(1==after.nodeType)return flattenH(after.getBoundingClientRect(),!0)}return flattenH(node.getBoundingClientRect(),side>=0)}if(offset&&(side<0||offset==nodeSize(node))){var before$1=node.childNodes[offset-1],target=3==before$1.nodeType?textRange(before$1,nodeSize(before$1)-(supportEmptyRange?0:1)):1!=before$1.nodeType||"BR"==before$1.nodeName&&before$1.nextSibling?null:before$1;if(target)return flattenV(singleRect(target,1),!1)}if(offset<nodeSize(node)){var after$1=node.childNodes[offset],target$1=3==after$1.nodeType?textRange(after$1,0,supportEmptyRange?0:1):1==after$1.nodeType?after$1:null;if(target$1)return flattenV(singleRect(target$1,-1),!0)}return flattenV(singleRect(3==node.nodeType?textRange(node):node,-side),side>=0)}function flattenV(rect,left){if(0==rect.width)return rect;var x=left?rect.left:rect.right;return{top:rect.top,bottom:rect.bottom,left:x,right:x}}function flattenH(rect,top){if(0==rect.height)return rect;var y=top?rect.top:rect.bottom;return{top:y,bottom:y,left:rect.left,right:rect.right}}function withFlushedState(view,state,f){var viewState=view.state,active=view.root.activeElement;viewState!=state&&view.updateState(state),active!=view.dom&&view.focus();try{return f()}finally{viewState!=state&&view.updateState(viewState),active!=view.dom&&active&&active.focus()}}var maybeRTL=/[\u0590-\u08ac]/;var cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(view,state,dir){return cachedState==state&&cachedDir==dir?cachedResult:(cachedState=state,cachedDir=dir,cachedResult="up"==dir||"down"==dir?function endOfTextblockVertical(view,state,dir){var sel=state.selection,$pos="up"==dir?sel.$from:sel.$to;return withFlushedState(view,state,(function(){for(var dom=view.docView.domFromPos($pos.pos,"up"==dir?-1:1).node;;){var nearest=view.docView.nearestDesc(dom,!0);if(!nearest)break;if(nearest.node.isBlock){dom=nearest.dom;break}dom=nearest.dom.parentNode}for(var coords=coordsAtPos(view,$pos.pos,1),child=dom.firstChild;child;child=child.nextSibling){var boxes=void 0;if(1==child.nodeType)boxes=child.getClientRects();else{if(3!=child.nodeType)continue;boxes=textRange(child,0,child.nodeValue.length).getClientRects()}for(var i=0;i<boxes.length;i++){var box=boxes[i];if(box.bottom>box.top&&("up"==dir?box.bottom<coords.top+1:box.top>coords.bottom-1))return!1}}return!0}))}(view,state,dir):function endOfTextblockHorizontal(view,state,dir){var $head=state.selection.$head;if(!$head.parent.isTextblock)return!1;var offset=$head.parentOffset,atStart=!offset,atEnd=offset==$head.parent.content.size,sel=getSelection();return maybeRTL.test($head.parent.textContent)&&sel.modify?withFlushedState(view,state,(function(){var oldRange=sel.getRangeAt(0),oldNode=sel.focusNode,oldOff=sel.focusOffset,oldBidiLevel=sel.caretBidiLevel;sel.modify("move",dir,"character");var result=!($head.depth?view.docView.domAfterPos($head.before()):view.dom).contains(1==sel.focusNode.nodeType?sel.focusNode:sel.focusNode.parentNode)||oldNode==sel.focusNode&&oldOff==sel.focusOffset;return sel.removeAllRanges(),sel.addRange(oldRange),null!=oldBidiLevel&&(sel.caretBidiLevel=oldBidiLevel),result})):"left"==dir||"backward"==dir?atStart:atEnd}(view,state,dir))}var index_es_ViewDesc=function ViewDesc(parent,children,dom,contentDOM){this.parent=parent,this.children=children,this.dom=dom,dom.pmViewDesc=this,this.contentDOM=contentDOM,this.dirty=0},prosemirror_view_dist_index_es_prototypeAccessors={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};index_es_ViewDesc.prototype.matchesWidget=function matchesWidget(){return!1},index_es_ViewDesc.prototype.matchesMark=function matchesMark(){return!1},index_es_ViewDesc.prototype.matchesNode=function matchesNode(){return!1},index_es_ViewDesc.prototype.matchesHack=function matchesHack(_nodeName){return!1},prosemirror_view_dist_index_es_prototypeAccessors.beforePosition.get=function(){return!1},index_es_ViewDesc.prototype.parseRule=function parseRule(){return null},index_es_ViewDesc.prototype.stopEvent=function stopEvent(){return!1},prosemirror_view_dist_index_es_prototypeAccessors.size.get=function(){for(var size=0,i=0;i<this.children.length;i++)size+=this.children[i].size;return size},prosemirror_view_dist_index_es_prototypeAccessors.border.get=function(){return 0},index_es_ViewDesc.prototype.destroy=function destroy(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var i=0;i<this.children.length;i++)this.children[i].destroy()},index_es_ViewDesc.prototype.posBeforeChild=function posBeforeChild(child){for(var i=0,pos=this.posAtStart;i<this.children.length;i++){var cur=this.children[i];if(cur==child)return pos;pos+=cur.size}},prosemirror_view_dist_index_es_prototypeAccessors.posBefore.get=function(){return this.parent.posBeforeChild(this)},prosemirror_view_dist_index_es_prototypeAccessors.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},prosemirror_view_dist_index_es_prototypeAccessors.posAfter.get=function(){return this.posBefore+this.size},prosemirror_view_dist_index_es_prototypeAccessors.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},index_es_ViewDesc.prototype.localPosFromDOM=function localPosFromDOM(dom,offset,bias){if(this.contentDOM&&this.contentDOM.contains(1==dom.nodeType?dom:dom.parentNode)){if(bias<0){var domBefore,desc;if(dom==this.contentDOM)domBefore=dom.childNodes[offset-1];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domBefore=dom.previousSibling}for(;domBefore&&(!(desc=domBefore.pmViewDesc)||desc.parent!=this);)domBefore=domBefore.previousSibling;return domBefore?this.posBeforeChild(desc)+desc.size:this.posAtStart}var domAfter,desc$1;if(dom==this.contentDOM)domAfter=dom.childNodes[offset];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domAfter=dom.nextSibling}for(;domAfter&&(!(desc$1=domAfter.pmViewDesc)||desc$1.parent!=this);)domAfter=domAfter.nextSibling;return domAfter?this.posBeforeChild(desc$1):this.posAtEnd}var atEnd;if(dom==this.dom&&this.contentDOM)atEnd=offset>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))atEnd=2&dom.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==offset)for(var search=dom;;search=search.parentNode){if(search==this.dom){atEnd=!1;break}if(search.parentNode.firstChild!=search)break}if(null==atEnd&&offset==dom.childNodes.length)for(var search$1=dom;;search$1=search$1.parentNode){if(search$1==this.dom){atEnd=!0;break}if(search$1.parentNode.lastChild!=search$1)break}}return(null==atEnd?bias>0:atEnd)?this.posAtEnd:this.posAtStart},index_es_ViewDesc.prototype.nearestDesc=function nearestDesc(dom,onlyNodes){for(var first=!0,cur=dom;cur;cur=cur.parentNode){var desc=this.getDesc(cur);if(desc&&(!onlyNodes||desc.node)){if(!first||!desc.nodeDOM||(1==desc.nodeDOM.nodeType?desc.nodeDOM.contains(1==dom.nodeType?dom:dom.parentNode):desc.nodeDOM==dom))return desc;first=!1}}},index_es_ViewDesc.prototype.getDesc=function getDesc(dom){for(var desc=dom.pmViewDesc,cur=desc;cur;cur=cur.parent)if(cur==this)return desc},index_es_ViewDesc.prototype.posFromDOM=function posFromDOM(dom,offset,bias){for(var scan=dom;scan;scan=scan.parentNode){var desc=this.getDesc(scan);if(desc)return desc.localPosFromDOM(dom,offset,bias)}return-1},index_es_ViewDesc.prototype.descAt=function descAt(pos){for(var i=0,offset=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(offset==pos&&end!=offset){for(;!child.border&&child.children.length;)child=child.children[0];return child}if(pos<end)return child.descAt(pos-offset-child.border);offset=end}},index_es_ViewDesc.prototype.domFromPos=function domFromPos(pos,side){if(!this.contentDOM)return{node:this.dom,offset:0};for(var offset=0,i=0,first=!0;;i++,first=!1){for(;i<this.children.length&&(this.children[i].beforePosition||this.children[i].dom.parentNode!=this.contentDOM);)offset+=this.children[i++].size;var child=i==this.children.length?null:this.children[i];if(offset==pos&&(0==side||!child||!child.size||child.border||side<0&&first)||child&&child.domAtom&&pos<offset+child.size)return{node:this.contentDOM,offset:child?domIndex(child.dom):this.contentDOM.childNodes.length};if(!child)throw new Error("Invalid position "+pos);var end=offset+child.size;if(!child.domAtom&&(side<0&&!child.border?end>=pos:end>pos)&&(end>pos||i+1>=this.children.length||!this.children[i+1].beforePosition))return child.domFromPos(pos-offset-child.border,side);offset=end}},index_es_ViewDesc.prototype.parseRange=function parseRange(from,to,base){if(void 0===base&&(base=0),0==this.children.length)return{node:this.contentDOM,from:from,to:to,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var fromOffset=-1,toOffset=-1,offset=base,i=0;;i++){var child=this.children[i],end=offset+child.size;if(-1==fromOffset&&from<=end){var childBase=offset+child.border;if(from>=childBase&&to<=end-child.border&&child.node&&child.contentDOM&&this.contentDOM.contains(child.contentDOM))return child.parseRange(from,to,childBase);from=offset;for(var j=i;j>0;j--){var prev=this.children[j-1];if(prev.size&&prev.dom.parentNode==this.contentDOM&&!prev.emptyChildAt(1)){fromOffset=domIndex(prev.dom)+1;break}from-=prev.size}-1==fromOffset&&(fromOffset=0)}if(fromOffset>-1&&(end>to||i==this.children.length-1)){to=end;for(var j$1=i+1;j$1<this.children.length;j$1++){var next=this.children[j$1];if(next.size&&next.dom.parentNode==this.contentDOM&&!next.emptyChildAt(-1)){toOffset=domIndex(next.dom);break}to+=next.size}-1==toOffset&&(toOffset=this.contentDOM.childNodes.length);break}offset=end}return{node:this.contentDOM,from:from,to:to,fromOffset:fromOffset,toOffset:toOffset}},index_es_ViewDesc.prototype.emptyChildAt=function emptyChildAt(side){if(this.border||!this.contentDOM||!this.children.length)return!1;var child=this.children[side<0?0:this.children.length-1];return 0==child.size||child.emptyChildAt(side)},index_es_ViewDesc.prototype.domAfterPos=function domAfterPos(pos){var ref=this.domFromPos(pos,0),node=ref.node,offset=ref.offset;if(1!=node.nodeType||offset==node.childNodes.length)throw new RangeError("No node after pos "+pos);return node.childNodes[offset]},index_es_ViewDesc.prototype.setSelection=function setSelection(anchor,head,root,force){for(var from=Math.min(anchor,head),to=Math.max(anchor,head),i=0,offset=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(from>offset&&to<end)return child.setSelection(anchor-offset-child.border,head-offset-child.border,root,force);offset=end}var anchorDOM=this.domFromPos(anchor,anchor?-1:1),headDOM=head==anchor?anchorDOM:this.domFromPos(head,head?-1:1),domSel=root.getSelection(),brKludge=!1;if((index_es_result.gecko||index_es_result.safari)&&anchor==head){var node=anchorDOM.node,offset$1=anchorDOM.offset;if(3==node.nodeType){if((brKludge=offset$1&&"\n"==node.nodeValue[offset$1-1])&&offset$1==node.nodeValue.length)for(var scan=node,after=void 0;scan;scan=scan.parentNode){if(after=scan.nextSibling){"BR"==after.nodeName&&(anchorDOM=headDOM={node:after.parentNode,offset:domIndex(after)+1});break}var desc=scan.pmViewDesc;if(desc&&desc.node&&desc.node.isBlock)break}}else{var prev=node.childNodes[offset$1-1];brKludge=prev&&("BR"==prev.nodeName||"false"==prev.contentEditable)}}if(index_es_result.gecko&&domSel.focusNode&&domSel.focusNode!=headDOM.node&&1==domSel.focusNode.nodeType){var after$1=domSel.focusNode.childNodes[domSel.focusOffset];after$1&&"false"==after$1.contentEditable&&(force=!0)}if(force||brKludge&&index_es_result.safari||!isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)||!isEquivalentPosition(headDOM.node,headDOM.offset,domSel.focusNode,domSel.focusOffset)){var domSelExtended=!1;if((domSel.extend||anchor==head)&&!brKludge){domSel.collapse(anchorDOM.node,anchorDOM.offset);try{anchor!=head&&domSel.extend(headDOM.node,headDOM.offset),domSelExtended=!0}catch(err){if(!(err instanceof DOMException))throw err}}if(!domSelExtended){if(anchor>head){var tmp=anchorDOM;anchorDOM=headDOM,headDOM=tmp}var range=document.createRange();range.setEnd(headDOM.node,headDOM.offset),range.setStart(anchorDOM.node,anchorDOM.offset),domSel.removeAllRanges(),domSel.addRange(range)}}},index_es_ViewDesc.prototype.ignoreMutation=function ignoreMutation(mutation){return!this.contentDOM&&"selection"!=mutation.type},prosemirror_view_dist_index_es_prototypeAccessors.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},index_es_ViewDesc.prototype.markDirty=function markDirty(from,to){for(var offset=0,i=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(offset==end?from<=end&&to>=offset:from<end&&to>offset){var startInside=offset+child.border,endInside=end-child.border;if(from>=startInside&&to<=endInside)return this.dirty=from==offset||to==end?2:1,void(from!=startInside||to!=endInside||!child.contentLost&&child.dom.parentNode==this.contentDOM?child.markDirty(from-startInside,to-startInside):child.dirty=3);child.dirty=3}offset=end}this.dirty=2},index_es_ViewDesc.prototype.markParentsDirty=function markParentsDirty(){for(var level=1,node=this.parent;node;node=node.parent,level++){var dirty=1==level?2:1;node.dirty<dirty&&(node.dirty=dirty)}},prosemirror_view_dist_index_es_prototypeAccessors.domAtom.get=function(){return!1},Object.defineProperties(index_es_ViewDesc.prototype,prosemirror_view_dist_index_es_prototypeAccessors);var nothing=[],WidgetViewDesc=function(ViewDesc){function WidgetViewDesc(parent,widget,view,pos){var self,dom=widget.type.toDOM;if("function"==typeof dom&&(dom=dom(view,(function(){return self?self.parent?self.parent.posBeforeChild(self):void 0:pos}))),!widget.type.spec.raw){if(1!=dom.nodeType){var wrap=document.createElement("span");wrap.appendChild(dom),dom=wrap}dom.contentEditable=!1,dom.classList.add("ProseMirror-widget")}ViewDesc.call(this,parent,nothing,dom,null),this.widget=widget,self=this}ViewDesc&&(WidgetViewDesc.__proto__=ViewDesc),WidgetViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),WidgetViewDesc.prototype.constructor=WidgetViewDesc;var prototypeAccessors$1={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return prototypeAccessors$1.beforePosition.get=function(){return this.widget.type.side<0},WidgetViewDesc.prototype.matchesWidget=function matchesWidget(widget){return 0==this.dirty&&widget.type.eq(this.widget.type)},WidgetViewDesc.prototype.parseRule=function parseRule(){return{ignore:!0}},WidgetViewDesc.prototype.stopEvent=function stopEvent(event){var stop=this.widget.spec.stopEvent;return!!stop&&stop(event)},WidgetViewDesc.prototype.ignoreMutation=function ignoreMutation(mutation){return"selection"!=mutation.type||this.widget.spec.ignoreSelection},prototypeAccessors$1.domAtom.get=function(){return!0},Object.defineProperties(WidgetViewDesc.prototype,prototypeAccessors$1),WidgetViewDesc}(index_es_ViewDesc),CompositionViewDesc=function(ViewDesc){function CompositionViewDesc(parent,dom,textDOM,text){ViewDesc.call(this,parent,nothing,dom,null),this.textDOM=textDOM,this.text=text}ViewDesc&&(CompositionViewDesc.__proto__=ViewDesc),CompositionViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),CompositionViewDesc.prototype.constructor=CompositionViewDesc;var prototypeAccessors$2={size:{configurable:!0}};return prototypeAccessors$2.size.get=function(){return this.text.length},CompositionViewDesc.prototype.localPosFromDOM=function localPosFromDOM(dom,offset){return dom!=this.textDOM?this.posAtStart+(offset?this.size:0):this.posAtStart+offset},CompositionViewDesc.prototype.domFromPos=function domFromPos(pos){return{node:this.textDOM,offset:pos}},CompositionViewDesc.prototype.ignoreMutation=function ignoreMutation(mut){return"characterData"===mut.type&&mut.target.nodeValue==mut.oldValue},Object.defineProperties(CompositionViewDesc.prototype,prototypeAccessors$2),CompositionViewDesc}(index_es_ViewDesc),index_es_MarkViewDesc=function(ViewDesc){function MarkViewDesc(parent,mark,dom,contentDOM){ViewDesc.call(this,parent,[],dom,contentDOM),this.mark=mark}return ViewDesc&&(MarkViewDesc.__proto__=ViewDesc),MarkViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),MarkViewDesc.prototype.constructor=MarkViewDesc,MarkViewDesc.create=function create(parent,mark,inline,view){var custom=view.nodeViews[mark.type.name],spec=custom&&custom(mark,view,inline);return spec&&spec.dom||(spec=DOMSerializer.renderSpec(document,mark.type.spec.toDOM(mark,inline))),new MarkViewDesc(parent,mark,spec.dom,spec.contentDOM||spec.dom)},MarkViewDesc.prototype.parseRule=function parseRule(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},MarkViewDesc.prototype.matchesMark=function matchesMark(mark){return 3!=this.dirty&&this.mark.eq(mark)},MarkViewDesc.prototype.markDirty=function markDirty(from,to){if(ViewDesc.prototype.markDirty.call(this,from,to),0!=this.dirty){for(var parent=this.parent;!parent.node;)parent=parent.parent;parent.dirty<this.dirty&&(parent.dirty=this.dirty),this.dirty=0}},MarkViewDesc.prototype.slice=function slice(from,to,view){var copy=MarkViewDesc.create(this.parent,this.mark,!0,view),nodes=this.children,size=this.size;to<size&&(nodes=replaceNodes(nodes,to,size,view)),from>0&&(nodes=replaceNodes(nodes,0,from,view));for(var i=0;i<nodes.length;i++)nodes[i].parent=copy;return copy.children=nodes,copy},MarkViewDesc}(index_es_ViewDesc),index_es_NodeViewDesc=function(ViewDesc){function NodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos){ViewDesc.call(this,parent,node.isLeaf?nothing:[],dom,contentDOM),this.nodeDOM=nodeDOM,this.node=node,this.outerDeco=outerDeco,this.innerDeco=innerDeco,contentDOM&&this.updateChildren(view,pos)}ViewDesc&&(NodeViewDesc.__proto__=ViewDesc),NodeViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),NodeViewDesc.prototype.constructor=NodeViewDesc;var prototypeAccessors$3={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return NodeViewDesc.create=function create(parent,node,outerDeco,innerDeco,view,pos){var assign,descObj,custom=view.nodeViews[node.type.name],spec=custom&&custom(node,view,(function(){return descObj?descObj.parent?descObj.parent.posBeforeChild(descObj):void 0:pos}),outerDeco,innerDeco),dom=spec&&spec.dom,contentDOM=spec&&spec.contentDOM;if(node.isText)if(dom){if(3!=dom.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else dom=document.createTextNode(node.text);else dom||(dom=(assign=DOMSerializer.renderSpec(document,node.type.spec.toDOM(node))).dom,contentDOM=assign.contentDOM);contentDOM||node.isText||"BR"==dom.nodeName||(dom.hasAttribute("contenteditable")||(dom.contentEditable=!1),node.type.spec.draggable&&(dom.draggable=!0));var nodeDOM=dom;return dom=applyOuterDeco(dom,outerDeco,node),spec?descObj=new CustomNodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,spec,view,pos+1):node.isText?new TextViewDesc(parent,node,outerDeco,innerDeco,dom,nodeDOM,view):new NodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos+1)},NodeViewDesc.prototype.parseRule=function parseRule(){var this$1=this;if(this.node.type.spec.reparseInView)return null;var rule={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(rule.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?rule.contentElement=this.contentDOM:rule.getContent=function(){return this$1.contentDOM?Fragment.empty:this$1.node.content},rule},NodeViewDesc.prototype.matchesNode=function matchesNode(node,outerDeco,innerDeco){return 0==this.dirty&&node.eq(this.node)&&sameOuterDeco(outerDeco,this.outerDeco)&&innerDeco.eq(this.innerDeco)},prototypeAccessors$3.size.get=function(){return this.node.nodeSize},prototypeAccessors$3.border.get=function(){return this.node.isLeaf?0:1},NodeViewDesc.prototype.updateChildren=function updateChildren(view,pos){var this$1=this,inline=this.node.inlineContent,off=pos,composition=inline&&view.composing&&this.localCompositionNode(view,pos),updater=new ViewTreeUpdater(this,composition&&composition.node);!function iterDeco(parent,deco,onWidget,onNode){var locals=deco.locals(parent),offset=0;if(0==locals.length){for(var i=0;i<parent.childCount;i++){var child=parent.child(i);onNode(child,locals,deco.forChild(offset,child),i),offset+=child.nodeSize}return}for(var decoIndex=0,active=[],restNode=null,parentIndex=0;;){if(decoIndex<locals.length&&locals[decoIndex].to==offset){for(var widget=locals[decoIndex++],widgets=void 0;decoIndex<locals.length&&locals[decoIndex].to==offset;)(widgets||(widgets=[widget])).push(locals[decoIndex++]);if(widgets){widgets.sort(compareSide);for(var i$1=0;i$1<widgets.length;i$1++)onWidget(widgets[i$1],parentIndex,!!restNode)}else onWidget(widget,parentIndex,!!restNode)}var child$1=void 0,index=void 0;if(restNode)index=-1,child$1=restNode,restNode=null;else{if(!(parentIndex<parent.childCount))break;index=parentIndex,child$1=parent.child(parentIndex++)}for(var i$2=0;i$2<active.length;i$2++)active[i$2].to<=offset&&active.splice(i$2--,1);for(;decoIndex<locals.length&&locals[decoIndex].from<=offset&&locals[decoIndex].to>offset;)active.push(locals[decoIndex++]);var end=offset+child$1.nodeSize;if(child$1.isText){var cutAt=end;decoIndex<locals.length&&locals[decoIndex].from<cutAt&&(cutAt=locals[decoIndex].from);for(var i$3=0;i$3<active.length;i$3++)active[i$3].to<cutAt&&(cutAt=active[i$3].to);cutAt<end&&(restNode=child$1.cut(cutAt-offset),child$1=child$1.cut(0,cutAt-offset),end=cutAt,index=-1)}onNode(child$1,active.length?child$1.isInline&&!child$1.isLeaf?active.filter((function(d){return!d.inline})):active.slice():nothing,deco.forChild(offset,child$1),index),offset=end}}(this.node,this.innerDeco,(function(widget,i,insideNode){widget.spec.marks?updater.syncToMarks(widget.spec.marks,inline,view):widget.type.side>=0&&!insideNode&&updater.syncToMarks(i==this$1.node.childCount?index_es_Mark.none:this$1.node.child(i).marks,inline,view),updater.placeWidget(widget,view,off)}),(function(child,outerDeco,innerDeco,i){updater.syncToMarks(child.marks,inline,view),updater.findNodeMatch(child,outerDeco,innerDeco,i)||updater.updateNextNode(child,outerDeco,innerDeco,view,i)||updater.addNode(child,outerDeco,innerDeco,view,off),off+=child.nodeSize})),updater.syncToMarks(nothing,inline,view),this.node.isTextblock&&updater.addTextblockHacks(),updater.destroyRest(),(updater.changed||2==this.dirty)&&(composition&&this.protectLocalComposition(view,composition),renderDescs(this.contentDOM,this.children,view),index_es_result.ios&&function iosHacks(dom){if("UL"==dom.nodeName||"OL"==dom.nodeName){var oldCSS=dom.style.cssText;dom.style.cssText=oldCSS+"; list-style: square !important",window.getComputedStyle(dom).listStyle,dom.style.cssText=oldCSS}}(this.dom))},NodeViewDesc.prototype.localCompositionNode=function localCompositionNode(view,pos){var ref=view.state.selection,from=ref.from,to=ref.to;if(!(!(view.state.selection instanceof index_es_TextSelection)||from<pos||to>pos+this.node.content.size)){var sel=view.root.getSelection(),textNode=function nearbyTextNode(node,offset){for(;;){if(3==node.nodeType)return node;if(1==node.nodeType&&offset>0){if(node.childNodes.length>offset&&3==node.childNodes[offset].nodeType)return node.childNodes[offset];offset=nodeSize(node=node.childNodes[offset-1])}else{if(!(1==node.nodeType&&offset<node.childNodes.length))return null;node=node.childNodes[offset],offset=0}}}(sel.focusNode,sel.focusOffset);if(textNode&&this.dom.contains(textNode.parentNode)){var text=textNode.nodeValue,textPos=function findTextInFragment(frag,text,from,to){for(var i=0,pos=0;i<frag.childCount&&pos<=to;){var child=frag.child(i++),childStart=pos;if(pos+=child.nodeSize,child.isText){for(var str=child.text;i<frag.childCount;){var next=frag.child(i++);if(pos+=next.nodeSize,!next.isText)break;str+=next.text}if(pos>=from){var found=str.lastIndexOf(text,to-childStart);if(found>=0&&found+text.length+childStart>=from)return childStart+found}}}return-1}(this.node.content,text,from-pos,to-pos);return textPos<0?null:{node:textNode,pos:textPos,text:text}}}},NodeViewDesc.prototype.protectLocalComposition=function protectLocalComposition(view,ref){var node=ref.node,pos=ref.pos,text=ref.text;if(!this.getDesc(node)){for(var topNode=node;topNode.parentNode!=this.contentDOM;topNode=topNode.parentNode){for(;topNode.previousSibling;)topNode.parentNode.removeChild(topNode.previousSibling);for(;topNode.nextSibling;)topNode.parentNode.removeChild(topNode.nextSibling);topNode.pmViewDesc&&(topNode.pmViewDesc=null)}var desc=new CompositionViewDesc(this,topNode,node,text);view.compositionNodes.push(desc),this.children=replaceNodes(this.children,pos,pos+text.length,view,desc)}},NodeViewDesc.prototype.update=function update(node,outerDeco,innerDeco,view){return!(3==this.dirty||!node.sameMarkup(this.node))&&(this.updateInner(node,outerDeco,innerDeco,view),!0)},NodeViewDesc.prototype.updateInner=function updateInner(node,outerDeco,innerDeco,view){this.updateOuterDeco(outerDeco),this.node=node,this.innerDeco=innerDeco,this.contentDOM&&this.updateChildren(view,this.posAtStart),this.dirty=0},NodeViewDesc.prototype.updateOuterDeco=function updateOuterDeco(outerDeco){if(!sameOuterDeco(outerDeco,this.outerDeco)){var needsWrap=1!=this.nodeDOM.nodeType,oldDOM=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,needsWrap),computeOuterDeco(outerDeco,this.node,needsWrap)),this.dom!=oldDOM&&(oldDOM.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=outerDeco}},NodeViewDesc.prototype.selectNode=function selectNode(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},NodeViewDesc.prototype.deselectNode=function deselectNode(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},prototypeAccessors$3.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(NodeViewDesc.prototype,prototypeAccessors$3),NodeViewDesc}(index_es_ViewDesc);function docViewDesc(doc,outerDeco,innerDeco,dom,view){return applyOuterDeco(dom,outerDeco,doc),new index_es_NodeViewDesc(null,doc,outerDeco,innerDeco,dom,dom,dom,view,0)}var TextViewDesc=function(NodeViewDesc){function TextViewDesc(parent,node,outerDeco,innerDeco,dom,nodeDOM,view){NodeViewDesc.call(this,parent,node,outerDeco,innerDeco,dom,null,nodeDOM,view)}NodeViewDesc&&(TextViewDesc.__proto__=NodeViewDesc),TextViewDesc.prototype=Object.create(NodeViewDesc&&NodeViewDesc.prototype),TextViewDesc.prototype.constructor=TextViewDesc;var prototypeAccessors$4={domAtom:{configurable:!0}};return TextViewDesc.prototype.parseRule=function parseRule(){for(var skip=this.nodeDOM.parentNode;skip&&skip!=this.dom&&!skip.pmIsDeco;)skip=skip.parentNode;return{skip:skip||!0}},TextViewDesc.prototype.update=function update(node,outerDeco,_,view){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!node.sameMarkup(this.node))&&(this.updateOuterDeco(outerDeco),0==this.dirty&&node.text==this.node.text||node.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=node.text,view.trackWrites==this.nodeDOM&&(view.trackWrites=null)),this.node=node,this.dirty=0,!0)},TextViewDesc.prototype.inParent=function inParent(){for(var parentDOM=this.parent.contentDOM,n=this.nodeDOM;n;n=n.parentNode)if(n==parentDOM)return!0;return!1},TextViewDesc.prototype.domFromPos=function domFromPos(pos){return{node:this.nodeDOM,offset:pos}},TextViewDesc.prototype.localPosFromDOM=function localPosFromDOM(dom,offset,bias){return dom==this.nodeDOM?this.posAtStart+Math.min(offset,this.node.text.length):NodeViewDesc.prototype.localPosFromDOM.call(this,dom,offset,bias)},TextViewDesc.prototype.ignoreMutation=function ignoreMutation(mutation){return"characterData"!=mutation.type&&"selection"!=mutation.type},TextViewDesc.prototype.slice=function slice(from,to,view){var node=this.node.cut(from,to),dom=document.createTextNode(node.text);return new TextViewDesc(this.parent,node,this.outerDeco,this.innerDeco,dom,dom,view)},TextViewDesc.prototype.markDirty=function markDirty(from,to){NodeViewDesc.prototype.markDirty.call(this,from,to),this.dom==this.nodeDOM||0!=from&&to!=this.nodeDOM.nodeValue.length||(this.dirty=3)},prototypeAccessors$4.domAtom.get=function(){return!1},Object.defineProperties(TextViewDesc.prototype,prototypeAccessors$4),TextViewDesc}(index_es_NodeViewDesc),TrailingHackViewDesc=function(ViewDesc){function TrailingHackViewDesc(){ViewDesc.apply(this,arguments)}ViewDesc&&(TrailingHackViewDesc.__proto__=ViewDesc),TrailingHackViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),TrailingHackViewDesc.prototype.constructor=TrailingHackViewDesc;var prototypeAccessors$5={domAtom:{configurable:!0}};return TrailingHackViewDesc.prototype.parseRule=function parseRule(){return{ignore:!0}},TrailingHackViewDesc.prototype.matchesHack=function matchesHack(nodeName){return 0==this.dirty&&this.dom.nodeName==nodeName},prototypeAccessors$5.domAtom.get=function(){return!0},Object.defineProperties(TrailingHackViewDesc.prototype,prototypeAccessors$5),TrailingHackViewDesc}(index_es_ViewDesc),CustomNodeViewDesc=function(NodeViewDesc){function CustomNodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,spec,view,pos){NodeViewDesc.call(this,parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos),this.spec=spec}return NodeViewDesc&&(CustomNodeViewDesc.__proto__=NodeViewDesc),CustomNodeViewDesc.prototype=Object.create(NodeViewDesc&&NodeViewDesc.prototype),CustomNodeViewDesc.prototype.constructor=CustomNodeViewDesc,CustomNodeViewDesc.prototype.update=function update(node,outerDeco,innerDeco,view){if(3==this.dirty)return!1;if(this.spec.update){var result=this.spec.update(node,outerDeco,innerDeco);return result&&this.updateInner(node,outerDeco,innerDeco,view),result}return!(!this.contentDOM&&!node.isLeaf)&&NodeViewDesc.prototype.update.call(this,node,outerDeco,innerDeco,view)},CustomNodeViewDesc.prototype.selectNode=function selectNode(){this.spec.selectNode?this.spec.selectNode():NodeViewDesc.prototype.selectNode.call(this)},CustomNodeViewDesc.prototype.deselectNode=function deselectNode(){this.spec.deselectNode?this.spec.deselectNode():NodeViewDesc.prototype.deselectNode.call(this)},CustomNodeViewDesc.prototype.setSelection=function setSelection(anchor,head,root,force){this.spec.setSelection?this.spec.setSelection(anchor,head,root):NodeViewDesc.prototype.setSelection.call(this,anchor,head,root,force)},CustomNodeViewDesc.prototype.destroy=function destroy(){this.spec.destroy&&this.spec.destroy(),NodeViewDesc.prototype.destroy.call(this)},CustomNodeViewDesc.prototype.stopEvent=function stopEvent(event){return!!this.spec.stopEvent&&this.spec.stopEvent(event)},CustomNodeViewDesc.prototype.ignoreMutation=function ignoreMutation(mutation){return this.spec.ignoreMutation?this.spec.ignoreMutation(mutation):NodeViewDesc.prototype.ignoreMutation.call(this,mutation)},CustomNodeViewDesc}(index_es_NodeViewDesc);function renderDescs(parentDOM,descs,view){for(var dom=parentDOM.firstChild,written=!1,i=0;i<descs.length;i++){var desc=descs[i],childDOM=desc.dom;if(childDOM.parentNode==parentDOM){for(;childDOM!=dom;)dom=rm(dom),written=!0;dom=dom.nextSibling}else written=!0,parentDOM.insertBefore(childDOM,dom);if(desc instanceof index_es_MarkViewDesc){var pos=dom?dom.previousSibling:parentDOM.lastChild;renderDescs(desc.contentDOM,desc.children,view),dom=pos?pos.nextSibling:parentDOM.firstChild}}for(;dom;)dom=rm(dom),written=!0;written&&view.trackWrites==parentDOM&&(view.trackWrites=null)}function OuterDecoLevel(nodeName){nodeName&&(this.nodeName=nodeName)}OuterDecoLevel.prototype=Object.create(null);var noDeco=[new OuterDecoLevel];function computeOuterDeco(outerDeco,node,needsWrap){if(0==outerDeco.length)return noDeco;for(var top=needsWrap?noDeco[0]:new OuterDecoLevel,result=[top],i=0;i<outerDeco.length;i++){var attrs=outerDeco[i].type.attrs;if(attrs)for(var name in attrs.nodeName&&result.push(top=new OuterDecoLevel(attrs.nodeName)),attrs){var val=attrs[name];null!=val&&(needsWrap&&1==result.length&&result.push(top=new OuterDecoLevel(node.isInline?"span":"div")),"class"==name?top.class=(top.class?top.class+" ":"")+val:"style"==name?top.style=(top.style?top.style+";":"")+val:"nodeName"!=name&&(top[name]=val))}}return result}function patchOuterDeco(outerDOM,nodeDOM,prevComputed,curComputed){if(prevComputed==noDeco&&curComputed==noDeco)return nodeDOM;for(var curDOM=nodeDOM,i=0;i<curComputed.length;i++){var deco=curComputed[i],prev=prevComputed[i];if(i){var parent=void 0;prev&&prev.nodeName==deco.nodeName&&curDOM!=outerDOM&&(parent=curDOM.parentNode)&&parent.tagName.toLowerCase()==deco.nodeName||((parent=document.createElement(deco.nodeName)).pmIsDeco=!0,parent.appendChild(curDOM),prev=noDeco[0]),curDOM=parent}patchAttributes(curDOM,prev||noDeco[0],deco)}return curDOM}function patchAttributes(dom,prev,cur){for(var name in prev)"class"==name||"style"==name||"nodeName"==name||name in cur||dom.removeAttribute(name);for(var name$1 in cur)"class"!=name$1&&"style"!=name$1&&"nodeName"!=name$1&&cur[name$1]!=prev[name$1]&&dom.setAttribute(name$1,cur[name$1]);if(prev.class!=cur.class){for(var prevList=prev.class?prev.class.split(" ").filter(Boolean):nothing,curList=cur.class?cur.class.split(" ").filter(Boolean):nothing,i=0;i<prevList.length;i++)-1==curList.indexOf(prevList[i])&&dom.classList.remove(prevList[i]);for(var i$1=0;i$1<curList.length;i$1++)-1==prevList.indexOf(curList[i$1])&&dom.classList.add(curList[i$1])}if(prev.style!=cur.style){if(prev.style)for(var m,prop=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;m=prop.exec(prev.style);)dom.style.removeProperty(m[1]);cur.style&&(dom.style.cssText+=cur.style)}}function applyOuterDeco(dom,deco,node){return patchOuterDeco(dom,dom,noDeco,computeOuterDeco(deco,node,1!=dom.nodeType))}function sameOuterDeco(a,b){if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!a[i].type.eq(b[i].type))return!1;return!0}function rm(dom){var next=dom.nextSibling;return dom.parentNode.removeChild(dom),next}var ViewTreeUpdater=function ViewTreeUpdater(top,lockedNode){this.top=top,this.lock=lockedNode,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function preMatch(frag,descs){for(var fI=frag.childCount,dI=descs.length,matched=new Map;fI>0&&dI>0;dI--){var desc=descs[dI-1],node=desc.node;if(node){if(node!=frag.child(fI-1))break;--fI,matched.set(desc,fI)}}return{index:fI,matched:matched}}(top.node.content,top.children)};function compareSide(a,b){return a.type.side-b.type.side}function replaceNodes(nodes,from,to,view,replacement){for(var result=[],i=0,off=0;i<nodes.length;i++){var child=nodes[i],start=off,end=off+=child.size;start>=to||end<=from?result.push(child):(start<from&&result.push(child.slice(0,from-start,view)),replacement&&(result.push(replacement),replacement=null),end>to&&result.push(child.slice(to-start,child.size,view)))}return result}function selectionFromDOM(view,origin){var domSel=view.root.getSelection(),doc=view.state.doc;if(!domSel.focusNode)return null;var nearestDesc=view.docView.nearestDesc(domSel.focusNode),inWidget=nearestDesc&&0==nearestDesc.size,head=view.docView.posFromDOM(domSel.focusNode,domSel.focusOffset);if(head<0)return null;var $anchor,selection,$head=doc.resolve(head);if(selectionCollapsed(domSel)){for($anchor=$head;nearestDesc&&!nearestDesc.node;)nearestDesc=nearestDesc.parent;if(nearestDesc&&nearestDesc.node.isAtom&&index_es_NodeSelection.isSelectable(nearestDesc.node)&&nearestDesc.parent&&(!nearestDesc.node.isInline||!function isOnEdge(node,offset,parent){for(var atStart=0==offset,atEnd=offset==nodeSize(node);atStart||atEnd;){if(node==parent)return!0;var index=domIndex(node);if(!(node=node.parentNode))return!1;atStart=atStart&&0==index,atEnd=atEnd&&index==nodeSize(node)}}(domSel.focusNode,domSel.focusOffset,nearestDesc.dom))){var pos=nearestDesc.posBefore;selection=new index_es_NodeSelection(head==pos?$head:doc.resolve(pos))}}else{var anchor=view.docView.posFromDOM(domSel.anchorNode,domSel.anchorOffset);if(anchor<0)return null;$anchor=doc.resolve(anchor)}selection||(selection=selectionBetween(view,$anchor,$head,"pointer"==origin||view.state.selection.head<$head.pos&&!inWidget?1:-1));return selection}function editorOwnsSelection(view){return view.editable?view.hasFocus():hasSelection(view)&&document.activeElement&&document.activeElement.contains(view.dom)}function selectionToDOM(view,force){var sel=view.state.selection;if(syncNodeSelection(view,sel),editorOwnsSelection(view)){if(view.domObserver.disconnectSelection(),view.cursorWrapper)!function selectCursorWrapper(view){var domSel=view.root.getSelection(),range=document.createRange(),node=view.cursorWrapper.dom,img="IMG"==node.nodeName;img?range.setEnd(node.parentNode,domIndex(node)+1):range.setEnd(node,0);range.collapse(!1),domSel.removeAllRanges(),domSel.addRange(range),!img&&!view.state.selection.visible&&index_es_result.ie&&index_es_result.ie_version<=11&&(node.disabled=!0,node.disabled=!1)}(view);else{var resetEditableFrom,resetEditableTo,anchor=sel.anchor,head=sel.head;!brokenSelectBetweenUneditable||sel instanceof index_es_TextSelection||(sel.$from.parent.inlineContent||(resetEditableFrom=temporarilyEditableNear(view,sel.from)),sel.empty||sel.$from.parent.inlineContent||(resetEditableTo=temporarilyEditableNear(view,sel.to))),view.docView.setSelection(anchor,head,view.root,force),brokenSelectBetweenUneditable&&(resetEditableFrom&&resetEditable(resetEditableFrom),resetEditableTo&&resetEditable(resetEditableTo)),sel.visible?view.dom.classList.remove("ProseMirror-hideselection"):(view.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function removeClassOnSelectionChange(view){var doc=view.dom.ownerDocument;doc.removeEventListener("selectionchange",view.hideSelectionGuard);var domSel=view.root.getSelection(),node=domSel.anchorNode,offset=domSel.anchorOffset;doc.addEventListener("selectionchange",view.hideSelectionGuard=function(){domSel.anchorNode==node&&domSel.anchorOffset==offset||(doc.removeEventListener("selectionchange",view.hideSelectionGuard),setTimeout((function(){editorOwnsSelection(view)&&!view.state.selection.visible||view.dom.classList.remove("ProseMirror-hideselection")}),20))})}(view))}view.domObserver.setCurSelection(),view.domObserver.connectSelection()}}ViewTreeUpdater.prototype.destroyBetween=function destroyBetween(start,end){if(start!=end){for(var i=start;i<end;i++)this.top.children[i].destroy();this.top.children.splice(start,end-start),this.changed=!0}},ViewTreeUpdater.prototype.destroyRest=function destroyRest(){this.destroyBetween(this.index,this.top.children.length)},ViewTreeUpdater.prototype.syncToMarks=function syncToMarks(marks,inline,view){for(var keep=0,depth=this.stack.length>>1,maxKeep=Math.min(depth,marks.length);keep<maxKeep&&(keep==depth-1?this.top:this.stack[keep+1<<1]).matchesMark(marks[keep])&&!1!==marks[keep].type.spec.spanning;)keep++;for(;keep<depth;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),depth--;for(;depth<marks.length;){this.stack.push(this.top,this.index+1);for(var found=-1,i=this.index;i<Math.min(this.index+3,this.top.children.length);i++)if(this.top.children[i].matchesMark(marks[depth])){found=i;break}if(found>-1)found>this.index&&(this.changed=!0,this.destroyBetween(this.index,found)),this.top=this.top.children[this.index];else{var markDesc=index_es_MarkViewDesc.create(this.top,marks[depth],inline,view);this.top.children.splice(this.index,0,markDesc),this.top=markDesc,this.changed=!0}this.index=0,depth++}},ViewTreeUpdater.prototype.findNodeMatch=function findNodeMatch(node,outerDeco,innerDeco,index){var children=this.top.children,found=-1;if(index>=this.preMatch.index){for(var i=this.index;i<children.length;i++)if(children[i].matchesNode(node,outerDeco,innerDeco)){found=i;break}}else for(var i$1=this.index,e=Math.min(children.length,i$1+1);i$1<e;i$1++){var child=children[i$1];if(child.matchesNode(node,outerDeco,innerDeco)&&!this.preMatch.matched.has(child)){found=i$1;break}}return!(found<0)&&(this.destroyBetween(this.index,found),this.index++,!0)},ViewTreeUpdater.prototype.updateNextNode=function updateNextNode(node,outerDeco,innerDeco,view,index){for(var i=this.index;i<this.top.children.length;i++){var next=this.top.children[i];if(next instanceof index_es_NodeViewDesc){var preMatch=this.preMatch.matched.get(next);if(null!=preMatch&&preMatch!=index)return!1;var nextDOM=next.dom;if(!(this.lock&&(nextDOM==this.lock||1==nextDOM.nodeType&&nextDOM.contains(this.lock.parentNode))&&!(node.isText&&next.node&&next.node.isText&&next.nodeDOM.nodeValue==node.text&&3!=next.dirty&&sameOuterDeco(outerDeco,next.outerDeco)))&&next.update(node,outerDeco,innerDeco,view))return this.destroyBetween(this.index,i),next.dom!=nextDOM&&(this.changed=!0),this.index++,!0;break}}return!1},ViewTreeUpdater.prototype.addNode=function addNode(node,outerDeco,innerDeco,view,pos){this.top.children.splice(this.index++,0,index_es_NodeViewDesc.create(this.top,node,outerDeco,innerDeco,view,pos)),this.changed=!0},ViewTreeUpdater.prototype.placeWidget=function placeWidget(widget,view,pos){var next=this.index<this.top.children.length?this.top.children[this.index]:null;if(!next||!next.matchesWidget(widget)||widget!=next.widget&&next.widget.type.toDOM.parentNode){var desc=new WidgetViewDesc(this.top,widget,view,pos);this.top.children.splice(this.index++,0,desc),this.changed=!0}else this.index++},ViewTreeUpdater.prototype.addTextblockHacks=function addTextblockHacks(){for(var lastChild=this.top.children[this.index-1];lastChild instanceof index_es_MarkViewDesc;)lastChild=lastChild.children[lastChild.children.length-1];lastChild&&lastChild instanceof TextViewDesc&&!/\n$/.test(lastChild.node.text)||(index_es_result.safari&&lastChild&&"false"==lastChild.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},ViewTreeUpdater.prototype.addHackNode=function addHackNode(nodeName){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(nodeName))this.index++;else{var dom=document.createElement(nodeName);this.top.children.splice(this.index++,0,new TrailingHackViewDesc(this.top,nothing,dom,null)),this.changed=!0}};var brokenSelectBetweenUneditable=index_es_result.safari||index_es_result.chrome&&index_es_result.chrome_version<63;function temporarilyEditableNear(view,pos){var ref=view.docView.domFromPos(pos,0),node=ref.node,offset=ref.offset,after=offset<node.childNodes.length?node.childNodes[offset]:null,before=offset?node.childNodes[offset-1]:null;if(index_es_result.safari&&after&&"false"==after.contentEditable)return setEditable(after);if(!(after&&"false"!=after.contentEditable||before&&"false"!=before.contentEditable)){if(after)return setEditable(after);if(before)return setEditable(before)}}function setEditable(element){return element.contentEditable="true",index_es_result.safari&&element.draggable&&(element.draggable=!1,element.wasDraggable=!0),element}function resetEditable(element){element.contentEditable="false",element.wasDraggable&&(element.draggable=!0,element.wasDraggable=null)}function syncNodeSelection(view,sel){if(sel instanceof index_es_NodeSelection){var desc=view.docView.descAt(sel.from);desc!=view.lastSelectedViewDesc&&(clearNodeSelection(view),desc&&desc.selectNode(),view.lastSelectedViewDesc=desc)}else clearNodeSelection(view)}function clearNodeSelection(view){view.lastSelectedViewDesc&&(view.lastSelectedViewDesc.parent&&view.lastSelectedViewDesc.deselectNode(),view.lastSelectedViewDesc=null)}function selectionBetween(view,$anchor,$head,bias){return view.someProp("createSelectionBetween",(function(f){return f(view,$anchor,$head)}))||index_es_TextSelection.between($anchor,$head,bias)}function hasSelection(view){var sel=view.root.getSelection();if(!sel.anchorNode)return!1;try{return view.dom.contains(3==sel.anchorNode.nodeType?sel.anchorNode.parentNode:sel.anchorNode)&&(view.editable||view.dom.contains(3==sel.focusNode.nodeType?sel.focusNode.parentNode:sel.focusNode))}catch(_){return!1}}function moveSelectionBlock(state,dir){var ref=state.selection,$anchor=ref.$anchor,$head=ref.$head,$side=dir>0?$anchor.max($head):$anchor.min($head),$start=$side.parent.inlineContent?$side.depth?state.doc.resolve(dir>0?$side.after():$side.before()):null:$side;return $start&&index_es_Selection.findFrom($start,dir)}function index_es_apply(view,sel){return view.dispatch(view.state.tr.setSelection(sel).scrollIntoView()),!0}function selectHorizontally(view,dir,mods){var sel=view.state.selection;if(!(sel instanceof index_es_TextSelection)){if(sel instanceof index_es_NodeSelection&&sel.node.isInline)return index_es_apply(view,new index_es_TextSelection(dir>0?sel.$to:sel.$from));var next$1=moveSelectionBlock(view.state,dir);return!!next$1&&index_es_apply(view,next$1)}if(!sel.empty||mods.indexOf("s")>-1)return!1;if(view.endOfTextblock(dir>0?"right":"left")){var next=moveSelectionBlock(view.state,dir);return!!(next&&next instanceof index_es_NodeSelection)&&index_es_apply(view,next)}if(!(index_es_result.mac&&mods.indexOf("m")>-1)){var desc,$head=sel.$head,node=$head.textOffset?null:dir<0?$head.nodeBefore:$head.nodeAfter;if(!node||node.isText)return!1;var nodePos=dir<0?$head.pos-node.nodeSize:$head.pos;return!!(node.isAtom||(desc=view.docView.descAt(nodePos))&&!desc.contentDOM)&&(index_es_NodeSelection.isSelectable(node)?index_es_apply(view,new index_es_NodeSelection(dir<0?view.state.doc.resolve($head.pos-node.nodeSize):$head)):!!index_es_result.webkit&&index_es_apply(view,new index_es_TextSelection(view.state.doc.resolve(dir<0?nodePos:nodePos+node.nodeSize))))}}function nodeLen(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function isIgnorable(dom){var desc=dom.pmViewDesc;return desc&&0==desc.size&&(dom.nextSibling||"BR"!=dom.nodeName)}function skipIgnoredNodesLeft(view){var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;if(node){var moveNode,moveOffset,force=!1;for(index_es_result.gecko&&1==node.nodeType&&offset<nodeLen(node)&&isIgnorable(node.childNodes[offset])&&(force=!0);;)if(offset>0){if(1!=node.nodeType)break;var before=node.childNodes[offset-1];if(isIgnorable(before))moveNode=node,moveOffset=--offset;else{if(3!=before.nodeType)break;offset=(node=before).nodeValue.length}}else{if(isBlockNode(node))break;for(var prev=node.previousSibling;prev&&isIgnorable(prev);)moveNode=node.parentNode,moveOffset=domIndex(prev),prev=prev.previousSibling;if(prev)offset=nodeLen(node=prev);else{if((node=node.parentNode)==view.dom)break;offset=0}}force?setSelFocus(view,sel,node,offset):moveNode&&setSelFocus(view,sel,moveNode,moveOffset)}}function skipIgnoredNodesRight(view){var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;if(node){for(var moveNode,moveOffset,len=nodeLen(node);;)if(offset<len){if(1!=node.nodeType)break;if(!isIgnorable(node.childNodes[offset]))break;moveNode=node,moveOffset=++offset}else{if(isBlockNode(node))break;for(var next=node.nextSibling;next&&isIgnorable(next);)moveNode=next.parentNode,moveOffset=domIndex(next)+1,next=next.nextSibling;if(next)offset=0,len=nodeLen(node=next);else{if((node=node.parentNode)==view.dom)break;offset=len=0}}moveNode&&setSelFocus(view,sel,moveNode,moveOffset)}}function isBlockNode(dom){var desc=dom.pmViewDesc;return desc&&desc.node&&desc.node.isBlock}function setSelFocus(view,sel,node,offset){if(selectionCollapsed(sel)){var range=document.createRange();range.setEnd(node,offset),range.setStart(node,offset),sel.removeAllRanges(),sel.addRange(range)}else sel.extend&&sel.extend(node,offset);view.domObserver.setCurSelection();var state=view.state;setTimeout((function(){view.state==state&&selectionToDOM(view)}),50)}function selectVertically(view,dir,mods){var sel=view.state.selection;if(sel instanceof index_es_TextSelection&&!sel.empty||mods.indexOf("s")>-1)return!1;if(index_es_result.mac&&mods.indexOf("m")>-1)return!1;var $from=sel.$from,$to=sel.$to;if(!$from.parent.inlineContent||view.endOfTextblock(dir<0?"up":"down")){var next=moveSelectionBlock(view.state,dir);if(next&&next instanceof index_es_NodeSelection)return index_es_apply(view,next)}if(!$from.parent.inlineContent){var side=dir<0?$from:$to,beyond=sel instanceof index_es_AllSelection?index_es_Selection.near(side,dir):index_es_Selection.findFrom(side,dir);return!!beyond&&index_es_apply(view,beyond)}return!1}function stopNativeHorizontalDelete(view,dir){if(!(view.state.selection instanceof index_es_TextSelection))return!0;var ref=view.state.selection,$head=ref.$head,$anchor=ref.$anchor,empty=ref.empty;if(!$head.sameParent($anchor))return!0;if(!empty)return!1;if(view.endOfTextblock(dir>0?"forward":"backward"))return!0;var nextNode=!$head.textOffset&&(dir<0?$head.nodeBefore:$head.nodeAfter);if(nextNode&&!nextNode.isText){var tr=view.state.tr;return dir<0?tr.delete($head.pos-nextNode.nodeSize,$head.pos):tr.delete($head.pos,$head.pos+nextNode.nodeSize),view.dispatch(tr),!0}return!1}function switchEditable(view,node,state){view.domObserver.stop(),node.contentEditable=state,view.domObserver.start()}function captureKeyDown(view,event){var code=event.keyCode,mods=function getMods(event){var result="";return event.ctrlKey&&(result+="c"),event.metaKey&&(result+="m"),event.altKey&&(result+="a"),event.shiftKey&&(result+="s"),result}(event);return 8==code||index_es_result.mac&&72==code&&"c"==mods?stopNativeHorizontalDelete(view,-1)||skipIgnoredNodesLeft(view):46==code||index_es_result.mac&&68==code&&"c"==mods?stopNativeHorizontalDelete(view,1)||skipIgnoredNodesRight(view):13==code||27==code||(37==code?selectHorizontally(view,-1,mods)||skipIgnoredNodesLeft(view):39==code?selectHorizontally(view,1,mods)||skipIgnoredNodesRight(view):38==code?selectVertically(view,-1,mods)||skipIgnoredNodesLeft(view):40==code?function safariDownArrowBug(view){if(index_es_result.safari&&!(view.state.selection.$head.parentOffset>0)){var ref=view.root.getSelection(),focusNode=ref.focusNode,focusOffset=ref.focusOffset;if(focusNode&&1==focusNode.nodeType&&0==focusOffset&&focusNode.firstChild&&"false"==focusNode.firstChild.contentEditable){var child=focusNode.firstChild;switchEditable(view,child,!0),setTimeout((function(){return switchEditable(view,child,!1)}),20)}}}(view)||selectVertically(view,1,mods)||skipIgnoredNodesRight(view):mods==(index_es_result.mac?"m":"c")&&(66==code||73==code||89==code||90==code))}function ruleFromNode(dom){var desc=dom.pmViewDesc;if(desc)return desc.parseRule();if("BR"==dom.nodeName&&dom.parentNode){if(index_es_result.safari&&/^(ul|ol)$/i.test(dom.parentNode.nodeName)){var skip=document.createElement("div");return skip.appendChild(document.createElement("li")),{skip:skip}}if(dom.parentNode.lastChild==dom||index_es_result.safari&&/^(tr|table)$/i.test(dom.parentNode.nodeName))return{ignore:!0}}else if("IMG"==dom.nodeName&&dom.getAttribute("mark-placeholder"))return{ignore:!0}}function readDOMChange(view,from,to,typeOver,addedNodes){if(from<0){var origin=view.lastSelectionTime>Date.now()-50?view.lastSelectionOrigin:null,newSel=selectionFromDOM(view,origin);if(newSel&&!view.state.selection.eq(newSel)){var tr$1=view.state.tr.setSelection(newSel);"pointer"==origin?tr$1.setMeta("pointer",!0):"key"==origin&&tr$1.scrollIntoView(),view.dispatch(tr$1)}}else{var $before=view.state.doc.resolve(from),shared=$before.sharedDepth(to);from=$before.before(shared+1),to=view.state.doc.resolve(to).after(shared+1);var sel=view.state.selection,parse=function parseBetween(view,from_,to_){var ref=view.docView.parseRange(from_,to_),parent=ref.node,fromOffset=ref.fromOffset,toOffset=ref.toOffset,from=ref.from,to=ref.to,domSel=view.root.getSelection(),find=null,anchor=domSel.anchorNode;if(anchor&&view.dom.contains(1==anchor.nodeType?anchor:anchor.parentNode)&&(find=[{node:anchor,offset:domSel.anchorOffset}],selectionCollapsed(domSel)||find.push({node:domSel.focusNode,offset:domSel.focusOffset})),index_es_result.chrome&&8===view.lastKeyCode)for(var off=toOffset;off>fromOffset;off--){var node=parent.childNodes[off-1],desc=node.pmViewDesc;if("BR"==node.nodeName&&!desc){toOffset=off;break}if(!desc||desc.size)break}var startDoc=view.state.doc,parser=view.someProp("domParser")||DOMParser.fromSchema(view.state.schema),$from=startDoc.resolve(from),sel=null,doc=parser.parse(parent,{topNode:$from.parent,topMatch:$from.parent.contentMatchAt($from.index()),topOpen:!0,from:fromOffset,to:toOffset,preserveWhitespace:!$from.parent.type.spec.code||"full",editableContent:!0,findPositions:find,ruleFromNode:ruleFromNode,context:$from});if(find&&null!=find[0].pos){var anchor$1=find[0].pos,head=find[1]&&find[1].pos;null==head&&(head=anchor$1),sel={anchor:anchor$1+from,head:head+from}}return{doc:doc,sel:sel,from:from,to:to}}(view,from,to);if(index_es_result.chrome&&view.cursorWrapper&&parse.sel&&parse.sel.anchor==view.cursorWrapper.deco.from){var text=view.cursorWrapper.deco.type.toDOM.nextSibling,size=text&&text.nodeValue?text.nodeValue.length:1;parse.sel={anchor:parse.sel.anchor+size,head:parse.sel.anchor+size}}var preferredPos,preferredSide,doc=view.state.doc,compare=doc.slice(parse.from,parse.to);8===view.lastKeyCode&&Date.now()-100<view.lastKeyCodeTime?(preferredPos=view.state.selection.to,preferredSide="end"):(preferredPos=view.state.selection.from,preferredSide="start"),view.lastKeyCode=null;var change=function findDiff(a,b,pos,preferredPos,preferredSide){var start=a.findDiffStart(b,pos);if(null==start)return null;var ref=a.findDiffEnd(b,pos+a.size,pos+b.size),endA=ref.a,endB=ref.b;if("end"==preferredSide){preferredPos-=endA+Math.max(0,start-Math.min(endA,endB))-start}if(endA<start&&a.size<b.size){endB=(start-=preferredPos<=start&&preferredPos>=endA?start-preferredPos:0)+(endB-endA),endA=start}else if(endB<start){endA=(start-=preferredPos<=start&&preferredPos>=endB?start-preferredPos:0)+(endA-endB),endB=start}return{start:start,endA:endA,endB:endB}}(compare.content,parse.doc.content,parse.from,preferredPos,preferredSide);if(!change){if(!(typeOver&&sel instanceof index_es_TextSelection&&!sel.empty&&sel.$head.sameParent(sel.$anchor))||view.composing||parse.sel&&parse.sel.anchor!=parse.sel.head){if((index_es_result.ios&&view.lastIOSEnter>Date.now()-225||index_es_result.android)&&addedNodes.some((function(n){return"DIV"==n.nodeName||"P"==n.nodeName}))&&view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))})))return void(view.lastIOSEnter=0);if(parse.sel){var sel$1=resolveSelection(view,view.state.doc,parse.sel);sel$1&&!sel$1.eq(view.state.selection)&&view.dispatch(view.state.tr.setSelection(sel$1))}return}change={start:sel.from,endA:sel.to,endB:sel.to}}view.domChangeCount++,view.state.selection.from<view.state.selection.to&&change.start==change.endB&&view.state.selection instanceof index_es_TextSelection&&(change.start>view.state.selection.from&&change.start<=view.state.selection.from+2?change.start=view.state.selection.from:change.endA<view.state.selection.to&&change.endA>=view.state.selection.to-2&&(change.endB+=view.state.selection.to-change.endA,change.endA=view.state.selection.to)),index_es_result.ie&&index_es_result.ie_version<=11&&change.endB==change.start+1&&change.endA==change.start&&change.start>parse.from&&" "==parse.doc.textBetween(change.start-parse.from-1,change.start-parse.from+1)&&(change.start--,change.endA--,change.endB--);var nextSel,$from=parse.doc.resolveNoCache(change.start-parse.from),$to=parse.doc.resolveNoCache(change.endB-parse.from),inlineChange=$from.sameParent($to)&&$from.parent.inlineContent;if((index_es_result.ios&&view.lastIOSEnter>Date.now()-225&&(!inlineChange||addedNodes.some((function(n){return"DIV"==n.nodeName||"P"==n.nodeName})))||!inlineChange&&$from.pos<parse.doc.content.size&&(nextSel=index_es_Selection.findFrom(parse.doc.resolve($from.pos+1),1,!0))&&nextSel.head==$to.pos)&&view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))})))view.lastIOSEnter=0;else if(view.state.selection.anchor>change.start&&function looksLikeJoin(old,start,end,$newStart,$newEnd){if(!$newStart.parent.isTextblock||end-start<=$newEnd.pos-$newStart.pos||skipClosingAndOpening($newStart,!0,!1)<$newEnd.pos)return!1;var $start=old.resolve(start);if($start.parentOffset<$start.parent.content.size||!$start.parent.isTextblock)return!1;var $next=old.resolve(skipClosingAndOpening($start,!0,!0));if(!$next.parent.isTextblock||$next.pos>end||skipClosingAndOpening($next,!0,!1)<end)return!1;return $newStart.parent.content.cut($newStart.parentOffset).eq($next.parent.content)}(doc,change.start,change.endA,$from,$to)&&view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(8,"Backspace"))})))index_es_result.android&&index_es_result.chrome&&view.domObserver.suppressSelectionUpdates();else{index_es_result.chrome&&index_es_result.android&&change.toB==change.from&&(view.lastAndroidDelete=Date.now()),index_es_result.android&&!inlineChange&&$from.start()!=$to.start()&&0==$to.parentOffset&&$from.depth==$to.depth&&parse.sel&&parse.sel.anchor==parse.sel.head&&parse.sel.head==change.endA&&(change.endB-=2,$to=parse.doc.resolveNoCache(change.endB-parse.from),setTimeout((function(){view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))}))}),20));var tr,storedMarks,markChange,$from1,chFrom=change.start,chTo=change.endA;if(inlineChange)if($from.pos==$to.pos)index_es_result.ie&&index_es_result.ie_version<=11&&0==$from.parentOffset&&(view.domObserver.suppressSelectionUpdates(),setTimeout((function(){return selectionToDOM(view)}),20)),tr=view.state.tr.delete(chFrom,chTo),storedMarks=doc.resolve(change.start).marksAcross(doc.resolve(change.endA));else if(change.endA==change.endB&&($from1=doc.resolve(change.start))&&(markChange=function isMarkChange(cur,prev){for(var type,mark,update,curMarks=cur.firstChild.marks,prevMarks=prev.firstChild.marks,added=curMarks,removed=prevMarks,i=0;i<prevMarks.length;i++)added=prevMarks[i].removeFromSet(added);for(var i$1=0;i$1<curMarks.length;i$1++)removed=curMarks[i$1].removeFromSet(removed);if(1==added.length&&0==removed.length)mark=added[0],type="add",update=function(node){return node.mark(mark.addToSet(node.marks))};else{if(0!=added.length||1!=removed.length)return null;mark=removed[0],type="remove",update=function(node){return node.mark(mark.removeFromSet(node.marks))}}for(var updated=[],i$2=0;i$2<prev.childCount;i$2++)updated.push(update(prev.child(i$2)));if(Fragment.from(updated).eq(cur))return{mark:mark,type:type}}($from.parent.content.cut($from.parentOffset,$to.parentOffset),$from1.parent.content.cut($from1.parentOffset,change.endA-$from1.start()))))tr=view.state.tr,"add"==markChange.type?tr.addMark(chFrom,chTo,markChange.mark):tr.removeMark(chFrom,chTo,markChange.mark);else if($from.parent.child($from.index()).isText&&$from.index()==$to.index()-($to.textOffset?0:1)){var text$1=$from.parent.textBetween($from.parentOffset,$to.parentOffset);if(view.someProp("handleTextInput",(function(f){return f(view,chFrom,chTo,text$1)})))return;tr=view.state.tr.insertText(text$1,chFrom,chTo)}if(tr||(tr=view.state.tr.replace(chFrom,chTo,parse.doc.slice(change.start-parse.from,change.endB-parse.from))),parse.sel){var sel$2=resolveSelection(view,tr.doc,parse.sel);sel$2&&!(index_es_result.chrome&&index_es_result.android&&view.composing&&sel$2.empty&&(change.start!=change.endB||view.lastAndroidDelete<Date.now()-100)&&(sel$2.head==chFrom||sel$2.head==tr.mapping.map(chTo)-1)||index_es_result.ie&&sel$2.empty&&sel$2.head==chFrom)&&tr.setSelection(sel$2)}storedMarks&&tr.ensureMarks(storedMarks),view.dispatch(tr.scrollIntoView())}}}function resolveSelection(view,doc,parsedSel){return Math.max(parsedSel.anchor,parsedSel.head)>doc.content.size?null:selectionBetween(view,doc.resolve(parsedSel.anchor),doc.resolve(parsedSel.head))}function skipClosingAndOpening($pos,fromEnd,mayOpen){for(var depth=$pos.depth,end=fromEnd?$pos.end():$pos.pos;depth>0&&(fromEnd||$pos.indexAfter(depth)==$pos.node(depth).childCount);)depth--,end++,fromEnd=!1;if(mayOpen)for(var next=$pos.node(depth).maybeChild($pos.indexAfter(depth));next&&!next.isLeaf;)next=next.firstChild,end++;return end}function serializeForClipboard(view,slice){for(var context=[],content=slice.content,openStart=slice.openStart,openEnd=slice.openEnd;openStart>1&&openEnd>1&&1==content.childCount&&1==content.firstChild.childCount;){openStart--,openEnd--;var node=content.firstChild;context.push(node.type.name,node.attrs!=node.type.defaultAttrs?node.attrs:null),content=node.content}var serializer=view.someProp("clipboardSerializer")||DOMSerializer.fromSchema(view.state.schema),doc=detachedDoc(),wrap=doc.createElement("div");wrap.appendChild(serializer.serializeFragment(content,{document:doc}));for(var needsWrap,firstChild=wrap.firstChild;firstChild&&1==firstChild.nodeType&&(needsWrap=wrapMap[firstChild.nodeName.toLowerCase()]);){for(var i=needsWrap.length-1;i>=0;i--){for(var wrapper=doc.createElement(needsWrap[i]);wrap.firstChild;)wrapper.appendChild(wrap.firstChild);wrap.appendChild(wrapper)}firstChild=wrap.firstChild}return firstChild&&1==firstChild.nodeType&&firstChild.setAttribute("data-pm-slice",openStart+" "+openEnd+" "+JSON.stringify(context)),{dom:wrap,text:view.someProp("clipboardTextSerializer",(function(f){return f(slice)}))||slice.content.textBetween(0,slice.content.size,"\n\n")}}function parseFromClipboard(view,text,html,plainText,$context){var dom,slice,inCode=$context.parent.type.spec.code;if(!html&&!text)return null;var asText=text&&(plainText||inCode||!html);if(asText){if(view.someProp("transformPastedText",(function(f){text=f(text,inCode||plainText)})),inCode)return new Slice(Fragment.from(view.state.schema.text(text.replace(/\r\n?/g,"\n"))),0,0);var parsed=view.someProp("clipboardTextParser",(function(f){return f(text,$context,plainText)}));parsed?slice=parsed:(dom=document.createElement("div"),text.trim().split(/(?:\r\n?|\n)+/).forEach((function(block){dom.appendChild(document.createElement("p")).textContent=block})))}else view.someProp("transformPastedHTML",(function(f){html=f(html)})),dom=function readHTML(html){var metas=/^(\s*<meta [^>]*>)*/.exec(html);metas&&(html=html.slice(metas[0].length));var wrap,elt=detachedDoc().createElement("div"),firstTag=/<([a-z][^>\s]+)/i.exec(html);(wrap=firstTag&&wrapMap[firstTag[1].toLowerCase()])&&(html=wrap.map((function(n){return"<"+n+">"})).join("")+html+wrap.map((function(n){return"</"+n+">"})).reverse().join(""));if(elt.innerHTML=html,wrap)for(var i=0;i<wrap.length;i++)elt=elt.querySelector(wrap[i])||elt;return elt}(html);var contextNode=dom&&dom.querySelector("[data-pm-slice]"),sliceData=contextNode&&/^(\d+) (\d+) (.*)/.exec(contextNode.getAttribute("data-pm-slice"));if(!slice){var parser=view.someProp("clipboardParser")||view.someProp("domParser")||DOMParser.fromSchema(view.state.schema);slice=parser.parseSlice(dom,{preserveWhitespace:!(!asText&&!sliceData),context:$context})}return slice=sliceData?function addContext(slice,context){if(!slice.size)return slice;var array,schema=slice.content.firstChild.type.schema;try{array=JSON.parse(context)}catch(e){return slice}for(var content=slice.content,openStart=slice.openStart,openEnd=slice.openEnd,i=array.length-2;i>=0;i-=2){var type=schema.nodes[array[i]];if(!type||type.hasRequiredAttrs())break;content=Fragment.from(type.create(array[i+1],content)),openStart++,openEnd++}return new Slice(content,openStart,openEnd)}(function closeSlice(slice,openStart,openEnd){openStart<slice.openStart&&(slice=new Slice(closeRange(slice.content,-1,openStart,slice.openStart,0,slice.openEnd),openStart,slice.openEnd));openEnd<slice.openEnd&&(slice=new Slice(closeRange(slice.content,1,openEnd,slice.openEnd,0,0),slice.openStart,openEnd));return slice}(slice,+sliceData[1],+sliceData[2]),sliceData[3]):Slice.maxOpen(function normalizeSiblings(fragment,$context){if(fragment.childCount<2)return fragment;for(var loop=function(d){var match=$context.node(d).contentMatchAt($context.index(d)),lastWrap=void 0,result=[];if(fragment.forEach((function(node){if(result){var inLast,wrap=match.findWrapping(node.type);if(!wrap)return result=null;if(inLast=result.length&&lastWrap.length&&addToSibling(wrap,lastWrap,node,result[result.length-1],0))result[result.length-1]=inLast;else{result.length&&(result[result.length-1]=closeRight(result[result.length-1],lastWrap.length));var wrapped=withWrappers(node,wrap);result.push(wrapped),match=match.matchType(wrapped.type,wrapped.attrs),lastWrap=wrap}}})),result)return{v:Fragment.from(result)}},d=$context.depth;d>=0;d--){var returned=loop(d);if(returned)return returned.v}return fragment}(slice.content,$context),!1),view.someProp("transformPasted",(function(f){slice=f(slice)})),slice}function withWrappers(node,wrap,from){void 0===from&&(from=0);for(var i=wrap.length-1;i>=from;i--)node=wrap[i].create(null,Fragment.from(node));return node}function addToSibling(wrap,lastWrap,node,sibling,depth){if(depth<wrap.length&&depth<lastWrap.length&&wrap[depth]==lastWrap[depth]){var inner=addToSibling(wrap,lastWrap,node,sibling.lastChild,depth+1);if(inner)return sibling.copy(sibling.content.replaceChild(sibling.childCount-1,inner));if(sibling.contentMatchAt(sibling.childCount).matchType(depth==wrap.length-1?node.type:wrap[depth+1]))return sibling.copy(sibling.content.append(Fragment.from(withWrappers(node,wrap,depth+1))))}}function closeRight(node,depth){if(0==depth)return node;var fragment=node.content.replaceChild(node.childCount-1,closeRight(node.lastChild,depth-1)),fill=node.contentMatchAt(node.childCount).fillBefore(Fragment.empty,!0);return node.copy(fragment.append(fill))}function closeRange(fragment,side,from,to,depth,openEnd){var node=side<0?fragment.firstChild:fragment.lastChild,inner=node.content;return depth<to-1&&(inner=closeRange(inner,side,from,to,depth+1,openEnd)),depth>=from&&(inner=side<0?node.contentMatchAt(0).fillBefore(inner,fragment.childCount>1||openEnd<=depth).append(inner):inner.append(node.contentMatchAt(node.childCount).fillBefore(Fragment.empty,!0))),fragment.replaceChild(side<0?0:fragment.childCount-1,node.copy(inner))}var wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},_detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}var observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=index_es_result.ie&&index_es_result.ie_version<=11,SelectionState=function SelectionState(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};SelectionState.prototype.set=function set(sel){this.anchorNode=sel.anchorNode,this.anchorOffset=sel.anchorOffset,this.focusNode=sel.focusNode,this.focusOffset=sel.focusOffset},SelectionState.prototype.eq=function eq(sel){return sel.anchorNode==this.anchorNode&&sel.anchorOffset==this.anchorOffset&&sel.focusNode==this.focusNode&&sel.focusOffset==this.focusOffset};var DOMObserver=function DOMObserver(view,handleDOMChange){var this$1=this;this.view=view,this.handleDOMChange=handleDOMChange,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(mutations){for(var i=0;i<mutations.length;i++)this$1.queue.push(mutations[i]);index_es_result.ie&&index_es_result.ie_version<=11&&mutations.some((function(m){return"childList"==m.type&&m.removedNodes.length||"characterData"==m.type&&m.oldValue.length>m.target.nodeValue.length}))?this$1.flushSoon():this$1.flush()})),this.currentSelection=new SelectionState,useCharData&&(this.onCharData=function(e){this$1.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this$1.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};DOMObserver.prototype.flushSoon=function flushSoon(){var this$1=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){this$1.flushingSoon=-1,this$1.flush()}),20))},DOMObserver.prototype.forceFlush=function forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},DOMObserver.prototype.start=function start(){this.observer&&this.observer.observe(this.view.dom,observeOptions),useCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},DOMObserver.prototype.stop=function stop(){var this$1=this;if(this.observer){var take=this.observer.takeRecords();if(take.length){for(var i=0;i<take.length;i++)this.queue.push(take[i]);window.setTimeout((function(){return this$1.flush()}),20)}this.observer.disconnect()}useCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},DOMObserver.prototype.connectSelection=function connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},DOMObserver.prototype.disconnectSelection=function disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},DOMObserver.prototype.suppressSelectionUpdates=function suppressSelectionUpdates(){var this$1=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return this$1.suppressingSelectionUpdates=!1}),50)},DOMObserver.prototype.onSelectionChange=function onSelectionChange(){if(function hasFocusAndSelection(view){return(!view.editable||view.root.activeElement==view.dom)&&hasSelection(view)}(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(index_es_result.ie&&index_es_result.ie_version<=11&&!this.view.state.selection.empty){var sel=this.view.root.getSelection();if(sel.focusNode&&isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset))return this.flushSoon()}this.flush()}},DOMObserver.prototype.setCurSelection=function setCurSelection(){this.currentSelection.set(this.view.root.getSelection())},DOMObserver.prototype.ignoreSelectionChange=function ignoreSelectionChange(sel){if(0==sel.rangeCount)return!0;var container=sel.getRangeAt(0).commonAncestorContainer,desc=this.view.docView.nearestDesc(container);return desc&&desc.ignoreMutation({type:"selection",target:3==container.nodeType?container.parentNode:container})?(this.setCurSelection(),!0):void 0},DOMObserver.prototype.flush=function flush(){if(this.view.docView&&!(this.flushingSoon>-1)){var mutations=this.observer?this.observer.takeRecords():[];this.queue.length&&(mutations=this.queue.concat(mutations),this.queue.length=0);var sel=this.view.root.getSelection(),newSel=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(sel)&&hasSelection(this.view)&&!this.ignoreSelectionChange(sel),from=-1,to=-1,typeOver=!1,added=[];if(this.view.editable)for(var i=0;i<mutations.length;i++){var result$1=this.registerMutation(mutations[i],added);result$1&&(from=from<0?result$1.from:Math.min(result$1.from,from),to=to<0?result$1.to:Math.max(result$1.to,to),result$1.typeOver&&(typeOver=!0))}if(index_es_result.gecko&&added.length>1){var brs=added.filter((function(n){return"BR"==n.nodeName}));if(2==brs.length){var a=brs[0],b=brs[1];a.parentNode&&a.parentNode.parentNode==b.parentNode?b.remove():a.remove()}}(from>-1||newSel)&&(from>-1&&(this.view.docView.markDirty(from,to),function checkCSS(view){if(cssChecked)return;cssChecked=!0,"normal"==getComputedStyle(view.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(from,to,typeOver,added),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(sel)||selectionToDOM(this.view),this.currentSelection.set(sel))}},DOMObserver.prototype.registerMutation=function registerMutation(mut,added){if(added.indexOf(mut.target)>-1)return null;var desc=this.view.docView.nearestDesc(mut.target);if("attributes"==mut.type&&(desc==this.view.docView||"contenteditable"==mut.attributeName||"style"==mut.attributeName&&!mut.oldValue&&!mut.target.getAttribute("style")))return null;if(!desc||desc.ignoreMutation(mut))return null;if("childList"==mut.type){for(var i=0;i<mut.addedNodes.length;i++)added.push(mut.addedNodes[i]);if(desc.contentDOM&&desc.contentDOM!=desc.dom&&!desc.contentDOM.contains(mut.target))return{from:desc.posBefore,to:desc.posAfter};var prev=mut.previousSibling,next=mut.nextSibling;if(index_es_result.ie&&index_es_result.ie_version<=11&&mut.addedNodes.length)for(var i$1=0;i$1<mut.addedNodes.length;i$1++){var ref=mut.addedNodes[i$1],previousSibling=ref.previousSibling,nextSibling=ref.nextSibling;(!previousSibling||Array.prototype.indexOf.call(mut.addedNodes,previousSibling)<0)&&(prev=previousSibling),(!nextSibling||Array.prototype.indexOf.call(mut.addedNodes,nextSibling)<0)&&(next=nextSibling)}var fromOffset=prev&&prev.parentNode==mut.target?domIndex(prev)+1:0,from=desc.localPosFromDOM(mut.target,fromOffset,-1),toOffset=next&&next.parentNode==mut.target?domIndex(next):mut.target.childNodes.length;return{from:from,to:desc.localPosFromDOM(mut.target,toOffset,1)}}return"attributes"==mut.type?{from:desc.posAtStart-desc.border,to:desc.posAtEnd+desc.border}:{from:desc.posAtStart,to:desc.posAtEnd,typeOver:mut.target.nodeValue==mut.oldValue}};var cssChecked=!1;var handlers={},editHandlers={};function setSelectionOrigin(view,origin){view.lastSelectionOrigin=origin,view.lastSelectionTime=Date.now()}function ensureListeners(view){view.someProp("handleDOMEvents",(function(currentHandlers){for(var type in currentHandlers)view.eventHandlers[type]||view.dom.addEventListener(type,view.eventHandlers[type]=function(event){return runCustomHandler(view,event)})}))}function runCustomHandler(view,event){return view.someProp("handleDOMEvents",(function(handlers){var handler=handlers[event.type];return!!handler&&(handler(view,event)||event.defaultPrevented)}))}function eventCoords(event){return{left:event.clientX,top:event.clientY}}function runHandlerOnContext(view,propName,pos,inside,event){if(-1==inside)return!1;for(var $pos=view.state.doc.resolve(inside),loop=function(i){if(view.someProp(propName,(function(f){return i>$pos.depth?f(view,pos,$pos.nodeAfter,$pos.before(i),event,!0):f(view,pos,$pos.node(i),$pos.before(i),event,!1)})))return{v:!0}},i=$pos.depth+1;i>0;i--){var returned=loop(i);if(returned)return returned.v}return!1}function updateSelection(view,selection,origin){view.focused||view.focus();var tr=view.state.tr.setSelection(selection);"pointer"==origin&&tr.setMeta("pointer",!0),view.dispatch(tr)}function handleSingleClick(view,pos,inside,event,selectNode){return runHandlerOnContext(view,"handleClickOn",pos,inside,event)||view.someProp("handleClick",(function(f){return f(view,pos,event)}))||(selectNode?function selectClickedNode(view,inside){if(-1==inside)return!1;var selectedNode,selectAt,sel=view.state.selection;sel instanceof index_es_NodeSelection&&(selectedNode=sel.node);for(var $pos=view.state.doc.resolve(inside),i=$pos.depth+1;i>0;i--){var node=i>$pos.depth?$pos.nodeAfter:$pos.node(i);if(index_es_NodeSelection.isSelectable(node)){selectAt=selectedNode&&sel.$from.depth>0&&i>=sel.$from.depth&&$pos.before(sel.$from.depth+1)==sel.$from.pos?$pos.before(sel.$from.depth):$pos.before(i);break}}return null!=selectAt&&(updateSelection(view,index_es_NodeSelection.create(view.state.doc,selectAt),"pointer"),!0)}(view,inside):function selectClickedLeaf(view,inside){if(-1==inside)return!1;var $pos=view.state.doc.resolve(inside),node=$pos.nodeAfter;return!!(node&&node.isAtom&&index_es_NodeSelection.isSelectable(node))&&(updateSelection(view,new index_es_NodeSelection($pos),"pointer"),!0)}(view,inside))}function handleDoubleClick(view,pos,inside,event){return runHandlerOnContext(view,"handleDoubleClickOn",pos,inside,event)||view.someProp("handleDoubleClick",(function(f){return f(view,pos,event)}))}function handleTripleClick(view,pos,inside,event){return runHandlerOnContext(view,"handleTripleClickOn",pos,inside,event)||view.someProp("handleTripleClick",(function(f){return f(view,pos,event)}))||function defaultTripleClick(view,inside,event){if(0!=event.button)return!1;var doc=view.state.doc;if(-1==inside)return!!doc.inlineContent&&(updateSelection(view,index_es_TextSelection.create(doc,0,doc.content.size),"pointer"),!0);for(var $pos=doc.resolve(inside),i=$pos.depth+1;i>0;i--){var node=i>$pos.depth?$pos.nodeAfter:$pos.node(i),nodePos=$pos.before(i);if(node.inlineContent)updateSelection(view,index_es_TextSelection.create(doc,nodePos+1,nodePos+1+node.content.size),"pointer");else{if(!index_es_NodeSelection.isSelectable(node))continue;updateSelection(view,index_es_NodeSelection.create(doc,nodePos),"pointer")}return!0}}(view,inside,event)}function forceDOMFlush(view){return endComposition(view)}editHandlers.keydown=function(view,event){if(view.shiftKey=16==event.keyCode||event.shiftKey,!inOrNearComposition(view,event))if(229!=event.keyCode&&view.domObserver.forceFlush(),view.lastKeyCode=event.keyCode,view.lastKeyCodeTime=Date.now(),!index_es_result.ios||13!=event.keyCode||event.ctrlKey||event.altKey||event.metaKey)view.someProp("handleKeyDown",(function(f){return f(view,event)}))||captureKeyDown(view,event)?event.preventDefault():setSelectionOrigin(view,"key");else{var now=Date.now();view.lastIOSEnter=now,view.lastIOSEnterFallbackTimeout=setTimeout((function(){view.lastIOSEnter==now&&(view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))})),view.lastIOSEnter=0)}),200)}},editHandlers.keyup=function(view,e){16==e.keyCode&&(view.shiftKey=!1)},editHandlers.keypress=function(view,event){if(!(inOrNearComposition(view,event)||!event.charCode||event.ctrlKey&&!event.altKey||index_es_result.mac&&event.metaKey))if(view.someProp("handleKeyPress",(function(f){return f(view,event)})))event.preventDefault();else{var sel=view.state.selection;if(!(sel instanceof index_es_TextSelection&&sel.$from.sameParent(sel.$to))){var text=String.fromCharCode(event.charCode);view.someProp("handleTextInput",(function(f){return f(view,sel.$from.pos,sel.$to.pos,text)}))||view.dispatch(view.state.tr.insertText(text).scrollIntoView()),event.preventDefault()}}};var selectNodeModifier=index_es_result.mac?"metaKey":"ctrlKey";handlers.mousedown=function(view,event){view.shiftKey=event.shiftKey;var flushed=forceDOMFlush(view),now=Date.now(),type="singleClick";now-view.lastClick.time<500&&function isNear(event,click){var dx=click.x-event.clientX,dy=click.y-event.clientY;return dx*dx+dy*dy<100}(event,view.lastClick)&&!event[selectNodeModifier]&&("singleClick"==view.lastClick.type?type="doubleClick":"doubleClick"==view.lastClick.type&&(type="tripleClick")),view.lastClick={time:now,x:event.clientX,y:event.clientY,type:type};var pos=view.posAtCoords(eventCoords(event));pos&&("singleClick"==type?(view.mouseDown&&view.mouseDown.done(),view.mouseDown=new index_es_MouseDown(view,pos,event,flushed)):("doubleClick"==type?handleDoubleClick:handleTripleClick)(view,pos.pos,pos.inside,event)?event.preventDefault():setSelectionOrigin(view,"pointer"))};var index_es_MouseDown=function MouseDown(view,pos,event,flushed){var targetNode,targetPos,this$1=this;if(this.view=view,this.startDoc=view.state.doc,this.pos=pos,this.event=event,this.flushed=flushed,this.selectNode=event[selectNodeModifier],this.allowDefault=event.shiftKey||0!=event.button,pos.inside>-1)targetNode=view.state.doc.nodeAt(pos.inside),targetPos=pos.inside;else{var $pos=view.state.doc.resolve(pos.pos);targetNode=$pos.parent,targetPos=$pos.depth?$pos.before():0}this.mightDrag=null;var target=flushed?null:event.target,targetDesc=target?view.docView.nearestDesc(target,!0):null;this.target=targetDesc?targetDesc.dom:null;var selection=view.state.selection;(0==event.button&&targetNode.type.spec.draggable&&!1!==targetNode.type.spec.selectable||selection instanceof index_es_NodeSelection&&selection.from<=targetPos&&selection.to>targetPos)&&(this.mightDrag={node:targetNode,pos:targetPos,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&index_es_result.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){this$1.view.mouseDown==this$1&&this$1.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),view.root.addEventListener("mouseup",this.up=this.up.bind(this)),view.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(view,"pointer")};function inOrNearComposition(view,event){return!!view.composing||!!(index_es_result.safari&&Math.abs(event.timeStamp-view.compositionEndedAt)<500)&&(view.compositionEndedAt=-2e8,!0)}index_es_MouseDown.prototype.done=function done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},index_es_MouseDown.prototype.up=function up(event){if(this.done(),this.view.dom.contains(3==event.target.nodeType?event.target.parentNode:event.target)){var pos=this.pos;this.view.state.doc!=this.startDoc&&(pos=this.view.posAtCoords(eventCoords(event))),this.allowDefault||!pos?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,pos.pos,pos.inside,event,this.selectNode)?event.preventDefault():this.flushed||index_es_result.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||index_es_result.chrome&&!(this.view.state.selection instanceof index_es_TextSelection)&&Math.min(Math.abs(pos.pos-this.view.state.selection.from),Math.abs(pos.pos-this.view.state.selection.to))<=2?(updateSelection(this.view,index_es_Selection.near(this.view.state.doc.resolve(pos.pos)),"pointer"),event.preventDefault()):setSelectionOrigin(this.view,"pointer")}},index_es_MouseDown.prototype.move=function move(event){!this.allowDefault&&(Math.abs(this.event.x-event.clientX)>4||Math.abs(this.event.y-event.clientY)>4)&&(this.allowDefault=!0),setSelectionOrigin(this.view,"pointer"),0==event.buttons&&this.done()},handlers.touchdown=function(view){forceDOMFlush(view),setSelectionOrigin(view,"pointer")},handlers.contextmenu=function(view){return forceDOMFlush(view)};var timeoutComposition=index_es_result.android?5e3:-1;function scheduleComposeEnd(view,delay){clearTimeout(view.composingTimeout),delay>-1&&(view.composingTimeout=setTimeout((function(){return endComposition(view)}),delay))}function clearComposition(view){for(view.composing=!1;view.compositionNodes.length>0;)view.compositionNodes.pop().markParentsDirty()}function endComposition(view,forceUpdate){if(view.domObserver.forceFlush(),clearComposition(view),forceUpdate||view.docView.dirty){var sel=selectionFromDOM(view);return sel&&!sel.eq(view.state.selection)?view.dispatch(view.state.tr.setSelection(sel)):view.updateState(view.state),!0}return!1}editHandlers.compositionstart=editHandlers.compositionupdate=function(view){if(!view.composing){view.domObserver.flush();var state=view.state,$pos=state.selection.$from;if(state.selection.empty&&(state.storedMarks||!$pos.textOffset&&$pos.parentOffset&&$pos.nodeBefore.marks.some((function(m){return!1===m.type.spec.inclusive}))))view.markCursor=view.state.storedMarks||$pos.marks(),endComposition(view,!0),view.markCursor=null;else if(endComposition(view),index_es_result.gecko&&state.selection.empty&&$pos.parentOffset&&!$pos.textOffset&&$pos.nodeBefore.marks.length)for(var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;node&&1==node.nodeType&&0!=offset;){var before=offset<0?node.lastChild:node.childNodes[offset-1];if(!before)break;if(3==before.nodeType){sel.collapse(before,before.nodeValue.length);break}node=before,offset=-1}view.composing=!0}scheduleComposeEnd(view,timeoutComposition)},editHandlers.compositionend=function(view,event){view.composing&&(view.composing=!1,view.compositionEndedAt=event.timeStamp,scheduleComposeEnd(view,20))};var brokenClipboardAPI=index_es_result.ie&&index_es_result.ie_version<15||index_es_result.ios&&index_es_result.webkit_version<604;function doPaste(view,text,html,e){var slice=parseFromClipboard(view,text,html,view.shiftKey,view.state.selection.$from);if(view.someProp("handlePaste",(function(f){return f(view,e,slice||Slice.empty)})))return!0;if(!slice)return!1;var singleNode=function sliceSingleNode(slice){return 0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount?slice.content.firstChild:null}(slice),tr=singleNode?view.state.tr.replaceSelectionWith(singleNode,view.shiftKey):view.state.tr.replaceSelection(slice);return view.dispatch(tr.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}handlers.copy=editHandlers.cut=function(view,e){var sel=view.state.selection,cut="cut"==e.type;if(!sel.empty){var data=brokenClipboardAPI?null:e.clipboardData,ref=serializeForClipboard(view,sel.content()),dom=ref.dom,text=ref.text;data?(e.preventDefault(),data.clearData(),data.setData("text/html",dom.innerHTML),data.setData("text/plain",text)):function captureCopy(view,dom){if(view.dom.parentNode){var wrap=view.dom.parentNode.appendChild(document.createElement("div"));wrap.appendChild(dom),wrap.style.cssText="position: fixed; left: -10000px; top: 10px";var sel=getSelection(),range=document.createRange();range.selectNodeContents(dom),view.dom.blur(),sel.removeAllRanges(),sel.addRange(range),setTimeout((function(){wrap.parentNode&&wrap.parentNode.removeChild(wrap),view.focus()}),50)}}(view,dom),cut&&view.dispatch(view.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},editHandlers.paste=function(view,e){var data=brokenClipboardAPI?null:e.clipboardData;data&&doPaste(view,data.getData("text/plain"),data.getData("text/html"),e)?e.preventDefault():function capturePaste(view,e){if(view.dom.parentNode){var plainText=view.shiftKey||view.state.selection.$from.parent.type.spec.code,target=view.dom.parentNode.appendChild(document.createElement(plainText?"textarea":"div"));plainText||(target.contentEditable="true"),target.style.cssText="position: fixed; left: -10000px; top: 10px",target.focus(),setTimeout((function(){view.focus(),target.parentNode&&target.parentNode.removeChild(target),plainText?doPaste(view,target.value,null,e):doPaste(view,target.textContent,target.innerHTML,e)}),50)}}(view,e)};var Dragging=function Dragging(slice,move){this.slice=slice,this.move=move},dragCopyModifier=index_es_result.mac?"altKey":"ctrlKey";for(var index_es_prop in handlers.dragstart=function(view,e){var mouseDown=view.mouseDown;if(mouseDown&&mouseDown.done(),e.dataTransfer){var sel=view.state.selection,pos=sel.empty?null:view.posAtCoords(eventCoords(e));if(pos&&pos.pos>=sel.from&&pos.pos<=(sel instanceof index_es_NodeSelection?sel.to-1:sel.to));else if(mouseDown&&mouseDown.mightDrag)view.dispatch(view.state.tr.setSelection(index_es_NodeSelection.create(view.state.doc,mouseDown.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var desc=view.docView.nearestDesc(e.target,!0);if(!desc||!desc.node.type.spec.draggable||desc==view.docView)return;view.dispatch(view.state.tr.setSelection(index_es_NodeSelection.create(view.state.doc,desc.posBefore)))}var slice=view.state.selection.content(),ref=serializeForClipboard(view,slice),dom=ref.dom,text=ref.text;e.dataTransfer.clearData(),e.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",dom.innerHTML),e.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||e.dataTransfer.setData("text/plain",text),view.dragging=new Dragging(slice,!e[dragCopyModifier])}},handlers.dragend=function(view){var dragging=view.dragging;window.setTimeout((function(){view.dragging==dragging&&(view.dragging=null)}),50)},editHandlers.dragover=editHandlers.dragenter=function(_,e){return e.preventDefault()},editHandlers.drop=function(view,e){var dragging=view.dragging;if(view.dragging=null,e.dataTransfer){var eventPos=view.posAtCoords(eventCoords(e));if(eventPos){var $mouse=view.state.doc.resolve(eventPos.pos);if($mouse){var slice=dragging&&dragging.slice;slice?view.someProp("transformPasted",(function(f){slice=f(slice)})):slice=parseFromClipboard(view,e.dataTransfer.getData(brokenClipboardAPI?"Text":"text/plain"),brokenClipboardAPI?null:e.dataTransfer.getData("text/html"),!1,$mouse);var move=dragging&&!e[dragCopyModifier];if(view.someProp("handleDrop",(function(f){return f(view,e,slice||Slice.empty,move)})))e.preventDefault();else if(slice){e.preventDefault();var insertPos=slice?function dropPoint(doc,pos,slice){var $pos=doc.resolve(pos);if(!slice.content.size)return pos;for(var content=slice.content,i=0;i<slice.openStart;i++)content=content.firstChild.content;for(var pass=1;pass<=(0==slice.openStart&&slice.size?2:1);pass++)for(var d=$pos.depth;d>=0;d--){var bias=d==$pos.depth?0:$pos.pos<=($pos.start(d+1)+$pos.end(d+1))/2?-1:1,insertPos=$pos.index(d)+(bias>0?1:0),parent=$pos.node(d),fits=!1;if(1==pass)fits=parent.canReplace(insertPos,insertPos,content);else{var wrapping=parent.contentMatchAt(insertPos).findWrapping(content.firstChild.type);fits=wrapping&&parent.canReplaceWith(insertPos,insertPos,wrapping[0])}if(fits)return 0==bias?$pos.pos:bias<0?$pos.before(d+1):$pos.after(d+1)}return null}(view.state.doc,$mouse.pos,slice):$mouse.pos;null==insertPos&&(insertPos=$mouse.pos);var tr=view.state.tr;move&&tr.deleteSelection();var pos=tr.mapping.map(insertPos),isNode=0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount,beforeInsert=tr.doc;if(isNode?tr.replaceRangeWith(pos,pos,slice.content.firstChild):tr.replaceRange(pos,pos,slice),!tr.doc.eq(beforeInsert)){var $pos=tr.doc.resolve(pos);if(isNode&&index_es_NodeSelection.isSelectable(slice.content.firstChild)&&$pos.nodeAfter&&$pos.nodeAfter.sameMarkup(slice.content.firstChild))tr.setSelection(new index_es_NodeSelection($pos));else{var end=tr.mapping.map(insertPos);tr.mapping.maps[tr.mapping.maps.length-1].forEach((function(_from,_to,_newFrom,newTo){return end=newTo})),tr.setSelection(selectionBetween(view,$pos,tr.doc.resolve(end)))}view.focus(),view.dispatch(tr.setMeta("uiEvent","drop"))}}}}}},handlers.focus=function(view){view.focused||(view.domObserver.stop(),view.dom.classList.add("ProseMirror-focused"),view.domObserver.start(),view.focused=!0,setTimeout((function(){view.docView&&view.hasFocus()&&!view.domObserver.currentSelection.eq(view.root.getSelection())&&selectionToDOM(view)}),20))},handlers.blur=function(view){view.focused&&(view.domObserver.stop(),view.dom.classList.remove("ProseMirror-focused"),view.domObserver.start(),view.domObserver.currentSelection.set({}),view.focused=!1)},handlers.beforeinput=function(view,event){if(index_es_result.chrome&&index_es_result.android&&"deleteContentBackward"==event.inputType){var domChangeCount=view.domChangeCount;setTimeout((function(){if(view.domChangeCount==domChangeCount&&(view.dom.blur(),view.focus(),!view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(8,"Backspace"))})))){var $cursor=view.state.selection.$cursor;$cursor&&$cursor.pos>0&&view.dispatch(view.state.tr.delete($cursor.pos-1,$cursor.pos).scrollIntoView())}}),50)}},editHandlers)handlers[index_es_prop]=editHandlers[index_es_prop];function compareObjs(a,b){if(a==b)return!0;for(var p in a)if(a[p]!==b[p])return!1;for(var p$1 in b)if(!(p$1 in a))return!1;return!0}var WidgetType=function WidgetType(toDOM,spec){this.spec=spec||noSpec,this.side=this.spec.side||0,this.toDOM=toDOM};WidgetType.prototype.map=function map(mapping,span,offset,oldOffset){var ref=mapping.mapResult(span.from+oldOffset,this.side<0?-1:1),pos=ref.pos;return ref.deleted?null:new Decoration(pos-offset,pos-offset,this)},WidgetType.prototype.valid=function valid(){return!0},WidgetType.prototype.eq=function eq(other){return this==other||other instanceof WidgetType&&(this.spec.key&&this.spec.key==other.spec.key||this.toDOM==other.toDOM&&compareObjs(this.spec,other.spec))};var InlineType=function InlineType(attrs,spec){this.spec=spec||noSpec,this.attrs=attrs};InlineType.prototype.map=function map(mapping,span,offset,oldOffset){var from=mapping.map(span.from+oldOffset,this.spec.inclusiveStart?-1:1)-offset,to=mapping.map(span.to+oldOffset,this.spec.inclusiveEnd?1:-1)-offset;return from>=to?null:new Decoration(from,to,this)},InlineType.prototype.valid=function valid(_,span){return span.from<span.to},InlineType.prototype.eq=function eq(other){return this==other||other instanceof InlineType&&compareObjs(this.attrs,other.attrs)&&compareObjs(this.spec,other.spec)},InlineType.is=function is(span){return span.type instanceof InlineType};var index_es_NodeType=function NodeType(attrs,spec){this.spec=spec||noSpec,this.attrs=attrs};index_es_NodeType.prototype.map=function map(mapping,span,offset,oldOffset){var from=mapping.mapResult(span.from+oldOffset,1);if(from.deleted)return null;var to=mapping.mapResult(span.to+oldOffset,-1);return to.deleted||to.pos<=from.pos?null:new Decoration(from.pos-offset,to.pos-offset,this)},index_es_NodeType.prototype.valid=function valid(node,span){var ref=node.content.findIndex(span.from),index=ref.index,offset=ref.offset;return offset==span.from&&offset+node.child(index).nodeSize==span.to},index_es_NodeType.prototype.eq=function eq(other){return this==other||other instanceof index_es_NodeType&&compareObjs(this.attrs,other.attrs)&&compareObjs(this.spec,other.spec)};var Decoration=function Decoration(from,to,type){this.from=from,this.to=to,this.type=type},prosemirror_view_dist_index_es_prototypeAccessors$1={spec:{configurable:!0},inline:{configurable:!0}};Decoration.prototype.copy=function copy(from,to){return new Decoration(from,to,this.type)},Decoration.prototype.eq=function eq(other,offset){return void 0===offset&&(offset=0),this.type.eq(other.type)&&this.from+offset==other.from&&this.to+offset==other.to},Decoration.prototype.map=function map(mapping,offset,oldOffset){return this.type.map(mapping,this,offset,oldOffset)},Decoration.widget=function widget(pos,toDOM,spec){return new Decoration(pos,pos,new WidgetType(toDOM,spec))},Decoration.inline=function inline(from,to,attrs,spec){return new Decoration(from,to,new InlineType(attrs,spec))},Decoration.node=function node(from,to,attrs,spec){return new Decoration(from,to,new index_es_NodeType(attrs,spec))},prosemirror_view_dist_index_es_prototypeAccessors$1.spec.get=function(){return this.type.spec},prosemirror_view_dist_index_es_prototypeAccessors$1.inline.get=function(){return this.type instanceof InlineType},Object.defineProperties(Decoration.prototype,prosemirror_view_dist_index_es_prototypeAccessors$1);var none=[],noSpec={},DecorationSet=function DecorationSet(local,children){this.local=local&&local.length?local:none,this.children=children&&children.length?children:none};DecorationSet.create=function create(doc,decorations){return decorations.length?buildTree(decorations,doc,0,noSpec):index_es_empty},DecorationSet.prototype.find=function find(start,end,predicate){var result=[];return this.findInner(null==start?0:start,null==end?1e9:end,result,0,predicate),result},DecorationSet.prototype.findInner=function findInner(start,end,result,offset,predicate){for(var i=0;i<this.local.length;i++){var span=this.local[i];span.from<=end&&span.to>=start&&(!predicate||predicate(span.spec))&&result.push(span.copy(span.from+offset,span.to+offset))}for(var i$1=0;i$1<this.children.length;i$1+=3)if(this.children[i$1]<end&&this.children[i$1+1]>start){var childOff=this.children[i$1]+1;this.children[i$1+2].findInner(start-childOff,end-childOff,result,offset+childOff,predicate)}},DecorationSet.prototype.map=function map(mapping,doc,options){return this==index_es_empty||0==mapping.maps.length?this:this.mapInner(mapping,doc,0,0,options||noSpec)},DecorationSet.prototype.mapInner=function mapInner(mapping,node,offset,oldOffset,options){for(var newLocal,i=0;i<this.local.length;i++){var mapped=this.local[i].map(mapping,offset,oldOffset);mapped&&mapped.type.valid(node,mapped)?(newLocal||(newLocal=[])).push(mapped):options.onRemove&&options.onRemove(this.local[i].spec)}return this.children.length?function mapChildren(oldChildren,newLocal,mapping,node,offset,oldOffset,options){for(var children=oldChildren.slice(),shift=function(oldStart,oldEnd,newStart,newEnd){for(var i=0;i<children.length;i+=3){var end=children[i+1],dSize=void 0;-1==end||oldStart>end+oldOffset||(oldEnd>=children[i]+oldOffset?children[i+1]=-1:newStart>=offset&&(dSize=newEnd-newStart-(oldEnd-oldStart))&&(children[i]+=dSize,children[i+1]+=dSize))}},i=0;i<mapping.maps.length;i++)mapping.maps[i].forEach(shift);for(var mustRebuild=!1,i$1=0;i$1<children.length;i$1+=3)if(-1==children[i$1+1]){var from=mapping.map(oldChildren[i$1]+oldOffset),fromLocal=from-offset;if(fromLocal<0||fromLocal>=node.content.size){mustRebuild=!0;continue}var toLocal=mapping.map(oldChildren[i$1+1]+oldOffset,-1)-offset,ref=node.content.findIndex(fromLocal),index=ref.index,childOffset=ref.offset,childNode=node.maybeChild(index);if(childNode&&childOffset==fromLocal&&childOffset+childNode.nodeSize==toLocal){var mapped=children[i$1+2].mapInner(mapping,childNode,from+1,oldChildren[i$1]+oldOffset+1,options);mapped!=index_es_empty?(children[i$1]=fromLocal,children[i$1+1]=toLocal,children[i$1+2]=mapped):(children[i$1+1]=-2,mustRebuild=!0)}else mustRebuild=!0}if(mustRebuild){var built=buildTree(function mapAndGatherRemainingDecorations(children,oldChildren,decorations,mapping,offset,oldOffset,options){function gather(set,oldOffset){for(var i=0;i<set.local.length;i++){var mapped=set.local[i].map(mapping,offset,oldOffset);mapped?decorations.push(mapped):options.onRemove&&options.onRemove(set.local[i].spec)}for(var i$1=0;i$1<set.children.length;i$1+=3)gather(set.children[i$1+2],set.children[i$1]+oldOffset+1)}for(var i=0;i<children.length;i+=3)-1==children[i+1]&&gather(children[i+2],oldChildren[i]+oldOffset+1);return decorations}(children,oldChildren,newLocal||[],mapping,offset,oldOffset,options),node,0,options);newLocal=built.local;for(var i$2=0;i$2<children.length;i$2+=3)children[i$2+1]<0&&(children.splice(i$2,3),i$2-=3);for(var i$3=0,j=0;i$3<built.children.length;i$3+=3){for(var from$1=built.children[i$3];j<children.length&&children[j]<from$1;)j+=3;children.splice(j,0,built.children[i$3],built.children[i$3+1],built.children[i$3+2])}}return new DecorationSet(newLocal&&newLocal.sort(byPos),children)}(this.children,newLocal,mapping,node,offset,oldOffset,options):newLocal?new DecorationSet(newLocal.sort(byPos)):index_es_empty},DecorationSet.prototype.add=function add(doc,decorations){return decorations.length?this==index_es_empty?DecorationSet.create(doc,decorations):this.addInner(doc,decorations,0):this},DecorationSet.prototype.addInner=function addInner(doc,decorations,offset){var children,this$1=this,childIndex=0;doc.forEach((function(childNode,childOffset){var found,baseOffset=childOffset+offset;if(found=takeSpansForNode(decorations,childNode,baseOffset)){for(children||(children=this$1.children.slice());childIndex<children.length&&children[childIndex]<childOffset;)childIndex+=3;children[childIndex]==childOffset?children[childIndex+2]=children[childIndex+2].addInner(childNode,found,baseOffset+1):children.splice(childIndex,0,childOffset,childOffset+childNode.nodeSize,buildTree(found,childNode,baseOffset+1,noSpec)),childIndex+=3}}));for(var local=moveSpans(childIndex?withoutNulls(decorations):decorations,-offset),i=0;i<local.length;i++)local[i].type.valid(doc,local[i])||local.splice(i--,1);return new DecorationSet(local.length?this.local.concat(local).sort(byPos):this.local,children||this.children)},DecorationSet.prototype.remove=function remove(decorations){return 0==decorations.length||this==index_es_empty?this:this.removeInner(decorations,0)},DecorationSet.prototype.removeInner=function removeInner(decorations,offset){for(var children=this.children,local=this.local,i=0;i<children.length;i+=3){for(var found=void 0,from=children[i]+offset,to=children[i+1]+offset,j=0,span=void 0;j<decorations.length;j++)(span=decorations[j])&&span.from>from&&span.to<to&&(decorations[j]=null,(found||(found=[])).push(span));if(found){children==this.children&&(children=this.children.slice());var removed=children[i+2].removeInner(found,from+1);removed!=index_es_empty?children[i+2]=removed:(children.splice(i,3),i-=3)}}if(local.length)for(var i$1=0,span$1=void 0;i$1<decorations.length;i$1++)if(span$1=decorations[i$1])for(var j$1=0;j$1<local.length;j$1++)local[j$1].eq(span$1,offset)&&(local==this.local&&(local=this.local.slice()),local.splice(j$1--,1));return children==this.children&&local==this.local?this:local.length||children.length?new DecorationSet(local,children):index_es_empty},DecorationSet.prototype.forChild=function forChild(offset,node){if(this==index_es_empty)return this;if(node.isLeaf)return DecorationSet.empty;for(var child,local,i=0;i<this.children.length;i+=3)if(this.children[i]>=offset){this.children[i]==offset&&(child=this.children[i+2]);break}for(var start=offset+1,end=start+node.content.size,i$1=0;i$1<this.local.length;i$1++){var dec=this.local[i$1];if(dec.from<end&&dec.to>start&&dec.type instanceof InlineType){var from=Math.max(start,dec.from)-start,to=Math.min(end,dec.to)-start;from<to&&(local||(local=[])).push(dec.copy(from,to))}}if(local){var localSet=new DecorationSet(local.sort(byPos));return child?new DecorationGroup([localSet,child]):localSet}return child||index_es_empty},DecorationSet.prototype.eq=function eq(other){if(this==other)return!0;if(!(other instanceof DecorationSet)||this.local.length!=other.local.length||this.children.length!=other.children.length)return!1;for(var i=0;i<this.local.length;i++)if(!this.local[i].eq(other.local[i]))return!1;for(var i$1=0;i$1<this.children.length;i$1+=3)if(this.children[i$1]!=other.children[i$1]||this.children[i$1+1]!=other.children[i$1+1]||!this.children[i$1+2].eq(other.children[i$1+2]))return!1;return!0},DecorationSet.prototype.locals=function locals(node){return removeOverlap(this.localsInner(node))},DecorationSet.prototype.localsInner=function localsInner(node){if(this==index_es_empty)return none;if(node.inlineContent||!this.local.some(InlineType.is))return this.local;for(var result=[],i=0;i<this.local.length;i++)this.local[i].type instanceof InlineType||result.push(this.local[i]);return result};var index_es_empty=new DecorationSet;DecorationSet.empty=index_es_empty,DecorationSet.removeOverlap=removeOverlap;var DecorationGroup=function DecorationGroup(members){this.members=members};function moveSpans(spans,offset){if(!offset||!spans.length)return spans;for(var result=[],i=0;i<spans.length;i++){var span=spans[i];result.push(new Decoration(span.from+offset,span.to+offset,span.type))}return result}function takeSpansForNode(spans,node,offset){if(node.isLeaf)return null;for(var end=offset+node.nodeSize,found=null,i=0,span=void 0;i<spans.length;i++)(span=spans[i])&&span.from>offset&&span.to<end&&((found||(found=[])).push(span),spans[i]=null);return found}function withoutNulls(array){for(var result=[],i=0;i<array.length;i++)null!=array[i]&&result.push(array[i]);return result}function buildTree(spans,node,offset,options){var children=[],hasNulls=!1;node.forEach((function(childNode,localStart){var found=takeSpansForNode(spans,childNode,localStart+offset);if(found){hasNulls=!0;var subtree=buildTree(found,childNode,offset+localStart+1,options);subtree!=index_es_empty&&children.push(localStart,localStart+childNode.nodeSize,subtree)}}));for(var locals=moveSpans(hasNulls?withoutNulls(spans):spans,-offset).sort(byPos),i=0;i<locals.length;i++)locals[i].type.valid(node,locals[i])||(options.onRemove&&options.onRemove(locals[i].spec),locals.splice(i--,1));return locals.length||children.length?new DecorationSet(locals,children):index_es_empty}function byPos(a,b){return a.from-b.from||a.to-b.to}function removeOverlap(spans){for(var working=spans,i=0;i<working.length-1;i++){var span=working[i];if(span.from!=span.to)for(var j=i+1;j<working.length;j++){var next=working[j];if(next.from!=span.from){next.from<span.to&&(working==spans&&(working=spans.slice()),working[i]=span.copy(span.from,next.from),insertAhead(working,j,span.copy(next.from,span.to)));break}next.to!=span.to&&(working==spans&&(working=spans.slice()),working[j]=next.copy(next.from,span.to),insertAhead(working,j+1,next.copy(span.to,next.to)))}}return working}function insertAhead(array,i,deco){for(;i<array.length&&byPos(deco,array[i])>0;)i++;array.splice(i,0,deco)}function viewDecorations(view){var found=[];return view.someProp("decorations",(function(f){var result=f(view.state);result&&result!=index_es_empty&&found.push(result)})),view.cursorWrapper&&found.push(DecorationSet.create(view.state.doc,[view.cursorWrapper.deco])),DecorationGroup.from(found)}DecorationGroup.prototype.forChild=function forChild(offset,child){if(child.isLeaf)return DecorationSet.empty;for(var found=[],i=0;i<this.members.length;i++){var result=this.members[i].forChild(offset,child);result!=index_es_empty&&(result instanceof DecorationGroup?found=found.concat(result.members):found.push(result))}return DecorationGroup.from(found)},DecorationGroup.prototype.eq=function eq(other){if(!(other instanceof DecorationGroup)||other.members.length!=this.members.length)return!1;for(var i=0;i<this.members.length;i++)if(!this.members[i].eq(other.members[i]))return!1;return!0},DecorationGroup.prototype.locals=function locals(node){for(var result,sorted=!0,i=0;i<this.members.length;i++){var locals=this.members[i].localsInner(node);if(locals.length)if(result){sorted&&(result=result.slice(),sorted=!1);for(var j=0;j<locals.length;j++)result.push(locals[j])}else result=locals}return result?removeOverlap(sorted?result:result.sort(byPos)):none},DecorationGroup.from=function from(members){switch(members.length){case 0:return index_es_empty;case 1:return members[0];default:return new DecorationGroup(members)}};var EditorView=function EditorView(place,props){this._props=props,this.state=props.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=place&&place.mount||document.createElement("div"),place&&(place.appendChild?place.appendChild(this.dom):place.apply?place(this.dom):place.mount&&(this.mounted=!0)),this.editable=getEditable(this),this.markCursor=null,this.cursorWrapper=null,updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function initInput(view){view.shiftKey=!1,view.mouseDown=null,view.lastKeyCode=null,view.lastKeyCodeTime=0,view.lastClick={time:0,x:0,y:0,type:""},view.lastSelectionOrigin=null,view.lastSelectionTime=0,view.lastIOSEnter=0,view.lastIOSEnterFallbackTimeout=null,view.lastAndroidDelete=0,view.composing=!1,view.composingTimeout=null,view.compositionNodes=[],view.compositionEndedAt=-2e8,view.domObserver=new DOMObserver(view,(function(from,to,typeOver,added){return readDOMChange(view,from,to,typeOver,added)})),view.domObserver.start(),view.domChangeCount=0,view.eventHandlers=Object.create(null);var loop=function(event){var handler=handlers[event];view.dom.addEventListener(event,view.eventHandlers[event]=function(event){!function eventBelongsToView(view,event){if(!event.bubbles)return!0;if(event.defaultPrevented)return!1;for(var node=event.target;node!=view.dom;node=node.parentNode)if(!node||11==node.nodeType||node.pmViewDesc&&node.pmViewDesc.stopEvent(event))return!1;return!0}(view,event)||runCustomHandler(view,event)||!view.editable&&event.type in editHandlers||handler(view,event)})};for(var event in handlers)loop(event);index_es_result.safari&&view.dom.addEventListener("input",(function(){return null})),ensureListeners(view)}(this),this.pluginViews=[],this.updatePluginViews()},index_es_prototypeAccessors$2={props:{configurable:!0},root:{configurable:!0}};function computeDocDeco(view){var attrs=Object.create(null);return attrs.class="ProseMirror",attrs.contenteditable=String(view.editable),view.someProp("attributes",(function(value){if("function"==typeof value&&(value=value(view.state)),value)for(var attr in value)"class"==attr?attrs.class+=" "+value[attr]:attrs[attr]||"contenteditable"==attr||"nodeName"==attr||(attrs[attr]=String(value[attr]))})),[Decoration.node(0,view.state.doc.content.size,attrs)]}function updateCursorWrapper(view){if(view.markCursor){var dom=document.createElement("img");dom.setAttribute("mark-placeholder","true"),view.cursorWrapper={dom:dom,deco:Decoration.widget(view.state.selection.head,dom,{raw:!0,marks:view.markCursor})}}else view.cursorWrapper=null}function getEditable(view){return!view.someProp("editable",(function(value){return!1===value(view.state)}))}function buildNodeViews(view){var result={};return view.someProp("nodeViews",(function(obj){for(var prop in obj)Object.prototype.hasOwnProperty.call(result,prop)||(result[prop]=obj[prop])})),result}index_es_prototypeAccessors$2.props.get=function(){if(this._props.state!=this.state){var prev=this._props;for(var name in this._props={},prev)this._props[name]=prev[name];this._props.state=this.state}return this._props},EditorView.prototype.update=function update(props){props.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this),this._props=props,this.updateStateInner(props.state,!0)},EditorView.prototype.setProps=function setProps(props){var updated={};for(var name in this._props)updated[name]=this._props[name];for(var name$1 in updated.state=this.state,props)updated[name$1]=props[name$1];this.update(updated)},EditorView.prototype.updateState=function updateState(state){this.updateStateInner(state,this.state.plugins!=state.plugins)},EditorView.prototype.updateStateInner=function updateStateInner(state,reconfigured){var this$1=this,prev=this.state,redraw=!1,updateSel=!1;if(state.storedMarks&&this.composing&&(clearComposition(this),updateSel=!0),this.state=state,reconfigured){var nodeViews=buildNodeViews(this);(function changedNodeViews(a,b){var nA=0,nB=0;for(var prop in a){if(a[prop]!=b[prop])return!0;nA++}for(var _ in b)nB++;return nA!=nB})(nodeViews,this.nodeViews)&&(this.nodeViews=nodeViews,redraw=!0),ensureListeners(this)}this.editable=getEditable(this),updateCursorWrapper(this);var innerDeco=viewDecorations(this),outerDeco=computeDocDeco(this),scroll=reconfigured?"reset":state.scrollToSelection>prev.scrollToSelection?"to selection":"preserve",updateDoc=redraw||!this.docView.matchesNode(state.doc,outerDeco,innerDeco);!updateDoc&&state.selection.eq(prev.selection)||(updateSel=!0);var oldScrollPos="preserve"==scroll&&updateSel&&null==this.dom.style.overflowAnchor&&function storeScrollPos(view){for(var refDOM,refTop,rect=view.dom.getBoundingClientRect(),startY=Math.max(0,rect.top),x=(rect.left+rect.right)/2,y=startY+1;y<Math.min(innerHeight,rect.bottom);y+=5){var dom=view.root.elementFromPoint(x,y);if(dom!=view.dom&&view.dom.contains(dom)){var localRect=dom.getBoundingClientRect();if(localRect.top>=startY-20){refDOM=dom,refTop=localRect.top;break}}}return{refDOM:refDOM,refTop:refTop,stack:scrollStack(view.dom)}}(this);if(updateSel){this.domObserver.stop();var forceSelUpdate=updateDoc&&(index_es_result.ie||index_es_result.chrome)&&!this.composing&&!prev.selection.empty&&!state.selection.empty&&function selectionContextChanged(sel1,sel2){var depth=Math.min(sel1.$anchor.sharedDepth(sel1.head),sel2.$anchor.sharedDepth(sel2.head));return sel1.$anchor.start(depth)!=sel2.$anchor.start(depth)}(prev.selection,state.selection);if(updateDoc){var chromeKludge=index_es_result.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!redraw&&this.docView.update(state.doc,outerDeco,innerDeco,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=docViewDesc(state.doc,outerDeco,innerDeco,this.dom,this)),chromeKludge&&!this.trackWrites&&(forceSelUpdate=!0)}forceSelUpdate||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&function anchorInRightPlace(view){var anchorDOM=view.docView.domFromPos(view.state.selection.anchor,0),domSel=view.root.getSelection();return isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)}(this))?selectionToDOM(this,forceSelUpdate):(syncNodeSelection(this,state.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(prev),"reset"==scroll)this.dom.scrollTop=0;else if("to selection"==scroll){var startDOM=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(f){return f(this$1)}))||(state.selection instanceof index_es_NodeSelection?scrollRectIntoView(this,this.docView.domAfterPos(state.selection.from).getBoundingClientRect(),startDOM):scrollRectIntoView(this,this.coordsAtPos(state.selection.head,1),startDOM))}else oldScrollPos&&function resetScrollPos(ref){var refDOM=ref.refDOM,refTop=ref.refTop,stack=ref.stack,newRefTop=refDOM?refDOM.getBoundingClientRect().top:0;restoreScrollStack(stack,0==newRefTop?0:newRefTop-refTop)}(oldScrollPos)},EditorView.prototype.destroyPluginViews=function destroyPluginViews(){for(var view;view=this.pluginViews.pop();)view.destroy&&view.destroy()},EditorView.prototype.updatePluginViews=function updatePluginViews(prevState){if(prevState&&prevState.plugins==this.state.plugins)for(var i$1=0;i$1<this.pluginViews.length;i$1++){var pluginView=this.pluginViews[i$1];pluginView.update&&pluginView.update(this,prevState)}else{this.destroyPluginViews();for(var i=0;i<this.state.plugins.length;i++){var plugin=this.state.plugins[i];plugin.spec.view&&this.pluginViews.push(plugin.spec.view(this))}}},EditorView.prototype.someProp=function someProp(propName,f){var value,prop=this._props&&this._props[propName];if(null!=prop&&(value=f?f(prop):prop))return value;var plugins=this.state.plugins;if(plugins)for(var i=0;i<plugins.length;i++){var prop$1=plugins[i].props[propName];if(null!=prop$1&&(value=f?f(prop$1):prop$1))return value}},EditorView.prototype.hasFocus=function hasFocus(){return this.root.activeElement==this.dom},EditorView.prototype.focus=function focus(){this.domObserver.stop(),this.editable&&function focusPreventScroll(dom){if(dom.setActive)return dom.setActive();if(preventScrollSupported)return dom.focus(preventScrollSupported);var stored=scrollStack(dom);dom.focus(null==preventScrollSupported?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(stored,0))}(this.dom),selectionToDOM(this),this.domObserver.start()},index_es_prototypeAccessors$2.root.get=function(){var cached=this._root;if(null==cached)for(var search=this.dom.parentNode;search;search=search.parentNode)if(9==search.nodeType||11==search.nodeType&&search.host)return search.getSelection||(Object.getPrototypeOf(search).getSelection=function(){return document.getSelection()}),this._root=search;return cached||document},EditorView.prototype.posAtCoords=function posAtCoords$1(coords){return posAtCoords(this,coords)},EditorView.prototype.coordsAtPos=function coordsAtPos$1(pos,side){return void 0===side&&(side=1),coordsAtPos(this,pos,side)},EditorView.prototype.domAtPos=function domAtPos(pos,side){return void 0===side&&(side=0),this.docView.domFromPos(pos,side)},EditorView.prototype.nodeDOM=function nodeDOM(pos){var desc=this.docView.descAt(pos);return desc?desc.nodeDOM:null},EditorView.prototype.posAtDOM=function posAtDOM(node,offset,bias){void 0===bias&&(bias=-1);var pos=this.docView.posFromDOM(node,offset,bias);if(null==pos)throw new RangeError("DOM position not inside the editor");return pos},EditorView.prototype.endOfTextblock=function endOfTextblock$1(dir,state){return endOfTextblock(this,state||this.state,dir)},EditorView.prototype.destroy=function destroy(){this.docView&&(!function destroyInput(view){for(var type in view.domObserver.stop(),view.eventHandlers)view.dom.removeEventListener(type,view.eventHandlers[type]);clearTimeout(view.composingTimeout),clearTimeout(view.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},EditorView.prototype.dispatchEvent=function dispatchEvent$1(event){return function dispatchEvent(view,event){runCustomHandler(view,event)||!handlers[event.type]||!view.editable&&event.type in editHandlers||handlers[event.type](view,event)}(this,event)},EditorView.prototype.dispatch=function dispatch(tr){var dispatchTransaction=this._props.dispatchTransaction;dispatchTransaction?dispatchTransaction.call(this,tr):this.updateState(this.state.apply(tr))},Object.defineProperties(EditorView.prototype,index_es_prototypeAccessors$2);for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},index_es_chrome="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),safari="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),gecko="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),index_es_ie="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=index_es_chrome&&(mac||+index_es_chrome[1]<57)||gecko&&mac,index_es_i=0;index_es_i<10;index_es_i++)base[48+index_es_i]=base[96+index_es_i]=String(index_es_i);for(index_es_i=1;index_es_i<=24;index_es_i++)base[index_es_i+111]="F"+index_es_i;for(index_es_i=65;index_es_i<=90;index_es_i++)base[index_es_i]=String.fromCharCode(index_es_i+32),shift[index_es_i]=String.fromCharCode(index_es_i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);var index_es_mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function normalizeKeyName(name){var alt,ctrl,shift,meta,parts=name.split(/-(?!$)/),result=parts[parts.length-1];"Space"==result&&(result=" ");for(var i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))meta=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)?$/i.test(mod))shift=!0;else{if(!/^mod$/i.test(mod))throw new Error("Unrecognized modifier name: "+mod);index_es_mac?meta=!0:ctrl=!0}}return alt&&(result="Alt-"+result),ctrl&&(result="Ctrl-"+result),meta&&(result="Meta-"+result),shift&&(result="Shift-"+result),result}function index_es_modifiers(name,event,shift){return event.altKey&&(name="Alt-"+name),event.ctrlKey&&(name="Ctrl-"+name),event.metaKey&&(name="Meta-"+name),!1!==shift&&event.shiftKey&&(name="Shift-"+name),name}function keydownHandler(bindings){var map=function normalize(map){var copy=Object.create(null);for(var prop in map)copy[normalizeKeyName(prop)]=map[prop];return copy}(bindings);return function(view,event){var baseName,name=function keyName(event){var name=!(brokenModifierNames&&(event.ctrlKey||event.altKey||event.metaKey)||(safari||index_es_ie)&&event.shiftKey&&event.key&&1==event.key.length)&&event.key||(event.shiftKey?shift:base)[event.keyCode]||event.key||"Unidentified";return"Esc"==name&&(name="Escape"),"Del"==name&&(name="Delete"),"Left"==name&&(name="ArrowLeft"),"Up"==name&&(name="ArrowUp"),"Right"==name&&(name="ArrowRight"),"Down"==name&&(name="ArrowDown"),name}(event),isChar=1==name.length&&" "!=name,direct=map[index_es_modifiers(name,event,!isChar)];if(direct&&direct(view.state,view.dispatch,view))return!0;if(isChar&&(event.shiftKey||event.altKey||event.metaKey||name.charCodeAt(0)>127)&&(baseName=base[event.keyCode])&&baseName!=name){var fromCode=map[index_es_modifiers(baseName,event,!0)];if(fromCode&&fromCode(view.state,view.dispatch,view))return!0}else if(isChar&&event.shiftKey){var withShift=map[index_es_modifiers(name,event,!0)];if(withShift&&withShift(view.state,view.dispatch,view))return!0}return!1}}var InputRule=function InputRule(match,handler){this.match=match,this.handler="string"==typeof handler?function stringHandler(string){return function(state,match,start,end){var insert=string;if(match[1]){var offset=match[0].lastIndexOf(match[1]);insert+=match[0].slice(offset+match[1].length);var cutOff=(start+=offset)-end;cutOff>0&&(insert=match[0].slice(offset-cutOff,offset)+insert,start=end)}return state.tr.insertText(insert,start,end)}}(handler):handler};function run(view,from,to,text,rules,plugin){if(view.composing)return!1;var state=view.state,$from=state.doc.resolve(from);if($from.parent.type.spec.code)return!1;for(var textBefore=$from.parent.textBetween(Math.max(0,$from.parentOffset-500),$from.parentOffset,null,"")+text,i=0;i<rules.length;i++){var match=rules[i].match.exec(textBefore),tr=match&&rules[i].handler(state,match,from-(match[0].length-text.length),to);if(tr)return view.dispatch(tr.setMeta(plugin,{transform:tr,from:from,to:to,text:text})),!0}return!1}new InputRule(/--$/,""),new InputRule(/\.\.\.$/,""),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new InputRule(/"$/,""),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new InputRule(/'$/,"");function deleteSelection(state,dispatch){return!state.selection.empty&&(dispatch&&dispatch(state.tr.deleteSelection().scrollIntoView()),!0)}function joinBackward(state,dispatch,view){var $cursor=state.selection.$cursor;if(!$cursor||(view?!view.endOfTextblock("backward",state):$cursor.parentOffset>0))return!1;var $cut=findCutBefore($cursor);if(!$cut){var range=$cursor.blockRange(),target=range&&liftTarget(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}var before=$cut.nodeBefore;if(!before.type.spec.isolating&&deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(textblockAt(before,"end")||index_es_NodeSelection.isSelectable(before))){if(dispatch){var tr=state.tr.deleteRange($cursor.before(),$cursor.after());tr.setSelection(textblockAt(before,"end")?index_es_Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos,-1)),-1):index_es_NodeSelection.create(tr.doc,$cut.pos-before.nodeSize)),dispatch(tr.scrollIntoView())}return!0}return!(!before.isAtom||$cut.depth!=$cursor.depth-1)&&(dispatch&&dispatch(state.tr.delete($cut.pos-before.nodeSize,$cut.pos).scrollIntoView()),!0)}function textblockAt(node,side,only){for(;node;node="start"==side?node.firstChild:node.lastChild){if(node.isTextblock)return!0;if(only&&1!=node.childCount)return!1}return!1}function selectNodeBackward(state,dispatch,view){var ref=state.selection,$head=ref.$head,$cut=$head;if(!ref.empty)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("backward",state):$head.parentOffset>0)return!1;$cut=findCutBefore($head)}var node=$cut&&$cut.nodeBefore;return!(!node||!index_es_NodeSelection.isSelectable(node))&&(dispatch&&dispatch(state.tr.setSelection(index_es_NodeSelection.create(state.doc,$cut.pos-node.nodeSize)).scrollIntoView()),!0)}function findCutBefore($pos){if(!$pos.parent.type.spec.isolating)for(var i=$pos.depth-1;i>=0;i--){if($pos.index(i)>0)return $pos.doc.resolve($pos.before(i+1));if($pos.node(i).type.spec.isolating)break}return null}function joinForward(state,dispatch,view){var $cursor=state.selection.$cursor;if(!$cursor||(view?!view.endOfTextblock("forward",state):$cursor.parentOffset<$cursor.parent.content.size))return!1;var $cut=findCutAfter($cursor);if(!$cut)return!1;var after=$cut.nodeAfter;if(deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(textblockAt(after,"start")||index_es_NodeSelection.isSelectable(after))){if(dispatch){var tr=state.tr.deleteRange($cursor.before(),$cursor.after());tr.setSelection(textblockAt(after,"start")?index_es_Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos)),1):index_es_NodeSelection.create(tr.doc,tr.mapping.map($cut.pos))),dispatch(tr.scrollIntoView())}return!0}return!(!after.isAtom||$cut.depth!=$cursor.depth-1)&&(dispatch&&dispatch(state.tr.delete($cut.pos,$cut.pos+after.nodeSize).scrollIntoView()),!0)}function selectNodeForward(state,dispatch,view){var ref=state.selection,$head=ref.$head,$cut=$head;if(!ref.empty)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("forward",state):$head.parentOffset<$head.parent.content.size)return!1;$cut=findCutAfter($head)}var node=$cut&&$cut.nodeAfter;return!(!node||!index_es_NodeSelection.isSelectable(node))&&(dispatch&&dispatch(state.tr.setSelection(index_es_NodeSelection.create(state.doc,$cut.pos)).scrollIntoView()),!0)}function findCutAfter($pos){if(!$pos.parent.type.spec.isolating)for(var i=$pos.depth-1;i>=0;i--){var parent=$pos.node(i);if($pos.index(i)+1<parent.childCount)return $pos.doc.resolve($pos.after(i+1));if(parent.type.spec.isolating)break}return null}function lift(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to),target=range&&liftTarget(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}function newlineInCode(state,dispatch){var ref=state.selection,$head=ref.$head,$anchor=ref.$anchor;return!(!$head.parent.type.spec.code||!$head.sameParent($anchor))&&(dispatch&&dispatch(state.tr.insertText("\n").scrollIntoView()),!0)}function defaultBlockAt(match){for(var i=0;i<match.edgeCount;i++){var type=match.edge(i).type;if(type.isTextblock&&!type.hasRequiredAttrs())return type}return null}function exitCode(state,dispatch){var ref=state.selection,$head=ref.$head,$anchor=ref.$anchor;if(!$head.parent.type.spec.code||!$head.sameParent($anchor))return!1;var above=$head.node(-1),after=$head.indexAfter(-1),type=defaultBlockAt(above.contentMatchAt(after));if(!above.canReplaceWith(after,after,type))return!1;if(dispatch){var pos=$head.after(),tr=state.tr.replaceWith(pos,pos,type.createAndFill());tr.setSelection(index_es_Selection.near(tr.doc.resolve(pos),1)),dispatch(tr.scrollIntoView())}return!0}function createParagraphNear(state,dispatch){var sel=state.selection,$from=sel.$from,$to=sel.$to;if(sel instanceof index_es_AllSelection||$from.parent.inlineContent||$to.parent.inlineContent)return!1;var type=defaultBlockAt($to.parent.contentMatchAt($to.indexAfter()));if(!type||!type.isTextblock)return!1;if(dispatch){var side=(!$from.parentOffset&&$to.index()<$to.parent.childCount?$from:$to).pos,tr=state.tr.insert(side,type.createAndFill());tr.setSelection(index_es_TextSelection.create(tr.doc,side+1)),dispatch(tr.scrollIntoView())}return!0}function liftEmptyBlock(state,dispatch){var $cursor=state.selection.$cursor;if(!$cursor||$cursor.parent.content.size)return!1;if($cursor.depth>1&&$cursor.after()!=$cursor.end(-1)){var before=$cursor.before();if(canSplit(state.doc,before))return dispatch&&dispatch(state.tr.split(before).scrollIntoView()),!0}var range=$cursor.blockRange(),target=range&&liftTarget(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}function splitBlock(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to;if(state.selection instanceof index_es_NodeSelection&&state.selection.node.isBlock)return!(!$from.parentOffset||!canSplit(state.doc,$from.pos))&&(dispatch&&dispatch(state.tr.split($from.pos).scrollIntoView()),!0);if(!$from.parent.isBlock)return!1;if(dispatch){var atEnd=$to.parentOffset==$to.parent.content.size,tr=state.tr;(state.selection instanceof index_es_TextSelection||state.selection instanceof index_es_AllSelection)&&tr.deleteSelection();var deflt=0==$from.depth?null:defaultBlockAt($from.node(-1).contentMatchAt($from.indexAfter(-1))),types=atEnd&&deflt?[{type:deflt}]:null,can=canSplit(tr.doc,tr.mapping.map($from.pos),1,types);if(types||can||!canSplit(tr.doc,tr.mapping.map($from.pos),1,deflt&&[{type:deflt}])||(types=[{type:deflt}],can=!0),can&&(tr.split(tr.mapping.map($from.pos),1,types),!atEnd&&!$from.parentOffset&&$from.parent.type!=deflt)){var first=tr.mapping.map($from.before()),$first=tr.doc.resolve(first);$from.node(-1).canReplaceWith($first.index(),$first.index()+1,deflt)&&tr.setNodeMarkup(tr.mapping.map($from.before()),deflt)}dispatch(tr.scrollIntoView())}return!0}function selectAll(state,dispatch){return dispatch&&dispatch(state.tr.setSelection(new index_es_AllSelection(state.doc))),!0}function deleteBarrier(state,$cut,dispatch){var conn,match,before=$cut.nodeBefore,after=$cut.nodeAfter;if(before.type.spec.isolating||after.type.spec.isolating)return!1;if(function joinMaybeClear(state,$pos,dispatch){var before=$pos.nodeBefore,after=$pos.nodeAfter,index=$pos.index();return!(!(before&&after&&before.type.compatibleContent(after.type))||(!before.content.size&&$pos.parent.canReplace(index-1,index)?(dispatch&&dispatch(state.tr.delete($pos.pos-before.nodeSize,$pos.pos).scrollIntoView()),0):!$pos.parent.canReplace(index,index+1)||!after.isTextblock&&!canJoin(state.doc,$pos.pos)||(dispatch&&dispatch(state.tr.clearIncompatible($pos.pos,before.type,before.contentMatchAt(before.childCount)).join($pos.pos).scrollIntoView()),0)))}(state,$cut,dispatch))return!0;var canDelAfter=$cut.parent.canReplace($cut.index(),$cut.index()+1);if(canDelAfter&&(conn=(match=before.contentMatchAt(before.childCount)).findWrapping(after.type))&&match.matchType(conn[0]||after.type).validEnd){if(dispatch){for(var end=$cut.pos+after.nodeSize,wrap=Fragment.empty,i=conn.length-1;i>=0;i--)wrap=Fragment.from(conn[i].create(null,wrap));wrap=Fragment.from(before.copy(wrap));var tr=state.tr.step(new index_es_ReplaceAroundStep($cut.pos-1,end,$cut.pos,end,new Slice(wrap,1,0),conn.length,!0)),joinAt=end+2*conn.length;canJoin(tr.doc,joinAt)&&tr.join(joinAt),dispatch(tr.scrollIntoView())}return!0}var selAfter=index_es_Selection.findFrom($cut,1),range=selAfter&&selAfter.$from.blockRange(selAfter.$to),target=range&&liftTarget(range);if(null!=target&&target>=$cut.depth)return dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0;if(canDelAfter&&textblockAt(after,"start",!0)&&textblockAt(before,"end")){for(var at=before,wrap$1=[];wrap$1.push(at),!at.isTextblock;)at=at.lastChild;for(var afterText=after,afterDepth=1;!afterText.isTextblock;afterText=afterText.firstChild)afterDepth++;if(at.canReplace(at.childCount,at.childCount,afterText.content)){if(dispatch){for(var end$1=Fragment.empty,i$1=wrap$1.length-1;i$1>=0;i$1--)end$1=Fragment.from(wrap$1[i$1].copy(end$1));dispatch(state.tr.step(new index_es_ReplaceAroundStep($cut.pos-wrap$1.length,$cut.pos+after.nodeSize,$cut.pos+afterDepth,$cut.pos+after.nodeSize-afterDepth,new Slice(end$1,wrap$1.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function wrapIn(nodeType,attrs){return function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to),wrapping=range&&findWrapping(range,nodeType,attrs);return!!wrapping&&(dispatch&&dispatch(state.tr.wrap(range,wrapping).scrollIntoView()),!0)}}function chainCommands(){for(var commands=[],len=arguments.length;len--;)commands[len]=arguments[len];return function(state,dispatch,view){for(var i=0;i<commands.length;i++)if(commands[i](state,dispatch,view))return!0;return!1}}var backspace=chainCommands(deleteSelection,joinBackward,selectNodeBackward),del=chainCommands(deleteSelection,joinForward,selectNodeForward),pcBaseKeymap={Enter:chainCommands(newlineInCode,createParagraphNear,liftEmptyBlock,splitBlock),"Mod-Enter":exitCode,Backspace:backspace,"Mod-Backspace":backspace,Delete:del,"Mod-Delete":del,"Mod-a":selectAll},macBaseKeymap={"Ctrl-h":pcBaseKeymap.Backspace,"Alt-Backspace":pcBaseKeymap["Mod-Backspace"],"Ctrl-d":pcBaseKeymap.Delete,"Ctrl-Alt-Backspace":pcBaseKeymap["Mod-Delete"],"Alt-Delete":pcBaseKeymap["Mod-Delete"],"Alt-d":pcBaseKeymap["Mod-Delete"]};for(var index_es_key in pcBaseKeymap)macBaseKeymap[index_es_key]=pcBaseKeymap[index_es_key];"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();function wrapInList(listType,attrs){return function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to),doJoin=!1,outerRange=range;if(!range)return!1;if(range.depth>=2&&$from.node(range.depth-1).type.compatibleContent(listType)&&0==range.startIndex){if(0==$from.index(range.depth-1))return!1;var $insert=state.doc.resolve(range.start-2);outerRange=new NodeRange($insert,$insert,range.depth),range.endIndex<range.parent.childCount&&(range=new NodeRange($from,state.doc.resolve($to.end(range.depth)),range.depth)),doJoin=!0}var wrap=findWrapping(outerRange,listType,attrs,range);return!!wrap&&(dispatch&&dispatch(function doWrapInList(tr,range,wrappers,joinBefore,listType){for(var content=Fragment.empty,i=wrappers.length-1;i>=0;i--)content=Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content));tr.step(new index_es_ReplaceAroundStep(range.start-(joinBefore?2:0),range.end,range.start,range.end,new Slice(content,0,0),wrappers.length,!0));for(var found=0,i$1=0;i$1<wrappers.length;i$1++)wrappers[i$1].type==listType&&(found=i$1+1);for(var splitDepth=wrappers.length-found,splitPos=range.start+wrappers.length-(joinBefore?2:0),parent=range.parent,i$2=range.startIndex,e=range.endIndex,first=!0;i$2<e;i$2++,first=!1)!first&&canSplit(tr.doc,splitPos,splitDepth)&&(tr.split(splitPos,splitDepth),splitPos+=2*splitDepth),splitPos+=parent.child(i$2).nodeSize;return tr}(state.tr,range,wrap,doJoin,listType).scrollIntoView()),!0)}}function liftListItem(itemType){return function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to,(function(node){return node.childCount&&node.firstChild.type==itemType}));return!!range&&(!dispatch||($from.node(range.depth-1).type==itemType?function liftToOuterList(state,dispatch,itemType,range){var tr=state.tr,end=range.end,endOfList=range.$to.end(range.depth);end<endOfList&&(tr.step(new index_es_ReplaceAroundStep(end-1,endOfList,end,endOfList,new Slice(Fragment.from(itemType.create(null,range.parent.copy())),1,0),1,!0)),range=new NodeRange(tr.doc.resolve(range.$from.pos),tr.doc.resolve(endOfList),range.depth));return dispatch(tr.lift(range,liftTarget(range)).scrollIntoView()),!0}(state,dispatch,itemType,range):function liftOutOfList(state,dispatch,range){for(var tr=state.tr,list=range.parent,pos=range.end,i=range.endIndex-1,e=range.startIndex;i>e;i--)pos-=list.child(i).nodeSize,tr.delete(pos-1,pos+1);var $start=tr.doc.resolve(range.start),item=$start.nodeAfter,atStart=0==range.startIndex,atEnd=range.endIndex==list.childCount,parent=$start.node(-1),indexBefore=$start.index(-1);if(!parent.canReplace(indexBefore+(atStart?0:1),indexBefore+1,item.content.append(atEnd?Fragment.empty:Fragment.from(list))))return!1;var start=$start.pos,end=start+item.nodeSize;return tr.step(new index_es_ReplaceAroundStep(start-(atStart?1:0),end+(atEnd?1:0),start+1,end-1,new Slice((atStart?Fragment.empty:Fragment.from(list.copy(Fragment.empty))).append(atEnd?Fragment.empty:Fragment.from(list.copy(Fragment.empty))),atStart?0:1,atEnd?0:1),atStart?0:1)),dispatch(tr.scrollIntoView()),!0}(state,dispatch,range)))}}function getSchemaTypeNameByName(name,schema){return schema.nodes[name]?"node":schema.marks[name]?"mark":null}function getNodeType(nameOrType,schema){if("string"==typeof nameOrType){if(!schema.nodes[nameOrType])throw Error(`There is no node type named '${nameOrType}'. Maybe you forgot to add the extension?`);return schema.nodes[nameOrType]}return nameOrType}function getNodeAttributes(state,typeOrName){const type=getNodeType(typeOrName,state.schema),{from:from,to:to}=state.selection;let nodes=[];state.doc.nodesBetween(from,to,(node=>{nodes=[...nodes,node]}));const node=nodes.reverse().find((nodeItem=>nodeItem.type.name===type.name));return node?{...node.attrs}:{}}function getMarkType(nameOrType,schema){if("string"==typeof nameOrType){if(!schema.marks[nameOrType])throw Error(`There is no mark type named '${nameOrType}'. Maybe you forgot to add the extension?`);return schema.marks[nameOrType]}return nameOrType}function getMarkAttributes(state,typeOrName){const type=getMarkType(typeOrName,state.schema),{from:from,to:to,empty:empty}=state.selection;let marks=[];empty?marks=state.selection.$head.marks():state.doc.nodesBetween(from,to,(node=>{marks=[...marks,...node.marks]}));const mark=marks.find((markItem=>markItem.type.name===type.name));return mark?{...mark.attrs}:{}}function objectIncludes(object1,object2){const keys=Object.keys(object2);return!keys.length||!!keys.filter((key=>object2[key]===object1[key])).length}function isNodeActive(state,typeOrName,attributes={}){const{from:from,to:to,empty:empty}=state.selection,type=typeOrName?getNodeType(typeOrName,state.schema):null;let nodeRanges=[];if(state.doc.nodesBetween(from,to,((node,pos)=>{if(!node.isText){const relativeFrom=Math.max(from,pos),relativeTo=Math.min(to,pos+node.nodeSize);nodeRanges=[...nodeRanges,{node:node,from:relativeFrom,to:relativeTo}]}})),empty)return!!nodeRanges.filter((nodeRange=>!type||type.name===nodeRange.node.type.name)).find((nodeRange=>objectIncludes(nodeRange.node.attrs,attributes)));const selectionRange=to-from;return nodeRanges.filter((nodeRange=>!type||type.name===nodeRange.node.type.name)).filter((nodeRange=>objectIncludes(nodeRange.node.attrs,attributes))).reduce(((sum,nodeRange)=>sum+(nodeRange.to-nodeRange.from)),0)>=selectionRange}function isMarkActive(state,typeOrName,attributes={}){const{from:from,to:to,empty:empty}=state.selection,type=typeOrName?getMarkType(typeOrName,state.schema):null;if(empty)return!!(state.storedMarks||state.selection.$from.marks()).filter((mark=>!type||type.name===mark.type.name)).find((mark=>objectIncludes(mark.attrs,attributes)));let selectionRange=0,markRanges=[];if(state.doc.nodesBetween(from,to,((node,pos)=>{if(node.isText){const relativeFrom=Math.max(from,pos),relativeTo=Math.min(to,pos+node.nodeSize);selectionRange+=relativeTo-relativeFrom,markRanges=[...markRanges,...node.marks.map((mark=>({mark:mark,from:relativeFrom,to:relativeTo})))]}})),0===selectionRange)return!1;const matchedRange=markRanges.filter((markRange=>!type||type.name===markRange.mark.type.name)).filter((markRange=>objectIncludes(markRange.mark.attrs,attributes))).reduce(((sum,markRange)=>sum+(markRange.to-markRange.from)),0),excludedRange=markRanges.filter((markRange=>!type||markRange.mark.type!==type&&markRange.mark.type.excludes(type))).reduce(((sum,markRange)=>sum+(markRange.to-markRange.from)),0);return(matchedRange>0?matchedRange+excludedRange:matchedRange)>=selectionRange}function elementFromString(value){const wrappedValue=`<body>${value}</body>`;return(new window.DOMParser).parseFromString(wrappedValue,"text/html").body}function createNodeFromContent(content,schema,options){if(options={slice:!0,parseOptions:{},...options},"object"==typeof content&&null!==content)try{return Array.isArray(content)?Fragment.fromArray(content.map((item=>schema.nodeFromJSON(item)))):schema.nodeFromJSON(content)}catch(error){return console.warn("[tiptap warn]: Invalid content.","Passed value:",content,"Error:",error),createNodeFromContent("",schema,options)}if("string"==typeof content){const parser=DOMParser.fromSchema(schema);return options.slice?parser.parseSlice(elementFromString(content),options.parseOptions).content:parser.parse(elementFromString(content),options.parseOptions)}return createNodeFromContent("",schema,options)}function createDocument(content,schema,parseOptions={}){return createNodeFromContent(content,schema,{slice:!1,parseOptions:parseOptions})}function getHTMLFromFragment(doc,schema){const fragment=DOMSerializer.fromSchema(schema).serializeFragment(doc.content),container=document.implementation.createHTMLDocument().createElement("div");return container.appendChild(fragment),container.innerHTML}class CommandManager{constructor(editor,commands){this.editor=editor,this.commands=commands}createCommands(){const{commands:commands,editor:editor}=this,{state:state,view:view}=editor,{tr:tr}=state,props=this.buildProps(tr);return Object.fromEntries(Object.entries(commands).map((([name,command])=>[name,(...args)=>{const callback=command(...args)(props);return tr.getMeta("preventDispatch")||view.dispatch(tr),callback}])))}createChain(startTr,shouldDispatch=!0){const{commands:commands,editor:editor}=this,{state:state,view:view}=editor,callbacks=[],hasStartTransaction=!!startTr,tr=startTr||state.tr,chain={...Object.fromEntries(Object.entries(commands).map((([name,command])=>[name,(...args)=>{const props=this.buildProps(tr,shouldDispatch),callback=command(...args)(props);return callbacks.push(callback),chain}]))),run:()=>(hasStartTransaction||!shouldDispatch||tr.getMeta("preventDispatch")||view.dispatch(tr),callbacks.every((callback=>!0===callback)))};return chain}createCan(startTr){const{commands:commands,editor:editor}=this,{state:state}=editor,tr=startTr||state.tr,props=this.buildProps(tr,undefined);return{...Object.fromEntries(Object.entries(commands).map((([name,command])=>[name,(...args)=>command(...args)({...props,dispatch:undefined})]))),chain:()=>this.createChain(tr,undefined)}}buildProps(tr,shouldDispatch=!0){const{editor:editor,commands:commands}=this,{state:state,view:view}=editor;state.storedMarks&&tr.setStoredMarks(state.storedMarks);const props={tr:tr,editor:editor,view:view,state:this.chainableState(tr,state),dispatch:shouldDispatch?()=>{}:void 0,chain:()=>this.createChain(tr),can:()=>this.createCan(tr),get commands(){return Object.fromEntries(Object.entries(commands).map((([name,command])=>[name,(...args)=>command(...args)(props)])))}};return props}chainableState(tr,state){let{selection:selection}=tr,{doc:doc}=tr,{storedMarks:storedMarks}=tr;return{...state,schema:state.schema,plugins:state.plugins,apply:state.apply.bind(state),applyTransaction:state.applyTransaction.bind(state),reconfigure:state.reconfigure.bind(state),toJSON:state.toJSON.bind(state),get storedMarks(){return storedMarks},get selection(){return selection},get doc(){return doc},get tr(){return selection=tr.selection,doc=tr.doc,storedMarks=tr.storedMarks,tr}}}}function getExtensionField(extension,field,context={}){if(void 0===extension.config[field]&&extension.parent)return getExtensionField(extension.parent,field,context);if("function"==typeof extension.config[field]){return extension.config[field].bind({...context,parent:extension.parent?getExtensionField(extension.parent,field,context):null})}return extension.config[field]}function splitExtensions(extensions){return{baseExtensions:extensions.filter((extension=>"extension"===extension.type)),nodeExtensions:extensions.filter((extension=>"node"===extension.type)),markExtensions:extensions.filter((extension=>"mark"===extension.type))}}function getAttributesFromExtensions(extensions){const extensionAttributes=[],{nodeExtensions:nodeExtensions,markExtensions:markExtensions}=splitExtensions(extensions),nodeAndMarkExtensions=[...nodeExtensions,...markExtensions],defaultAttribute={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0};return extensions.forEach((extension=>{const addGlobalAttributes=getExtensionField(extension,"addGlobalAttributes",{name:extension.name,options:extension.options});if(!addGlobalAttributes)return;addGlobalAttributes().forEach((globalAttribute=>{globalAttribute.types.forEach((type=>{Object.entries(globalAttribute.attributes).forEach((([name,attribute])=>{extensionAttributes.push({type:type,name:name,attribute:{...defaultAttribute,...attribute}})}))}))}))})),nodeAndMarkExtensions.forEach((extension=>{const context={name:extension.name,options:extension.options},addAttributes=getExtensionField(extension,"addAttributes",context);if(!addAttributes)return;const attributes=addAttributes();Object.entries(attributes).forEach((([name,attribute])=>{extensionAttributes.push({type:extension.name,name:name,attribute:{...defaultAttribute,...attribute}})}))})),extensionAttributes}function mergeAttributes(...objects){return objects.filter((item=>!!item)).reduce(((items,item)=>{const mergedAttributes={...items};return Object.entries(item).forEach((([key,value])=>{mergedAttributes[key]?mergedAttributes[key]="class"===key?[mergedAttributes[key],value].join(" "):"style"===key?[mergedAttributes[key],value].join("; "):value:mergedAttributes[key]=value})),mergedAttributes}),{})}function getRenderedAttributes(nodeOrMark,extensionAttributes){return extensionAttributes.filter((item=>item.attribute.rendered)).map((item=>item.attribute.renderHTML?item.attribute.renderHTML(nodeOrMark.attrs)||{}:{[item.name]:nodeOrMark.attrs[item.name]})).reduce(((attributes,attribute)=>mergeAttributes(attributes,attribute)),{})}function injectExtensionAttributesToParseRule(parseRule,extensionAttributes){return parseRule.style?parseRule:{...parseRule,getAttrs:node=>{const oldAttributes=parseRule.getAttrs?parseRule.getAttrs(node):parseRule.attrs;if(!1===oldAttributes)return!1;const newAttributes=extensionAttributes.filter((item=>item.attribute.rendered)).reduce(((items,item)=>{const attributes=item.attribute.parseHTML?item.attribute.parseHTML(node)||{}:{[item.name]:(value=node.getAttribute(item.name),"string"!=typeof value?value:value.match(/^\d*(\.\d+)?$/)?Number(value):"true"===value||"false"!==value&&value)};var value;return{...items,...Object.fromEntries(Object.entries(attributes).filter((([,value])=>null!=value)))}}),{});return{...oldAttributes,...newAttributes}}}}function callOrReturn(value,context,...props){return"function"==typeof value?context?value.bind(context)(...props):value(...props):value}function cleanUpSchemaItem(data){return Object.fromEntries(Object.entries(data).filter((([key,value])=>("attrs"!==key||!function isEmptyObject(object={}){return 0===Object.keys(object).length&&object.constructor===Object}(value))&&null!=value)))}function getSchemaByResolvedExtensions(extensions){var _a;const allAttributes=getAttributesFromExtensions(extensions),{nodeExtensions:nodeExtensions,markExtensions:markExtensions}=splitExtensions(extensions),topNode=null===(_a=nodeExtensions.find((extension=>getExtensionField(extension,"topNode"))))||void 0===_a?void 0:_a.name,nodes=Object.fromEntries(nodeExtensions.map((extension=>{const extensionAttributes=allAttributes.filter((attribute=>attribute.type===extension.name)),context={name:extension.name,options:extension.options},schema=cleanUpSchemaItem({...extensions.reduce(((fields,e)=>{const extendNodeSchema=getExtensionField(e,"extendNodeSchema",context);return{...fields,...extendNodeSchema?extendNodeSchema(extension):{}}}),{}),content:callOrReturn(getExtensionField(extension,"content",context)),marks:callOrReturn(getExtensionField(extension,"marks",context)),group:callOrReturn(getExtensionField(extension,"group",context)),inline:callOrReturn(getExtensionField(extension,"inline",context)),atom:callOrReturn(getExtensionField(extension,"atom",context)),selectable:callOrReturn(getExtensionField(extension,"selectable",context)),draggable:callOrReturn(getExtensionField(extension,"draggable",context)),code:callOrReturn(getExtensionField(extension,"code",context)),defining:callOrReturn(getExtensionField(extension,"defining",context)),isolating:callOrReturn(getExtensionField(extension,"isolating",context)),attrs:Object.fromEntries(extensionAttributes.map((extensionAttribute=>{var _a;return[extensionAttribute.name,{default:null===(_a=null==extensionAttribute?void 0:extensionAttribute.attribute)||void 0===_a?void 0:_a.default}]})))}),parseHTML=callOrReturn(getExtensionField(extension,"parseHTML",context));parseHTML&&(schema.parseDOM=parseHTML.map((parseRule=>injectExtensionAttributesToParseRule(parseRule,extensionAttributes))));const renderHTML=getExtensionField(extension,"renderHTML",context);return renderHTML&&(schema.toDOM=node=>renderHTML({node:node,HTMLAttributes:getRenderedAttributes(node,extensionAttributes)})),[extension.name,schema]}))),marks=Object.fromEntries(markExtensions.map((extension=>{const extensionAttributes=allAttributes.filter((attribute=>attribute.type===extension.name)),context={name:extension.name,options:extension.options},schema=cleanUpSchemaItem({...extensions.reduce(((fields,e)=>{const extendMarkSchema=getExtensionField(e,"extendMarkSchema",context);return{...fields,...extendMarkSchema?extendMarkSchema(extension):{}}}),{}),inclusive:callOrReturn(getExtensionField(extension,"inclusive",context)),excludes:callOrReturn(getExtensionField(extension,"excludes",context)),group:callOrReturn(getExtensionField(extension,"group",context)),spanning:callOrReturn(getExtensionField(extension,"spanning",context)),attrs:Object.fromEntries(extensionAttributes.map((extensionAttribute=>{var _a;return[extensionAttribute.name,{default:null===(_a=null==extensionAttribute?void 0:extensionAttribute.attribute)||void 0===_a?void 0:_a.default}]})))}),parseHTML=callOrReturn(getExtensionField(extension,"parseHTML",context));parseHTML&&(schema.parseDOM=parseHTML.map((parseRule=>injectExtensionAttributesToParseRule(parseRule,extensionAttributes))));const renderHTML=getExtensionField(extension,"renderHTML",context);return renderHTML&&(schema.toDOM=mark=>renderHTML({mark:mark,HTMLAttributes:getRenderedAttributes(mark,extensionAttributes)})),[extension.name,schema]})));return new index_es_Schema({topNode:topNode,nodes:nodes,marks:marks})}function getSchemaTypeByName(name,schema){return schema.nodes[name]?schema.nodes[name]:schema.marks[name]?schema.marks[name]:null}class tiptap_core_esm_ExtensionManager{constructor(extensions,editor){this.splittableMarks=[],this.editor=editor,this.extensions=tiptap_core_esm_ExtensionManager.resolve(extensions),this.schema=getSchemaByResolvedExtensions(this.extensions),this.extensions.forEach((extension=>{var _a;const context={name:extension.name,options:extension.options,editor:this.editor,type:getSchemaTypeByName(extension.name,this.schema)};if("mark"===extension.type){(null===(_a=callOrReturn(getExtensionField(extension,"keepOnSplit",context)))||void 0===_a||_a)&&this.splittableMarks.push(extension.name)}const onBeforeCreate=getExtensionField(extension,"onBeforeCreate",context);onBeforeCreate&&this.editor.on("beforeCreate",onBeforeCreate);const onCreate=getExtensionField(extension,"onCreate",context);onCreate&&this.editor.on("create",onCreate);const onUpdate=getExtensionField(extension,"onUpdate",context);onUpdate&&this.editor.on("update",onUpdate);const onSelectionUpdate=getExtensionField(extension,"onSelectionUpdate",context);onSelectionUpdate&&this.editor.on("selectionUpdate",onSelectionUpdate);const onTransaction=getExtensionField(extension,"onTransaction",context);onTransaction&&this.editor.on("transaction",onTransaction);const onFocus=getExtensionField(extension,"onFocus",context);onFocus&&this.editor.on("focus",onFocus);const onBlur=getExtensionField(extension,"onBlur",context);onBlur&&this.editor.on("blur",onBlur);const onDestroy=getExtensionField(extension,"onDestroy",context);onDestroy&&this.editor.on("destroy",onDestroy)}))}static resolve(extensions){return tiptap_core_esm_ExtensionManager.sort(tiptap_core_esm_ExtensionManager.flatten(extensions))}static flatten(extensions){return extensions.map((extension=>{const addExtensions=getExtensionField(extension,"addExtensions",{name:extension.name,options:extension.options});return addExtensions?[extension,...this.flatten(addExtensions())]:extension})).flat(10)}static sort(extensions){return extensions.sort(((a,b)=>{const priorityA=getExtensionField(a,"priority")||100,priorityB=getExtensionField(b,"priority")||100;return priorityA>priorityB?-1:priorityA<priorityB?1:0}))}get commands(){return this.extensions.reduce(((commands,extension)=>{const addCommands=getExtensionField(extension,"addCommands",{name:extension.name,options:extension.options,editor:this.editor,type:getSchemaTypeByName(extension.name,this.schema)});return addCommands?{...commands,...addCommands()}:commands}),{})}get plugins(){return[...this.extensions].reverse().map((extension=>{const context={name:extension.name,options:extension.options,editor:this.editor,type:getSchemaTypeByName(extension.name,this.schema)},plugins=[],addKeyboardShortcuts=getExtensionField(extension,"addKeyboardShortcuts",context);if(addKeyboardShortcuts){const keyMapPlugin=function keymap(bindings){return new Plugin({props:{handleKeyDown:keydownHandler(bindings)}})}(Object.fromEntries(Object.entries(addKeyboardShortcuts()).map((([shortcut,method])=>[shortcut,()=>method({editor:this.editor})]))));plugins.push(keyMapPlugin)}const addInputRules=getExtensionField(extension,"addInputRules",context);if(this.editor.options.enableInputRules&&addInputRules){const inputRules$1=addInputRules(),inputRulePlugins=inputRules$1.length?[(ref={rules:inputRules$1},rules=ref.rules,plugin=new Plugin({state:{init:function init(){return null},apply:function apply(tr,prev){var stored=tr.getMeta(this);return stored||(tr.selectionSet||tr.docChanged?null:prev)}},props:{handleTextInput:function handleTextInput(view,from,to,text){return run(view,from,to,text,rules,plugin)},handleDOMEvents:{compositionend:function(view){setTimeout((function(){var $cursor=view.state.selection.$cursor;$cursor&&run(view,$cursor.pos,$cursor.pos,"",rules,plugin)}))}}},isInputRules:!0}),plugin)]:[];plugins.push(...inputRulePlugins)}var ref,rules,plugin;const addPasteRules=getExtensionField(extension,"addPasteRules",context);if(this.editor.options.enablePasteRules&&addPasteRules){const pasteRulePlugins=addPasteRules();plugins.push(...pasteRulePlugins)}const addProseMirrorPlugins=getExtensionField(extension,"addProseMirrorPlugins",context);if(addProseMirrorPlugins){const proseMirrorPlugins=addProseMirrorPlugins();plugins.push(...proseMirrorPlugins)}return plugins})).flat()}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:editor}=this,{nodeExtensions:nodeExtensions}=splitExtensions(this.extensions);return Object.fromEntries(nodeExtensions.filter((extension=>!!getExtensionField(extension,"addNodeView"))).map((extension=>{const extensionAttributes=this.attributes.filter((attribute=>attribute.type===extension.name)),context={name:extension.name,options:extension.options,editor:editor,type:getNodeType(extension.name,this.schema)},addNodeView=getExtensionField(extension,"addNodeView",context);if(!addNodeView)return[];return[extension.name,(node,view,getPos,decorations)=>{const HTMLAttributes=getRenderedAttributes(node,extensionAttributes);return addNodeView()({editor:editor,node:node,getPos:getPos,decorations:decorations,HTMLAttributes:HTMLAttributes,extension:extension})}]})))}get textSerializers(){const{editor:editor}=this,{nodeExtensions:nodeExtensions}=splitExtensions(this.extensions);return Object.fromEntries(nodeExtensions.filter((extension=>!!getExtensionField(extension,"renderText"))).map((extension=>{const renderText=getExtensionField(extension,"renderText",{name:extension.name,options:extension.options,editor:editor,type:getNodeType(extension.name,this.schema)});if(!renderText)return[];return[extension.name,props=>renderText(props)]})))}}function isPlainObject(payload){return"Object"===function getType(payload){return Object.prototype.toString.call(payload).slice(8,-1)}(payload)&&(payload.constructor===Object&&Object.getPrototypeOf(payload)===Object.prototype)}function mergeDeep(target,source){const output={...target};return isPlainObject(target)&&isPlainObject(source)&&Object.keys(source).forEach((key=>{isPlainObject(source[key])?key in target?output[key]=mergeDeep(target[key],source[key]):Object.assign(output,{[key]:source[key]}):Object.assign(output,{[key]:source[key]})})),output}class tiptap_core_esm_Extension{constructor(config={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...config},this.name=this.config.name,this.options=this.config.defaultOptions}static create(config={}){return new tiptap_core_esm_Extension(config)}configure(options={}){const extension=this.extend();return extension.options=mergeDeep(this.options,options),extension}extend(extendedConfig={}){const extension=new tiptap_core_esm_Extension(extendedConfig);return extension.parent=this,this.child=extension,extension.name=extendedConfig.name?extendedConfig.name:extension.parent.name,extension.options=extendedConfig.defaultOptions?extendedConfig.defaultOptions:extension.parent.options,extension}}const ClipboardTextSerializer=tiptap_core_esm_Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:editor}=this,{from:from,to:to}=editor.state.selection;return((editor,from,to,blockSeparator,leafText)=>{let text="",separated=!0;return editor.state.doc.nodesBetween(from,to,((node,pos)=>{var _a;const textSerializer=editor.extensionManager.textSerializers[node.type.name];textSerializer?(text+=textSerializer({node:node}),separated=!blockSeparator):node.isText?(text+=null===(_a=null==node?void 0:node.text)||void 0===_a?void 0:_a.slice(Math.max(from,pos)-pos,to-pos),separated=!blockSeparator):node.isLeaf&&leafText?(text+=leafText,separated=!blockSeparator):!separated&&node.isBlock&&(text+=blockSeparator,separated=!0)}),0),text})(editor,from,to,"\n")}}})]}});var blur$1=Object.freeze({__proto__:null,blur:()=>({view:view})=>(view.dom.blur(),!0)});var clearContent$1=Object.freeze({__proto__:null,clearContent:(emitUpdate=!1)=>({commands:commands})=>commands.setContent("",emitUpdate)});var clearNodes$1=Object.freeze({__proto__:null,clearNodes:()=>({state:state,tr:tr,dispatch:dispatch})=>{const{selection:selection}=tr,{ranges:ranges}=selection;return ranges.forEach((range=>{state.doc.nodesBetween(range.$from.pos,range.$to.pos,((node,pos)=>{if(node.type.isText)return;const $fromPos=tr.doc.resolve(tr.mapping.map(pos)),$toPos=tr.doc.resolve(tr.mapping.map(pos+node.nodeSize)),nodeRange=$fromPos.blockRange($toPos);if(!nodeRange)return;const targetLiftDepth=liftTarget(nodeRange);if(node.type.isTextblock&&dispatch){const{defaultType:defaultType}=$fromPos.parent.contentMatchAt($fromPos.index());tr.setNodeMarkup(nodeRange.start,defaultType)}(targetLiftDepth||0===targetLiftDepth)&&dispatch&&tr.lift(nodeRange,targetLiftDepth)}))})),!0}});var command$1=Object.freeze({__proto__:null,command:fn=>props=>fn(props)});var createParagraphNear$1=Object.freeze({__proto__:null,createParagraphNear:()=>({state:state,dispatch:dispatch})=>createParagraphNear(state,dispatch)});var deleteRange$1=Object.freeze({__proto__:null,deleteRange:range=>({tr:tr,dispatch:dispatch})=>{const{from:from,to:to}=range;return dispatch&&tr.delete(from,to),!0}});var deleteSelection$1=Object.freeze({__proto__:null,deleteSelection:()=>({state:state,dispatch:dispatch})=>deleteSelection(state,dispatch)});var enter$1=Object.freeze({__proto__:null,enter:()=>({commands:commands})=>commands.keyboardShortcut("Enter")});var exitCode$1=Object.freeze({__proto__:null,exitCode:()=>({state:state,dispatch:dispatch})=>exitCode(state,dispatch)});function findMarkInSet(marks,type,attributes={}){return marks.find((item=>item.type===type&&objectIncludes(item.attrs,attributes)))}function isMarkInSet(marks,type,attributes={}){return!!findMarkInSet(marks,type,attributes)}function getMarkRange($pos,type,attributes={}){if(!$pos||!type)return;const start=$pos.parent.childAfter($pos.parentOffset);if(!start.node)return;const mark=findMarkInSet(start.node.marks,type,attributes);if(!mark)return;let startIndex=$pos.index(),startPos=$pos.start()+start.offset,endIndex=startIndex+1,endPos=startPos+start.node.nodeSize;for(findMarkInSet(start.node.marks,type,attributes);startIndex>0&&mark.isInSet($pos.parent.child(startIndex-1).marks);)startIndex-=1,startPos-=$pos.parent.child(startIndex).nodeSize;for(;endIndex<$pos.parent.childCount&&isMarkInSet($pos.parent.child(endIndex).marks,type,attributes);)endPos+=$pos.parent.child(endIndex).nodeSize,endIndex+=1;return{from:startPos,to:endPos}}var extendMarkRange$1=Object.freeze({__proto__:null,extendMarkRange:(typeOrName,attributes={})=>({tr:tr,state:state,dispatch:dispatch})=>{const type=getMarkType(typeOrName,state.schema),{doc:doc,selection:selection}=tr,{$from:$from,from:from,to:to}=selection;if(dispatch){const range=getMarkRange($from,type,attributes);if(range&&range.from<=from&&range.to>=to){const newSelection=index_es_TextSelection.create(doc,range.from,range.to);tr.setSelection(newSelection)}}return!0}});var first$1=Object.freeze({__proto__:null,first:commands=>props=>{const items="function"==typeof commands?commands(props):commands;for(let i=0;i<items.length;i+=1)if(items[i](props))return!0;return!1}});function minMax(value=0,min=0,max=0){return Math.min(Math.max(value,min),max)}function isObject(item){return item&&"object"==typeof item&&!Array.isArray(item)&&!function isClass(item){var _a;return"class"===(null===(_a=item.constructor)||void 0===_a?void 0:_a.toString().substring(0,5))}(item)}function isTextSelection(value){return isObject(value)&&value instanceof index_es_TextSelection}var focus$1=Object.freeze({__proto__:null,focus:(position=null)=>({editor:editor,view:view,tr:tr,dispatch:dispatch})=>{if(view.hasFocus()&&null===position||!1===position)return!0;if(dispatch&&null===position&&!isTextSelection(editor.state.selection))return view.focus(),!0;const{from:from,to:to}=function tiptap_core_esm_resolveSelection(state,position=null){if(!position)return null;if("start"===position||!0===position)return{from:0,to:0};if("end"===position){const{size:size}=state.doc.content;return{from:size,to:size}}return{from:position,to:position}}(editor.state,position)||editor.state.selection,{doc:doc,storedMarks:storedMarks}=tr,resolvedFrom=minMax(from,0,doc.content.size),resolvedEnd=minMax(to,0,doc.content.size),selection=index_es_TextSelection.create(doc,resolvedFrom,resolvedEnd),isSameSelection=editor.state.selection.eq(selection);return dispatch&&(tr.setSelection(selection),isSameSelection&&storedMarks&&tr.setStoredMarks(storedMarks),view.focus()),!0}});var forEach$1=Object.freeze({__proto__:null,forEach:(items,fn)=>props=>items.every(((item,index)=>fn(item,{...props,index:index})))});var insertContent$1=Object.freeze({__proto__:null,insertContent:value=>({tr:tr,commands:commands})=>commands.insertContentAt({from:tr.selection.from,to:tr.selection.to},value)});var insertContentAt$1=Object.freeze({__proto__:null,insertContentAt:(position,value)=>({tr:tr,dispatch:dispatch,editor:editor})=>{if(dispatch){const content=createNodeFromContent(value,editor.schema,{parseOptions:{preserveWhitespace:"full"}});if("<>"===content.toString())return!0;const{from:from,to:to}="number"==typeof position?{from:position,to:position}:position;tr.replaceWith(from,to,content),function tiptap_core_esm_selectionToInsertionEnd(tr,startLen,bias){const last=tr.steps.length-1;if(last<startLen)return;const step=tr.steps[last];if(!(step instanceof index_es_ReplaceStep||step instanceof index_es_ReplaceAroundStep))return;const map=tr.mapping.maps[last];let end=0;map.forEach(((_from,_to,_newFrom,newTo)=>{0===end&&(end=newTo)})),tr.setSelection(index_es_Selection.near(tr.doc.resolve(end),bias))}(tr,tr.steps.length-1,1)}return!0}});var joinBackward$1=Object.freeze({__proto__:null,joinBackward:()=>({state:state,dispatch:dispatch})=>joinBackward(state,dispatch)});var joinForward$1=Object.freeze({__proto__:null,joinForward:()=>({state:state,dispatch:dispatch})=>joinForward(state,dispatch)});const tiptap_core_esm_mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);var keyboardShortcut$1=Object.freeze({__proto__:null,keyboardShortcut:name=>({editor:editor,view:view,tr:tr,dispatch:dispatch})=>{const keys=function tiptap_core_esm_normalizeKeyName(name){const parts=name.split(/-(?!$)/);let alt,ctrl,shift,meta,result=parts[parts.length-1];"Space"===result&&(result=" ");for(let i=0;i<parts.length-1;i+=1){const mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))meta=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)?$/i.test(mod))shift=!0;else{if(!/^mod$/i.test(mod))throw new Error(`Unrecognized modifier name: ${mod}`);tiptap_core_esm_mac?meta=!0:ctrl=!0}}return alt&&(result=`Alt-${result}`),ctrl&&(result=`Ctrl-${result}`),meta&&(result=`Meta-${result}`),shift&&(result=`Shift-${result}`),result}(name).split(/-(?!$)/),key=keys.find((item=>!["Alt","Ctrl","Meta","Shift"].includes(item))),event=new KeyboardEvent("keydown",{key:"Space"===key?" ":key,altKey:keys.includes("Alt"),ctrlKey:keys.includes("Ctrl"),metaKey:keys.includes("Meta"),shiftKey:keys.includes("Shift"),bubbles:!0,cancelable:!0}),capturedTransaction=editor.captureTransaction((()=>{view.someProp("handleKeyDown",(f=>f(view,event)))}));return null==capturedTransaction||capturedTransaction.steps.forEach((step=>{const newStep=step.map(tr.mapping);newStep&&dispatch&&tr.maybeStep(newStep)})),!0}});var lift$1=Object.freeze({__proto__:null,lift:(typeOrName,attributes={})=>({state:state,dispatch:dispatch})=>!!isNodeActive(state,getNodeType(typeOrName,state.schema),attributes)&&lift(state,dispatch)});var liftEmptyBlock$1=Object.freeze({__proto__:null,liftEmptyBlock:()=>({state:state,dispatch:dispatch})=>liftEmptyBlock(state,dispatch)});var liftListItem$1=Object.freeze({__proto__:null,liftListItem:typeOrName=>({state:state,dispatch:dispatch})=>liftListItem(getNodeType(typeOrName,state.schema))(state,dispatch)});var newlineInCode$1=Object.freeze({__proto__:null,newlineInCode:()=>({state:state,dispatch:dispatch})=>newlineInCode(state,dispatch)});var replace$1=Object.freeze({__proto__:null,replace:(typeOrName,attributes={})=>({state:state,commands:commands})=>{console.warn("[tiptap warn]: replace() is deprecated. please use insertContent() instead.");const{from:from,to:to}=state.selection,range={from:from,to:to};return commands.replaceRange(range,typeOrName,attributes)}});var replaceRange$1=Object.freeze({__proto__:null,replaceRange:(range,typeOrName,attributes={})=>({tr:tr,state:state,dispatch:dispatch})=>{console.warn("[tiptap warn]: replaceRange() is deprecated. please use insertContent() instead.");const type=getNodeType(typeOrName,state.schema),{from:from,to:to}=range;return dispatch&&tr.replaceRangeWith(from,to,type.create(attributes)),!0}});function deleteProps(obj,propOrProps){const props="string"==typeof propOrProps?[propOrProps]:propOrProps;return Object.keys(obj).reduce(((newObj,prop)=>(props.includes(prop)||(newObj[prop]=obj[prop]),newObj)),{})}var resetAttributes$1=Object.freeze({__proto__:null,resetAttributes:(typeOrName,attributes)=>({tr:tr,state:state,dispatch:dispatch})=>{let nodeType=null,markType=null;const schemaType=getSchemaTypeNameByName("string"==typeof typeOrName?typeOrName:typeOrName.name,state.schema);return!!schemaType&&("node"===schemaType&&(nodeType=getNodeType(typeOrName,state.schema)),"mark"===schemaType&&(markType=getMarkType(typeOrName,state.schema)),dispatch&&tr.selection.ranges.forEach((range=>{state.doc.nodesBetween(range.$from.pos,range.$to.pos,((node,pos)=>{nodeType&&nodeType===node.type&&tr.setNodeMarkup(pos,void 0,deleteProps(node.attrs,attributes)),markType&&node.marks.length&&node.marks.forEach((mark=>{markType===mark.type&&tr.addMark(pos,pos+node.nodeSize,markType.create(deleteProps(mark.attrs,attributes)))}))}))})),!0)}});var scrollIntoView$1=Object.freeze({__proto__:null,scrollIntoView:()=>({tr:tr,dispatch:dispatch})=>(dispatch&&tr.scrollIntoView(),!0)});var selectAll$1=Object.freeze({__proto__:null,selectAll:()=>({state:state,dispatch:dispatch})=>selectAll(state,dispatch)});var selectNodeBackward$1=Object.freeze({__proto__:null,selectNodeBackward:()=>({state:state,dispatch:dispatch})=>selectNodeBackward(state,dispatch)});var selectNodeForward$1=Object.freeze({__proto__:null,selectNodeForward:()=>({state:state,dispatch:dispatch})=>selectNodeForward(state,dispatch)});var selectParentNode$1=Object.freeze({__proto__:null,selectParentNode:()=>({state:state,dispatch:dispatch})=>function selectParentNode(state,dispatch){var pos,ref=state.selection,$from=ref.$from,to=ref.to,same=$from.sharedDepth(to);return 0!=same&&(pos=$from.before(same),dispatch&&dispatch(state.tr.setSelection(index_es_NodeSelection.create(state.doc,pos))),!0)}(state,dispatch)});var setContent$1=Object.freeze({__proto__:null,setContent:(content,emitUpdate=!1,parseOptions={})=>({tr:tr,editor:editor,dispatch:dispatch})=>{const{doc:doc}=tr,document=createDocument(content,editor.schema,parseOptions),selection=index_es_TextSelection.create(doc,0,doc.content.size);return dispatch&&tr.setSelection(selection).replaceSelectionWith(document,!1).setMeta("preventUpdate",!emitUpdate),!0}});var setMark$1=Object.freeze({__proto__:null,setMark:(typeOrName,attributes={})=>({tr:tr,state:state,dispatch:dispatch})=>{const{selection:selection}=tr,{empty:empty,ranges:ranges}=selection,type=getMarkType(typeOrName,state.schema);if(dispatch)if(empty){const oldAttributes=getMarkAttributes(state,type);tr.addStoredMark(type.create({...oldAttributes,...attributes}))}else ranges.forEach((range=>{const from=range.$from.pos,to=range.$to.pos;state.doc.nodesBetween(from,to,((node,pos)=>{const trimmedFrom=Math.max(pos,from),trimmedTo=Math.min(pos+node.nodeSize,to);node.marks.find((mark=>mark.type===type))?node.marks.forEach((mark=>{type===mark.type&&tr.addMark(trimmedFrom,trimmedTo,type.create({...mark.attrs,...attributes}))})):tr.addMark(trimmedFrom,trimmedTo,type.create(attributes))}))}));return!0}});var setMeta$1=Object.freeze({__proto__:null,setMeta:(key,value)=>({tr:tr})=>(tr.setMeta(key,value),!0)});var setNode$1=Object.freeze({__proto__:null,setNode:(typeOrName,attributes={})=>({state:state,dispatch:dispatch})=>function setBlockType(nodeType,attrs){return function(state,dispatch){var ref=state.selection,from=ref.from,to=ref.to,applicable=!1;return state.doc.nodesBetween(from,to,(function(node,pos){if(applicable)return!1;if(node.isTextblock&&!node.hasMarkup(nodeType,attrs))if(node.type==nodeType)applicable=!0;else{var $pos=state.doc.resolve(pos),index=$pos.index();applicable=$pos.parent.canReplaceWith(index,index+1,nodeType)}})),!!applicable&&(dispatch&&dispatch(state.tr.setBlockType(from,to,nodeType,attrs).scrollIntoView()),!0)}}(getNodeType(typeOrName,state.schema),attributes)(state,dispatch)});var setNodeSelection$1=Object.freeze({__proto__:null,setNodeSelection:position=>({tr:tr,dispatch:dispatch})=>{if(dispatch){const{doc:doc}=tr,from=minMax(position,0,doc.content.size),selection=index_es_NodeSelection.create(doc,from);tr.setSelection(selection)}return!0}});var setTextSelection$1=Object.freeze({__proto__:null,setTextSelection:position=>({tr:tr,dispatch:dispatch})=>{if(dispatch){const{doc:doc}=tr,{from:from,to:to}="number"==typeof position?{from:position,to:position}:position,boundedFrom=minMax(from,0,doc.content.size),boundedTo=minMax(to,0,doc.content.size),selection=index_es_TextSelection.create(doc,boundedFrom,boundedTo);tr.setSelection(selection)}return!0}});var sinkListItem$1=Object.freeze({__proto__:null,sinkListItem:typeOrName=>({state:state,dispatch:dispatch})=>function sinkListItem(itemType){return function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to,(function(node){return node.childCount&&node.firstChild.type==itemType}));if(!range)return!1;var startIndex=range.startIndex;if(0==startIndex)return!1;var parent=range.parent,nodeBefore=parent.child(startIndex-1);if(nodeBefore.type!=itemType)return!1;if(dispatch){var nestedBefore=nodeBefore.lastChild&&nodeBefore.lastChild.type==parent.type,inner=Fragment.from(nestedBefore?itemType.create():null),slice=new Slice(Fragment.from(itemType.create(null,Fragment.from(parent.type.create(null,inner)))),nestedBefore?3:1,0),before=range.start,after=range.end;dispatch(state.tr.step(new index_es_ReplaceAroundStep(before-(nestedBefore?3:1),after,before,after,slice,1,!0)).scrollIntoView())}return!0}}(getNodeType(typeOrName,state.schema))(state,dispatch)});function getSplittedAttributes(extensionAttributes,typeName,attributes){return Object.fromEntries(Object.entries(attributes).filter((([name])=>{const extensionAttribute=extensionAttributes.find((item=>item.type===typeName&&item.name===name));return!!extensionAttribute&&extensionAttribute.attribute.keepOnSplit})))}function tiptap_core_esm_ensureMarks(state,splittableMarks){const marks=state.storedMarks||state.selection.$to.parentOffset&&state.selection.$from.marks();if(marks){const filteredMarks=marks.filter((mark=>null==splittableMarks?void 0:splittableMarks.includes(mark.type.name)));state.tr.ensureMarks(filteredMarks)}}var splitBlock$1=Object.freeze({__proto__:null,splitBlock:({keepMarks:keepMarks=!0}={})=>({tr:tr,state:state,dispatch:dispatch,editor:editor})=>{const{selection:selection,doc:doc}=tr,{$from:$from,$to:$to}=selection,newAttributes=getSplittedAttributes(editor.extensionManager.attributes,$from.node().type.name,$from.node().attrs);if(selection instanceof index_es_NodeSelection&&selection.node.isBlock)return!(!$from.parentOffset||!canSplit(doc,$from.pos))&&(dispatch&&(keepMarks&&tiptap_core_esm_ensureMarks(state,editor.extensionManager.splittableMarks),tr.split($from.pos).scrollIntoView()),!0);if(!$from.parent.isBlock)return!1;if(dispatch){const atEnd=$to.parentOffset===$to.parent.content.size;selection instanceof index_es_TextSelection&&tr.deleteSelection();const deflt=0===$from.depth?void 0:function tiptap_core_esm_defaultBlockAt(match){for(let i=0;i<match.edgeCount;i+=1){const{type:type}=match.edge(i);if(type.isTextblock&&!type.hasRequiredAttrs())return type}return null}($from.node(-1).contentMatchAt($from.indexAfter(-1)));let types=atEnd&&deflt?[{type:deflt,attrs:newAttributes}]:void 0,can=canSplit(tr.doc,tr.mapping.map($from.pos),1,types);if(types||can||!canSplit(tr.doc,tr.mapping.map($from.pos),1,deflt?[{type:deflt}]:void 0)||(can=!0,types=deflt?[{type:deflt,attrs:newAttributes}]:void 0),can&&(tr.split(tr.mapping.map($from.pos),1,types),deflt&&!atEnd&&!$from.parentOffset&&$from.parent.type!==deflt)){const first=tr.mapping.map($from.before()),$first=tr.doc.resolve(first);$from.node(-1).canReplaceWith($first.index(),$first.index()+1,deflt)&&tr.setNodeMarkup(tr.mapping.map($from.before()),deflt)}keepMarks&&tiptap_core_esm_ensureMarks(state,editor.extensionManager.splittableMarks),tr.scrollIntoView()}return!0}});var splitListItem$1=Object.freeze({__proto__:null,splitListItem:typeOrName=>({tr:tr,state:state,dispatch:dispatch,editor:editor})=>{var _a;const type=getNodeType(typeOrName,state.schema),{$from:$from,$to:$to}=state.selection,node=state.selection.node;if(node&&node.isBlock||$from.depth<2||!$from.sameParent($to))return!1;const grandParent=$from.node(-1);if(grandParent.type!==type)return!1;const extensionAttributes=editor.extensionManager.attributes;if(0===$from.parent.content.size&&$from.node(-1).childCount===$from.indexAfter(-1)){if(2===$from.depth||$from.node(-3).type!==type||$from.index(-2)!==$from.node(-2).childCount-1)return!1;if(dispatch){let wrap=Fragment.empty;const depthBefore=$from.index(-1)?1:$from.index(-2)?2:3;for(let d=$from.depth-depthBefore;d>=$from.depth-3;d-=1)wrap=Fragment.from($from.node(d).copy(wrap));const depthAfter=$from.indexAfter(-1)<$from.node(-2).childCount?1:$from.indexAfter(-2)<$from.node(-3).childCount?2:3,newNextTypeAttributes=getSplittedAttributes(extensionAttributes,$from.node().type.name,$from.node().attrs),nextType=(null===(_a=type.contentMatch.defaultType)||void 0===_a?void 0:_a.createAndFill(newNextTypeAttributes))||void 0;wrap=wrap.append(Fragment.from(type.createAndFill(null,nextType)||void 0));const start=$from.before($from.depth-(depthBefore-1));tr.replace(start,$from.after(-depthAfter),new Slice(wrap,4-depthBefore,0));let sel=-1;tr.doc.nodesBetween(start,tr.doc.content.size,((n,pos)=>{if(sel>-1)return!1;n.isTextblock&&0===n.content.size&&(sel=pos+1)})),sel>-1&&tr.setSelection(index_es_TextSelection.near(tr.doc.resolve(sel))),tr.scrollIntoView()}return!0}const nextType=$to.pos===$from.end()?grandParent.contentMatchAt(0).defaultType:null,newTypeAttributes=getSplittedAttributes(extensionAttributes,grandParent.type.name,grandParent.attrs),newNextTypeAttributes=getSplittedAttributes(extensionAttributes,$from.node().type.name,$from.node().attrs);tr.delete($from.pos,$to.pos);const types=nextType?[{type:type,attrs:newTypeAttributes},{type:nextType,attrs:newNextTypeAttributes}]:[{type:type,attrs:newTypeAttributes}];return!!canSplit(tr.doc,$from.pos,2)&&(dispatch&&tr.split($from.pos,2,types).scrollIntoView(),!0)}});function isList(name,extensions){const{nodeExtensions:nodeExtensions}=splitExtensions(extensions),extension=nodeExtensions.find((item=>item.name===name));if(!extension)return!1;const group=callOrReturn(getExtensionField(extension,"group",{name:extension.name,options:extension.options}));return"string"==typeof group&&group.split(" ").includes("list")}var toggleList$1=Object.freeze({__proto__:null,toggleList:(listTypeOrName,itemTypeOrName)=>({editor:editor,tr:tr,state:state,dispatch:dispatch,chain:chain,commands:commands,can:can})=>{const{extensions:extensions}=editor.extensionManager,listType=getNodeType(listTypeOrName,state.schema),itemType=getNodeType(itemTypeOrName,state.schema),{selection:selection}=state,{$from:$from,$to:$to}=selection,range=$from.blockRange($to);if(!range)return!1;const parentList=function findParentNode(predicate){return selection=>function findParentNodeClosestToPos($pos,predicate){for(let i=$pos.depth;i>0;i-=1){const node=$pos.node(i);if(predicate(node))return{pos:i>0?$pos.before(i):0,start:$pos.start(i),depth:i,node:node}}}(selection.$from,predicate)}((node=>isList(node.type.name,extensions)))(selection);if(range.depth>=1&&parentList&&range.depth-parentList.depth<=1){if(parentList.node.type===listType)return commands.liftListItem(itemType);if(isList(parentList.node.type.name,extensions)&&listType.validContent(parentList.node.content)&&dispatch)return tr.setNodeMarkup(parentList.pos,listType),!0}return can().wrapInList(listType)?commands.wrapInList(listType):chain().clearNodes().wrapInList(listType).run()}});var toggleMark$1=Object.freeze({__proto__:null,toggleMark:(typeOrName,attributes={})=>({state:state,commands:commands})=>{const type=getMarkType(typeOrName,state.schema);return isMarkActive(state,type,attributes)?commands.unsetMark(type):commands.setMark(type,attributes)}});var toggleNode$1=Object.freeze({__proto__:null,toggleNode:(typeOrName,toggleTypeOrName,attributes={})=>({state:state,commands:commands})=>{const type=getNodeType(typeOrName,state.schema),toggleType=getNodeType(toggleTypeOrName,state.schema);return isNodeActive(state,type,attributes)?commands.setNode(toggleType):commands.setNode(type,attributes)}});var toggleWrap$1=Object.freeze({__proto__:null,toggleWrap:(typeOrName,attributes={})=>({state:state,dispatch:dispatch})=>{const type=getNodeType(typeOrName,state.schema);return isNodeActive(state,type,attributes)?lift(state,dispatch):wrapIn(type,attributes)(state,dispatch)}});var undoInputRule$1=Object.freeze({__proto__:null,undoInputRule:()=>({state:state,dispatch:dispatch})=>function undoInputRule(state,dispatch){for(var plugins=state.plugins,i=0;i<plugins.length;i++){var plugin=plugins[i],undoable=void 0;if(plugin.spec.isInputRules&&(undoable=plugin.getState(state))){if(dispatch){for(var tr=state.tr,toUndo=undoable.transform,j=toUndo.steps.length-1;j>=0;j--)tr.step(toUndo.steps[j].invert(toUndo.docs[j]));if(undoable.text){var marks=tr.doc.resolve(undoable.from).marks();tr.replaceWith(undoable.from,undoable.to,state.schema.text(undoable.text,marks))}else tr.delete(undoable.from,undoable.to);dispatch(tr)}return!0}}return!1}(state,dispatch)});var unsetAllMarks$1=Object.freeze({__proto__:null,unsetAllMarks:()=>({tr:tr,state:state,dispatch:dispatch})=>{const{selection:selection}=tr,{empty:empty,ranges:ranges}=selection;return empty||dispatch&&Object.entries(state.schema.marks).forEach((([,mark])=>{ranges.forEach((range=>{tr.removeMark(range.$from.pos,range.$to.pos,mark)}))})),!0}});var unsetMark$1=Object.freeze({__proto__:null,unsetMark:typeOrName=>({tr:tr,state:state,dispatch:dispatch})=>{const{selection:selection}=tr,type=getMarkType(typeOrName,state.schema),{$from:$from,empty:empty,ranges:ranges}=selection;if(dispatch){if(empty){let{from:from,to:to}=selection;const range=getMarkRange($from,type);range&&(from=range.from,to=range.to),tr.removeMark(from,to,type)}else ranges.forEach((range=>{tr.removeMark(range.$from.pos,range.$to.pos,type)}));tr.removeStoredMark(type)}return!0}});var updateAttributes$1=Object.freeze({__proto__:null,updateAttributes:(typeOrName,attributes={})=>({tr:tr,state:state,dispatch:dispatch})=>{let nodeType=null,markType=null;const schemaType=getSchemaTypeNameByName("string"==typeof typeOrName?typeOrName:typeOrName.name,state.schema);return!!schemaType&&("node"===schemaType&&(nodeType=getNodeType(typeOrName,state.schema)),"mark"===schemaType&&(markType=getMarkType(typeOrName,state.schema)),dispatch&&tr.selection.ranges.forEach((range=>{const from=range.$from.pos,to=range.$to.pos;state.doc.nodesBetween(from,to,((node,pos)=>{nodeType&&nodeType===node.type&&tr.setNodeMarkup(pos,void 0,{...node.attrs,...attributes}),markType&&node.marks.length&&node.marks.forEach((mark=>{if(markType===mark.type){const trimmedFrom=Math.max(pos,from),trimmedTo=Math.min(pos+node.nodeSize,to);tr.addMark(trimmedFrom,trimmedTo,markType.create({...mark.attrs,...attributes}))}}))}))})),!0)}});var wrapIn$1=Object.freeze({__proto__:null,wrapIn:(typeOrName,attributes={})=>({state:state,dispatch:dispatch})=>{const type=getNodeType(typeOrName,state.schema);return!isNodeActive(state,type,attributes)&&wrapIn(type,attributes)(state,dispatch)}});var wrapInList$1=Object.freeze({__proto__:null,wrapInList:(typeOrName,attributes={})=>({state:state,dispatch:dispatch})=>wrapInList(getNodeType(typeOrName,state.schema),attributes)(state,dispatch)});const Commands=tiptap_core_esm_Extension.create({name:"commands",addCommands:()=>({...blur$1,...clearContent$1,...clearNodes$1,...command$1,...createParagraphNear$1,...deleteRange$1,...deleteSelection$1,...enter$1,...exitCode$1,...extendMarkRange$1,...first$1,...focus$1,...forEach$1,...insertContent$1,...insertContentAt$1,...joinBackward$1,...joinForward$1,...keyboardShortcut$1,...lift$1,...liftEmptyBlock$1,...liftListItem$1,...newlineInCode$1,...replace$1,...replaceRange$1,...resetAttributes$1,...scrollIntoView$1,...selectAll$1,...selectNodeBackward$1,...selectNodeForward$1,...selectParentNode$1,...setContent$1,...setMark$1,...setMeta$1,...setNode$1,...setNodeSelection$1,...setTextSelection$1,...sinkListItem$1,...splitBlock$1,...splitListItem$1,...toggleList$1,...toggleMark$1,...toggleNode$1,...toggleWrap$1,...undoInputRule$1,...unsetAllMarks$1,...unsetMark$1,...updateAttributes$1,...wrapIn$1,...wrapInList$1})}),Editable=tiptap_core_esm_Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),FocusEvents=tiptap_core_esm_Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:editor}=this;return[new Plugin({key:new PluginKey("focusEvents"),props:{attributes:{tabindex:"0"},handleDOMEvents:{focus:(view,event)=>{editor.isFocused=!0;const transaction=editor.state.tr.setMeta("focus",{event:event}).setMeta("addToHistory",!1);return view.dispatch(transaction),!1},blur:(view,event)=>{editor.isFocused=!1;const transaction=editor.state.tr.setMeta("blur",{event:event}).setMeta("addToHistory",!1);return view.dispatch(transaction),!1}}}})]}}),Keymap=tiptap_core_esm_Extension.create({name:"keymap",addKeyboardShortcuts(){const handleBackspace=()=>this.editor.commands.first((({commands:commands})=>[()=>commands.undoInputRule(),()=>commands.deleteSelection(),()=>commands.joinBackward(),()=>commands.selectNodeBackward()])),handleDelete=()=>this.editor.commands.first((({commands:commands})=>[()=>commands.deleteSelection(),()=>commands.joinForward(),()=>commands.selectNodeForward()]));return{Enter:()=>this.editor.commands.first((({commands:commands})=>[()=>commands.newlineInCode(),()=>commands.createParagraphNear(),()=>commands.liftEmptyBlock(),()=>commands.splitBlock()])),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:()=>handleBackspace(),"Mod-Backspace":()=>handleBackspace(),Delete:()=>handleDelete(),"Mod-Delete":()=>handleDelete()}}});var tiptap_core_esm_extensions=Object.freeze({__proto__:null,ClipboardTextSerializer:ClipboardTextSerializer,Commands:Commands,Editable:Editable,FocusEvents:FocusEvents,Keymap:Keymap});function posToDOMRect(view,from,to){const start=view.coordsAtPos(from),end=view.coordsAtPos(to,-1),top=Math.min(start.top,end.top),bottom=Math.max(start.bottom,end.bottom),left=Math.min(start.left,end.left),right=Math.max(start.right,end.right),data={top:top,bottom:bottom,left:left,right:right,width:right-left,height:bottom-top,x:left,y:top};return{...data,toJSON:()=>data}}var lib_popper=__webpack_require__(1875),applyStyles=__webpack_require__(1841),TOUCH_OPTIONS={passive:!0,capture:!0};function getValueAtIndexOrReturn(value,index,defaultValue){if(Array.isArray(value)){var v=value[index];return null==v?Array.isArray(defaultValue)?defaultValue[index]:defaultValue:v}return value}function isType(value,type){var str={}.toString.call(value);return 0===str.indexOf("[object")&&str.indexOf(type+"]")>-1}function invokeWithArgsOrReturn(value,args){return"function"==typeof value?value.apply(void 0,args):value}function debounce(fn,ms){return 0===ms?fn:function(arg){clearTimeout(timeout),timeout=setTimeout((function(){fn(arg)}),ms)};var timeout}function normalizeToArray(value){return[].concat(value)}function pushIfUnique(arr,value){-1===arr.indexOf(value)&&arr.push(value)}function getBasePlacement(placement){return placement.split("-")[0]}function arrayFrom(value){return[].slice.call(value)}function div(){return document.createElement("div")}function isElement(value){return["Element","Fragment"].some((function(type){return isType(value,type)}))}function isMouseEvent(value){return isType(value,"MouseEvent")}function isReferenceElement(value){return!(!value||!value._tippy||value._tippy.reference!==value)}function getArrayOfElements(value){return isElement(value)?[value]:function isNodeList(value){return isType(value,"NodeList")}(value)?arrayFrom(value):Array.isArray(value)?value:arrayFrom(document.querySelectorAll(value))}function setTransitionDuration(els,value){els.forEach((function(el){el&&(el.style.transitionDuration=value+"ms")}))}function setVisibilityState(els,state){els.forEach((function(el){el&&el.setAttribute("data-state",state)}))}function getOwnerDocument(elementOrElements){var _element$ownerDocumen,element=normalizeToArray(elementOrElements)[0];return(null==element||null==(_element$ownerDocumen=element.ownerDocument)?void 0:_element$ownerDocumen.body)?element.ownerDocument:document}function updateTransitionEndListener(box,action,listener){var method=action+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(event){box[method](event,listener)}))}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var now=performance.now();now-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=now}function onWindowBlur(){var activeElement=document.activeElement;if(isReferenceElement(activeElement)){var instance=activeElement._tippy;activeElement.blur&&!instance.state.isVisible&&activeElement.blur()}}var ua="undefined"!=typeof window&&"undefined"!=typeof document?navigator.userAgent:"",isIE=/MSIE |Trident\//.test(ua);var pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},defaultProps=Object.assign({appendTo:function appendTo(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function onAfterUpdate(){},onBeforeUpdate:function onBeforeUpdate(){},onCreate:function onCreate(){},onDestroy:function onDestroy(){},onHidden:function onHidden(){},onHide:function onHide(){},onMount:function onMount(){},onShow:function onShow(){},onShown:function onShown(){},onTrigger:function onTrigger(){},onUntrigger:function onUntrigger(){},onClickOutside:function onClickOutside(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,{},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),defaultKeys=Object.keys(defaultProps);function getExtendedPassedProps(passedProps){var pluginProps=(passedProps.plugins||[]).reduce((function(acc,plugin){var name=plugin.name,defaultValue=plugin.defaultValue;return name&&(acc[name]=void 0!==passedProps[name]?passedProps[name]:defaultValue),acc}),{});return Object.assign({},passedProps,{},pluginProps)}function evaluateProps(reference,props){var out=Object.assign({},props,{content:invokeWithArgsOrReturn(props.content,[reference])},props.ignoreAttributes?{}:function getDataAttributeProps(reference,plugins){return(plugins?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:plugins}))):defaultKeys).reduce((function(acc,key){var valueAsString=(reference.getAttribute("data-tippy-"+key)||"").trim();if(!valueAsString)return acc;if("content"===key)acc[key]=valueAsString;else try{acc[key]=JSON.parse(valueAsString)}catch(e){acc[key]=valueAsString}return acc}),{})}(reference,props.plugins));return out.aria=Object.assign({},defaultProps.aria,{},out.aria),out.aria={expanded:"auto"===out.aria.expanded?props.interactive:out.aria.expanded,content:"auto"===out.aria.content?props.interactive?null:"describedby":out.aria.content},out}function dangerouslySetInnerHTML(element,html){element.innerHTML=html}function createArrowElement(value){var arrow=div();return!0===value?arrow.className="tippy-arrow":(arrow.className="tippy-svg-arrow",isElement(value)?arrow.appendChild(value):dangerouslySetInnerHTML(arrow,value)),arrow}function tippy_esm_setContent(content,props){isElement(props.content)?(dangerouslySetInnerHTML(content,""),content.appendChild(props.content)):"function"!=typeof props.content&&(props.allowHTML?dangerouslySetInnerHTML(content,props.content):content.textContent=props.content)}function getChildren(popper){var box=popper.firstElementChild,boxChildren=arrayFrom(box.children);return{box:box,content:boxChildren.find((function(node){return node.classList.contains("tippy-content")})),arrow:boxChildren.find((function(node){return node.classList.contains("tippy-arrow")||node.classList.contains("tippy-svg-arrow")})),backdrop:boxChildren.find((function(node){return node.classList.contains("tippy-backdrop")}))}}function render(instance){var popper=div(),box=div();box.className="tippy-box",box.setAttribute("data-state","hidden"),box.setAttribute("tabindex","-1");var content=div();function onUpdate(prevProps,nextProps){var _getChildren=getChildren(popper),box=_getChildren.box,content=_getChildren.content,arrow=_getChildren.arrow;nextProps.theme?box.setAttribute("data-theme",nextProps.theme):box.removeAttribute("data-theme"),"string"==typeof nextProps.animation?box.setAttribute("data-animation",nextProps.animation):box.removeAttribute("data-animation"),nextProps.inertia?box.setAttribute("data-inertia",""):box.removeAttribute("data-inertia"),box.style.maxWidth="number"==typeof nextProps.maxWidth?nextProps.maxWidth+"px":nextProps.maxWidth,nextProps.role?box.setAttribute("role",nextProps.role):box.removeAttribute("role"),prevProps.content===nextProps.content&&prevProps.allowHTML===nextProps.allowHTML||tippy_esm_setContent(content,instance.props),nextProps.arrow?arrow?prevProps.arrow!==nextProps.arrow&&(box.removeChild(arrow),box.appendChild(createArrowElement(nextProps.arrow))):box.appendChild(createArrowElement(nextProps.arrow)):arrow&&box.removeChild(arrow)}return content.className="tippy-content",content.setAttribute("data-state","hidden"),tippy_esm_setContent(content,instance.props),popper.appendChild(box),box.appendChild(content),onUpdate(instance.props,instance.props),{popper:popper,onUpdate:onUpdate}}render.$$tippy=!0;var idCounter=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(reference,passedProps){var showTimeout,hideTimeout,scheduleHideAnimationFrame,lastTriggerEvent,currentTransitionEndListener,onFirstUpdate,currentTarget,props=evaluateProps(reference,Object.assign({},defaultProps,{},getExtendedPassedProps(function removeUndefinedProps(obj){return Object.keys(obj).reduce((function(acc,key){return void 0!==obj[key]&&(acc[key]=obj[key]),acc}),{})}(passedProps)))),isVisibleFromClick=!1,didHideDueToDocumentMouseDown=!1,didTouchMove=!1,ignoreOnFirstUpdate=!1,listeners=[],debouncedOnMouseMove=debounce(onMouseMove,props.interactiveDebounce),id=idCounter++,plugins=function unique(arr){return arr.filter((function(item,index){return arr.indexOf(item)===index}))}(props.plugins),instance={id:id,reference:reference,popper:div(),popperInstance:null,props:props,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:plugins,clearDelayTimeouts:function clearDelayTimeouts(){clearTimeout(showTimeout),clearTimeout(hideTimeout),cancelAnimationFrame(scheduleHideAnimationFrame)},setProps:function setProps(partialProps){0;if(instance.state.isDestroyed)return;invokeHook("onBeforeUpdate",[instance,partialProps]),removeListeners();var prevProps=instance.props,nextProps=evaluateProps(reference,Object.assign({},instance.props,{},partialProps,{ignoreAttributes:!0}));instance.props=nextProps,addListeners(),prevProps.interactiveDebounce!==nextProps.interactiveDebounce&&(cleanupInteractiveMouseListeners(),debouncedOnMouseMove=debounce(onMouseMove,nextProps.interactiveDebounce));prevProps.triggerTarget&&!nextProps.triggerTarget?normalizeToArray(prevProps.triggerTarget).forEach((function(node){node.removeAttribute("aria-expanded")})):nextProps.triggerTarget&&reference.removeAttribute("aria-expanded");handleAriaExpandedAttribute(),handleStyles(),onUpdate&&onUpdate(prevProps,nextProps);instance.popperInstance&&(createPopperInstance(),getNestedPopperTree().forEach((function(nestedPopper){requestAnimationFrame(nestedPopper._tippy.popperInstance.forceUpdate)})));invokeHook("onAfterUpdate",[instance,partialProps])},setContent:function setContent(content){instance.setProps({content:content})},show:function show(){0;var isAlreadyVisible=instance.state.isVisible,isDestroyed=instance.state.isDestroyed,isDisabled=!instance.state.isEnabled,isTouchAndTouchDisabled=currentInput.isTouch&&!instance.props.touch,duration=getValueAtIndexOrReturn(instance.props.duration,0,defaultProps.duration);if(isAlreadyVisible||isDestroyed||isDisabled||isTouchAndTouchDisabled)return;if(getCurrentTarget().hasAttribute("disabled"))return;if(invokeHook("onShow",[instance],!1),!1===instance.props.onShow(instance))return;instance.state.isVisible=!0,getIsDefaultRenderFn()&&(popper.style.visibility="visible");handleStyles(),addDocumentPress(),instance.state.isMounted||(popper.style.transition="none");if(getIsDefaultRenderFn()){var _getDefaultTemplateCh2=getDefaultTemplateChildren(),box=_getDefaultTemplateCh2.box,content=_getDefaultTemplateCh2.content;setTransitionDuration([box,content],0)}onFirstUpdate=function onFirstUpdate(){var _instance$popperInsta2;if(instance.state.isVisible&&!ignoreOnFirstUpdate){if(ignoreOnFirstUpdate=!0,popper.offsetHeight,popper.style.transition=instance.props.moveTransition,getIsDefaultRenderFn()&&instance.props.animation){var _getDefaultTemplateCh3=getDefaultTemplateChildren(),_box=_getDefaultTemplateCh3.box,_content=_getDefaultTemplateCh3.content;setTransitionDuration([_box,_content],duration),setVisibilityState([_box,_content],"visible")}handleAriaContentAttribute(),handleAriaExpandedAttribute(),pushIfUnique(mountedInstances,instance),null==(_instance$popperInsta2=instance.popperInstance)||_instance$popperInsta2.forceUpdate(),instance.state.isMounted=!0,invokeHook("onMount",[instance]),instance.props.animation&&getIsDefaultRenderFn()&&function onTransitionedIn(duration,callback){onTransitionEnd(duration,callback)}(duration,(function(){instance.state.isShown=!0,invokeHook("onShown",[instance])}))}},function mount(){var parentNode,appendTo=instance.props.appendTo,node=getCurrentTarget();parentNode=instance.props.interactive&&appendTo===defaultProps.appendTo||"parent"===appendTo?node.parentNode:invokeWithArgsOrReturn(appendTo,[node]);parentNode.contains(popper)||parentNode.appendChild(popper);createPopperInstance(),!1}()},hide:function hide(){0;var isAlreadyHidden=!instance.state.isVisible,isDestroyed=instance.state.isDestroyed,isDisabled=!instance.state.isEnabled,duration=getValueAtIndexOrReturn(instance.props.duration,1,defaultProps.duration);if(isAlreadyHidden||isDestroyed||isDisabled)return;if(invokeHook("onHide",[instance],!1),!1===instance.props.onHide(instance))return;instance.state.isVisible=!1,instance.state.isShown=!1,ignoreOnFirstUpdate=!1,isVisibleFromClick=!1,getIsDefaultRenderFn()&&(popper.style.visibility="hidden");if(cleanupInteractiveMouseListeners(),removeDocumentPress(),handleStyles(),getIsDefaultRenderFn()){var _getDefaultTemplateCh4=getDefaultTemplateChildren(),box=_getDefaultTemplateCh4.box,content=_getDefaultTemplateCh4.content;instance.props.animation&&(setTransitionDuration([box,content],duration),setVisibilityState([box,content],"hidden"))}handleAriaContentAttribute(),handleAriaExpandedAttribute(),instance.props.animation?getIsDefaultRenderFn()&&function onTransitionedOut(duration,callback){onTransitionEnd(duration,(function(){!instance.state.isVisible&&popper.parentNode&&popper.parentNode.contains(popper)&&callback()}))}(duration,instance.unmount):instance.unmount()},hideWithInteractivity:function hideWithInteractivity(event){0;getDocument().addEventListener("mousemove",debouncedOnMouseMove),pushIfUnique(mouseMoveListeners,debouncedOnMouseMove),debouncedOnMouseMove(event)},enable:function enable(){instance.state.isEnabled=!0},disable:function disable(){instance.hide(),instance.state.isEnabled=!1},unmount:function unmount(){0;instance.state.isVisible&&instance.hide();if(!instance.state.isMounted)return;destroyPopperInstance(),getNestedPopperTree().forEach((function(nestedPopper){nestedPopper._tippy.unmount()})),popper.parentNode&&popper.parentNode.removeChild(popper);mountedInstances=mountedInstances.filter((function(i){return i!==instance})),instance.state.isMounted=!1,invokeHook("onHidden",[instance])},destroy:function destroy(){0;if(instance.state.isDestroyed)return;instance.clearDelayTimeouts(),instance.unmount(),removeListeners(),delete reference._tippy,instance.state.isDestroyed=!0,invokeHook("onDestroy",[instance])}};if(!props.render)return instance;var _props$render=props.render(instance),popper=_props$render.popper,onUpdate=_props$render.onUpdate;popper.setAttribute("data-tippy-root",""),popper.id="tippy-"+instance.id,instance.popper=popper,reference._tippy=instance,popper._tippy=instance;var pluginsHooks=plugins.map((function(plugin){return plugin.fn(instance)})),hasAriaExpanded=reference.hasAttribute("aria-expanded");return addListeners(),handleAriaExpandedAttribute(),handleStyles(),invokeHook("onCreate",[instance]),props.showOnCreate&&scheduleShow(),popper.addEventListener("mouseenter",(function(){instance.props.interactive&&instance.state.isVisible&&instance.clearDelayTimeouts()})),popper.addEventListener("mouseleave",(function(event){instance.props.interactive&&instance.props.trigger.indexOf("mouseenter")>=0&&(getDocument().addEventListener("mousemove",debouncedOnMouseMove),debouncedOnMouseMove(event))})),instance;function getNormalizedTouchSettings(){var touch=instance.props.touch;return Array.isArray(touch)?touch:[touch,0]}function getIsCustomTouchBehavior(){return"hold"===getNormalizedTouchSettings()[0]}function getIsDefaultRenderFn(){var _instance$props$rende;return!!(null==(_instance$props$rende=instance.props.render)?void 0:_instance$props$rende.$$tippy)}function getCurrentTarget(){return currentTarget||reference}function getDocument(){var parent=getCurrentTarget().parentNode;return parent?getOwnerDocument(parent):document}function getDefaultTemplateChildren(){return getChildren(popper)}function getDelay(isShow){return instance.state.isMounted&&!instance.state.isVisible||currentInput.isTouch||lastTriggerEvent&&"focus"===lastTriggerEvent.type?0:getValueAtIndexOrReturn(instance.props.delay,isShow?0:1,defaultProps.delay)}function handleStyles(){popper.style.pointerEvents=instance.props.interactive&&instance.state.isVisible?"":"none",popper.style.zIndex=""+instance.props.zIndex}function invokeHook(hook,args,shouldInvokePropsHook){var _instance$props;(void 0===shouldInvokePropsHook&&(shouldInvokePropsHook=!0),pluginsHooks.forEach((function(pluginHooks){pluginHooks[hook]&&pluginHooks[hook].apply(void 0,args)})),shouldInvokePropsHook)&&(_instance$props=instance.props)[hook].apply(_instance$props,args)}function handleAriaContentAttribute(){var aria=instance.props.aria;if(aria.content){var attr="aria-"+aria.content,id=popper.id;normalizeToArray(instance.props.triggerTarget||reference).forEach((function(node){var currentValue=node.getAttribute(attr);if(instance.state.isVisible)node.setAttribute(attr,currentValue?currentValue+" "+id:id);else{var nextValue=currentValue&&currentValue.replace(id,"").trim();nextValue?node.setAttribute(attr,nextValue):node.removeAttribute(attr)}}))}}function handleAriaExpandedAttribute(){!hasAriaExpanded&&instance.props.aria.expanded&&normalizeToArray(instance.props.triggerTarget||reference).forEach((function(node){instance.props.interactive?node.setAttribute("aria-expanded",instance.state.isVisible&&node===getCurrentTarget()?"true":"false"):node.removeAttribute("aria-expanded")}))}function cleanupInteractiveMouseListeners(){getDocument().removeEventListener("mousemove",debouncedOnMouseMove),mouseMoveListeners=mouseMoveListeners.filter((function(listener){return listener!==debouncedOnMouseMove}))}function onDocumentPress(event){if(!(currentInput.isTouch&&(didTouchMove||"mousedown"===event.type)||instance.props.interactive&&popper.contains(event.target))){if(getCurrentTarget().contains(event.target)){if(currentInput.isTouch)return;if(instance.state.isVisible&&instance.props.trigger.indexOf("click")>=0)return}else invokeHook("onClickOutside",[instance,event]);!0===instance.props.hideOnClick&&(instance.clearDelayTimeouts(),instance.hide(),didHideDueToDocumentMouseDown=!0,setTimeout((function(){didHideDueToDocumentMouseDown=!1})),instance.state.isMounted||removeDocumentPress())}}function onTouchMove(){didTouchMove=!0}function onTouchStart(){didTouchMove=!1}function addDocumentPress(){var doc=getDocument();doc.addEventListener("mousedown",onDocumentPress,!0),doc.addEventListener("touchend",onDocumentPress,TOUCH_OPTIONS),doc.addEventListener("touchstart",onTouchStart,TOUCH_OPTIONS),doc.addEventListener("touchmove",onTouchMove,TOUCH_OPTIONS)}function removeDocumentPress(){var doc=getDocument();doc.removeEventListener("mousedown",onDocumentPress,!0),doc.removeEventListener("touchend",onDocumentPress,TOUCH_OPTIONS),doc.removeEventListener("touchstart",onTouchStart,TOUCH_OPTIONS),doc.removeEventListener("touchmove",onTouchMove,TOUCH_OPTIONS)}function onTransitionEnd(duration,callback){var box=getDefaultTemplateChildren().box;function listener(event){event.target===box&&(updateTransitionEndListener(box,"remove",listener),callback())}if(0===duration)return callback();updateTransitionEndListener(box,"remove",currentTransitionEndListener),updateTransitionEndListener(box,"add",listener),currentTransitionEndListener=listener}function on(eventType,handler,options){void 0===options&&(options=!1),normalizeToArray(instance.props.triggerTarget||reference).forEach((function(node){node.addEventListener(eventType,handler,options),listeners.push({node:node,eventType:eventType,handler:handler,options:options})}))}function addListeners(){getIsCustomTouchBehavior()&&(on("touchstart",onTrigger,{passive:!0}),on("touchend",onMouseLeave,{passive:!0})),function splitBySpaces(value){return value.split(/\s+/).filter(Boolean)}(instance.props.trigger).forEach((function(eventType){if("manual"!==eventType)switch(on(eventType,onTrigger),eventType){case"mouseenter":on("mouseleave",onMouseLeave);break;case"focus":on(isIE?"focusout":"blur",onBlurOrFocusOut);break;case"focusin":on("focusout",onBlurOrFocusOut)}}))}function removeListeners(){listeners.forEach((function(_ref){var node=_ref.node,eventType=_ref.eventType,handler=_ref.handler,options=_ref.options;node.removeEventListener(eventType,handler,options)})),listeners=[]}function onTrigger(event){var _lastTriggerEvent,shouldScheduleClickHide=!1;if(instance.state.isEnabled&&!isEventListenerStopped(event)&&!didHideDueToDocumentMouseDown){var wasFocused="focus"===(null==(_lastTriggerEvent=lastTriggerEvent)?void 0:_lastTriggerEvent.type);lastTriggerEvent=event,currentTarget=event.currentTarget,handleAriaExpandedAttribute(),!instance.state.isVisible&&isMouseEvent(event)&&mouseMoveListeners.forEach((function(listener){return listener(event)})),"click"===event.type&&(instance.props.trigger.indexOf("mouseenter")<0||isVisibleFromClick)&&!1!==instance.props.hideOnClick&&instance.state.isVisible?shouldScheduleClickHide=!0:scheduleShow(event),"click"===event.type&&(isVisibleFromClick=!shouldScheduleClickHide),shouldScheduleClickHide&&!wasFocused&&scheduleHide(event)}}function onMouseMove(event){var target=event.target,isCursorOverReferenceOrPopper=getCurrentTarget().contains(target)||popper.contains(target);"mousemove"===event.type&&isCursorOverReferenceOrPopper||function isCursorOutsideInteractiveBorder(popperTreeData,event){var clientX=event.clientX,clientY=event.clientY;return popperTreeData.every((function(_ref){var popperRect=_ref.popperRect,popperState=_ref.popperState,interactiveBorder=_ref.props.interactiveBorder,basePlacement=getBasePlacement(popperState.placement),offsetData=popperState.modifiersData.offset;if(!offsetData)return!0;var topDistance="bottom"===basePlacement?offsetData.top.y:0,bottomDistance="top"===basePlacement?offsetData.bottom.y:0,leftDistance="right"===basePlacement?offsetData.left.x:0,rightDistance="left"===basePlacement?offsetData.right.x:0,exceedsTop=popperRect.top-clientY+topDistance>interactiveBorder,exceedsBottom=clientY-popperRect.bottom-bottomDistance>interactiveBorder,exceedsLeft=popperRect.left-clientX+leftDistance>interactiveBorder,exceedsRight=clientX-popperRect.right-rightDistance>interactiveBorder;return exceedsTop||exceedsBottom||exceedsLeft||exceedsRight}))}(getNestedPopperTree().concat(popper).map((function(popper){var _instance$popperInsta,state=null==(_instance$popperInsta=popper._tippy.popperInstance)?void 0:_instance$popperInsta.state;return state?{popperRect:popper.getBoundingClientRect(),popperState:state,props:props}:null})).filter(Boolean),event)&&(cleanupInteractiveMouseListeners(),scheduleHide(event))}function onMouseLeave(event){isEventListenerStopped(event)||instance.props.trigger.indexOf("click")>=0&&isVisibleFromClick||(instance.props.interactive?instance.hideWithInteractivity(event):scheduleHide(event))}function onBlurOrFocusOut(event){instance.props.trigger.indexOf("focusin")<0&&event.target!==getCurrentTarget()||instance.props.interactive&&event.relatedTarget&&popper.contains(event.relatedTarget)||scheduleHide(event)}function isEventListenerStopped(event){return!!currentInput.isTouch&&getIsCustomTouchBehavior()!==event.type.indexOf("touch")>=0}function createPopperInstance(){destroyPopperInstance();var _instance$props2=instance.props,popperOptions=_instance$props2.popperOptions,placement=_instance$props2.placement,offset=_instance$props2.offset,getReferenceClientRect=_instance$props2.getReferenceClientRect,moveTransition=_instance$props2.moveTransition,arrow=getIsDefaultRenderFn()?getChildren(popper).arrow:null,computedReference=getReferenceClientRect?{getBoundingClientRect:getReferenceClientRect,contextElement:getReferenceClientRect.contextElement||getCurrentTarget()}:reference,modifiers=[{name:"offset",options:{offset:offset}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!moveTransition}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function fn(_ref2){var state=_ref2.state;if(getIsDefaultRenderFn()){var box=getDefaultTemplateChildren().box;["placement","reference-hidden","escaped"].forEach((function(attr){"placement"===attr?box.setAttribute("data-placement",state.placement):state.attributes.popper["data-popper-"+attr]?box.setAttribute("data-"+attr,""):box.removeAttribute("data-"+attr)})),state.attributes.popper={}}}}];getIsDefaultRenderFn()&&arrow&&modifiers.push({name:"arrow",options:{element:arrow,padding:3}}),modifiers.push.apply(modifiers,(null==popperOptions?void 0:popperOptions.modifiers)||[]),instance.popperInstance=Object(lib_popper.a)(computedReference,popper,Object.assign({},popperOptions,{placement:placement,onFirstUpdate:onFirstUpdate,modifiers:modifiers}))}function destroyPopperInstance(){instance.popperInstance&&(instance.popperInstance.destroy(),instance.popperInstance=null)}function getNestedPopperTree(){return arrayFrom(popper.querySelectorAll("[data-tippy-root]"))}function scheduleShow(event){instance.clearDelayTimeouts(),event&&invokeHook("onTrigger",[instance,event]),addDocumentPress();var delay=getDelay(!0),_getNormalizedTouchSe=getNormalizedTouchSettings(),touchValue=_getNormalizedTouchSe[0],touchDelay=_getNormalizedTouchSe[1];currentInput.isTouch&&"hold"===touchValue&&touchDelay&&(delay=touchDelay),delay?showTimeout=setTimeout((function(){instance.show()}),delay):instance.show()}function scheduleHide(event){if(instance.clearDelayTimeouts(),invokeHook("onUntrigger",[instance,event]),instance.state.isVisible){if(!(instance.props.trigger.indexOf("mouseenter")>=0&&instance.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(event.type)>=0&&isVisibleFromClick)){var delay=getDelay(!1);delay?hideTimeout=setTimeout((function(){instance.state.isVisible&&instance.hide()}),delay):scheduleHideAnimationFrame=requestAnimationFrame((function(){instance.hide()}))}}else removeDocumentPress()}}function tippy(targets,optionalProps){void 0===optionalProps&&(optionalProps={});var plugins=defaultProps.plugins.concat(optionalProps.plugins||[]);(function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)})();var passedProps=Object.assign({},optionalProps,{plugins:plugins}),instances=getArrayOfElements(targets).reduce((function(acc,reference){var instance=reference&&createTippy(reference,passedProps);return instance&&acc.push(instance),acc}),[]);return isElement(targets)?instances[0]:instances}tippy.defaultProps=defaultProps,tippy.setDefaultProps=function setDefaultProps(partialProps){Object.keys(partialProps).forEach((function(key){defaultProps[key]=partialProps[key]}))},tippy.currentInput=currentInput;Object.assign({},applyStyles.a,{effect:function effect(_ref){var state=_ref.state,initialStyles={popper:{position:state.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(state.elements.popper.style,initialStyles.popper),state.styles=initialStyles,state.elements.arrow&&Object.assign(state.elements.arrow.style,initialStyles.arrow)}});tippy.setDefaultProps({render:render});var tippy_esm=tippy;class tiptap_extension_bubble_menu_esm_BubbleMenuView{constructor({editor:editor,element:element,view:view,tippyOptions:tippyOptions}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:event})=>{var _a;this.preventHide?this.preventHide=!1:(null==event?void 0:event.relatedTarget)&&(null===(_a=this.element.parentNode)||void 0===_a?void 0:_a.contains(event.relatedTarget))||this.hide()},this.editor=editor,this.element=element,this.view=view,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(tippyOptions),this.element.style.visibility="visible"}createTooltip(options={}){this.tippy=tippy_esm(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...options})}update(view,oldState){const{state:state,composing:composing}=view,{doc:doc,selection:selection}=state,isSame=oldState&&oldState.doc.eq(doc)&&oldState.selection.eq(selection);if(composing||isSame)return;const{empty:empty,ranges:ranges}=selection,from=Math.min(...ranges.map((range=>range.$from.pos))),to=Math.max(...ranges.map((range=>range.$to.pos))),isEmptyTextBlock=!doc.textBetween(from,to).length&&isTextSelection(view.state.selection);empty||isEmptyTextBlock?this.hide():(this.tippy.setProps({getReferenceClientRect:()=>{if(function isNodeSelection(value){return isObject(value)&&value instanceof index_es_NodeSelection}(view.state.selection)){const node=view.nodeDOM(from);if(node)return node.getBoundingClientRect()}return posToDOMRect(view,from,to)}}),this.show())}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const BubbleMenuPluginKey=new PluginKey("menuBubble"),BubbleMenuPlugin=options=>new Plugin({key:BubbleMenuPluginKey,view:view=>new tiptap_extension_bubble_menu_esm_BubbleMenuView({view:view,...options})});tiptap_core_esm_Extension.create({name:"bubbleMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[BubbleMenuPlugin({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});class tiptap_extension_floating_menu_esm_FloatingMenuView{constructor({editor:editor,element:element,view:view,tippyOptions:tippyOptions}){this.preventHide=!1,this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout((()=>this.update(this.editor.view)))},this.blurHandler=({event:event})=>{var _a;this.preventHide?this.preventHide=!1:(null==event?void 0:event.relatedTarget)&&(null===(_a=this.element.parentNode)||void 0===_a?void 0:_a.contains(event.relatedTarget))||this.hide()},this.editor=editor,this.element=element,this.view=view,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(tippyOptions),this.element.style.visibility="visible"}createTooltip(options={}){this.tippy=tippy_esm(this.view.dom,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...options})}update(view,oldState){const{state:state,composing:composing}=view,{doc:doc,selection:selection}=state,isSame=oldState&&oldState.doc.eq(doc)&&oldState.selection.eq(selection);if(composing||isSame)return;const{$anchor:$anchor,empty:empty,from:from,to:to}=selection,isRootDepth=1===$anchor.depth,isNodeEmpty=!selection.$anchor.parent.isLeaf&&!selection.$anchor.parent.textContent;empty&&(isRootDepth&&isNodeEmpty)?(this.tippy.setProps({getReferenceClientRect:()=>posToDOMRect(view,from,to)}),this.show()):this.hide()}show(){this.tippy.show()}hide(){this.tippy.hide()}destroy(){this.tippy.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const FloatingMenuPluginKey=new PluginKey("menuFloating"),FloatingMenuPlugin=options=>new Plugin({key:FloatingMenuPluginKey,view:view=>new tiptap_extension_floating_menu_esm_FloatingMenuView({view:view,...options})});tiptap_core_esm_Extension.create({name:"floatingMenu",defaultOptions:{element:null,tippyOptions:{}},addProseMirrorPlugins(){return this.options.element?[FloatingMenuPlugin({editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions})]:[]}});var react_dom=__webpack_require__(36),react_dom_default=__webpack_require__.n(react_dom);class tiptap_react_esm_Editor extends class tiptap_core_esm_Editor extends class EventEmitter{constructor(){this.callbacks={}}on(event,fn){return this.callbacks[event]||(this.callbacks[event]=[]),this.callbacks[event].push(fn),this}emit(event,...args){const callbacks=this.callbacks[event];return callbacks&&callbacks.forEach((callback=>callback.apply(this,args))),this}off(event,fn){const callbacks=this.callbacks[event];return callbacks&&(fn?this.callbacks[event]=callbacks.filter((callback=>callback!==fn)):delete this.callbacks[event]),this}removeAllListeners(){this.callbacks={}}}{constructor(options={}){super(),this.isFocused=!1,this.options={element:document.createElement("div"),content:"",injectCSS:!0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},enableInputRules:!0,enablePasteRules:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(options),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))}),0)}get commands(){return this.commandManager.createCommands()}chain(){return this.commandManager.createChain()}can(){return this.commandManager.createCan()}injectCSS(){this.options.injectCSS&&document&&(this.css=function createStyleTag(style){const tipTapStyleTag=document.querySelector("style[data-tiptap-style]");if(null!==tipTapStyleTag)return tipTapStyleTag;const styleNode=document.createElement("style");return styleNode.setAttribute("data-tiptap-style",""),styleNode.innerHTML=style,document.getElementsByTagName("head")[0].appendChild(styleNode),styleNode}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}'))}setOptions(options={}){this.options={...this.options,...options}}setEditable(editable){this.setOptions({editable:editable}),this.view&&this.state&&!this.isDestroyed&&this.view.updateState(this.state)}get isEditable(){return this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(plugin,handlePlugins){const plugins="function"==typeof handlePlugins?handlePlugins(plugin,this.state.plugins):[...this.state.plugins,plugin],state=this.state.reconfigure({plugins:plugins});this.view.updateState(state)}unregisterPlugin(nameOrPluginKey){if(this.isDestroyed)return;const name="string"==typeof nameOrPluginKey?`${nameOrPluginKey}$`:nameOrPluginKey.key,state=this.state.reconfigure({plugins:this.state.plugins.filter((plugin=>!plugin.key.startsWith(name)))});this.view.updateState(state)}createExtensionManager(){const allExtensions=[...Object.entries(tiptap_core_esm_extensions).map((([,extension])=>extension)),...this.options.extensions].filter((extension=>["extension","node","mark"].includes(null==extension?void 0:extension.type)));this.extensionManager=new tiptap_core_esm_ExtensionManager(allExtensions,this)}createCommandManager(){this.commandManager=new CommandManager(this,this.extensionManager.commands)}createSchema(){this.schema=this.extensionManager.schema}createView(){this.view=new EditorView(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:EditorState.create({doc:createDocument(this.options.content,this.schema,this.options.parseOptions)})});const newState=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(newState),this.createNodeViews();this.view.dom.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}captureTransaction(fn){this.isCapturingTransaction=!0,fn(),this.isCapturingTransaction=!1;const tr=this.capturedTransaction;return this.capturedTransaction=null,tr}dispatchTransaction(transaction){if(this.isCapturingTransaction)return this.capturedTransaction?void transaction.steps.forEach((step=>{var _a;return null===(_a=this.capturedTransaction)||void 0===_a?void 0:_a.step(step)})):void(this.capturedTransaction=transaction);const state=this.state.apply(transaction),selectionHasChanged=!this.state.selection.eq(state.selection);this.view.updateState(state),this.emit("transaction",{editor:this,transaction:transaction}),selectionHasChanged&&this.emit("selectionUpdate",{editor:this});const focus=transaction.getMeta("focus"),blur=transaction.getMeta("blur");focus&&this.emit("focus",{editor:this,event:focus.event}),blur&&this.emit("blur",{editor:this,event:blur.event}),transaction.docChanged&&!transaction.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:transaction})}getAttributes(nameOrType){return function tiptap_core_esm_getAttributes(state,typeOrName){const schemaType=getSchemaTypeNameByName("string"==typeof typeOrName?typeOrName:typeOrName.name,state.schema);return"node"===schemaType?getNodeAttributes(state,typeOrName):"mark"===schemaType?getMarkAttributes(state,typeOrName):{}}(this.state,nameOrType)}getNodeAttributes(name){return console.warn("[tiptap warn]: editor.getNodeAttributes() is deprecated. please use editor.getAttributes() instead."),getNodeAttributes(this.state,name)}getMarkAttributes(name){return console.warn("[tiptap warn]: editor.getMarkAttributes() is deprecated. please use editor.getAttributes() instead."),getMarkAttributes(this.state,name)}isActive(nameOrAttributes,attributesOrUndefined){const name="string"==typeof nameOrAttributes?nameOrAttributes:null,attributes="string"==typeof nameOrAttributes?attributesOrUndefined:nameOrAttributes;return function tiptap_core_esm_isActive(state,name,attributes={}){if(!name)return isNodeActive(state,null,attributes)||isMarkActive(state,null,attributes);const schemaType=getSchemaTypeNameByName(name,state.schema);return"node"===schemaType?isNodeActive(state,name,attributes):"mark"===schemaType&&isMarkActive(state,name,attributes)}(this.state,name,attributes)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc,this.schema)}get isEmpty(){return function tiptap_core_esm_isNodeEmpty(node){var _a;const defaultContent=null===(_a=node.type.createAndFill())||void 0===_a?void 0:_a.toJSON(),content=node.toJSON();return JSON.stringify(defaultContent)===JSON.stringify(content)}(this.state.doc)}getCharacterCount(){return this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners(),function removeElement(element){element&&element.parentNode&&element.parentNode.removeChild(element)}(this.css)}get isDestroyed(){var _a;return!(null===(_a=this.view)||void 0===_a?void 0:_a.docView)}}{constructor(){super(...arguments),this.contentComponent=null}}class tiptap_react_esm_ReactRenderer{constructor(component,{editor:editor,props:props={},as:as="div"}){this.ref=null,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=component,this.editor=editor,this.props=props,this.element=document.createElement(as),this.element.classList.add("react-renderer"),this.render()}render(){var _a;const Component=this.component,props=this.props;(function isClassComponent(Component){return!("function"!=typeof Component||!Component.prototype||!Component.prototype.isReactComponent)})(Component)&&(props.ref=ref=>{this.ref=ref}),this.reactElement=react_default.a.createElement(Component,{...props}),(null===(_a=this.editor)||void 0===_a?void 0:_a.contentComponent)&&this.editor.contentComponent.setState({renderers:this.editor.contentComponent.state.renderers.set(this.id,this)})}updateProps(props={}){this.props={...this.props,...props},this.render()}destroy(){var _a;if(null===(_a=this.editor)||void 0===_a?void 0:_a.contentComponent){const{renderers:renderers}=this.editor.contentComponent.state;renderers.delete(this.id),this.editor.contentComponent.setState({renderers:renderers})}}}const ReactNodeViewContext=Object(react.createContext)({onDragStart:void 0});class tiptap_react_esm_ReactNodeView extends class tiptap_core_esm_NodeView{constructor(component,props,options){this.isDragging=!1,this.options={stopEvent:null,update:null},this.component=component,this.options={...this.options,...options},this.editor=props.editor,this.extension=props.extension,this.node=props.node,this.decorations=props.decorations,this.getPos=props.getPos,this.mount()}mount(){}get dom(){return null}get contentDOM(){return null}onDragStart(event){var _a,_b,_c;const{view:view}=this.editor,target=event.target,dragHandle=3===target.nodeType?null===(_a=target.parentElement)||void 0===_a?void 0:_a.closest("[data-drag-handle]"):target.closest("[data-drag-handle]");if(!this.dom||(null===(_b=this.contentDOM)||void 0===_b?void 0:_b.contains(target))||!dragHandle)return;let x=0,y=0;if(this.dom!==dragHandle){const domBox=this.dom.getBoundingClientRect(),handleBox=dragHandle.getBoundingClientRect();x=handleBox.x-domBox.x+event.offsetX,y=handleBox.y-domBox.y+event.offsetY}null===(_c=event.dataTransfer)||void 0===_c||_c.setDragImage(this.dom,x,y);const selection=index_es_NodeSelection.create(view.state.doc,this.getPos()),transaction=view.state.tr.setSelection(selection);view.dispatch(transaction)}stopEvent(event){var _a;if(!this.dom)return!1;if("function"==typeof this.options.stopEvent)return this.options.stopEvent(event);const target=event.target;if(!(this.dom.contains(target)&&!(null===(_a=this.contentDOM)||void 0===_a?void 0:_a.contains(target))))return!1;if(["INPUT","BUTTON","SELECT","TEXTAREA"].includes(target.tagName)||target.isContentEditable)return!0;const{isEditable:isEditable}=this.editor,{isDragging:isDragging}=this,isDraggable=!!this.node.type.spec.draggable,isSelectable=index_es_NodeSelection.isSelectable(this.node),isCopyEvent="copy"===event.type,isPasteEvent="paste"===event.type,isCutEvent="cut"===event.type,isClickEvent="mousedown"===event.type,isDragEvent=event.type.startsWith("drag")||"drop"===event.type;if(!isDraggable&&isSelectable&&isDragEvent&&event.preventDefault(),isDraggable&&isDragEvent&&!isDragging)return event.preventDefault(),!1;if(isDraggable&&isEditable&&!isDragging&&isClickEvent){const dragHandle=target.closest("[data-drag-handle]");dragHandle&&(this.dom===dragHandle||this.dom.contains(dragHandle))&&(this.isDragging=!0,document.addEventListener("dragend",(()=>{this.isDragging=!1}),{once:!0}),document.addEventListener("mouseup",(()=>{this.isDragging=!1}),{once:!0}))}return!(isDragging||isCopyEvent||isPasteEvent||isCutEvent||isClickEvent&&isSelectable)}ignoreMutation(mutation){if(!this.dom||!this.contentDOM)return!0;if(this.node.isLeaf||this.node.isAtom)return!0;if("selection"===mutation.type)return!1;if(this.dom.contains(mutation.target)&&"childList"===mutation.type&&function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}()){if([...Array.from(mutation.addedNodes),...Array.from(mutation.removedNodes)].every((node=>node.isContentEditable)))return!1}return this.contentDOM===mutation.target&&"attributes"===mutation.type||!this.contentDOM.contains(mutation.target)}updateAttributes(attributes){this.editor.commands.command((({tr:tr})=>{const pos=this.getPos();return tr.setNodeMarkup(pos,void 0,{...this.node.attrs,...attributes}),!0}))}deleteNode(){const from=this.getPos(),to=from+this.node.nodeSize;this.editor.commands.deleteRange({from:from,to:to})}}{mount(){const props={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(attributes={})=>this.updateAttributes(attributes),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const capitalizeFirstChar=string=>string.charAt(0).toUpperCase()+string.substring(1);this.component.displayName=capitalizeFirstChar(this.extension.name)}const ReactNodeViewProvider=componentProps=>{const onDragStart=this.onDragStart.bind(this),Component=this.component;return react_default.a.createElement(ReactNodeViewContext.Provider,{value:{onDragStart:onDragStart}},react_default.a.createElement(Component,{...componentProps}))};ReactNodeViewProvider.displayName="ReactNodeView",this.contentDOMElement=this.node.isLeaf?null:document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit"),this.renderer=new tiptap_react_esm_ReactRenderer(ReactNodeViewProvider,{editor:this.editor,props:props,as:this.node.isInline?"span":"div"})}get dom(){var _a;if(this.renderer.element.firstElementChild&&!(null===(_a=this.renderer.element.firstElementChild)||void 0===_a?void 0:_a.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:(this.maybeMoveContentDOM(),this.contentDOMElement)}maybeMoveContentDOM(){const contentElement=this.dom.querySelector("[data-node-view-content]");this.contentDOMElement&&contentElement&&!contentElement.contains(this.contentDOMElement)&&contentElement.appendChild(this.contentDOMElement)}update(node,decorations){return"function"==typeof this.options.update?this.options.update(node,decorations):node.type===this.node.type&&(node===this.node&&this.decorations===decorations||(this.node=node,this.decorations=decorations,this.renderer.updateProps({node:node,decorations:decorations}),this.maybeMoveContentDOM()),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy(),this.contentDOMElement=null}}const Portals=({renderers:renderers})=>react_default.a.createElement(react_default.a.Fragment,null,Array.from(renderers).map((([key,renderer])=>react_dom_default.a.createPortal(renderer.reactElement,renderer.element,key))));class tiptap_react_esm_PureEditorContent extends react_default.a.Component{constructor(props){super(props),this.editorContentRef=react_default.a.createRef(),this.state={renderers:new Map}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const{editor:editor}=this.props;if(editor&&editor.options.element){if(editor.contentComponent)return;const element=this.editorContentRef.current;element.append(...editor.options.element.childNodes),editor.setOptions({element:element}),editor.contentComponent=this,setTimeout((()=>{editor.isDestroyed||editor.createNodeViews()}),0)}}componentWillUnmount(){const{editor:editor}=this.props;if(!editor)return;if(editor.isDestroyed||editor.view.setProps({nodeViews:{}}),editor.contentComponent=null,!editor.options.element.firstChild)return;const newElement=document.createElement("div");newElement.append(...editor.options.element.childNodes),editor.setOptions({element:newElement})}render(){const{editor:editor,...rest}=this.props;return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{ref:this.editorContentRef,...rest}),react_default.a.createElement(Portals,{renderers:this.state.renderers}))}}const EditorContent=react_default.a.memo(tiptap_react_esm_PureEditorContent),NodeViewWrapper=react_default.a.forwardRef(((props,ref)=>{const{onDragStart:onDragStart}=Object(react.useContext)(ReactNodeViewContext),Tag=props.as||"div";return react_default.a.createElement(Tag,{...props,ref:ref,"data-node-view-wrapper":"",onDragStart:onDragStart,style:{...props.style,whiteSpace:"normal"}})}));react_default.a.forwardRef(((props,ref)=>{const Tag=props.as||"div";return react_default.a.createElement(Tag,{...props,ref:ref,"data-node-view-content":"",style:{...props.style,whiteSpace:"pre-wrap"}})}));var lodash=__webpack_require__(7),asyncToGenerator=(__webpack_require__(26),__webpack_require__(8),__webpack_require__(120),__webpack_require__(60),__webpack_require__(59)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),regenerator=__webpack_require__(32),regenerator_default=__webpack_require__.n(regenerator),toDraftData=__webpack_require__(98),classnames=__webpack_require__(4),classnames_default=__webpack_require__.n(classnames),dist_module=__webpack_require__(2),RicosTiptapContext=react_default.a.createContext(null);function module_8008f8e9_findDiffStart(a,b,pos){for(var i=0;;i++){if(i==a.childCount||i==b.childCount)return a.childCount==b.childCount?null:pos;var childA=a.child(i),childB=b.child(i);if(childA!=childB){if(!childA.sameMarkup(childB))return pos;if(childA.isText&&childA.text!=childB.text){for(var j=0;childA.text[j]==childB.text[j];j++)pos++;return pos}if(childA.content.size||childB.content.size){var inner=module_8008f8e9_findDiffStart(childA.content,childB.content,pos+1);if(null!=inner)return inner}pos+=childA.nodeSize}else pos+=childA.nodeSize}}function module_8008f8e9_findDiffEnd(a,b,posA,posB){for(var iA=a.childCount,iB=b.childCount;;){if(0==iA||0==iB)return iA==iB?null:{a:posA,b:posB};var childA=a.child(--iA),childB=b.child(--iB),size=childA.nodeSize;if(childA!=childB){if(!childA.sameMarkup(childB))return{a:posA,b:posB};if(childA.isText&&childA.text!=childB.text){for(var same=0,minSize=Math.min(childA.text.length,childB.text.length);same<minSize&&childA.text[childA.text.length-same-1]==childB.text[childB.text.length-same-1];)same++,posA--,posB--;return{a:posA,b:posB}}if(childA.content.size||childB.content.size){var inner=module_8008f8e9_findDiffEnd(childA.content,childB.content,posA-1,posB-1);if(inner)return inner}posA-=size,posB-=size}else posA-=size,posB-=size}}var module_8008f8e9_Fragment=function(content,size){if(this.content=content,this.size=size||0,null==size)for(var i=0;i<content.length;i++)this.size+=content[i].nodeSize},module_8008f8e9_prototypeAccessors$5={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};module_8008f8e9_Fragment.prototype.nodesBetween=function(from,to,f,nodeStart,parent){void 0===nodeStart&&(nodeStart=0);for(var i=0,pos=0;pos<to;i++){var child=this.content[i],end=pos+child.nodeSize;if(end>from&&!1!==f(child,nodeStart+pos,parent,i)&&child.content.size){var start=pos+1;child.nodesBetween(Math.max(0,from-start),Math.min(child.content.size,to-start),f,nodeStart+start)}pos=end}},module_8008f8e9_Fragment.prototype.descendants=function(f){this.nodesBetween(0,this.size,f)},module_8008f8e9_Fragment.prototype.textBetween=function(from,to,blockSeparator,leafText){var text="",separated=!0;return this.nodesBetween(from,to,(function(node,pos){node.isText?(text+=node.text.slice(Math.max(from,pos)-pos,to-pos),separated=!blockSeparator):node.isLeaf&&leafText?(text+=leafText,separated=!blockSeparator):!separated&&node.isBlock&&(text+=blockSeparator,separated=!0)}),0),text},module_8008f8e9_Fragment.prototype.append=function(other){if(!other.size)return this;if(!this.size)return other;var last=this.lastChild,first=other.firstChild,content=this.content.slice(),i=0;for(last.isText&&last.sameMarkup(first)&&(content[content.length-1]=last.withText(last.text+first.text),i=1);i<other.content.length;i++)content.push(other.content[i]);return new module_8008f8e9_Fragment(content,this.size+other.size)},module_8008f8e9_Fragment.prototype.cut=function(from,to){if(null==to&&(to=this.size),0==from&&to==this.size)return this;var result=[],size=0;if(to>from)for(var i=0,pos=0;pos<to;i++){var child=this.content[i],end=pos+child.nodeSize;end>from&&((pos<from||end>to)&&(child=child.isText?child.cut(Math.max(0,from-pos),Math.min(child.text.length,to-pos)):child.cut(Math.max(0,from-pos-1),Math.min(child.content.size,to-pos-1))),result.push(child),size+=child.nodeSize),pos=end}return new module_8008f8e9_Fragment(result,size)},module_8008f8e9_Fragment.prototype.cutByIndex=function(from,to){return from==to?module_8008f8e9_Fragment.empty:0==from&&to==this.content.length?this:new module_8008f8e9_Fragment(this.content.slice(from,to))},module_8008f8e9_Fragment.prototype.replaceChild=function(index,node){var current=this.content[index];if(current==node)return this;var copy=this.content.slice(),size=this.size+node.nodeSize-current.nodeSize;return copy[index]=node,new module_8008f8e9_Fragment(copy,size)},module_8008f8e9_Fragment.prototype.addToStart=function(node){return new module_8008f8e9_Fragment([node].concat(this.content),this.size+node.nodeSize)},module_8008f8e9_Fragment.prototype.addToEnd=function(node){return new module_8008f8e9_Fragment(this.content.concat(node),this.size+node.nodeSize)},module_8008f8e9_Fragment.prototype.eq=function(other){if(this.content.length!=other.content.length)return!1;for(var i=0;i<this.content.length;i++)if(!this.content[i].eq(other.content[i]))return!1;return!0},module_8008f8e9_prototypeAccessors$5.firstChild.get=function(){return this.content.length?this.content[0]:null},module_8008f8e9_prototypeAccessors$5.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},module_8008f8e9_prototypeAccessors$5.childCount.get=function(){return this.content.length},module_8008f8e9_Fragment.prototype.child=function(index){var found=this.content[index];if(!found)throw new RangeError("Index "+index+" out of range for "+this);return found},module_8008f8e9_Fragment.prototype.maybeChild=function(index){return this.content[index]},module_8008f8e9_Fragment.prototype.forEach=function(f){for(var i=0,p=0;i<this.content.length;i++){var child=this.content[i];f(child,p,i),p+=child.nodeSize}},module_8008f8e9_Fragment.prototype.findDiffStart=function(other,pos){return void 0===pos&&(pos=0),module_8008f8e9_findDiffStart(this,other,pos)},module_8008f8e9_Fragment.prototype.findDiffEnd=function(other,pos,otherPos){return void 0===pos&&(pos=this.size),void 0===otherPos&&(otherPos=other.size),module_8008f8e9_findDiffEnd(this,other,pos,otherPos)},module_8008f8e9_Fragment.prototype.findIndex=function(pos,round){if(void 0===round&&(round=-1),0==pos)return module_8008f8e9_retIndex(0,pos);if(pos==this.size)return module_8008f8e9_retIndex(this.content.length,pos);if(pos>this.size||pos<0)throw new RangeError("Position "+pos+" outside of fragment ("+this+")");for(var i=0,curPos=0;;i++){var end=curPos+this.child(i).nodeSize;if(end>=pos)return end==pos||round>0?module_8008f8e9_retIndex(i+1,end):module_8008f8e9_retIndex(i,curPos);curPos=end}},module_8008f8e9_Fragment.prototype.toString=function(){return"<"+this.toStringInner()+">"},module_8008f8e9_Fragment.prototype.toStringInner=function(){return this.content.join(", ")},module_8008f8e9_Fragment.prototype.toJSON=function(){return this.content.length?this.content.map((function(n){return n.toJSON()})):null},module_8008f8e9_Fragment.fromJSON=function(schema,value){if(!value)return module_8008f8e9_Fragment.empty;if(!Array.isArray(value))throw new RangeError("Invalid input for Fragment.fromJSON");return new module_8008f8e9_Fragment(value.map(schema.nodeFromJSON))},module_8008f8e9_Fragment.fromArray=function(array){if(!array.length)return module_8008f8e9_Fragment.empty;for(var joined,size=0,i=0;i<array.length;i++){var node=array[i];size+=node.nodeSize,i&&node.isText&&array[i-1].sameMarkup(node)?(joined||(joined=array.slice(0,i)),joined[joined.length-1]=node.withText(joined[joined.length-1].text+node.text)):joined&&joined.push(node)}return new module_8008f8e9_Fragment(joined||array,size)},module_8008f8e9_Fragment.from=function(nodes){if(!nodes)return module_8008f8e9_Fragment.empty;if(nodes instanceof module_8008f8e9_Fragment)return nodes;if(Array.isArray(nodes))return this.fromArray(nodes);if(nodes.attrs)return new module_8008f8e9_Fragment([nodes],nodes.nodeSize);throw new RangeError("Can not convert "+nodes+" to a Fragment"+(nodes.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(module_8008f8e9_Fragment.prototype,module_8008f8e9_prototypeAccessors$5);var module_8008f8e9_found={index:0,offset:0};function module_8008f8e9_retIndex(index,offset){return module_8008f8e9_found.index=index,module_8008f8e9_found.offset=offset,module_8008f8e9_found}function module_8008f8e9_compareDeep(a,b){if(a===b)return!0;if(!a||"object"!=typeof a||!b||"object"!=typeof b)return!1;var array=Array.isArray(a);if(Array.isArray(b)!=array)return!1;if(array){if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!module_8008f8e9_compareDeep(a[i],b[i]))return!1}else{for(var p in a)if(!(p in b)||!module_8008f8e9_compareDeep(a[p],b[p]))return!1;for(var p$1 in b)if(!(p$1 in a))return!1}return!0}module_8008f8e9_Fragment.empty=new module_8008f8e9_Fragment([],0);var Mark$1=function(type,attrs){this.type=type,this.attrs=attrs};function module_8008f8e9_ReplaceError(message){var err=Error.call(this,message);return err.__proto__=module_8008f8e9_ReplaceError.prototype,err}Mark$1.prototype.addToSet=function(set){for(var copy,placed=!1,i=0;i<set.length;i++){var other=set[i];if(this.eq(other))return set;if(this.type.excludes(other.type))copy||(copy=set.slice(0,i));else{if(other.type.excludes(this.type))return set;!placed&&other.type.rank>this.type.rank&&(copy||(copy=set.slice(0,i)),copy.push(this),placed=!0),copy&&copy.push(other)}}return copy||(copy=set.slice()),placed||copy.push(this),copy},Mark$1.prototype.removeFromSet=function(set){for(var i=0;i<set.length;i++)if(this.eq(set[i]))return set.slice(0,i).concat(set.slice(i+1));return set},Mark$1.prototype.isInSet=function(set){for(var i=0;i<set.length;i++)if(this.eq(set[i]))return!0;return!1},Mark$1.prototype.eq=function(other){return this==other||this.type==other.type&&module_8008f8e9_compareDeep(this.attrs,other.attrs)},Mark$1.prototype.toJSON=function(){var obj={type:this.type.name};for(var _ in this.attrs){obj.attrs=this.attrs;break}return obj},Mark$1.fromJSON=function(schema,json){if(!json)throw new RangeError("Invalid input for Mark.fromJSON");var type=schema.marks[json.type];if(!type)throw new RangeError("There is no mark type "+json.type+" in this schema");return type.create(json.attrs)},Mark$1.sameSet=function(a,b){if(a==b)return!0;if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!a[i].eq(b[i]))return!1;return!0},Mark$1.setFrom=function(marks){if(!marks||0==marks.length)return Mark$1.none;if(marks instanceof Mark$1)return[marks];var copy=marks.slice();return copy.sort((function(a,b){return a.type.rank-b.type.rank})),copy},Mark$1.none=[],module_8008f8e9_ReplaceError.prototype=Object.create(Error.prototype),module_8008f8e9_ReplaceError.prototype.constructor=module_8008f8e9_ReplaceError,module_8008f8e9_ReplaceError.prototype.name="ReplaceError";var module_8008f8e9_Slice=function(content,openStart,openEnd){this.content=content,this.openStart=openStart,this.openEnd=openEnd},module_8008f8e9_prototypeAccessors$1$3={size:{configurable:!0}};function module_8008f8e9_removeRange(content,from,to){var ref=content.findIndex(from),index=ref.index,offset=ref.offset,child=content.maybeChild(index),ref$1=content.findIndex(to),indexTo=ref$1.index,offsetTo=ref$1.offset;if(offset==from||child.isText){if(offsetTo!=to&&!content.child(indexTo).isText)throw new RangeError("Removing non-flat range");return content.cut(0,from).append(content.cut(to))}if(index!=indexTo)throw new RangeError("Removing non-flat range");return content.replaceChild(index,child.copy(module_8008f8e9_removeRange(child.content,from-offset-1,to-offset-1)))}function module_8008f8e9_insertInto(content,dist,insert,parent){var ref=content.findIndex(dist),index=ref.index,offset=ref.offset,child=content.maybeChild(index);if(offset==dist||child.isText)return parent&&!parent.canReplace(index,index,insert)?null:content.cut(0,dist).append(insert).append(content.cut(dist));var inner=module_8008f8e9_insertInto(child.content,dist-offset-1,insert);return inner&&content.replaceChild(index,child.copy(inner))}function replace$2($from,$to,slice){if(slice.openStart>$from.depth)throw new module_8008f8e9_ReplaceError("Inserted content deeper than insertion position");if($from.depth-slice.openStart!=$to.depth-slice.openEnd)throw new module_8008f8e9_ReplaceError("Inconsistent open depths");return module_8008f8e9_replaceOuter($from,$to,slice,0)}function module_8008f8e9_replaceOuter($from,$to,slice,depth){var index=$from.index(depth),node=$from.node(depth);if(index==$to.index(depth)&&depth<$from.depth-slice.openStart){var inner=module_8008f8e9_replaceOuter($from,$to,slice,depth+1);return node.copy(node.content.replaceChild(index,inner))}if(slice.content.size){if(slice.openStart||slice.openEnd||$from.depth!=depth||$to.depth!=depth){var ref=function(slice,$along){for(var extra=$along.depth-slice.openStart,node=$along.node(extra).copy(slice.content),i=extra-1;i>=0;i--)node=$along.node(i).copy(module_8008f8e9_Fragment.from(node));return{start:node.resolveNoCache(slice.openStart+extra),end:node.resolveNoCache(node.content.size-slice.openEnd-extra)}}(slice,$from);return module_8008f8e9_close(node,module_8008f8e9_replaceThreeWay($from,ref.start,ref.end,$to,depth))}var parent=$from.parent,content=parent.content;return module_8008f8e9_close(parent,content.cut(0,$from.parentOffset).append(slice.content).append(content.cut($to.parentOffset)))}return module_8008f8e9_close(node,module_8008f8e9_replaceTwoWay($from,$to,depth))}function module_8008f8e9_checkJoin(main,sub){if(!sub.type.compatibleContent(main.type))throw new module_8008f8e9_ReplaceError("Cannot join "+sub.type.name+" onto "+main.type.name)}function joinable$1($before,$after,depth){var node=$before.node(depth);return module_8008f8e9_checkJoin(node,$after.node(depth)),node}function module_8008f8e9_addNode(child,target){var last=target.length-1;last>=0&&child.isText&&child.sameMarkup(target[last])?target[last]=child.withText(target[last].text+child.text):target.push(child)}function module_8008f8e9_addRange($start,$end,depth,target){var node=($end||$start).node(depth),startIndex=0,endIndex=$end?$end.index(depth):node.childCount;$start&&(startIndex=$start.index(depth),$start.depth>depth?startIndex++:$start.textOffset&&(module_8008f8e9_addNode($start.nodeAfter,target),startIndex++));for(var i=startIndex;i<endIndex;i++)module_8008f8e9_addNode(node.child(i),target);$end&&$end.depth==depth&&$end.textOffset&&module_8008f8e9_addNode($end.nodeBefore,target)}function module_8008f8e9_close(node,content){if(!node.type.validContent(content))throw new module_8008f8e9_ReplaceError("Invalid content for node "+node.type.name);return node.copy(content)}function module_8008f8e9_replaceThreeWay($from,$start,$end,$to,depth){var openStart=$from.depth>depth&&joinable$1($from,$start,depth+1),openEnd=$to.depth>depth&&joinable$1($end,$to,depth+1),content=[];return module_8008f8e9_addRange(null,$from,depth,content),openStart&&openEnd&&$start.index(depth)==$end.index(depth)?(module_8008f8e9_checkJoin(openStart,openEnd),module_8008f8e9_addNode(module_8008f8e9_close(openStart,module_8008f8e9_replaceThreeWay($from,$start,$end,$to,depth+1)),content)):(openStart&&module_8008f8e9_addNode(module_8008f8e9_close(openStart,module_8008f8e9_replaceTwoWay($from,$start,depth+1)),content),module_8008f8e9_addRange($start,$end,depth,content),openEnd&&module_8008f8e9_addNode(module_8008f8e9_close(openEnd,module_8008f8e9_replaceTwoWay($end,$to,depth+1)),content)),module_8008f8e9_addRange($to,null,depth,content),new module_8008f8e9_Fragment(content)}function module_8008f8e9_replaceTwoWay($from,$to,depth){var content=[];return module_8008f8e9_addRange(null,$from,depth,content),$from.depth>depth&&module_8008f8e9_addNode(module_8008f8e9_close(joinable$1($from,$to,depth+1),module_8008f8e9_replaceTwoWay($from,$to,depth+1)),content),module_8008f8e9_addRange($to,null,depth,content),new module_8008f8e9_Fragment(content)}module_8008f8e9_prototypeAccessors$1$3.size.get=function(){return this.content.size-this.openStart-this.openEnd},module_8008f8e9_Slice.prototype.insertAt=function(pos,fragment){var content=module_8008f8e9_insertInto(this.content,pos+this.openStart,fragment,null);return content&&new module_8008f8e9_Slice(content,this.openStart,this.openEnd)},module_8008f8e9_Slice.prototype.removeBetween=function(from,to){return new module_8008f8e9_Slice(module_8008f8e9_removeRange(this.content,from+this.openStart,to+this.openStart),this.openStart,this.openEnd)},module_8008f8e9_Slice.prototype.eq=function(other){return this.content.eq(other.content)&&this.openStart==other.openStart&&this.openEnd==other.openEnd},module_8008f8e9_Slice.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},module_8008f8e9_Slice.prototype.toJSON=function(){if(!this.content.size)return null;var json={content:this.content.toJSON()};return this.openStart>0&&(json.openStart=this.openStart),this.openEnd>0&&(json.openEnd=this.openEnd),json},module_8008f8e9_Slice.fromJSON=function(schema,json){if(!json)return module_8008f8e9_Slice.empty;var openStart=json.openStart||0,openEnd=json.openEnd||0;if("number"!=typeof openStart||"number"!=typeof openEnd)throw new RangeError("Invalid input for Slice.fromJSON");return new module_8008f8e9_Slice(module_8008f8e9_Fragment.fromJSON(schema,json.content),openStart,openEnd)},module_8008f8e9_Slice.maxOpen=function(fragment,openIsolating){void 0===openIsolating&&(openIsolating=!0);for(var openStart=0,openEnd=0,n=fragment.firstChild;n&&!n.isLeaf&&(openIsolating||!n.type.spec.isolating);n=n.firstChild)openStart++;for(var n$1=fragment.lastChild;n$1&&!n$1.isLeaf&&(openIsolating||!n$1.type.spec.isolating);n$1=n$1.lastChild)openEnd++;return new module_8008f8e9_Slice(fragment,openStart,openEnd)},Object.defineProperties(module_8008f8e9_Slice.prototype,module_8008f8e9_prototypeAccessors$1$3),module_8008f8e9_Slice.empty=new module_8008f8e9_Slice(module_8008f8e9_Fragment.empty,0,0);var module_8008f8e9_ResolvedPos=function(pos,path,parentOffset){this.pos=pos,this.path=path,this.depth=path.length/3-1,this.parentOffset=parentOffset},prototypeAccessors$2$1={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};module_8008f8e9_ResolvedPos.prototype.resolveDepth=function(val){return null==val?this.depth:val<0?this.depth+val:val},prototypeAccessors$2$1.parent.get=function(){return this.node(this.depth)},prototypeAccessors$2$1.doc.get=function(){return this.node(0)},module_8008f8e9_ResolvedPos.prototype.node=function(depth){return this.path[3*this.resolveDepth(depth)]},module_8008f8e9_ResolvedPos.prototype.index=function(depth){return this.path[3*this.resolveDepth(depth)+1]},module_8008f8e9_ResolvedPos.prototype.indexAfter=function(depth){return depth=this.resolveDepth(depth),this.index(depth)+(depth!=this.depth||this.textOffset?1:0)},module_8008f8e9_ResolvedPos.prototype.start=function(depth){return 0==(depth=this.resolveDepth(depth))?0:this.path[3*depth-1]+1},module_8008f8e9_ResolvedPos.prototype.end=function(depth){return depth=this.resolveDepth(depth),this.start(depth)+this.node(depth).content.size},module_8008f8e9_ResolvedPos.prototype.before=function(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position before the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]},module_8008f8e9_ResolvedPos.prototype.after=function(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position after the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]+this.path[3*depth].nodeSize},prototypeAccessors$2$1.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},prototypeAccessors$2$1.nodeAfter.get=function(){var parent=this.parent,index=this.index(this.depth);if(index==parent.childCount)return null;var dOff=this.pos-this.path[this.path.length-1],child=parent.child(index);return dOff?parent.child(index).cut(dOff):child},prototypeAccessors$2$1.nodeBefore.get=function(){var index=this.index(this.depth),dOff=this.pos-this.path[this.path.length-1];return dOff?this.parent.child(index).cut(0,dOff):0==index?null:this.parent.child(index-1)},module_8008f8e9_ResolvedPos.prototype.posAtIndex=function(index,depth){depth=this.resolveDepth(depth);for(var node=this.path[3*depth],pos=0==depth?0:this.path[3*depth-1]+1,i=0;i<index;i++)pos+=node.child(i).nodeSize;return pos},module_8008f8e9_ResolvedPos.prototype.marks=function(){var parent=this.parent,index=this.index();if(0==parent.content.size)return Mark$1.none;if(this.textOffset)return parent.child(index).marks;var main=parent.maybeChild(index-1),other=parent.maybeChild(index);if(!main){var tmp=main;main=other,other=tmp}for(var marks=main.marks,i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||other&&marks[i].isInSet(other.marks)||(marks=marks[i--].removeFromSet(marks));return marks},module_8008f8e9_ResolvedPos.prototype.marksAcross=function($end){var after=this.parent.maybeChild(this.index());if(!after||!after.isInline)return null;for(var marks=after.marks,next=$end.parent.maybeChild($end.index()),i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||next&&marks[i].isInSet(next.marks)||(marks=marks[i--].removeFromSet(marks));return marks},module_8008f8e9_ResolvedPos.prototype.sharedDepth=function(pos){for(var depth=this.depth;depth>0;depth--)if(this.start(depth)<=pos&&this.end(depth)>=pos)return depth;return 0},module_8008f8e9_ResolvedPos.prototype.blockRange=function(other,pred){if(void 0===other&&(other=this),other.pos<this.pos)return other.blockRange(this);for(var d=this.depth-(this.parent.inlineContent||this.pos==other.pos?1:0);d>=0;d--)if(other.pos<=this.end(d)&&(!pred||pred(this.node(d))))return new module_8008f8e9_NodeRange(this,other,d)},module_8008f8e9_ResolvedPos.prototype.sameParent=function(other){return this.pos-this.parentOffset==other.pos-other.parentOffset},module_8008f8e9_ResolvedPos.prototype.max=function(other){return other.pos>this.pos?other:this},module_8008f8e9_ResolvedPos.prototype.min=function(other){return other.pos<this.pos?other:this},module_8008f8e9_ResolvedPos.prototype.toString=function(){for(var str="",i=1;i<=this.depth;i++)str+=(str?"/":"")+this.node(i).type.name+"_"+this.index(i-1);return str+":"+this.parentOffset},module_8008f8e9_ResolvedPos.resolve=function(doc,pos){if(!(pos>=0&&pos<=doc.content.size))throw new RangeError("Position "+pos+" out of range");for(var path=[],start=0,parentOffset=pos,node=doc;;){var ref=node.content.findIndex(parentOffset),index=ref.index,offset=ref.offset,rem=parentOffset-offset;if(path.push(node,index,start+offset),!rem)break;if((node=node.child(index)).isText)break;parentOffset=rem-1,start+=offset+1}return new module_8008f8e9_ResolvedPos(pos,path,parentOffset)},module_8008f8e9_ResolvedPos.resolveCached=function(doc,pos){for(var i=0;i<module_8008f8e9_resolveCache.length;i++){var cached=module_8008f8e9_resolveCache[i];if(cached.pos==pos&&cached.doc==doc)return cached}var result=module_8008f8e9_resolveCache[module_8008f8e9_resolveCachePos]=module_8008f8e9_ResolvedPos.resolve(doc,pos);return module_8008f8e9_resolveCachePos=(module_8008f8e9_resolveCachePos+1)%module_8008f8e9_resolveCacheSize,result},Object.defineProperties(module_8008f8e9_ResolvedPos.prototype,prototypeAccessors$2$1);var module_8008f8e9_resolveCache=[],module_8008f8e9_resolveCachePos=0,module_8008f8e9_resolveCacheSize=12,module_8008f8e9_NodeRange=function($from,$to,depth){this.$from=$from,this.$to=$to,this.depth=depth},prototypeAccessors$1$1$1={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};prototypeAccessors$1$1$1.start.get=function(){return this.$from.before(this.depth+1)},prototypeAccessors$1$1$1.end.get=function(){return this.$to.after(this.depth+1)},prototypeAccessors$1$1$1.parent.get=function(){return this.$from.node(this.depth)},prototypeAccessors$1$1$1.startIndex.get=function(){return this.$from.index(this.depth)},prototypeAccessors$1$1$1.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(module_8008f8e9_NodeRange.prototype,prototypeAccessors$1$1$1);var module_8008f8e9_emptyAttrs=Object.create(null),Node$3=function(type,attrs,content,marks){this.type=type,this.attrs=attrs,this.content=content||module_8008f8e9_Fragment.empty,this.marks=marks||Mark$1.none},prototypeAccessors$3$1={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};prototypeAccessors$3$1.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},prototypeAccessors$3$1.childCount.get=function(){return this.content.childCount},Node$3.prototype.child=function(index){return this.content.child(index)},Node$3.prototype.maybeChild=function(index){return this.content.maybeChild(index)},Node$3.prototype.forEach=function(f){this.content.forEach(f)},Node$3.prototype.nodesBetween=function(from,to,f,startPos){void 0===startPos&&(startPos=0),this.content.nodesBetween(from,to,f,startPos,this)},Node$3.prototype.descendants=function(f){this.nodesBetween(0,this.content.size,f)},prototypeAccessors$3$1.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Node$3.prototype.textBetween=function(from,to,blockSeparator,leafText){return this.content.textBetween(from,to,blockSeparator,leafText)},prototypeAccessors$3$1.firstChild.get=function(){return this.content.firstChild},prototypeAccessors$3$1.lastChild.get=function(){return this.content.lastChild},Node$3.prototype.eq=function(other){return this==other||this.sameMarkup(other)&&this.content.eq(other.content)},Node$3.prototype.sameMarkup=function(other){return this.hasMarkup(other.type,other.attrs,other.marks)},Node$3.prototype.hasMarkup=function(type,attrs,marks){return this.type==type&&module_8008f8e9_compareDeep(this.attrs,attrs||type.defaultAttrs||module_8008f8e9_emptyAttrs)&&Mark$1.sameSet(this.marks,marks||Mark$1.none)},Node$3.prototype.copy=function(content){return void 0===content&&(content=null),content==this.content?this:new this.constructor(this.type,this.attrs,content,this.marks)},Node$3.prototype.mark=function(marks){return marks==this.marks?this:new this.constructor(this.type,this.attrs,this.content,marks)},Node$3.prototype.cut=function(from,to){return 0==from&&to==this.content.size?this:this.copy(this.content.cut(from,to))},Node$3.prototype.slice=function(from,to,includeParents){if(void 0===to&&(to=this.content.size),void 0===includeParents&&(includeParents=!1),from==to)return module_8008f8e9_Slice.empty;var $from=this.resolve(from),$to=this.resolve(to),depth=includeParents?0:$from.sharedDepth(to),start=$from.start(depth),content=$from.node(depth).content.cut($from.pos-start,$to.pos-start);return new module_8008f8e9_Slice(content,$from.depth-depth,$to.depth-depth)},Node$3.prototype.replace=function(from,to,slice){return replace$2(this.resolve(from),this.resolve(to),slice)},Node$3.prototype.nodeAt=function(pos){for(var node=this;;){var ref=node.content.findIndex(pos),index=ref.index,offset=ref.offset;if(!(node=node.maybeChild(index)))return null;if(offset==pos||node.isText)return node;pos-=offset+1}},Node$3.prototype.childAfter=function(pos){var ref=this.content.findIndex(pos),index=ref.index,offset=ref.offset;return{node:this.content.maybeChild(index),index:index,offset:offset}},Node$3.prototype.childBefore=function(pos){if(0==pos)return{node:null,index:0,offset:0};var ref=this.content.findIndex(pos),index=ref.index,offset=ref.offset;if(offset<pos)return{node:this.content.child(index),index:index,offset:offset};var node=this.content.child(index-1);return{node:node,index:index-1,offset:offset-node.nodeSize}},Node$3.prototype.resolve=function(pos){return module_8008f8e9_ResolvedPos.resolveCached(this,pos)},Node$3.prototype.resolveNoCache=function(pos){return module_8008f8e9_ResolvedPos.resolve(this,pos)},Node$3.prototype.rangeHasMark=function(from,to,type){var found=!1;return to>from&&this.nodesBetween(from,to,(function(node){return type.isInSet(node.marks)&&(found=!0),!found})),found},prototypeAccessors$3$1.isBlock.get=function(){return this.type.isBlock},prototypeAccessors$3$1.isTextblock.get=function(){return this.type.isTextblock},prototypeAccessors$3$1.inlineContent.get=function(){return this.type.inlineContent},prototypeAccessors$3$1.isInline.get=function(){return this.type.isInline},prototypeAccessors$3$1.isText.get=function(){return this.type.isText},prototypeAccessors$3$1.isLeaf.get=function(){return this.type.isLeaf},prototypeAccessors$3$1.isAtom.get=function(){return this.type.isAtom},Node$3.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var name=this.type.name;return this.content.size&&(name+="("+this.content.toStringInner()+")"),function(marks,str){for(var i=marks.length-1;i>=0;i--)str=marks[i].type.name+"("+str+")";return str}(this.marks,name)},Node$3.prototype.contentMatchAt=function(index){var match=this.type.contentMatch.matchFragment(this.content,0,index);if(!match)throw new Error("Called contentMatchAt on a node with invalid content");return match},Node$3.prototype.canReplace=function(from,to,replacement,start,end){void 0===replacement&&(replacement=module_8008f8e9_Fragment.empty),void 0===start&&(start=0),void 0===end&&(end=replacement.childCount);var one=this.contentMatchAt(from).matchFragment(replacement,start,end),two=one&&one.matchFragment(this.content,to);if(!two||!two.validEnd)return!1;for(var i=start;i<end;i++)if(!this.type.allowsMarks(replacement.child(i).marks))return!1;return!0},Node$3.prototype.canReplaceWith=function(from,to,type,marks){if(marks&&!this.type.allowsMarks(marks))return!1;var start=this.contentMatchAt(from).matchType(type),end=start&&start.matchFragment(this.content,to);return!!end&&end.validEnd},Node$3.prototype.canAppend=function(other){return other.content.size?this.canReplace(this.childCount,this.childCount,other.content):this.type.compatibleContent(other.type)},Node$3.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var copy=Mark$1.none,i=0;i<this.marks.length;i++)copy=this.marks[i].addToSet(copy);if(!Mark$1.sameSet(copy,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(m){return m.type.name})));this.content.forEach((function(node){return node.check()}))},Node$3.prototype.toJSON=function(){var obj={type:this.type.name};for(var _ in this.attrs){obj.attrs=this.attrs;break}return this.content.size&&(obj.content=this.content.toJSON()),this.marks.length&&(obj.marks=this.marks.map((function(n){return n.toJSON()}))),obj},Node$3.fromJSON=function(schema,json){if(!json)throw new RangeError("Invalid input for Node.fromJSON");var marks=null;if(json.marks){if(!Array.isArray(json.marks))throw new RangeError("Invalid mark data for Node.fromJSON");marks=json.marks.map(schema.markFromJSON)}if("text"==json.type){if("string"!=typeof json.text)throw new RangeError("Invalid text node in JSON");return schema.text(json.text,marks)}var content=module_8008f8e9_Fragment.fromJSON(schema,json.content);return schema.nodeType(json.type).create(json.attrs,content,marks)},Object.defineProperties(Node$3.prototype,prototypeAccessors$3$1);var module_8008f8e9_ContentMatch=function(validEnd){this.validEnd=validEnd,this.next=[],this.wrapCache=[]},prototypeAccessors$4$1={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};module_8008f8e9_ContentMatch.parse=function(string,nodeTypes){var stream=new module_8008f8e9_TokenStream(string,nodeTypes);if(null==stream.next)return module_8008f8e9_ContentMatch.empty;var expr=module_8008f8e9_parseExpr(stream);stream.next&&stream.err("Unexpected trailing text");var nfa,labeled,match=(nfa=function(expr){var nfa=[[]];return connect(function compile(expr,from){if("choice"==expr.type)return expr.exprs.reduce((function(out,expr){return out.concat(compile(expr,from))}),[]);if("seq"==expr.type)for(var i=0;;i++){var next=compile(expr.exprs[i],from);if(i==expr.exprs.length-1)return next;connect(next,from=node())}else{if("star"==expr.type){var loop=node();return edge(from,loop),connect(compile(expr.expr,loop),loop),[edge(loop)]}if("plus"==expr.type){var loop$1=node();return connect(compile(expr.expr,from),loop$1),connect(compile(expr.expr,loop$1),loop$1),[edge(loop$1)]}if("opt"==expr.type)return[edge(from)].concat(compile(expr.expr,from));if("range"==expr.type){for(var cur=from,i$1=0;i$1<expr.min;i$1++){var next$1=node();connect(compile(expr.expr,cur),next$1),cur=next$1}if(-1==expr.max)connect(compile(expr.expr,cur),cur);else for(var i$2=expr.min;i$2<expr.max;i$2++){var next$2=node();edge(cur,next$2),connect(compile(expr.expr,cur),next$2),cur=next$2}return[edge(cur)]}if("name"==expr.type)return[edge(from,null,expr.value)]}}(expr,0),node()),nfa;function node(){return nfa.push([])-1}function edge(from,to,term){var edge={term:term,to:to};return nfa[from].push(edge),edge}function connect(edges,to){edges.forEach((function(edge){return edge.to=to}))}}(expr),labeled=Object.create(null),function explore(states){var out=[];states.forEach((function(node){nfa[node].forEach((function(ref){var term=ref.term,to=ref.to;if(term){var known=out.indexOf(term),set=known>-1&&out[known+1];module_8008f8e9_nullFrom(nfa,to).forEach((function(node){set||out.push(term,set=[]),-1==set.indexOf(node)&&set.push(node)}))}}))}));for(var state=labeled[states.join(",")]=new module_8008f8e9_ContentMatch(states.indexOf(nfa.length-1)>-1),i=0;i<out.length;i+=2){var states$1=out[i+1].sort(module_8008f8e9_cmp);state.next.push(out[i],labeled[states$1.join(",")]||explore(states$1))}return state}(module_8008f8e9_nullFrom(nfa,0)));return function(match,stream){for(var i=0,work=[match];i<work.length;i++){for(var state=work[i],dead=!state.validEnd,nodes=[],j=0;j<state.next.length;j+=2){var node=state.next[j],next=state.next[j+1];nodes.push(node.name),!dead||node.isText||node.hasRequiredAttrs()||(dead=!1),-1==work.indexOf(next)&&work.push(next)}dead&&stream.err("Only non-generatable nodes ("+nodes.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(match,stream),match},module_8008f8e9_ContentMatch.prototype.matchType=function(type){for(var i=0;i<this.next.length;i+=2)if(this.next[i]==type)return this.next[i+1];return null},module_8008f8e9_ContentMatch.prototype.matchFragment=function(frag,start,end){void 0===start&&(start=0),void 0===end&&(end=frag.childCount);for(var cur=this,i=start;cur&&i<end;i++)cur=cur.matchType(frag.child(i).type);return cur},prototypeAccessors$4$1.inlineContent.get=function(){var first=this.next[0];return!!first&&first.isInline},prototypeAccessors$4$1.defaultType.get=function(){for(var i=0;i<this.next.length;i+=2){var type=this.next[i];if(!type.isText&&!type.hasRequiredAttrs())return type}},module_8008f8e9_ContentMatch.prototype.compatible=function(other){for(var i=0;i<this.next.length;i+=2)for(var j=0;j<other.next.length;j+=2)if(this.next[i]==other.next[j])return!0;return!1},module_8008f8e9_ContentMatch.prototype.fillBefore=function(after,toEnd,startIndex){void 0===toEnd&&(toEnd=!1),void 0===startIndex&&(startIndex=0);var seen=[this];return function search(match,types){var finished=match.matchFragment(after,startIndex);if(finished&&(!toEnd||finished.validEnd))return module_8008f8e9_Fragment.from(types.map((function(tp){return tp.createAndFill()})));for(var i=0;i<match.next.length;i+=2){var type=match.next[i],next=match.next[i+1];if(!type.isText&&!type.hasRequiredAttrs()&&-1==seen.indexOf(next)){seen.push(next);var found=search(next,types.concat(type));if(found)return found}}}(this,[])},module_8008f8e9_ContentMatch.prototype.findWrapping=function(target){for(var i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==target)return this.wrapCache[i+1];var computed=this.computeWrapping(target);return this.wrapCache.push(target,computed),computed},module_8008f8e9_ContentMatch.prototype.computeWrapping=function(target){for(var seen=Object.create(null),active=[{match:this,type:null,via:null}];active.length;){var current=active.shift(),match=current.match;if(match.matchType(target)){for(var result=[],obj=current;obj.type;obj=obj.via)result.push(obj.type);return result.reverse()}for(var i=0;i<match.next.length;i+=2){var type=match.next[i];type.isLeaf||type.hasRequiredAttrs()||type.name in seen||current.type&&!match.next[i+1].validEnd||(active.push({match:type.contentMatch,type:type,via:current}),seen[type.name]=!0)}}},prototypeAccessors$4$1.edgeCount.get=function(){return this.next.length>>1},module_8008f8e9_ContentMatch.prototype.edge=function(n){var i=n<<1;if(i>=this.next.length)throw new RangeError("There's no "+n+"th edge in this content match");return{type:this.next[i],next:this.next[i+1]}},module_8008f8e9_ContentMatch.prototype.toString=function(){var seen=[];return function scan(m){seen.push(m);for(var i=1;i<m.next.length;i+=2)-1==seen.indexOf(m.next[i])&&scan(m.next[i])}(this),seen.map((function(m,i){for(var out=i+(m.validEnd?"*":" ")+" ",i$1=0;i$1<m.next.length;i$1+=2)out+=(i$1?", ":"")+m.next[i$1].name+"->"+seen.indexOf(m.next[i$1+1]);return out})).join("\n")},Object.defineProperties(module_8008f8e9_ContentMatch.prototype,prototypeAccessors$4$1),module_8008f8e9_ContentMatch.empty=new module_8008f8e9_ContentMatch(!0);var module_8008f8e9_TokenStream=function(string,nodeTypes){this.string=string,this.nodeTypes=nodeTypes,this.inline=null,this.pos=0,this.tokens=string.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},prototypeAccessors$1$2$1={next:{configurable:!0}};function module_8008f8e9_parseExpr(stream){var exprs=[];do{exprs.push(module_8008f8e9_parseExprSeq(stream))}while(stream.eat("|"));return 1==exprs.length?exprs[0]:{type:"choice",exprs:exprs}}function module_8008f8e9_parseExprSeq(stream){var exprs=[];do{exprs.push(module_8008f8e9_parseExprSubscript(stream))}while(stream.next&&")"!=stream.next&&"|"!=stream.next);return 1==exprs.length?exprs[0]:{type:"seq",exprs:exprs}}function module_8008f8e9_parseExprSubscript(stream){for(var expr=function(stream){if(stream.eat("(")){var expr=module_8008f8e9_parseExpr(stream);return stream.eat(")")||stream.err("Missing closing paren"),expr}if(!/\W/.test(stream.next)){var exprs=function(stream,name){var types=stream.nodeTypes,type=types[name];if(type)return[type];var result=[];for(var typeName in types){var type$1=types[typeName];type$1.groups.indexOf(name)>-1&&result.push(type$1)}return 0==result.length&&stream.err("No node type or group '"+name+"' found"),result}(stream,stream.next).map((function(type){return null==stream.inline?stream.inline=type.isInline:stream.inline!=type.isInline&&stream.err("Mixing inline and block content"),{type:"name",value:type}}));return stream.pos++,1==exprs.length?exprs[0]:{type:"choice",exprs:exprs}}stream.err("Unexpected token '"+stream.next+"'")}(stream);;)if(stream.eat("+"))expr={type:"plus",expr:expr};else if(stream.eat("*"))expr={type:"star",expr:expr};else if(stream.eat("?"))expr={type:"opt",expr:expr};else{if(!stream.eat("{"))break;expr=module_8008f8e9_parseExprRange(stream,expr)}return expr}function module_8008f8e9_parseNum(stream){/\D/.test(stream.next)&&stream.err("Expected number, got '"+stream.next+"'");var result=Number(stream.next);return stream.pos++,result}function module_8008f8e9_parseExprRange(stream,expr){var min=module_8008f8e9_parseNum(stream),max=min;return stream.eat(",")&&(max="}"!=stream.next?module_8008f8e9_parseNum(stream):-1),stream.eat("}")||stream.err("Unclosed braced range"),{type:"range",min:min,max:max,expr:expr}}function module_8008f8e9_cmp(a,b){return b-a}function module_8008f8e9_nullFrom(nfa,node){var result=[];return function scan(node){var edges=nfa[node];if(1==edges.length&&!edges[0].term)return scan(edges[0].to);result.push(node);for(var i=0;i<edges.length;i++){var ref=edges[i],term=ref.term,to=ref.to;term||-1!=result.indexOf(to)||scan(to)}}(node),result.sort(module_8008f8e9_cmp)}function module_8008f8e9_defaultAttrs(attrs){var defaults=Object.create(null);for(var attrName in attrs){var attr=attrs[attrName];if(!attr.hasDefault)return null;defaults[attrName]=attr.default}return defaults}function module_8008f8e9_computeAttrs(attrs,value){var built=Object.create(null);for(var name in attrs){var given=value&&value[name];if(void 0===given){var attr=attrs[name];if(!attr.hasDefault)throw new RangeError("No value supplied for attribute "+name);given=attr.default}built[name]=given}return built}function module_8008f8e9_initAttrs(attrs){var result=Object.create(null);if(attrs)for(var name in attrs)result[name]=new module_8008f8e9_Attribute(attrs[name]);return result}prototypeAccessors$1$2$1.next.get=function(){return this.tokens[this.pos]},module_8008f8e9_TokenStream.prototype.eat=function(tok){return this.next==tok&&(this.pos++||!0)},module_8008f8e9_TokenStream.prototype.err=function(str){throw new SyntaxError(str+" (in content expression '"+this.string+"')")},Object.defineProperties(module_8008f8e9_TokenStream.prototype,prototypeAccessors$1$2$1);var NodeType$1=function(name,schema,spec){this.name=name,this.schema=schema,this.spec=spec,this.groups=spec.group?spec.group.split(" "):[],this.attrs=module_8008f8e9_initAttrs(spec.attrs),this.defaultAttrs=module_8008f8e9_defaultAttrs(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(spec.inline||"text"==name),this.isText="text"==name},prototypeAccessors$5$1={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};prototypeAccessors$5$1.isInline.get=function(){return!this.isBlock},prototypeAccessors$5$1.isTextblock.get=function(){return this.isBlock&&this.inlineContent},prototypeAccessors$5$1.isLeaf.get=function(){return this.contentMatch==module_8008f8e9_ContentMatch.empty},prototypeAccessors$5$1.isAtom.get=function(){return this.isLeaf||this.spec.atom},NodeType$1.prototype.hasRequiredAttrs=function(){for(var n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1},NodeType$1.prototype.compatibleContent=function(other){return this==other||this.contentMatch.compatible(other.contentMatch)},NodeType$1.prototype.computeAttrs=function(attrs){return!attrs&&this.defaultAttrs?this.defaultAttrs:module_8008f8e9_computeAttrs(this.attrs,attrs)},NodeType$1.prototype.create=function(attrs,content,marks){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$3(this,this.computeAttrs(attrs),module_8008f8e9_Fragment.from(content),Mark$1.setFrom(marks))},NodeType$1.prototype.createChecked=function(attrs,content,marks){if(content=module_8008f8e9_Fragment.from(content),!this.validContent(content))throw new RangeError("Invalid content for node "+this.name);return new Node$3(this,this.computeAttrs(attrs),content,Mark$1.setFrom(marks))},NodeType$1.prototype.createAndFill=function(attrs,content,marks){if(attrs=this.computeAttrs(attrs),(content=module_8008f8e9_Fragment.from(content)).size){var before=this.contentMatch.fillBefore(content);if(!before)return null;content=before.append(content)}var after=this.contentMatch.matchFragment(content).fillBefore(module_8008f8e9_Fragment.empty,!0);return after?new Node$3(this,attrs,content.append(after),Mark$1.setFrom(marks)):null},NodeType$1.prototype.validContent=function(content){var result=this.contentMatch.matchFragment(content);if(!result||!result.validEnd)return!1;for(var i=0;i<content.childCount;i++)if(!this.allowsMarks(content.child(i).marks))return!1;return!0},NodeType$1.prototype.allowsMarkType=function(markType){return null==this.markSet||this.markSet.indexOf(markType)>-1},NodeType$1.prototype.allowsMarks=function(marks){if(null==this.markSet)return!0;for(var i=0;i<marks.length;i++)if(!this.allowsMarkType(marks[i].type))return!1;return!0},NodeType$1.prototype.allowedMarks=function(marks){if(null==this.markSet)return marks;for(var copy,i=0;i<marks.length;i++)this.allowsMarkType(marks[i].type)?copy&&copy.push(marks[i]):copy||(copy=marks.slice(0,i));return copy?copy.length?copy:Mark$1.empty:marks},NodeType$1.compile=function(nodes,schema){var result=Object.create(null);nodes.forEach((function(name,spec){return result[name]=new NodeType$1(name,schema,spec)}));var topType=schema.spec.topNode||"doc";if(!result[topType])throw new RangeError("Schema is missing its top node type ('"+topType+"')");if(!result.text)throw new RangeError("Every schema needs a 'text' type");for(var _ in result.text.attrs)throw new RangeError("The text node type should not have attributes");return result},Object.defineProperties(NodeType$1.prototype,prototypeAccessors$5$1);var module_8008f8e9_Attribute=function(options){this.hasDefault=Object.prototype.hasOwnProperty.call(options,"default"),this.default=options.default},prototypeAccessors$1$3$1={isRequired:{configurable:!0}};prototypeAccessors$1$3$1.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(module_8008f8e9_Attribute.prototype,prototypeAccessors$1$3$1);var module_8008f8e9_MarkType=function(name,rank,schema,spec){this.name=name,this.schema=schema,this.spec=spec,this.attrs=module_8008f8e9_initAttrs(spec.attrs),this.rank=rank,this.excluded=null;var defaults=module_8008f8e9_defaultAttrs(this.attrs);this.instance=defaults&&new Mark$1(this,defaults)};module_8008f8e9_MarkType.prototype.create=function(attrs){return!attrs&&this.instance?this.instance:new Mark$1(this,module_8008f8e9_computeAttrs(this.attrs,attrs))},module_8008f8e9_MarkType.compile=function(marks,schema){var result=Object.create(null),rank=0;return marks.forEach((function(name,spec){return result[name]=new module_8008f8e9_MarkType(name,rank++,schema,spec)})),result},module_8008f8e9_MarkType.prototype.removeFromSet=function(set){for(var i=0;i<set.length;i++)set[i].type==this&&(set=set.slice(0,i).concat(set.slice(i+1)),i--);return set},module_8008f8e9_MarkType.prototype.isInSet=function(set){for(var i=0;i<set.length;i++)if(set[i].type==this)return set[i]},module_8008f8e9_MarkType.prototype.excludes=function(other){return this.excluded.indexOf(other)>-1};var module_8008f8e9_DOMParser=function(schema,rules){var this$1$1=this;this.schema=schema,this.rules=rules,this.tags=[],this.styles=[],rules.forEach((function(rule){rule.tag?this$1$1.tags.push(rule):rule.style&&this$1$1.styles.push(rule)})),this.normalizeLists=!this.tags.some((function(r){if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;var node=schema.nodes[r.node];return node.contentMatch.matchType(node)}))};module_8008f8e9_DOMParser.prototype.parse=function(dom,options){void 0===options&&(options={});var context=new module_8008f8e9_ParseContext(this,options,!1);return context.addAll(dom,null,options.from,options.to),context.finish()},module_8008f8e9_DOMParser.prototype.parseSlice=function(dom,options){void 0===options&&(options={});var context=new module_8008f8e9_ParseContext(this,options,!0);return context.addAll(dom,null,options.from,options.to),module_8008f8e9_Slice.maxOpen(context.finish())},module_8008f8e9_DOMParser.prototype.matchTag=function(dom,context,after){for(var i=after?this.tags.indexOf(after)+1:0;i<this.tags.length;i++){var rule=this.tags[i];if(module_8008f8e9_matches(dom,rule.tag)&&(void 0===rule.namespace||dom.namespaceURI==rule.namespace)&&(!rule.context||context.matchesContext(rule.context))){if(rule.getAttrs){var result=rule.getAttrs(dom);if(!1===result)continue;rule.attrs=result}return rule}}},module_8008f8e9_DOMParser.prototype.matchStyle=function(prop,value,context,after){for(var i=after?this.styles.indexOf(after)+1:0;i<this.styles.length;i++){var rule=this.styles[i];if(!(0!=rule.style.indexOf(prop)||rule.context&&!context.matchesContext(rule.context)||rule.style.length>prop.length&&(61!=rule.style.charCodeAt(prop.length)||rule.style.slice(prop.length+1)!=value))){if(rule.getAttrs){var result=rule.getAttrs(value);if(!1===result)continue;rule.attrs=result}return rule}}},module_8008f8e9_DOMParser.schemaRules=function(schema){var result=[];function insert(rule){for(var priority=null==rule.priority?50:rule.priority,i=0;i<result.length;i++){var next=result[i];if((null==next.priority?50:next.priority)<priority)break}result.splice(i,0,rule)}var rules$1,loop=function(name){var rules=schema.marks[name].spec.parseDOM;rules&&rules.forEach((function(rule){insert(rule=module_8008f8e9_copy(rule)),rule.mark=name}))};for(var name in schema.marks)loop(name);for(var name$1 in schema.nodes)rules$1=void 0,(rules$1=schema.nodes[name$1].spec.parseDOM)&&rules$1.forEach((function(rule){insert(rule=module_8008f8e9_copy(rule)),rule.node=name$1}));return result},module_8008f8e9_DOMParser.fromSchema=function(schema){return schema.cached.domParser||(schema.cached.domParser=new module_8008f8e9_DOMParser(schema,module_8008f8e9_DOMParser.schemaRules(schema)))};var module_8008f8e9_blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},module_8008f8e9_ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},module_8008f8e9_listTags={ol:!0,ul:!0};function module_8008f8e9_wsOptionsFor(preserveWhitespace){return(preserveWhitespace?1:0)|("full"===preserveWhitespace?2:0)}var module_8008f8e9_NodeContext=function(type,attrs,marks,pendingMarks,solid,match,options){this.type=type,this.attrs=attrs,this.solid=solid,this.match=match||(4&options?null:type.contentMatch),this.options=options,this.content=[],this.marks=marks,this.activeMarks=Mark$1.none,this.pendingMarks=pendingMarks,this.stashMarks=[]};module_8008f8e9_NodeContext.prototype.findWrapping=function(node){if(!this.match){if(!this.type)return[];var fill=this.type.contentMatch.fillBefore(module_8008f8e9_Fragment.from(node));if(!fill){var wrap,start=this.type.contentMatch;return(wrap=start.findWrapping(node.type))?(this.match=start,wrap):null}this.match=this.type.contentMatch.matchFragment(fill)}return this.match.findWrapping(node.type)},module_8008f8e9_NodeContext.prototype.finish=function(openEnd){if(!(1&this.options)){var m,last=this.content[this.content.length-1];last&&last.isText&&(m=/[ \t\r\n\u000c]+$/.exec(last.text))&&(last.text.length==m[0].length?this.content.pop():this.content[this.content.length-1]=last.withText(last.text.slice(0,last.text.length-m[0].length)))}var content=module_8008f8e9_Fragment.from(this.content);return!openEnd&&this.match&&(content=content.append(this.match.fillBefore(module_8008f8e9_Fragment.empty,!0))),this.type?this.type.create(this.attrs,content,this.marks):content},module_8008f8e9_NodeContext.prototype.popFromStashMark=function(mark){for(var i=this.stashMarks.length-1;i>=0;i--)if(mark.eq(this.stashMarks[i]))return this.stashMarks.splice(i,1)[0]},module_8008f8e9_NodeContext.prototype.applyPending=function(nextType){for(var i=0,pending=this.pendingMarks;i<pending.length;i++){var mark=pending[i];(this.type?this.type.allowsMarkType(mark.type):module_8008f8e9_markMayApply(mark.type,nextType))&&!mark.isInSet(this.activeMarks)&&(this.activeMarks=mark.addToSet(this.activeMarks),this.pendingMarks=mark.removeFromSet(this.pendingMarks))}},module_8008f8e9_NodeContext.prototype.inlineContext=function(node){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:node.parentNode&&!module_8008f8e9_blockTags.hasOwnProperty(node.parentNode.nodeName.toLowerCase())};var module_8008f8e9_ParseContext=function(parser,options,open){this.parser=parser,this.options=options,this.isOpen=open;var topContext,topNode=options.topNode,topOptions=module_8008f8e9_wsOptionsFor(options.preserveWhitespace)|(open?4:0);topContext=topNode?new module_8008f8e9_NodeContext(topNode.type,topNode.attrs,Mark$1.none,Mark$1.none,!0,options.topMatch||topNode.type.contentMatch,topOptions):new module_8008f8e9_NodeContext(open?null:parser.schema.topNodeType,null,Mark$1.none,Mark$1.none,!0,null,topOptions),this.nodes=[topContext],this.open=0,this.find=options.findPositions,this.needsBlock=!1},module_8008f8e9_prototypeAccessors$6={top:{configurable:!0},currentPos:{configurable:!0}};function module_8008f8e9_matches(dom,selector){return(dom.matches||dom.msMatchesSelector||dom.webkitMatchesSelector||dom.mozMatchesSelector).call(dom,selector)}function module_8008f8e9_copy(obj){var copy={};for(var prop in obj)copy[prop]=obj[prop];return copy}function module_8008f8e9_markMayApply(markType,nodeType){var nodes=nodeType.schema.nodes,loop=function(name){var parent=nodes[name];if(parent.allowsMarkType(markType)){var seen=[],scan=function(match){seen.push(match);for(var i=0;i<match.edgeCount;i++){var ref=match.edge(i),type=ref.type,next=ref.next;if(type==nodeType)return!0;if(seen.indexOf(next)<0&&scan(next))return!0}};return scan(parent.contentMatch)?{v:!0}:void 0}};for(var name in nodes){var returned=loop(name);if(returned)return returned.v}}module_8008f8e9_prototypeAccessors$6.top.get=function(){return this.nodes[this.open]},module_8008f8e9_ParseContext.prototype.addDOM=function(dom){if(3==dom.nodeType)this.addTextNode(dom);else if(1==dom.nodeType){var style=dom.getAttribute("style"),marks=style?this.readStyles(function(style){for(var m,re=/\s*([\w-]+)\s*:\s*([^;]+)/g,result=[];m=re.exec(style);)result.push(m[1],m[2].trim());return result}(style)):null,top=this.top;if(null!=marks)for(var i=0;i<marks.length;i++)this.addPendingMark(marks[i]);if(this.addElement(dom),null!=marks)for(var i$1=0;i$1<marks.length;i$1++)this.removePendingMark(marks[i$1],top)}},module_8008f8e9_ParseContext.prototype.addTextNode=function(dom){var value=dom.nodeValue,top=this.top;if(2&top.options||top.inlineContext(dom)||/[^ \t\r\n\u000c]/.test(value)){if(1&top.options)value=2&top.options?value.replace(/\r\n?/g,"\n"):value.replace(/\r?\n|\r/g," ");else if(value=value.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(value)&&this.open==this.nodes.length-1){var nodeBefore=top.content[top.content.length-1],domNodeBefore=dom.previousSibling;(!nodeBefore||domNodeBefore&&"BR"==domNodeBefore.nodeName||nodeBefore.isText&&/[ \t\r\n\u000c]$/.test(nodeBefore.text))&&(value=value.slice(1))}value&&this.insertNode(this.parser.schema.text(value)),this.findInText(dom)}else this.findInside(dom)},module_8008f8e9_ParseContext.prototype.addElement=function(dom,matchAfter){var ruleID,name=dom.nodeName.toLowerCase();module_8008f8e9_listTags.hasOwnProperty(name)&&this.parser.normalizeLists&&function(dom){for(var child=dom.firstChild,prevItem=null;child;child=child.nextSibling){var name=1==child.nodeType?child.nodeName.toLowerCase():null;name&&module_8008f8e9_listTags.hasOwnProperty(name)&&prevItem?(prevItem.appendChild(child),child=prevItem):"li"==name?prevItem=child:name&&(prevItem=null)}}(dom);var rule=this.options.ruleFromNode&&this.options.ruleFromNode(dom)||(ruleID=this.parser.matchTag(dom,this,matchAfter));if(rule?rule.ignore:module_8008f8e9_ignoreTags.hasOwnProperty(name))this.findInside(dom),this.ignoreFallback(dom);else if(!rule||rule.skip||rule.closeParent){rule&&rule.closeParent?this.open=Math.max(0,this.open-1):rule&&rule.skip.nodeType&&(dom=rule.skip);var sync,top=this.top,oldNeedsBlock=this.needsBlock;if(module_8008f8e9_blockTags.hasOwnProperty(name))sync=!0,top.type||(this.needsBlock=!0);else if(!dom.firstChild)return void this.leafFallback(dom);this.addAll(dom),sync&&this.sync(top),this.needsBlock=oldNeedsBlock}else this.addElementByRule(dom,rule,!1===rule.consuming?ruleID:null)},module_8008f8e9_ParseContext.prototype.leafFallback=function(dom){"BR"==dom.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(dom.ownerDocument.createTextNode("\n"))},module_8008f8e9_ParseContext.prototype.ignoreFallback=function(dom){"BR"!=dom.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},module_8008f8e9_ParseContext.prototype.readStyles=function(styles){var marks=Mark$1.none;style:for(var i=0;i<styles.length;i+=2)for(var after=null;;){var rule=this.parser.matchStyle(styles[i],styles[i+1],this,after);if(!rule)continue style;if(rule.ignore)return null;if(marks=this.parser.schema.marks[rule.mark].create(rule.attrs).addToSet(marks),!1!==rule.consuming)break;after=rule}return marks},module_8008f8e9_ParseContext.prototype.addElementByRule=function(dom,rule,continueAfter){var sync,nodeType,mark,this$1$1=this;rule.node?(nodeType=this.parser.schema.nodes[rule.node]).isLeaf?this.insertNode(nodeType.create(rule.attrs))||this.leafFallback(dom):sync=this.enter(nodeType,rule.attrs,rule.preserveWhitespace):(mark=this.parser.schema.marks[rule.mark].create(rule.attrs),this.addPendingMark(mark));var startIn=this.top;if(nodeType&&nodeType.isLeaf)this.findInside(dom);else if(continueAfter)this.addElement(dom,continueAfter);else if(rule.getContent)this.findInside(dom),rule.getContent(dom,this.parser.schema).forEach((function(node){return this$1$1.insertNode(node)}));else{var contentDOM=rule.contentElement;"string"==typeof contentDOM?contentDOM=dom.querySelector(contentDOM):"function"==typeof contentDOM&&(contentDOM=contentDOM(dom)),contentDOM||(contentDOM=dom),this.findAround(dom,contentDOM,!0),this.addAll(contentDOM,sync)}sync&&(this.sync(startIn),this.open--),mark&&this.removePendingMark(mark,startIn)},module_8008f8e9_ParseContext.prototype.addAll=function(parent,sync,startIndex,endIndex){for(var index=startIndex||0,dom=startIndex?parent.childNodes[startIndex]:parent.firstChild,end=null==endIndex?null:parent.childNodes[endIndex];dom!=end;dom=dom.nextSibling,++index)this.findAtPoint(parent,index),this.addDOM(dom),sync&&module_8008f8e9_blockTags.hasOwnProperty(dom.nodeName.toLowerCase())&&this.sync(sync);this.findAtPoint(parent,index)},module_8008f8e9_ParseContext.prototype.findPlace=function(node){for(var route,sync,depth=this.open;depth>=0;depth--){var cx=this.nodes[depth],found=cx.findWrapping(node);if(found&&(!route||route.length>found.length)&&(route=found,sync=cx,!found.length))break;if(cx.solid)break}if(!route)return!1;this.sync(sync);for(var i=0;i<route.length;i++)this.enterInner(route[i],null,!1);return!0},module_8008f8e9_ParseContext.prototype.insertNode=function(node){if(node.isInline&&this.needsBlock&&!this.top.type){var block=this.textblockFromContext();block&&this.enterInner(block)}if(this.findPlace(node)){this.closeExtra();var top=this.top;top.applyPending(node.type),top.match&&(top.match=top.match.matchType(node.type));for(var marks=top.activeMarks,i=0;i<node.marks.length;i++)top.type&&!top.type.allowsMarkType(node.marks[i].type)||(marks=node.marks[i].addToSet(marks));return top.content.push(node.mark(marks)),!0}return!1},module_8008f8e9_ParseContext.prototype.enter=function(type,attrs,preserveWS){var ok=this.findPlace(type.create(attrs));return ok&&this.enterInner(type,attrs,!0,preserveWS),ok},module_8008f8e9_ParseContext.prototype.enterInner=function(type,attrs,solid,preserveWS){this.closeExtra();var top=this.top;top.applyPending(type),top.match=top.match&&top.match.matchType(type,attrs);var options=null==preserveWS?-5&top.options:module_8008f8e9_wsOptionsFor(preserveWS);4&top.options&&0==top.content.length&&(options|=4),this.nodes.push(new module_8008f8e9_NodeContext(type,attrs,top.activeMarks,top.pendingMarks,solid,null,options)),this.open++},module_8008f8e9_ParseContext.prototype.closeExtra=function(openEnd){var i=this.nodes.length-1;if(i>this.open){for(;i>this.open;i--)this.nodes[i-1].content.push(this.nodes[i].finish(openEnd));this.nodes.length=this.open+1}},module_8008f8e9_ParseContext.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},module_8008f8e9_ParseContext.prototype.sync=function(to){for(var i=this.open;i>=0;i--)if(this.nodes[i]==to)return void(this.open=i)},module_8008f8e9_prototypeAccessors$6.currentPos.get=function(){this.closeExtra();for(var pos=0,i=this.open;i>=0;i--){for(var content=this.nodes[i].content,j=content.length-1;j>=0;j--)pos+=content[j].nodeSize;i&&pos++}return pos},module_8008f8e9_ParseContext.prototype.findAtPoint=function(parent,offset){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==parent&&this.find[i].offset==offset&&(this.find[i].pos=this.currentPos)},module_8008f8e9_ParseContext.prototype.findInside=function(parent){if(this.find)for(var i=0;i<this.find.length;i++)null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node)&&(this.find[i].pos=this.currentPos)},module_8008f8e9_ParseContext.prototype.findAround=function(parent,content,before){if(parent!=content&&this.find)for(var i=0;i<this.find.length;i++)null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node)&&content.compareDocumentPosition(this.find[i].node)&(before?2:4)&&(this.find[i].pos=this.currentPos)},module_8008f8e9_ParseContext.prototype.findInText=function(textNode){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==textNode&&(this.find[i].pos=this.currentPos-(textNode.nodeValue.length-this.find[i].offset))},module_8008f8e9_ParseContext.prototype.matchesContext=function(context){var this$1$1=this;if(context.indexOf("|")>-1)return context.split(/\s*\|\s*/).some(this.matchesContext,this);var parts=context.split("/"),option=this.options.context,useRoot=!(this.isOpen||option&&option.parent.type!=this.nodes[0].type),minDepth=-(option?option.depth+1:0)+(useRoot?0:1),match=function(i,depth){for(;i>=0;i--){var part=parts[i];if(""==part){if(i==parts.length-1||0==i)continue;for(;depth>=minDepth;depth--)if(match(i-1,depth))return!0;return!1}var next=depth>0||0==depth&&useRoot?this$1$1.nodes[depth].type:option&&depth>=minDepth?option.node(depth-minDepth).type:null;if(!next||next.name!=part&&-1==next.groups.indexOf(part))return!1;depth--}return!0};return match(parts.length-1,this.open)},module_8008f8e9_ParseContext.prototype.textblockFromContext=function(){var $context=this.options.context;if($context)for(var d=$context.depth;d>=0;d--){var deflt=$context.node(d).contentMatchAt($context.indexAfter(d)).defaultType;if(deflt&&deflt.isTextblock&&deflt.defaultAttrs)return deflt}for(var name in this.parser.schema.nodes){var type=this.parser.schema.nodes[name];if(type.isTextblock&&type.defaultAttrs)return type}},module_8008f8e9_ParseContext.prototype.addPendingMark=function(mark){var found=function(mark,set){for(var i=0;i<set.length;i++)if(mark.eq(set[i]))return set[i]}(mark,this.top.pendingMarks);found&&this.top.stashMarks.push(found),this.top.pendingMarks=mark.addToSet(this.top.pendingMarks)},module_8008f8e9_ParseContext.prototype.removePendingMark=function(mark,upto){for(var depth=this.open;depth>=0;depth--){var level=this.nodes[depth];if(level.pendingMarks.lastIndexOf(mark)>-1)level.pendingMarks=mark.removeFromSet(level.pendingMarks);else{level.activeMarks=mark.removeFromSet(level.activeMarks);var stashMark=level.popFromStashMark(mark);stashMark&&level.type&&level.type.allowsMarkType(stashMark.type)&&(level.activeMarks=stashMark.addToSet(level.activeMarks))}if(level==upto)break}},Object.defineProperties(module_8008f8e9_ParseContext.prototype,module_8008f8e9_prototypeAccessors$6);var module_8008f8e9_DOMSerializer=function(nodes,marks){this.nodes=nodes||{},this.marks=marks||{}};function module_8008f8e9_gatherToDOM(obj){var result={};for(var name in obj){var toDOM=obj[name].spec.toDOM;toDOM&&(result[name]=toDOM)}return result}function module_8008f8e9_doc(options){return options.document||window.document}module_8008f8e9_DOMSerializer.prototype.serializeFragment=function(fragment,options,target){var this$1$1=this;void 0===options&&(options={}),target||(target=module_8008f8e9_doc(options).createDocumentFragment());var top=target,active=null;return fragment.forEach((function(node){if(active||node.marks.length){active||(active=[]);for(var keep=0,rendered=0;keep<active.length&&rendered<node.marks.length;){var next=node.marks[rendered];if(this$1$1.marks[next.type.name]){if(!next.eq(active[keep])||!1===next.type.spec.spanning)break;keep+=2,rendered++}else rendered++}for(;keep<active.length;)top=active.pop(),active.pop();for(;rendered<node.marks.length;){var add=node.marks[rendered++],markDOM=this$1$1.serializeMark(add,node.isInline,options);markDOM&&(active.push(add,top),top.appendChild(markDOM.dom),top=markDOM.contentDOM||markDOM.dom)}}top.appendChild(this$1$1.serializeNodeInner(node,options))})),target},module_8008f8e9_DOMSerializer.prototype.serializeNodeInner=function(node,options){void 0===options&&(options={});var ref=module_8008f8e9_DOMSerializer.renderSpec(module_8008f8e9_doc(options),this.nodes[node.type.name](node)),dom=ref.dom,contentDOM=ref.contentDOM;if(contentDOM){if(node.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");options.onContent?options.onContent(node,contentDOM,options):this.serializeFragment(node.content,options,contentDOM)}return dom},module_8008f8e9_DOMSerializer.prototype.serializeNode=function(node,options){void 0===options&&(options={});for(var dom=this.serializeNodeInner(node,options),i=node.marks.length-1;i>=0;i--){var wrap=this.serializeMark(node.marks[i],node.isInline,options);wrap&&((wrap.contentDOM||wrap.dom).appendChild(dom),dom=wrap.dom)}return dom},module_8008f8e9_DOMSerializer.prototype.serializeMark=function(mark,inline,options){void 0===options&&(options={});var toDOM=this.marks[mark.type.name];return toDOM&&module_8008f8e9_DOMSerializer.renderSpec(module_8008f8e9_doc(options),toDOM(mark,inline))},module_8008f8e9_DOMSerializer.renderSpec=function(doc,structure,xmlNS){if(void 0===xmlNS&&(xmlNS=null),"string"==typeof structure)return{dom:doc.createTextNode(structure)};if(null!=structure.nodeType)return{dom:structure};if(structure.dom&&null!=structure.dom.nodeType)return structure;var tagName=structure[0],space=tagName.indexOf(" ");space>0&&(xmlNS=tagName.slice(0,space),tagName=tagName.slice(space+1));var contentDOM=null,dom=xmlNS?doc.createElementNS(xmlNS,tagName):doc.createElement(tagName),attrs=structure[1],start=1;if(attrs&&"object"==typeof attrs&&null==attrs.nodeType&&!Array.isArray(attrs))for(var name in start=2,attrs)if(null!=attrs[name]){var space$1=name.indexOf(" ");space$1>0?dom.setAttributeNS(name.slice(0,space$1),name.slice(space$1+1),attrs[name]):dom.setAttribute(name,attrs[name])}for(var i=start;i<structure.length;i++){var child=structure[i];if(0===child){if(i<structure.length-1||i>start)throw new RangeError("Content hole must be the only child of its parent node");return{dom:dom,contentDOM:dom}}var ref=module_8008f8e9_DOMSerializer.renderSpec(doc,child,xmlNS),inner=ref.dom,innerContent=ref.contentDOM;if(dom.appendChild(inner),innerContent){if(contentDOM)throw new RangeError("Multiple content holes");contentDOM=innerContent}}return{dom:dom,contentDOM:contentDOM}},module_8008f8e9_DOMSerializer.fromSchema=function(schema){return schema.cached.domSerializer||(schema.cached.domSerializer=new module_8008f8e9_DOMSerializer(this.nodesFromSchema(schema),this.marksFromSchema(schema)))},module_8008f8e9_DOMSerializer.nodesFromSchema=function(schema){var result=module_8008f8e9_gatherToDOM(schema.nodes);return result.text||(result.text=function(node){return node.text}),result},module_8008f8e9_DOMSerializer.marksFromSchema=function(schema){return module_8008f8e9_gatherToDOM(schema.marks)};var module_8008f8e9_factor16=Math.pow(2,16);function module_8008f8e9_recoverIndex(value){return 65535&value}var module_8008f8e9_MapResult=function(pos,deleted,recover){void 0===deleted&&(deleted=!1),void 0===recover&&(recover=null),this.pos=pos,this.deleted=deleted,this.recover=recover},module_8008f8e9_StepMap=function(ranges,inverted){void 0===inverted&&(inverted=!1),this.ranges=ranges,this.inverted=inverted};module_8008f8e9_StepMap.prototype.recover=function(value){var diff=0,index=module_8008f8e9_recoverIndex(value);if(!this.inverted)for(var i=0;i<index;i++)diff+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*index]+diff+function(value){return(value-(65535&value))/module_8008f8e9_factor16}(value)},module_8008f8e9_StepMap.prototype.mapResult=function(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!1)},module_8008f8e9_StepMap.prototype.map=function(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!0)},module_8008f8e9_StepMap.prototype._map=function(pos,assoc,simple){for(var diff=0,oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;var oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex],end=start+oldSize;if(pos<=end){var result=start+diff+((oldSize?pos==start?-1:pos==end?1:assoc:assoc)<0?0:newSize);return simple?result:new module_8008f8e9_MapResult(result,assoc<0?pos!=start:pos!=end,pos==(assoc<0?start:end)?null:i/3+(pos-start)*module_8008f8e9_factor16)}diff+=newSize-oldSize}return simple?pos+diff:new module_8008f8e9_MapResult(pos+diff)},module_8008f8e9_StepMap.prototype.touches=function(pos,recover){for(var diff=0,index=module_8008f8e9_recoverIndex(recover),oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;var oldSize=this.ranges[i+oldIndex];if(pos<=start+oldSize&&i==3*index)return!0;diff+=this.ranges[i+newIndex]-oldSize}return!1},module_8008f8e9_StepMap.prototype.forEach=function(f){for(var oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0,diff=0;i<this.ranges.length;i+=3){var start=this.ranges[i],oldStart=start-(this.inverted?diff:0),newStart=start+(this.inverted?0:diff),oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex];f(oldStart,oldStart+oldSize,newStart,newStart+newSize),diff+=newSize-oldSize}},module_8008f8e9_StepMap.prototype.invert=function(){return new module_8008f8e9_StepMap(this.ranges,!this.inverted)},module_8008f8e9_StepMap.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},module_8008f8e9_StepMap.offset=function(n){return 0==n?module_8008f8e9_StepMap.empty:new module_8008f8e9_StepMap(n<0?[0,-n,0]:[0,0,n])},module_8008f8e9_StepMap.empty=new module_8008f8e9_StepMap([]);var module_8008f8e9_Mapping=function(maps,mirror,from,to){this.maps=maps||[],this.from=from||0,this.to=null==to?this.maps.length:to,this.mirror=mirror};function module_8008f8e9_TransformError(message){var err=Error.call(this,message);return err.__proto__=module_8008f8e9_TransformError.prototype,err}module_8008f8e9_Mapping.prototype.slice=function(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.maps.length),new module_8008f8e9_Mapping(this.maps,this.mirror,from,to)},module_8008f8e9_Mapping.prototype.copy=function(){return new module_8008f8e9_Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},module_8008f8e9_Mapping.prototype.appendMap=function(map,mirrors){this.to=this.maps.push(map),null!=mirrors&&this.setMirror(this.maps.length-1,mirrors)},module_8008f8e9_Mapping.prototype.appendMapping=function(mapping){for(var i=0,startSize=this.maps.length;i<mapping.maps.length;i++){var mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i],null!=mirr&&mirr<i?startSize+mirr:null)}},module_8008f8e9_Mapping.prototype.getMirror=function(n){if(this.mirror)for(var i=0;i<this.mirror.length;i++)if(this.mirror[i]==n)return this.mirror[i+(i%2?-1:1)]},module_8008f8e9_Mapping.prototype.setMirror=function(n,m){this.mirror||(this.mirror=[]),this.mirror.push(n,m)},module_8008f8e9_Mapping.prototype.appendMappingInverted=function(mapping){for(var i=mapping.maps.length-1,totalSize=this.maps.length+mapping.maps.length;i>=0;i--){var mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i].invert(),null!=mirr&&mirr>i?totalSize-mirr-1:null)}},module_8008f8e9_Mapping.prototype.invert=function(){var inverse=new module_8008f8e9_Mapping;return inverse.appendMappingInverted(this),inverse},module_8008f8e9_Mapping.prototype.map=function(pos,assoc){if(void 0===assoc&&(assoc=1),this.mirror)return this._map(pos,assoc,!0);for(var i=this.from;i<this.to;i++)pos=this.maps[i].map(pos,assoc);return pos},module_8008f8e9_Mapping.prototype.mapResult=function(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!1)},module_8008f8e9_Mapping.prototype._map=function(pos,assoc,simple){for(var deleted=!1,i=this.from;i<this.to;i++){var result=this.maps[i].mapResult(pos,assoc);if(null!=result.recover){var corr=this.getMirror(i);if(null!=corr&&corr>i&&corr<this.to){i=corr,pos=this.maps[corr].recover(result.recover);continue}}result.deleted&&(deleted=!0),pos=result.pos}return simple?pos:new module_8008f8e9_MapResult(pos,deleted)},module_8008f8e9_TransformError.prototype=Object.create(Error.prototype),module_8008f8e9_TransformError.prototype.constructor=module_8008f8e9_TransformError,module_8008f8e9_TransformError.prototype.name="TransformError";var module_8008f8e9_Transform=function(doc){this.doc=doc,this.steps=[],this.docs=[],this.mapping=new module_8008f8e9_Mapping},module_8008f8e9_prototypeAccessors$4={before:{configurable:!0},docChanged:{configurable:!0}};function module_8008f8e9_mustOverride(){throw new Error("Override me")}module_8008f8e9_prototypeAccessors$4.before.get=function(){return this.docs.length?this.docs[0]:this.doc},module_8008f8e9_Transform.prototype.step=function(object){var result=this.maybeStep(object);if(result.failed)throw new module_8008f8e9_TransformError(result.failed);return this},module_8008f8e9_Transform.prototype.maybeStep=function(step){var result=step.apply(this.doc);return result.failed||this.addStep(step,result.doc),result},module_8008f8e9_prototypeAccessors$4.docChanged.get=function(){return this.steps.length>0},module_8008f8e9_Transform.prototype.addStep=function(step,doc){this.docs.push(this.doc),this.steps.push(step),this.mapping.appendMap(step.getMap()),this.doc=doc},Object.defineProperties(module_8008f8e9_Transform.prototype,module_8008f8e9_prototypeAccessors$4);var module_8008f8e9_stepsByID=Object.create(null),module_8008f8e9_Step=function(){};module_8008f8e9_Step.prototype.apply=function(_doc){return module_8008f8e9_mustOverride()},module_8008f8e9_Step.prototype.getMap=function(){return module_8008f8e9_StepMap.empty},module_8008f8e9_Step.prototype.invert=function(_doc){return module_8008f8e9_mustOverride()},module_8008f8e9_Step.prototype.map=function(_mapping){return module_8008f8e9_mustOverride()},module_8008f8e9_Step.prototype.merge=function(_other){return null},module_8008f8e9_Step.prototype.toJSON=function(){return module_8008f8e9_mustOverride()},module_8008f8e9_Step.fromJSON=function(schema,json){if(!json||!json.stepType)throw new RangeError("Invalid input for Step.fromJSON");var type=module_8008f8e9_stepsByID[json.stepType];if(!type)throw new RangeError("No step type "+json.stepType+" defined");return type.fromJSON(schema,json)},module_8008f8e9_Step.jsonID=function(id,stepClass){if(id in module_8008f8e9_stepsByID)throw new RangeError("Duplicate use of step JSON ID "+id);return module_8008f8e9_stepsByID[id]=stepClass,stepClass.prototype.jsonID=id,stepClass};var module_8008f8e9_StepResult=function(doc,failed){this.doc=doc,this.failed=failed};module_8008f8e9_StepResult.ok=function(doc){return new module_8008f8e9_StepResult(doc,null)},module_8008f8e9_StepResult.fail=function(message){return new module_8008f8e9_StepResult(null,message)},module_8008f8e9_StepResult.fromReplace=function(doc,from,to,slice){try{return module_8008f8e9_StepResult.ok(doc.replace(from,to,slice))}catch(e){if(e instanceof module_8008f8e9_ReplaceError)return module_8008f8e9_StepResult.fail(e.message);throw e}};var module_8008f8e9_ReplaceStep=function(Step){function ReplaceStep(from,to,slice,structure){Step.call(this),this.from=from,this.to=to,this.slice=slice,this.structure=!!structure}return Step&&(ReplaceStep.__proto__=Step),ReplaceStep.prototype=Object.create(Step&&Step.prototype),ReplaceStep.prototype.constructor=ReplaceStep,ReplaceStep.prototype.apply=function(doc){return this.structure&&module_8008f8e9_contentBetween(doc,this.from,this.to)?module_8008f8e9_StepResult.fail("Structure replace would overwrite content"):module_8008f8e9_StepResult.fromReplace(doc,this.from,this.to,this.slice)},ReplaceStep.prototype.getMap=function(){return new module_8008f8e9_StepMap([this.from,this.to-this.from,this.slice.size])},ReplaceStep.prototype.invert=function(doc){return new ReplaceStep(this.from,this.from+this.slice.size,doc.slice(this.from,this.to))},ReplaceStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted?null:new ReplaceStep(from.pos,Math.max(from.pos,to.pos),this.slice)},ReplaceStep.prototype.merge=function(other){if(!(other instanceof ReplaceStep)||other.structure||this.structure)return null;if(this.from+this.slice.size!=other.from||this.slice.openEnd||other.slice.openStart){if(other.to!=this.from||this.slice.openStart||other.slice.openEnd)return null;var slice$1=this.slice.size+other.slice.size==0?module_8008f8e9_Slice.empty:new module_8008f8e9_Slice(other.slice.content.append(this.slice.content),other.slice.openStart,this.slice.openEnd);return new ReplaceStep(other.from,this.to,slice$1,this.structure)}var slice=this.slice.size+other.slice.size==0?module_8008f8e9_Slice.empty:new module_8008f8e9_Slice(this.slice.content.append(other.slice.content),this.slice.openStart,other.slice.openEnd);return new ReplaceStep(this.from,this.to+(other.to-other.from),slice,this.structure)},ReplaceStep.prototype.toJSON=function(){var json={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json},ReplaceStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(json.from,json.to,module_8008f8e9_Slice.fromJSON(schema,json.slice),!!json.structure)},ReplaceStep}(module_8008f8e9_Step);module_8008f8e9_Step.jsonID("replace",module_8008f8e9_ReplaceStep);var module_8008f8e9_ReplaceAroundStep=function(Step){function ReplaceAroundStep(from,to,gapFrom,gapTo,slice,insert,structure){Step.call(this),this.from=from,this.to=to,this.gapFrom=gapFrom,this.gapTo=gapTo,this.slice=slice,this.insert=insert,this.structure=!!structure}return Step&&(ReplaceAroundStep.__proto__=Step),ReplaceAroundStep.prototype=Object.create(Step&&Step.prototype),ReplaceAroundStep.prototype.constructor=ReplaceAroundStep,ReplaceAroundStep.prototype.apply=function(doc){if(this.structure&&(module_8008f8e9_contentBetween(doc,this.from,this.gapFrom)||module_8008f8e9_contentBetween(doc,this.gapTo,this.to)))return module_8008f8e9_StepResult.fail("Structure gap-replace would overwrite content");var gap=doc.slice(this.gapFrom,this.gapTo);if(gap.openStart||gap.openEnd)return module_8008f8e9_StepResult.fail("Gap is not a flat range");var inserted=this.slice.insertAt(this.insert,gap.content);return inserted?module_8008f8e9_StepResult.fromReplace(doc,this.from,this.to,inserted):module_8008f8e9_StepResult.fail("Content does not fit in gap")},ReplaceAroundStep.prototype.getMap=function(){return new module_8008f8e9_StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},ReplaceAroundStep.prototype.invert=function(doc){var gap=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+gap,this.from+this.insert,this.from+this.insert+gap,doc.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},ReplaceAroundStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1),gapFrom=mapping.map(this.gapFrom,-1),gapTo=mapping.map(this.gapTo,1);return from.deleted&&to.deleted||gapFrom<from.pos||gapTo>to.pos?null:new ReplaceAroundStep(from.pos,to.pos,gapFrom,gapTo,this.slice,this.insert,this.structure)},ReplaceAroundStep.prototype.toJSON=function(){var json={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json},ReplaceAroundStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to||"number"!=typeof json.gapFrom||"number"!=typeof json.gapTo||"number"!=typeof json.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(json.from,json.to,json.gapFrom,json.gapTo,module_8008f8e9_Slice.fromJSON(schema,json.slice),json.insert,!!json.structure)},ReplaceAroundStep}(module_8008f8e9_Step);function module_8008f8e9_contentBetween(doc,from,to){for(var $from=doc.resolve(from),dist=to-from,depth=$from.depth;dist>0&&depth>0&&$from.indexAfter(depth)==$from.node(depth).childCount;)depth--,dist--;if(dist>0)for(var next=$from.node(depth).maybeChild($from.indexAfter(depth));dist>0;){if(!next||next.isLeaf)return!0;next=next.firstChild,dist--}return!1}function module_8008f8e9_canCut(node,start,end){return(0==start||node.canReplace(start,node.childCount))&&(end==node.childCount||node.canReplace(0,end))}function module_8008f8e9_liftTarget(range){for(var content=range.parent.content.cutByIndex(range.startIndex,range.endIndex),depth=range.depth;;--depth){var node=range.$from.node(depth),index=range.$from.index(depth),endIndex=range.$to.indexAfter(depth);if(depth<range.depth&&node.canReplace(index,endIndex,content))return depth;if(0==depth||node.type.spec.isolating||!module_8008f8e9_canCut(node,index,endIndex))break}}function module_8008f8e9_findWrapping(range,nodeType,attrs,innerRange){void 0===innerRange&&(innerRange=range);var around=function(range,type){var parent=range.parent,startIndex=range.startIndex,endIndex=range.endIndex,around=parent.contentMatchAt(startIndex).findWrapping(type);if(!around)return null;var outer=around.length?around[0]:type;return parent.canReplaceWith(startIndex,endIndex,outer)?around:null}(range,nodeType),inner=around&&function(range,type){var parent=range.parent,startIndex=range.startIndex,endIndex=range.endIndex,inner=parent.child(startIndex),inside=type.contentMatch.findWrapping(inner.type);if(!inside)return null;for(var innerMatch=(inside.length?inside[inside.length-1]:type).contentMatch,i=startIndex;innerMatch&&i<endIndex;i++)innerMatch=innerMatch.matchType(parent.child(i).type);return innerMatch&&innerMatch.validEnd?inside:null}(innerRange,nodeType);return inner?around.map(module_8008f8e9_withAttrs).concat({type:nodeType,attrs:attrs}).concat(inner.map(module_8008f8e9_withAttrs)):null}function module_8008f8e9_withAttrs(type){return{type:type,attrs:null}}function module_8008f8e9_canSplit(doc,pos,depth,typesAfter){void 0===depth&&(depth=1);var $pos=doc.resolve(pos),base=$pos.depth-depth,innerType=typesAfter&&typesAfter[typesAfter.length-1]||$pos.parent;if(base<0||$pos.parent.type.spec.isolating||!$pos.parent.canReplace($pos.index(),$pos.parent.childCount)||!innerType.type.validContent($pos.parent.content.cutByIndex($pos.index(),$pos.parent.childCount)))return!1;for(var d=$pos.depth-1,i=depth-2;d>base;d--,i--){var node=$pos.node(d),index$1=$pos.index(d);if(node.type.spec.isolating)return!1;var rest=node.content.cutByIndex(index$1,node.childCount),after=typesAfter&&typesAfter[i]||node;if(after!=node&&(rest=rest.replaceChild(0,after.type.create(after.attrs))),!node.canReplace(index$1+1,node.childCount)||!after.type.validContent(rest))return!1}var index=$pos.indexAfter(base),baseType=typesAfter&&typesAfter[0];return $pos.node(base).canReplaceWith(index,index,baseType?baseType.type:$pos.node(base+1).type)}function module_8008f8e9_canJoin(doc,pos){var a,b,$pos=doc.resolve(pos),index=$pos.index();return a=$pos.nodeBefore,b=$pos.nodeAfter,a&&b&&!a.isLeaf&&a.canAppend(b)&&$pos.parent.canReplace(index,index+1)}function module_8008f8e9_mapFragment(fragment,f,parent){for(var mapped=[],i=0;i<fragment.childCount;i++){var child=fragment.child(i);child.content.size&&(child=child.copy(module_8008f8e9_mapFragment(child.content,f,child))),child.isInline&&(child=f(child,parent,i)),mapped.push(child)}return module_8008f8e9_Fragment.fromArray(mapped)}module_8008f8e9_Step.jsonID("replaceAround",module_8008f8e9_ReplaceAroundStep),module_8008f8e9_Transform.prototype.lift=function(range,target){for(var $from=range.$from,$to=range.$to,depth=range.depth,gapStart=$from.before(depth+1),gapEnd=$to.after(depth+1),start=gapStart,end=gapEnd,before=module_8008f8e9_Fragment.empty,openStart=0,d=depth,splitting=!1;d>target;d--)splitting||$from.index(d)>0?(splitting=!0,before=module_8008f8e9_Fragment.from($from.node(d).copy(before)),openStart++):start--;for(var after=module_8008f8e9_Fragment.empty,openEnd=0,d$1=depth,splitting$1=!1;d$1>target;d$1--)splitting$1||$to.after(d$1+1)<$to.end(d$1)?(splitting$1=!0,after=module_8008f8e9_Fragment.from($to.node(d$1).copy(after)),openEnd++):end++;return this.step(new module_8008f8e9_ReplaceAroundStep(start,end,gapStart,gapEnd,new module_8008f8e9_Slice(before.append(after),openStart,openEnd),before.size-openStart,!0))},module_8008f8e9_Transform.prototype.wrap=function(range,wrappers){for(var content=module_8008f8e9_Fragment.empty,i=wrappers.length-1;i>=0;i--)content=module_8008f8e9_Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content));var start=range.start,end=range.end;return this.step(new module_8008f8e9_ReplaceAroundStep(start,end,start,end,new module_8008f8e9_Slice(content,0,0),wrappers.length,!0))},module_8008f8e9_Transform.prototype.setBlockType=function(from,to,type,attrs){var this$1$1=this;if(void 0===to&&(to=from),!type.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var mapFrom=this.steps.length;return this.doc.nodesBetween(from,to,(function(node,pos){if(node.isTextblock&&!node.hasMarkup(type,attrs)&&function(doc,pos,type){var $pos=doc.resolve(pos),index=$pos.index();return $pos.parent.canReplaceWith(index,index+1,type)}(this$1$1.doc,this$1$1.mapping.slice(mapFrom).map(pos),type)){this$1$1.clearIncompatible(this$1$1.mapping.slice(mapFrom).map(pos,1),type);var mapping=this$1$1.mapping.slice(mapFrom),startM=mapping.map(pos,1),endM=mapping.map(pos+node.nodeSize,1);return this$1$1.step(new module_8008f8e9_ReplaceAroundStep(startM,endM,startM+1,endM-1,new module_8008f8e9_Slice(module_8008f8e9_Fragment.from(type.create(attrs,null,node.marks)),0,0),1,!0)),!1}})),this},module_8008f8e9_Transform.prototype.setNodeMarkup=function(pos,type,attrs,marks){var node=this.doc.nodeAt(pos);if(!node)throw new RangeError("No node at given position");type||(type=node.type);var newNode=type.create(attrs,null,marks||node.marks);if(node.isLeaf)return this.replaceWith(pos,pos+node.nodeSize,newNode);if(!type.validContent(node.content))throw new RangeError("Invalid content for node type "+type.name);return this.step(new module_8008f8e9_ReplaceAroundStep(pos,pos+node.nodeSize,pos+1,pos+node.nodeSize-1,new module_8008f8e9_Slice(module_8008f8e9_Fragment.from(newNode),0,0),1,!0))},module_8008f8e9_Transform.prototype.split=function(pos,depth,typesAfter){void 0===depth&&(depth=1);for(var $pos=this.doc.resolve(pos),before=module_8008f8e9_Fragment.empty,after=module_8008f8e9_Fragment.empty,d=$pos.depth,e=$pos.depth-depth,i=depth-1;d>e;d--,i--){before=module_8008f8e9_Fragment.from($pos.node(d).copy(before));var typeAfter=typesAfter&&typesAfter[i];after=module_8008f8e9_Fragment.from(typeAfter?typeAfter.type.create(typeAfter.attrs,after):$pos.node(d).copy(after))}return this.step(new module_8008f8e9_ReplaceStep(pos,pos,new module_8008f8e9_Slice(before.append(after),depth,depth),!0))},module_8008f8e9_Transform.prototype.join=function(pos,depth){void 0===depth&&(depth=1);var step=new module_8008f8e9_ReplaceStep(pos-depth,pos+depth,module_8008f8e9_Slice.empty,!0);return this.step(step)};var module_8008f8e9_AddMarkStep=function(Step){function AddMarkStep(from,to,mark){Step.call(this),this.from=from,this.to=to,this.mark=mark}return Step&&(AddMarkStep.__proto__=Step),AddMarkStep.prototype=Object.create(Step&&Step.prototype),AddMarkStep.prototype.constructor=AddMarkStep,AddMarkStep.prototype.apply=function(doc){var this$1$1=this,oldSlice=doc.slice(this.from,this.to),$from=doc.resolve(this.from),parent=$from.node($from.sharedDepth(this.to)),slice=new module_8008f8e9_Slice(module_8008f8e9_mapFragment(oldSlice.content,(function(node,parent){return node.isAtom&&parent.type.allowsMarkType(this$1$1.mark.type)?node.mark(this$1$1.mark.addToSet(node.marks)):node}),parent),oldSlice.openStart,oldSlice.openEnd);return module_8008f8e9_StepResult.fromReplace(doc,this.from,this.to,slice)},AddMarkStep.prototype.invert=function(){return new module_8008f8e9_RemoveMarkStep(this.from,this.to,this.mark)},AddMarkStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new AddMarkStep(from.pos,to.pos,this.mark)},AddMarkStep.prototype.merge=function(other){if(other instanceof AddMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from)return new AddMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark)},AddMarkStep.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},AddMarkStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(json.from,json.to,schema.markFromJSON(json.mark))},AddMarkStep}(module_8008f8e9_Step);module_8008f8e9_Step.jsonID("addMark",module_8008f8e9_AddMarkStep);var module_8008f8e9_RemoveMarkStep=function(Step){function RemoveMarkStep(from,to,mark){Step.call(this),this.from=from,this.to=to,this.mark=mark}return Step&&(RemoveMarkStep.__proto__=Step),RemoveMarkStep.prototype=Object.create(Step&&Step.prototype),RemoveMarkStep.prototype.constructor=RemoveMarkStep,RemoveMarkStep.prototype.apply=function(doc){var this$1$1=this,oldSlice=doc.slice(this.from,this.to),slice=new module_8008f8e9_Slice(module_8008f8e9_mapFragment(oldSlice.content,(function(node){return node.mark(this$1$1.mark.removeFromSet(node.marks))})),oldSlice.openStart,oldSlice.openEnd);return module_8008f8e9_StepResult.fromReplace(doc,this.from,this.to,slice)},RemoveMarkStep.prototype.invert=function(){return new module_8008f8e9_AddMarkStep(this.from,this.to,this.mark)},RemoveMarkStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new RemoveMarkStep(from.pos,to.pos,this.mark)},RemoveMarkStep.prototype.merge=function(other){if(other instanceof RemoveMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from)return new RemoveMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark)},RemoveMarkStep.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},RemoveMarkStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(json.from,json.to,schema.markFromJSON(json.mark))},RemoveMarkStep}(module_8008f8e9_Step);function module_8008f8e9_fitsTrivially($from,$to,slice){return!slice.openStart&&!slice.openEnd&&$from.start()==$to.start()&&$from.parent.canReplace($from.index(),$to.index(),slice.content)}module_8008f8e9_Step.jsonID("removeMark",module_8008f8e9_RemoveMarkStep),module_8008f8e9_Transform.prototype.addMark=function(from,to,mark){var this$1$1=this,removed=[],added=[],removing=null,adding=null;return this.doc.nodesBetween(from,to,(function(node,pos,parent){if(node.isInline){var marks=node.marks;if(!mark.isInSet(marks)&&parent.type.allowsMarkType(mark.type)){for(var start=Math.max(pos,from),end=Math.min(pos+node.nodeSize,to),newSet=mark.addToSet(marks),i=0;i<marks.length;i++)marks[i].isInSet(newSet)||(removing&&removing.to==start&&removing.mark.eq(marks[i])?removing.to=end:removed.push(removing=new module_8008f8e9_RemoveMarkStep(start,end,marks[i])));adding&&adding.to==start?adding.to=end:added.push(adding=new module_8008f8e9_AddMarkStep(start,end,mark))}}})),removed.forEach((function(s){return this$1$1.step(s)})),added.forEach((function(s){return this$1$1.step(s)})),this},module_8008f8e9_Transform.prototype.removeMark=function(from,to,mark){var this$1$1=this;void 0===mark&&(mark=null);var matched=[],step=0;return this.doc.nodesBetween(from,to,(function(node,pos){if(node.isInline){step++;var toRemove=null;if(mark instanceof module_8008f8e9_MarkType)for(var found,set=node.marks;found=mark.isInSet(set);)(toRemove||(toRemove=[])).push(found),set=found.removeFromSet(set);else mark?mark.isInSet(node.marks)&&(toRemove=[mark]):toRemove=node.marks;if(toRemove&&toRemove.length)for(var end=Math.min(pos+node.nodeSize,to),i=0;i<toRemove.length;i++){for(var style=toRemove[i],found$1=void 0,j=0;j<matched.length;j++){var m=matched[j];m.step==step-1&&style.eq(matched[j].style)&&(found$1=m)}found$1?(found$1.to=end,found$1.step=step):matched.push({style:style,from:Math.max(pos,from),to:end,step:step})}}})),matched.forEach((function(m){return this$1$1.step(new module_8008f8e9_RemoveMarkStep(m.from,m.to,m.style))})),this},module_8008f8e9_Transform.prototype.clearIncompatible=function(pos,parentType,match){void 0===match&&(match=parentType.contentMatch);for(var node=this.doc.nodeAt(pos),delSteps=[],cur=pos+1,i=0;i<node.childCount;i++){var child=node.child(i),end=cur+child.nodeSize,allowed=match.matchType(child.type,child.attrs);if(allowed){match=allowed;for(var j=0;j<child.marks.length;j++)parentType.allowsMarkType(child.marks[j].type)||this.step(new module_8008f8e9_RemoveMarkStep(cur,end,child.marks[j]))}else delSteps.push(new module_8008f8e9_ReplaceStep(cur,end,module_8008f8e9_Slice.empty));cur=end}if(!match.validEnd){var fill=match.fillBefore(module_8008f8e9_Fragment.empty,!0);this.replace(cur,cur,new module_8008f8e9_Slice(fill,0,0))}for(var i$1=delSteps.length-1;i$1>=0;i$1--)this.step(delSteps[i$1]);return this},module_8008f8e9_Transform.prototype.replace=function(from,to,slice){void 0===to&&(to=from),void 0===slice&&(slice=module_8008f8e9_Slice.empty);var step=function(doc,from,to,slice){if(void 0===to&&(to=from),void 0===slice&&(slice=module_8008f8e9_Slice.empty),from==to&&!slice.size)return null;var $from=doc.resolve(from),$to=doc.resolve(to);return module_8008f8e9_fitsTrivially($from,$to,slice)?new module_8008f8e9_ReplaceStep(from,to,slice):new module_8008f8e9_Fitter($from,$to,slice).fit()}(this.doc,from,to,slice);return step&&this.step(step),this},module_8008f8e9_Transform.prototype.replaceWith=function(from,to,content){return this.replace(from,to,new module_8008f8e9_Slice(module_8008f8e9_Fragment.from(content),0,0))},module_8008f8e9_Transform.prototype.delete=function(from,to){return this.replace(from,to,module_8008f8e9_Slice.empty)},module_8008f8e9_Transform.prototype.insert=function(pos,content){return this.replaceWith(pos,pos,content)};var module_8008f8e9_Fitter=function($from,$to,slice){this.$to=$to,this.$from=$from,this.unplaced=slice,this.frontier=[];for(var i=0;i<=$from.depth;i++){var node=$from.node(i);this.frontier.push({type:node.type,match:node.contentMatchAt($from.indexAfter(i))})}this.placed=module_8008f8e9_Fragment.empty;for(var i$1=$from.depth;i$1>0;i$1--)this.placed=module_8008f8e9_Fragment.from($from.node(i$1).copy(this.placed))},module_8008f8e9_prototypeAccessors$1$2={depth:{configurable:!0}};function module_8008f8e9_dropFromFragment(fragment,depth,count){return 0==depth?fragment.cutByIndex(count):fragment.replaceChild(0,fragment.firstChild.copy(module_8008f8e9_dropFromFragment(fragment.firstChild.content,depth-1,count)))}function module_8008f8e9_addToFragment(fragment,depth,content){return 0==depth?fragment.append(content):fragment.replaceChild(fragment.childCount-1,fragment.lastChild.copy(module_8008f8e9_addToFragment(fragment.lastChild.content,depth-1,content)))}function module_8008f8e9_contentAt(fragment,depth){for(var i=0;i<depth;i++)fragment=fragment.firstChild.content;return fragment}function module_8008f8e9_closeNodeStart(node,openStart,openEnd){if(openStart<=0)return node;var frag=node.content;return openStart>1&&(frag=frag.replaceChild(0,module_8008f8e9_closeNodeStart(frag.firstChild,openStart-1,1==frag.childCount?openEnd-1:0))),openStart>0&&(frag=node.type.contentMatch.fillBefore(frag).append(frag),openEnd<=0&&(frag=frag.append(node.type.contentMatch.matchFragment(frag).fillBefore(module_8008f8e9_Fragment.empty,!0)))),node.copy(frag)}function module_8008f8e9_contentAfterFits($to,depth,type,match,open){var node=$to.node(depth),index=open?$to.indexAfter(depth):$to.index(depth);if(index==node.childCount&&!type.compatibleContent(node.type))return null;var fit=match.fillBefore(node.content,!0,index);return fit&&!function(type,fragment,start){for(var i=start;i<fragment.childCount;i++)if(!type.allowsMarks(fragment.child(i).marks))return!0;return!1}(type,node.content,index)?fit:null}function module_8008f8e9_closeFragment(fragment,depth,oldOpen,newOpen,parent){if(depth<oldOpen){var first=fragment.firstChild;fragment=fragment.replaceChild(0,first.copy(module_8008f8e9_closeFragment(first.content,depth+1,oldOpen,newOpen,first)))}if(depth>newOpen){var match=parent.contentMatchAt(0),start=match.fillBefore(fragment).append(fragment);fragment=start.append(match.matchFragment(start).fillBefore(module_8008f8e9_Fragment.empty,!0))}return fragment}function module_8008f8e9_coveredDepths($from,$to){for(var result=[],d=Math.min($from.depth,$to.depth);d>=0;d--){var start=$from.start(d);if(start<$from.pos-($from.depth-d)||$to.end(d)>$to.pos+($to.depth-d)||$from.node(d).type.spec.isolating||$to.node(d).type.spec.isolating)break;start==$to.start(d)&&result.push(d)}return result}module_8008f8e9_prototypeAccessors$1$2.depth.get=function(){return this.frontier.length-1},module_8008f8e9_Fitter.prototype.fit=function(){for(;this.unplaced.size;){var fit=this.findFittable();fit?this.placeNodes(fit):this.openMore()||this.dropNode()}var moveInline=this.mustMoveInline(),placedSize=this.placed.size-this.depth-this.$from.depth,$from=this.$from,$to=this.close(moveInline<0?this.$to:$from.doc.resolve(moveInline));if(!$to)return null;for(var content=this.placed,openStart=$from.depth,openEnd=$to.depth;openStart&&openEnd&&1==content.childCount;)content=content.firstChild.content,openStart--,openEnd--;var slice=new module_8008f8e9_Slice(content,openStart,openEnd);return moveInline>-1?new module_8008f8e9_ReplaceAroundStep($from.pos,moveInline,this.$to.pos,this.$to.end(),slice,placedSize):slice.size||$from.pos!=this.$to.pos?new module_8008f8e9_ReplaceStep($from.pos,$to.pos,slice):void 0},module_8008f8e9_Fitter.prototype.findFittable=function(){for(var pass=1;pass<=2;pass++)for(var sliceDepth=this.unplaced.openStart;sliceDepth>=0;sliceDepth--)for(var parent=void 0,first=(sliceDepth?(parent=module_8008f8e9_contentAt(this.unplaced.content,sliceDepth-1).firstChild).content:this.unplaced.content).firstChild,frontierDepth=this.depth;frontierDepth>=0;frontierDepth--){var ref=this.frontier[frontierDepth],type=ref.type,match=ref.match,wrap=void 0,inject=void 0;if(1==pass&&(first?match.matchType(first.type)||(inject=match.fillBefore(module_8008f8e9_Fragment.from(first),!1)):type.compatibleContent(parent.type)))return{sliceDepth:sliceDepth,frontierDepth:frontierDepth,parent:parent,inject:inject};if(2==pass&&first&&(wrap=match.findWrapping(first.type)))return{sliceDepth:sliceDepth,frontierDepth:frontierDepth,parent:parent,wrap:wrap};if(parent&&match.matchType(parent.type))break}},module_8008f8e9_Fitter.prototype.openMore=function(){var ref=this.unplaced,content=ref.content,openStart=ref.openStart,openEnd=ref.openEnd,inner=module_8008f8e9_contentAt(content,openStart);return!(!inner.childCount||inner.firstChild.isLeaf||(this.unplaced=new module_8008f8e9_Slice(content,openStart+1,Math.max(openEnd,inner.size+openStart>=content.size-openEnd?openStart+1:0)),0))},module_8008f8e9_Fitter.prototype.dropNode=function(){var ref=this.unplaced,content=ref.content,openStart=ref.openStart,openEnd=ref.openEnd,inner=module_8008f8e9_contentAt(content,openStart);if(inner.childCount<=1&&openStart>0){var openAtEnd=content.size-openStart<=openStart+inner.size;this.unplaced=new module_8008f8e9_Slice(module_8008f8e9_dropFromFragment(content,openStart-1,1),openStart-1,openAtEnd?openStart-1:openEnd)}else this.unplaced=new module_8008f8e9_Slice(module_8008f8e9_dropFromFragment(content,openStart,1),openStart,openEnd)},module_8008f8e9_Fitter.prototype.placeNodes=function(ref){for(var sliceDepth=ref.sliceDepth,frontierDepth=ref.frontierDepth,parent=ref.parent,inject=ref.inject,wrap=ref.wrap;this.depth>frontierDepth;)this.closeFrontierNode();if(wrap)for(var i=0;i<wrap.length;i++)this.openFrontierNode(wrap[i]);var slice=this.unplaced,fragment=parent?parent.content:slice.content,openStart=slice.openStart-sliceDepth,taken=0,add=[],ref$1=this.frontier[frontierDepth],match=ref$1.match,type=ref$1.type;if(inject){for(var i$1=0;i$1<inject.childCount;i$1++)add.push(inject.child(i$1));match=match.matchFragment(inject)}for(var openEndCount=fragment.size+sliceDepth-(slice.content.size-slice.openEnd);taken<fragment.childCount;){var next=fragment.child(taken),matches=match.matchType(next.type);if(!matches)break;(++taken>1||0==openStart||next.content.size)&&(match=matches,add.push(module_8008f8e9_closeNodeStart(next.mark(type.allowedMarks(next.marks)),1==taken?openStart:0,taken==fragment.childCount?openEndCount:-1)))}var toEnd=taken==fragment.childCount;toEnd||(openEndCount=-1),this.placed=module_8008f8e9_addToFragment(this.placed,frontierDepth,module_8008f8e9_Fragment.from(add)),this.frontier[frontierDepth].match=match,toEnd&&openEndCount<0&&parent&&parent.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var i$2=0,cur=fragment;i$2<openEndCount;i$2++){var node=cur.lastChild;this.frontier.push({type:node.type,match:node.contentMatchAt(node.childCount)}),cur=node.content}this.unplaced=toEnd?0==sliceDepth?module_8008f8e9_Slice.empty:new module_8008f8e9_Slice(module_8008f8e9_dropFromFragment(slice.content,sliceDepth-1,1),sliceDepth-1,openEndCount<0?slice.openEnd:sliceDepth-1):new module_8008f8e9_Slice(module_8008f8e9_dropFromFragment(slice.content,sliceDepth,taken),slice.openStart,slice.openEnd)},module_8008f8e9_Fitter.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var level,top=this.frontier[this.depth];if(!top.type.isTextblock||!module_8008f8e9_contentAfterFits(this.$to,this.$to.depth,top.type,top.match,!1)||this.$to.depth==this.depth&&(level=this.findCloseLevel(this.$to))&&level.depth==this.depth)return-1;for(var depth=this.$to.depth,after=this.$to.after(depth);depth>1&&after==this.$to.end(--depth);)++after;return after},module_8008f8e9_Fitter.prototype.findCloseLevel=function($to){scan:for(var i=Math.min(this.depth,$to.depth);i>=0;i--){var ref=this.frontier[i],match=ref.match,type=ref.type,dropInner=i<$to.depth&&$to.end(i+1)==$to.pos+($to.depth-(i+1)),fit=module_8008f8e9_contentAfterFits($to,i,type,match,dropInner);if(fit){for(var d=i-1;d>=0;d--){var ref$1=this.frontier[d],match$1=ref$1.match,matches=module_8008f8e9_contentAfterFits($to,d,ref$1.type,match$1,!0);if(!matches||matches.childCount)continue scan}return{depth:i,fit:fit,move:dropInner?$to.doc.resolve($to.after(i+1)):$to}}}},module_8008f8e9_Fitter.prototype.close=function($to){var close=this.findCloseLevel($to);if(!close)return null;for(;this.depth>close.depth;)this.closeFrontierNode();close.fit.childCount&&(this.placed=module_8008f8e9_addToFragment(this.placed,close.depth,close.fit)),$to=close.move;for(var d=close.depth+1;d<=$to.depth;d++){var node=$to.node(d),add=node.type.contentMatch.fillBefore(node.content,!0,$to.index(d));this.openFrontierNode(node.type,node.attrs,add)}return $to},module_8008f8e9_Fitter.prototype.openFrontierNode=function(type,attrs,content){var top=this.frontier[this.depth];top.match=top.match.matchType(type),this.placed=module_8008f8e9_addToFragment(this.placed,this.depth,module_8008f8e9_Fragment.from(type.create(attrs,content))),this.frontier.push({type:type,match:type.contentMatch})},module_8008f8e9_Fitter.prototype.closeFrontierNode=function(){var add=this.frontier.pop().match.fillBefore(module_8008f8e9_Fragment.empty,!0);add.childCount&&(this.placed=module_8008f8e9_addToFragment(this.placed,this.frontier.length,add))},Object.defineProperties(module_8008f8e9_Fitter.prototype,module_8008f8e9_prototypeAccessors$1$2),module_8008f8e9_Transform.prototype.replaceRange=function(from,to,slice){if(!slice.size)return this.deleteRange(from,to);var $from=this.doc.resolve(from),$to=this.doc.resolve(to);if(module_8008f8e9_fitsTrivially($from,$to,slice))return this.step(new module_8008f8e9_ReplaceStep(from,to,slice));var targetDepths=module_8008f8e9_coveredDepths($from,this.doc.resolve(to));0==targetDepths[targetDepths.length-1]&&targetDepths.pop();var preferredTarget=-($from.depth+1);targetDepths.unshift(preferredTarget);for(var d=$from.depth,pos=$from.pos-1;d>0;d--,pos--){var spec=$from.node(d).type.spec;if(spec.defining||spec.isolating)break;targetDepths.indexOf(d)>-1?preferredTarget=d:$from.before(d)==pos&&targetDepths.splice(1,0,-d)}for(var preferredTargetIndex=targetDepths.indexOf(preferredTarget),leftNodes=[],preferredDepth=slice.openStart,content=slice.content,i=0;;i++){var node=content.firstChild;if(leftNodes.push(node),i==slice.openStart)break;content=node.content}preferredDepth>0&&leftNodes[preferredDepth-1].type.spec.defining&&$from.node(preferredTargetIndex).type!=leftNodes[preferredDepth-1].type?preferredDepth-=1:preferredDepth>=2&&leftNodes[preferredDepth-1].isTextblock&&leftNodes[preferredDepth-2].type.spec.defining&&$from.node(preferredTargetIndex).type!=leftNodes[preferredDepth-2].type&&(preferredDepth-=2);for(var j=slice.openStart;j>=0;j--){var openDepth=(j+preferredDepth+1)%(slice.openStart+1),insert=leftNodes[openDepth];if(insert)for(var i$1=0;i$1<targetDepths.length;i$1++){var targetDepth=targetDepths[(i$1+preferredTargetIndex)%targetDepths.length],expand=!0;targetDepth<0&&(expand=!1,targetDepth=-targetDepth);var parent=$from.node(targetDepth-1),index=$from.index(targetDepth-1);if(parent.canReplaceWith(index,index,insert.type,insert.marks))return this.replace($from.before(targetDepth),expand?$to.after(targetDepth):to,new module_8008f8e9_Slice(module_8008f8e9_closeFragment(slice.content,0,slice.openStart,openDepth),openDepth,slice.openEnd))}}for(var startSteps=this.steps.length,i$2=targetDepths.length-1;i$2>=0&&(this.replace(from,to,slice),!(this.steps.length>startSteps));i$2--){var depth=targetDepths[i$2];depth<0||(from=$from.before(depth),to=$to.after(depth))}return this},module_8008f8e9_Transform.prototype.replaceRangeWith=function(from,to,node){if(!node.isInline&&from==to&&this.doc.resolve(from).parent.content.size){var point=function(doc,pos,nodeType){var $pos=doc.resolve(pos);if($pos.parent.canReplaceWith($pos.index(),$pos.index(),nodeType))return pos;if(0==$pos.parentOffset)for(var d=$pos.depth-1;d>=0;d--){var index=$pos.index(d);if($pos.node(d).canReplaceWith(index,index,nodeType))return $pos.before(d+1);if(index>0)return null}if($pos.parentOffset==$pos.parent.content.size)for(var d$1=$pos.depth-1;d$1>=0;d$1--){var index$1=$pos.indexAfter(d$1);if($pos.node(d$1).canReplaceWith(index$1,index$1,nodeType))return $pos.after(d$1+1);if(index$1<$pos.node(d$1).childCount)return null}}(this.doc,from,node.type);null!=point&&(from=to=point)}return this.replaceRange(from,to,new module_8008f8e9_Slice(module_8008f8e9_Fragment.from(node),0,0))},module_8008f8e9_Transform.prototype.deleteRange=function(from,to){for(var $from=this.doc.resolve(from),$to=this.doc.resolve(to),covered=module_8008f8e9_coveredDepths($from,$to),i=0;i<covered.length;i++){var depth=covered[i],last=i==covered.length-1;if(last&&0==depth||$from.node(depth).type.contentMatch.validEnd)return this.delete($from.start(depth),$to.end(depth));if(depth>0&&(last||$from.node(depth-1).canReplace($from.index(depth-1),$to.indexAfter(depth-1))))return this.delete($from.before(depth),$to.after(depth))}for(var d=1;d<=$from.depth&&d<=$to.depth;d++)if(from-$from.start(d)==$from.depth-d&&to>$from.end(d)&&$to.end(d)-to!=$to.depth-d)return this.delete($from.before(d),to);return this.delete(from,to)};var module_8008f8e9_classesById=Object.create(null),module_8008f8e9_Selection=function($anchor,$head,ranges){this.ranges=ranges||[new module_8008f8e9_SelectionRange($anchor.min($head),$anchor.max($head))],this.$anchor=$anchor,this.$head=$head},module_8008f8e9_prototypeAccessors$3={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};module_8008f8e9_prototypeAccessors$3.anchor.get=function(){return this.$anchor.pos},module_8008f8e9_prototypeAccessors$3.head.get=function(){return this.$head.pos},module_8008f8e9_prototypeAccessors$3.from.get=function(){return this.$from.pos},module_8008f8e9_prototypeAccessors$3.to.get=function(){return this.$to.pos},module_8008f8e9_prototypeAccessors$3.$from.get=function(){return this.ranges[0].$from},module_8008f8e9_prototypeAccessors$3.$to.get=function(){return this.ranges[0].$to},module_8008f8e9_prototypeAccessors$3.empty.get=function(){for(var ranges=this.ranges,i=0;i<ranges.length;i++)if(ranges[i].$from.pos!=ranges[i].$to.pos)return!1;return!0},module_8008f8e9_Selection.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},module_8008f8e9_Selection.prototype.replace=function(tr,content){void 0===content&&(content=module_8008f8e9_Slice.empty);for(var lastNode=content.content.lastChild,lastParent=null,i=0;i<content.openEnd;i++)lastParent=lastNode,lastNode=lastNode.lastChild;for(var mapFrom=tr.steps.length,ranges=this.ranges,i$1=0;i$1<ranges.length;i$1++){var ref=ranges[i$1],$from=ref.$from,$to=ref.$to,mapping=tr.mapping.slice(mapFrom);tr.replaceRange(mapping.map($from.pos),mapping.map($to.pos),i$1?module_8008f8e9_Slice.empty:content),0==i$1&&selectionToInsertionEnd$1(tr,mapFrom,(lastNode?lastNode.isInline:lastParent&&lastParent.isTextblock)?-1:1)}},module_8008f8e9_Selection.prototype.replaceWith=function(tr,node){for(var mapFrom=tr.steps.length,ranges=this.ranges,i=0;i<ranges.length;i++){var ref=ranges[i],$from=ref.$from,$to=ref.$to,mapping=tr.mapping.slice(mapFrom),from=mapping.map($from.pos),to=mapping.map($to.pos);i?tr.deleteRange(from,to):(tr.replaceRangeWith(from,to,node),selectionToInsertionEnd$1(tr,mapFrom,node.isInline?-1:1))}},module_8008f8e9_Selection.findFrom=function($pos,dir,textOnly){var inner=$pos.parent.inlineContent?new module_8008f8e9_TextSelection($pos):module_8008f8e9_findSelectionIn($pos.node(0),$pos.parent,$pos.pos,$pos.index(),dir,textOnly);if(inner)return inner;for(var depth=$pos.depth-1;depth>=0;depth--){var found=dir<0?module_8008f8e9_findSelectionIn($pos.node(0),$pos.node(depth),$pos.before(depth+1),$pos.index(depth),dir,textOnly):module_8008f8e9_findSelectionIn($pos.node(0),$pos.node(depth),$pos.after(depth+1),$pos.index(depth)+1,dir,textOnly);if(found)return found}},module_8008f8e9_Selection.near=function($pos,bias){return void 0===bias&&(bias=1),this.findFrom($pos,bias)||this.findFrom($pos,-bias)||new module_8008f8e9_AllSelection($pos.node(0))},module_8008f8e9_Selection.atStart=function(doc){return module_8008f8e9_findSelectionIn(doc,doc,0,0,1)||new module_8008f8e9_AllSelection(doc)},module_8008f8e9_Selection.atEnd=function(doc){return module_8008f8e9_findSelectionIn(doc,doc,doc.content.size,doc.childCount,-1)||new module_8008f8e9_AllSelection(doc)},module_8008f8e9_Selection.fromJSON=function(doc,json){if(!json||!json.type)throw new RangeError("Invalid input for Selection.fromJSON");var cls=module_8008f8e9_classesById[json.type];if(!cls)throw new RangeError("No selection type "+json.type+" defined");return cls.fromJSON(doc,json)},module_8008f8e9_Selection.jsonID=function(id,selectionClass){if(id in module_8008f8e9_classesById)throw new RangeError("Duplicate use of selection JSON ID "+id);return module_8008f8e9_classesById[id]=selectionClass,selectionClass.prototype.jsonID=id,selectionClass},module_8008f8e9_Selection.prototype.getBookmark=function(){return module_8008f8e9_TextSelection.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(module_8008f8e9_Selection.prototype,module_8008f8e9_prototypeAccessors$3),module_8008f8e9_Selection.prototype.visible=!0;var module_8008f8e9_SelectionRange=function($from,$to){this.$from=$from,this.$to=$to},module_8008f8e9_TextSelection=function(Selection){function TextSelection($anchor,$head){void 0===$head&&($head=$anchor),Selection.call(this,$anchor,$head)}Selection&&(TextSelection.__proto__=Selection),TextSelection.prototype=Object.create(Selection&&Selection.prototype),TextSelection.prototype.constructor=TextSelection;var prototypeAccessors$1={$cursor:{configurable:!0}};return prototypeAccessors$1.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},TextSelection.prototype.map=function(doc,mapping){var $head=doc.resolve(mapping.map(this.head));if(!$head.parent.inlineContent)return Selection.near($head);var $anchor=doc.resolve(mapping.map(this.anchor));return new TextSelection($anchor.parent.inlineContent?$anchor:$head,$head)},TextSelection.prototype.replace=function(tr,content){if(void 0===content&&(content=module_8008f8e9_Slice.empty),Selection.prototype.replace.call(this,tr,content),content==module_8008f8e9_Slice.empty){var marks=this.$from.marksAcross(this.$to);marks&&tr.ensureMarks(marks)}},TextSelection.prototype.eq=function(other){return other instanceof TextSelection&&other.anchor==this.anchor&&other.head==this.head},TextSelection.prototype.getBookmark=function(){return new module_8008f8e9_TextBookmark(this.anchor,this.head)},TextSelection.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},TextSelection.fromJSON=function(doc,json){if("number"!=typeof json.anchor||"number"!=typeof json.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(doc.resolve(json.anchor),doc.resolve(json.head))},TextSelection.create=function(doc,anchor,head){void 0===head&&(head=anchor);var $anchor=doc.resolve(anchor);return new this($anchor,head==anchor?$anchor:doc.resolve(head))},TextSelection.between=function($anchor,$head,bias){var dPos=$anchor.pos-$head.pos;if(bias&&!dPos||(bias=dPos>=0?1:-1),!$head.parent.inlineContent){var found=Selection.findFrom($head,bias,!0)||Selection.findFrom($head,-bias,!0);if(!found)return Selection.near($head,bias);$head=found.$head}return $anchor.parent.inlineContent||(0==dPos||($anchor=(Selection.findFrom($anchor,-bias,!0)||Selection.findFrom($anchor,bias,!0)).$anchor).pos<$head.pos!=dPos<0)&&($anchor=$head),new TextSelection($anchor,$head)},Object.defineProperties(TextSelection.prototype,prototypeAccessors$1),TextSelection}(module_8008f8e9_Selection);module_8008f8e9_Selection.jsonID("text",module_8008f8e9_TextSelection);var module_8008f8e9_TextBookmark=function(anchor,head){this.anchor=anchor,this.head=head};module_8008f8e9_TextBookmark.prototype.map=function(mapping){return new module_8008f8e9_TextBookmark(mapping.map(this.anchor),mapping.map(this.head))},module_8008f8e9_TextBookmark.prototype.resolve=function(doc){return module_8008f8e9_TextSelection.between(doc.resolve(this.anchor),doc.resolve(this.head))};var module_8008f8e9_NodeSelection=function(Selection){function NodeSelection($pos){var node=$pos.nodeAfter,$end=$pos.node(0).resolve($pos.pos+node.nodeSize);Selection.call(this,$pos,$end),this.node=node}return Selection&&(NodeSelection.__proto__=Selection),NodeSelection.prototype=Object.create(Selection&&Selection.prototype),NodeSelection.prototype.constructor=NodeSelection,NodeSelection.prototype.map=function(doc,mapping){var ref=mapping.mapResult(this.anchor),deleted=ref.deleted,pos=ref.pos,$pos=doc.resolve(pos);return deleted?Selection.near($pos):new NodeSelection($pos)},NodeSelection.prototype.content=function(){return new module_8008f8e9_Slice(module_8008f8e9_Fragment.from(this.node),0,0)},NodeSelection.prototype.eq=function(other){return other instanceof NodeSelection&&other.anchor==this.anchor},NodeSelection.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},NodeSelection.prototype.getBookmark=function(){return new module_8008f8e9_NodeBookmark(this.anchor)},NodeSelection.fromJSON=function(doc,json){if("number"!=typeof json.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(doc.resolve(json.anchor))},NodeSelection.create=function(doc,from){return new this(doc.resolve(from))},NodeSelection.isSelectable=function(node){return!node.isText&&!1!==node.type.spec.selectable},NodeSelection}(module_8008f8e9_Selection);module_8008f8e9_NodeSelection.prototype.visible=!1,module_8008f8e9_Selection.jsonID("node",module_8008f8e9_NodeSelection);var module_8008f8e9_NodeBookmark=function(anchor){this.anchor=anchor};module_8008f8e9_NodeBookmark.prototype.map=function(mapping){var ref=mapping.mapResult(this.anchor),deleted=ref.deleted,pos=ref.pos;return deleted?new module_8008f8e9_TextBookmark(pos,pos):new module_8008f8e9_NodeBookmark(pos)},module_8008f8e9_NodeBookmark.prototype.resolve=function(doc){var $pos=doc.resolve(this.anchor),node=$pos.nodeAfter;return node&&module_8008f8e9_NodeSelection.isSelectable(node)?new module_8008f8e9_NodeSelection($pos):module_8008f8e9_Selection.near($pos)};var module_8008f8e9_AllSelection=function(Selection){function AllSelection(doc){Selection.call(this,doc.resolve(0),doc.resolve(doc.content.size))}return Selection&&(AllSelection.__proto__=Selection),AllSelection.prototype=Object.create(Selection&&Selection.prototype),AllSelection.prototype.constructor=AllSelection,AllSelection.prototype.replace=function(tr,content){if(void 0===content&&(content=module_8008f8e9_Slice.empty),content==module_8008f8e9_Slice.empty){tr.delete(0,tr.doc.content.size);var sel=Selection.atStart(tr.doc);sel.eq(tr.selection)||tr.setSelection(sel)}else Selection.prototype.replace.call(this,tr,content)},AllSelection.prototype.toJSON=function(){return{type:"all"}},AllSelection.fromJSON=function(doc){return new AllSelection(doc)},AllSelection.prototype.map=function(doc){return new AllSelection(doc)},AllSelection.prototype.eq=function(other){return other instanceof AllSelection},AllSelection.prototype.getBookmark=function(){return module_8008f8e9_AllBookmark},AllSelection}(module_8008f8e9_Selection);module_8008f8e9_Selection.jsonID("all",module_8008f8e9_AllSelection);var module_8008f8e9_AllBookmark={map:function(){return this},resolve:function(doc){return new module_8008f8e9_AllSelection(doc)}};function module_8008f8e9_findSelectionIn(doc,node,pos,index,dir,text){if(node.inlineContent)return module_8008f8e9_TextSelection.create(doc,pos);for(var i=index-(dir>0?0:1);dir>0?i<node.childCount:i>=0;i+=dir){var child=node.child(i);if(child.isAtom){if(!text&&module_8008f8e9_NodeSelection.isSelectable(child))return module_8008f8e9_NodeSelection.create(doc,pos-(dir<0?child.nodeSize:0))}else{var inner=module_8008f8e9_findSelectionIn(doc,child,pos+dir,dir<0?child.childCount:0,dir,text);if(inner)return inner}pos+=child.nodeSize*dir}}function selectionToInsertionEnd$1(tr,startLen,bias){var last=tr.steps.length-1;if(!(last<startLen)){var end,step=tr.steps[last];(step instanceof module_8008f8e9_ReplaceStep||step instanceof module_8008f8e9_ReplaceAroundStep)&&(tr.mapping.maps[last].forEach((function(_from,_to,_newFrom,newTo){null==end&&(end=newTo)})),tr.setSelection(module_8008f8e9_Selection.near(tr.doc.resolve(end),bias)))}}var module_8008f8e9_Transaction=function(Transform){function Transaction(state){Transform.call(this,state.doc),this.time=Date.now(),this.curSelection=state.selection,this.curSelectionFor=0,this.storedMarks=state.storedMarks,this.updated=0,this.meta=Object.create(null)}Transform&&(Transaction.__proto__=Transform),Transaction.prototype=Object.create(Transform&&Transform.prototype),Transaction.prototype.constructor=Transaction;var prototypeAccessors={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return prototypeAccessors.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},Transaction.prototype.setSelection=function(selection){if(selection.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=selection,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},prototypeAccessors.selectionSet.get=function(){return(1&this.updated)>0},Transaction.prototype.setStoredMarks=function(marks){return this.storedMarks=marks,this.updated|=2,this},Transaction.prototype.ensureMarks=function(marks){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),marks)||this.setStoredMarks(marks),this},Transaction.prototype.addStoredMark=function(mark){return this.ensureMarks(mark.addToSet(this.storedMarks||this.selection.$head.marks()))},Transaction.prototype.removeStoredMark=function(mark){return this.ensureMarks(mark.removeFromSet(this.storedMarks||this.selection.$head.marks()))},prototypeAccessors.storedMarksSet.get=function(){return(2&this.updated)>0},Transaction.prototype.addStep=function(step,doc){Transform.prototype.addStep.call(this,step,doc),this.updated=-3&this.updated,this.storedMarks=null},Transaction.prototype.setTime=function(time){return this.time=time,this},Transaction.prototype.replaceSelection=function(slice){return this.selection.replace(this,slice),this},Transaction.prototype.replaceSelectionWith=function(node,inheritMarks){var selection=this.selection;return!1!==inheritMarks&&(node=node.mark(this.storedMarks||(selection.empty?selection.$from.marks():selection.$from.marksAcross(selection.$to)||Mark$1.none))),selection.replaceWith(this,node),this},Transaction.prototype.deleteSelection=function(){return this.selection.replace(this),this},Transaction.prototype.insertText=function(text,from,to){void 0===to&&(to=from);var schema=this.doc.type.schema;if(null==from)return text?this.replaceSelectionWith(schema.text(text),!0):this.deleteSelection();if(!text)return this.deleteRange(from,to);var marks=this.storedMarks;if(!marks){var $from=this.doc.resolve(from);marks=to==from?$from.marks():$from.marksAcross(this.doc.resolve(to))}return this.replaceRangeWith(from,to,schema.text(text,marks)),this.selection.empty||this.setSelection(module_8008f8e9_Selection.near(this.selection.$to)),this},Transaction.prototype.setMeta=function(key,value){return this.meta["string"==typeof key?key:key.key]=value,this},Transaction.prototype.getMeta=function(key){return this.meta["string"==typeof key?key:key.key]},prototypeAccessors.isGeneric.get=function(){for(var _ in this.meta)return!1;return!0},Transaction.prototype.scrollIntoView=function(){return this.updated|=4,this},prototypeAccessors.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(Transaction.prototype,prototypeAccessors),Transaction}(module_8008f8e9_Transform);function module_8008f8e9_bind(f,self){return self&&f?f.bind(self):f}var module_8008f8e9_FieldDesc=function(name,desc,self){this.name=name,this.init=module_8008f8e9_bind(desc.init,self),this.apply=module_8008f8e9_bind(desc.apply,self)},module_8008f8e9_baseFields=[new module_8008f8e9_FieldDesc("doc",{init:function(config){return config.doc||config.schema.topNodeType.createAndFill()},apply:function(tr){return tr.doc}}),new module_8008f8e9_FieldDesc("selection",{init:function(config,instance){return config.selection||module_8008f8e9_Selection.atStart(instance.doc)},apply:function(tr){return tr.selection}}),new module_8008f8e9_FieldDesc("storedMarks",{init:function(config){return config.storedMarks||null},apply:function(tr,_marks,_old,state){return state.selection.$cursor?tr.storedMarks:null}}),new module_8008f8e9_FieldDesc("scrollToSelection",{init:function(){return 0},apply:function(tr,prev){return tr.scrolledIntoView?prev+1:prev}})],module_8008f8e9_Configuration=function(schema,plugins){var this$1$1=this;this.schema=schema,this.fields=module_8008f8e9_baseFields.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),plugins&&plugins.forEach((function(plugin){if(this$1$1.pluginsByKey[plugin.key])throw new RangeError("Adding different instances of a keyed plugin ("+plugin.key+")");this$1$1.plugins.push(plugin),this$1$1.pluginsByKey[plugin.key]=plugin,plugin.spec.state&&this$1$1.fields.push(new module_8008f8e9_FieldDesc(plugin.key,plugin.spec.state,plugin))}))},module_8008f8e9_EditorState=function(config){this.config=config},module_8008f8e9_prototypeAccessors$1$1={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};module_8008f8e9_prototypeAccessors$1$1.schema.get=function(){return this.config.schema},module_8008f8e9_prototypeAccessors$1$1.plugins.get=function(){return this.config.plugins},module_8008f8e9_EditorState.prototype.apply=function(tr){return this.applyTransaction(tr).state},module_8008f8e9_EditorState.prototype.filterTransaction=function(tr,ignore){void 0===ignore&&(ignore=-1);for(var i=0;i<this.config.plugins.length;i++)if(i!=ignore){var plugin=this.config.plugins[i];if(plugin.spec.filterTransaction&&!plugin.spec.filterTransaction.call(plugin,tr,this))return!1}return!0},module_8008f8e9_EditorState.prototype.applyTransaction=function(rootTr){if(!this.filterTransaction(rootTr))return{state:this,transactions:[]};for(var trs=[rootTr],newState=this.applyInner(rootTr),seen=null;;){for(var haveNew=!1,i=0;i<this.config.plugins.length;i++){var plugin=this.config.plugins[i];if(plugin.spec.appendTransaction){var n=seen?seen[i].n:0,oldState=seen?seen[i].state:this,tr=n<trs.length&&plugin.spec.appendTransaction.call(plugin,n?trs.slice(n):trs,oldState,newState);if(tr&&newState.filterTransaction(tr,i)){if(tr.setMeta("appendedTransaction",rootTr),!seen){seen=[];for(var j=0;j<this.config.plugins.length;j++)seen.push(j<i?{state:newState,n:trs.length}:{state:this,n:0})}trs.push(tr),newState=newState.applyInner(tr),haveNew=!0}seen&&(seen[i]={state:newState,n:trs.length})}}if(!haveNew)return{state:newState,transactions:trs}}},module_8008f8e9_EditorState.prototype.applyInner=function(tr){if(!tr.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var newInstance=new module_8008f8e9_EditorState(this.config),fields=this.config.fields,i=0;i<fields.length;i++){var field=fields[i];newInstance[field.name]=field.apply(tr,this[field.name],this,newInstance)}for(var i$1=0;i$1<module_8008f8e9_applyListeners.length;i$1++)module_8008f8e9_applyListeners[i$1](this,tr,newInstance);return newInstance},module_8008f8e9_prototypeAccessors$1$1.tr.get=function(){return new module_8008f8e9_Transaction(this)},module_8008f8e9_EditorState.create=function(config){for(var $config=new module_8008f8e9_Configuration(config.doc?config.doc.type.schema:config.schema,config.plugins),instance=new module_8008f8e9_EditorState($config),i=0;i<$config.fields.length;i++)instance[$config.fields[i].name]=$config.fields[i].init(config,instance);return instance},module_8008f8e9_EditorState.prototype.reconfigure=function(config){for(var $config=new module_8008f8e9_Configuration(this.schema,config.plugins),fields=$config.fields,instance=new module_8008f8e9_EditorState($config),i=0;i<fields.length;i++){var name=fields[i].name;instance[name]=this.hasOwnProperty(name)?this[name]:fields[i].init(config,instance)}return instance},module_8008f8e9_EditorState.prototype.toJSON=function(pluginFields){var result={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(result.storedMarks=this.storedMarks.map((function(m){return m.toJSON()}))),pluginFields&&"object"==typeof pluginFields)for(var prop in pluginFields){if("doc"==prop||"selection"==prop)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var plugin=pluginFields[prop],state=plugin.spec.state;state&&state.toJSON&&(result[prop]=state.toJSON.call(plugin,this[plugin.key]))}return result},module_8008f8e9_EditorState.fromJSON=function(config,json,pluginFields){if(!json)throw new RangeError("Invalid input for EditorState.fromJSON");if(!config.schema)throw new RangeError("Required config field 'schema' missing");var $config=new module_8008f8e9_Configuration(config.schema,config.plugins),instance=new module_8008f8e9_EditorState($config);return $config.fields.forEach((function(field){if("doc"==field.name)instance.doc=Node$3.fromJSON(config.schema,json.doc);else if("selection"==field.name)instance.selection=module_8008f8e9_Selection.fromJSON(instance.doc,json.selection);else if("storedMarks"==field.name)json.storedMarks&&(instance.storedMarks=json.storedMarks.map(config.schema.markFromJSON));else{if(pluginFields)for(var prop in pluginFields){var plugin=pluginFields[prop],state=plugin.spec.state;if(plugin.key==field.name&&state&&state.fromJSON&&Object.prototype.hasOwnProperty.call(json,prop))return void(instance[field.name]=state.fromJSON.call(plugin,config,json[prop],instance))}instance[field.name]=field.init(config,instance)}})),instance},module_8008f8e9_EditorState.addApplyListener=function(f){module_8008f8e9_applyListeners.push(f)},module_8008f8e9_EditorState.removeApplyListener=function(f){var found=module_8008f8e9_applyListeners.indexOf(f);found>-1&&module_8008f8e9_applyListeners.splice(found,1)},Object.defineProperties(module_8008f8e9_EditorState.prototype,module_8008f8e9_prototypeAccessors$1$1);var module_8008f8e9_applyListeners=[];function module_8008f8e9_bindProps(obj,self,target){for(var prop in obj){var val=obj[prop];val instanceof Function?val=val.bind(self):"handleDOMEvents"==prop&&(val=module_8008f8e9_bindProps(val,self,{})),target[prop]=val}return target}var module_8008f8e9_Plugin=function(spec){this.props={},spec.props&&module_8008f8e9_bindProps(spec.props,this,this.props),this.spec=spec,this.key=spec.key?spec.key.key:module_8008f8e9_createKey("plugin")};module_8008f8e9_Plugin.prototype.getState=function(state){return state[this.key]};var module_8008f8e9_keys=Object.create(null);function module_8008f8e9_createKey(name){return name in module_8008f8e9_keys?name+"$"+ ++module_8008f8e9_keys[name]:(module_8008f8e9_keys[name]=0,name+"$")}var module_8008f8e9_PluginKey=function(name){void 0===name&&(name="key"),this.key=module_8008f8e9_createKey(name)};module_8008f8e9_PluginKey.prototype.get=function(state){return state.config.pluginsByKey[this.key]},module_8008f8e9_PluginKey.prototype.getState=function(state){return state[this.key]};var module_8008f8e9_result={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var module_8008f8e9_ie_edge=/Edge\/(\d+)/.exec(navigator.userAgent),module_8008f8e9_ie_upto10=/MSIE \d/.test(navigator.userAgent),module_8008f8e9_ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);module_8008f8e9_result.mac=/Mac/.test(navigator.platform);var module_8008f8e9_ie=module_8008f8e9_result.ie=!!(module_8008f8e9_ie_upto10||module_8008f8e9_ie_11up||module_8008f8e9_ie_edge);module_8008f8e9_result.ie_version=module_8008f8e9_ie_upto10?document.documentMode||6:module_8008f8e9_ie_11up?+module_8008f8e9_ie_11up[1]:module_8008f8e9_ie_edge?+module_8008f8e9_ie_edge[1]:null,module_8008f8e9_result.gecko=!module_8008f8e9_ie&&/gecko\/(\d+)/i.test(navigator.userAgent),module_8008f8e9_result.gecko_version=module_8008f8e9_result.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var chrome$1=!module_8008f8e9_ie&&/Chrome\/(\d+)/.exec(navigator.userAgent);module_8008f8e9_result.chrome=!!chrome$1,module_8008f8e9_result.chrome_version=chrome$1&&+chrome$1[1],module_8008f8e9_result.safari=!module_8008f8e9_ie&&/Apple Computer/.test(navigator.vendor),module_8008f8e9_result.ios=module_8008f8e9_result.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),module_8008f8e9_result.android=/Android \d/.test(navigator.userAgent),module_8008f8e9_result.webkit="webkitFontSmoothing"in document.documentElement.style,module_8008f8e9_result.webkit_version=module_8008f8e9_result.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var module_8008f8e9_domIndex=function(node){for(var index=0;;index++)if(!(node=node.previousSibling))return index},module_8008f8e9_parentNode=function(node){var parent=node.assignedSlot||node.parentNode;return parent&&11==parent.nodeType?parent.host:parent},module_8008f8e9_reusedRange=null,module_8008f8e9_textRange=function(node,from,to){var range=module_8008f8e9_reusedRange||(module_8008f8e9_reusedRange=document.createRange());return range.setEnd(node,null==to?node.nodeValue.length:to),range.setStart(node,from||0),range},module_8008f8e9_isEquivalentPosition=function(node,off,targetNode,targetOff){return targetNode&&(module_8008f8e9_scanFor(node,off,targetNode,targetOff,-1)||module_8008f8e9_scanFor(node,off,targetNode,targetOff,1))},module_8008f8e9_atomElements=/^(img|br|input|textarea|hr)$/i;function module_8008f8e9_scanFor(node,off,targetNode,targetOff,dir){for(;;){if(node==targetNode&&off==targetOff)return!0;if(off==(dir<0?0:module_8008f8e9_nodeSize(node))){var parent=node.parentNode;if(1!=parent.nodeType||module_8008f8e9_hasBlockDesc(node)||module_8008f8e9_atomElements.test(node.nodeName)||"false"==node.contentEditable)return!1;off=module_8008f8e9_domIndex(node)+(dir<0?0:1),node=parent}else{if(1!=node.nodeType)return!1;if("false"==(node=node.childNodes[off+(dir<0?-1:0)]).contentEditable)return!1;off=dir<0?module_8008f8e9_nodeSize(node):0}}}function module_8008f8e9_nodeSize(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function module_8008f8e9_hasBlockDesc(dom){for(var desc,cur=dom;cur&&!(desc=cur.pmViewDesc);cur=cur.parentNode);return desc&&desc.node&&desc.node.isBlock&&(desc.dom==dom||desc.contentDOM==dom)}var module_8008f8e9_selectionCollapsed=function(domSel){var collapsed=domSel.isCollapsed;return collapsed&&module_8008f8e9_result.chrome&&domSel.rangeCount&&!domSel.getRangeAt(0).collapsed&&(collapsed=!1),collapsed};function module_8008f8e9_keyEvent(keyCode,key){var event=document.createEvent("Event");return event.initEvent("keydown",!0,!0),event.keyCode=keyCode,event.key=event.code=key,event}function module_8008f8e9_windowRect(doc){return{left:0,right:doc.documentElement.clientWidth,top:0,bottom:doc.documentElement.clientHeight}}function module_8008f8e9_getSide(value,side){return"number"==typeof value?value:value[side]}function module_8008f8e9_clientRect(node){var rect=node.getBoundingClientRect(),scaleX=rect.width/node.offsetWidth||1,scaleY=rect.height/node.offsetHeight||1;return{left:rect.left,right:rect.left+node.clientWidth*scaleX,top:rect.top,bottom:rect.top+node.clientHeight*scaleY}}function module_8008f8e9_scrollRectIntoView(view,rect,startDOM){for(var scrollThreshold=view.someProp("scrollThreshold")||0,scrollMargin=view.someProp("scrollMargin")||5,doc=view.dom.ownerDocument,parent=startDOM||view.dom;parent;parent=module_8008f8e9_parentNode(parent))if(1==parent.nodeType){var atTop=parent==doc.body||1!=parent.nodeType,bounding=atTop?module_8008f8e9_windowRect(doc):module_8008f8e9_clientRect(parent),moveX=0,moveY=0;if(rect.top<bounding.top+module_8008f8e9_getSide(scrollThreshold,"top")?moveY=-(bounding.top-rect.top+module_8008f8e9_getSide(scrollMargin,"top")):rect.bottom>bounding.bottom-module_8008f8e9_getSide(scrollThreshold,"bottom")&&(moveY=rect.bottom-bounding.bottom+module_8008f8e9_getSide(scrollMargin,"bottom")),rect.left<bounding.left+module_8008f8e9_getSide(scrollThreshold,"left")?moveX=-(bounding.left-rect.left+module_8008f8e9_getSide(scrollMargin,"left")):rect.right>bounding.right-module_8008f8e9_getSide(scrollThreshold,"right")&&(moveX=rect.right-bounding.right+module_8008f8e9_getSide(scrollMargin,"right")),moveX||moveY)if(atTop)doc.defaultView.scrollBy(moveX,moveY);else{var startX=parent.scrollLeft,startY=parent.scrollTop;moveY&&(parent.scrollTop+=moveY),moveX&&(parent.scrollLeft+=moveX);var dX=parent.scrollLeft-startX,dY=parent.scrollTop-startY;rect={left:rect.left-dX,top:rect.top-dY,right:rect.right-dX,bottom:rect.bottom-dY}}if(atTop)break}}function module_8008f8e9_scrollStack(dom){for(var stack=[],doc=dom.ownerDocument;dom&&(stack.push({dom:dom,top:dom.scrollTop,left:dom.scrollLeft}),dom!=doc);dom=module_8008f8e9_parentNode(dom));return stack}function module_8008f8e9_restoreScrollStack(stack,dTop){for(var i=0;i<stack.length;i++){var ref=stack[i],dom=ref.dom,top=ref.top,left=ref.left;dom.scrollTop!=top+dTop&&(dom.scrollTop=top+dTop),dom.scrollLeft!=left&&(dom.scrollLeft=left)}}var module_8008f8e9_preventScrollSupported=null;function module_8008f8e9_findOffsetInNode(node,coords){for(var closest,coordsClosest,dxClosest=2e8,offset=0,rowBot=coords.top,rowTop=coords.top,child=node.firstChild,childIndex=0;child;child=child.nextSibling,childIndex++){var rects=void 0;if(1==child.nodeType)rects=child.getClientRects();else{if(3!=child.nodeType)continue;rects=module_8008f8e9_textRange(child).getClientRects()}for(var i=0;i<rects.length;i++){var rect=rects[i];if(rect.top<=rowBot&&rect.bottom>=rowTop){rowBot=Math.max(rect.bottom,rowBot),rowTop=Math.min(rect.top,rowTop);var dx=rect.left>coords.left?rect.left-coords.left:rect.right<coords.left?coords.left-rect.right:0;if(dx<dxClosest){closest=child,dxClosest=dx,coordsClosest=dx&&3==closest.nodeType?{left:rect.right<coords.left?rect.right:rect.left,top:coords.top}:coords,1==child.nodeType&&dx&&(offset=childIndex+(coords.left>=(rect.left+rect.right)/2?1:0));continue}}!closest&&(coords.left>=rect.right&&coords.top>=rect.top||coords.left>=rect.left&&coords.top>=rect.bottom)&&(offset=childIndex+1)}}return closest&&3==closest.nodeType?function(node,coords){for(var len=node.nodeValue.length,range=document.createRange(),i=0;i<len;i++){range.setEnd(node,i+1),range.setStart(node,i);var rect=module_8008f8e9_singleRect(range,1);if(rect.top!=rect.bottom&&module_8008f8e9_inRect(coords,rect))return{node:node,offset:i+(coords.left>=(rect.left+rect.right)/2?1:0)}}return{node:node,offset:0}}(closest,coordsClosest):!closest||dxClosest&&1==closest.nodeType?{node:node,offset:offset}:module_8008f8e9_findOffsetInNode(closest,coordsClosest)}function module_8008f8e9_inRect(coords,rect){return coords.left>=rect.left-1&&coords.left<=rect.right+1&&coords.top>=rect.top-1&&coords.top<=rect.bottom+1}function module_8008f8e9_elementFromPoint(element,coords,box){var len=element.childNodes.length;if(len&&box.top<box.bottom)for(var startI=Math.max(0,Math.min(len-1,Math.floor(len*(coords.top-box.top)/(box.bottom-box.top))-2)),i=startI;;){var child=element.childNodes[i];if(1==child.nodeType)for(var rects=child.getClientRects(),j=0;j<rects.length;j++){var rect=rects[j];if(module_8008f8e9_inRect(coords,rect))return module_8008f8e9_elementFromPoint(child,coords,rect)}if((i=(i+1)%len)==startI)break}return element}function module_8008f8e9_posAtCoords(view,coords){var assign,assign$1,node,offset,root=view.root;if(root.caretPositionFromPoint)try{var pos$1=root.caretPositionFromPoint(coords.left,coords.top);pos$1&&(node=(assign=pos$1).offsetNode,offset=assign.offset)}catch(_){}if(!node&&root.caretRangeFromPoint){var range=root.caretRangeFromPoint(coords.left,coords.top);range&&(node=(assign$1=range).startContainer,offset=assign$1.startOffset)}var pos,elt=root.elementFromPoint(coords.left,coords.top+1);if(!elt||!view.dom.contains(1!=elt.nodeType?elt.parentNode:elt)){var box=view.dom.getBoundingClientRect();if(!module_8008f8e9_inRect(coords,box))return null;if(!(elt=module_8008f8e9_elementFromPoint(view.dom,coords,box)))return null}if(module_8008f8e9_result.safari)for(var p=elt;node&&p;p=module_8008f8e9_parentNode(p))p.draggable&&(node=offset=null);if(elt=function(dom,coords){var parent=dom.parentNode;return parent&&/^li$/i.test(parent.nodeName)&&coords.left<dom.getBoundingClientRect().left?parent:dom}(elt,coords),node){if(module_8008f8e9_result.gecko&&1==node.nodeType&&(offset=Math.min(offset,node.childNodes.length))<node.childNodes.length){var box$1,next=node.childNodes[offset];"IMG"==next.nodeName&&(box$1=next.getBoundingClientRect()).right<=coords.left&&box$1.bottom>coords.top&&offset++}node==view.dom&&offset==node.childNodes.length-1&&1==node.lastChild.nodeType&&coords.top>node.lastChild.getBoundingClientRect().bottom?pos=view.state.doc.content.size:0!=offset&&1==node.nodeType&&"BR"==node.childNodes[offset-1].nodeName||(pos=function(view,node,offset,coords){for(var outside=-1,cur=node;cur!=view.dom;){var desc=view.docView.nearestDesc(cur,!0);if(!desc)return null;if(desc.node.isBlock&&desc.parent){var rect=desc.dom.getBoundingClientRect();if(rect.left>coords.left||rect.top>coords.top)outside=desc.posBefore;else{if(!(rect.right<coords.left||rect.bottom<coords.top))break;outside=desc.posAfter}}cur=desc.dom.parentNode}return outside>-1?outside:view.docView.posFromDOM(node,offset)}(view,node,offset,coords))}null==pos&&(pos=function(view,elt,coords){var ref=module_8008f8e9_findOffsetInNode(elt,coords),node=ref.node,offset=ref.offset,bias=-1;if(1==node.nodeType&&!node.firstChild){var rect=node.getBoundingClientRect();bias=rect.left!=rect.right&&coords.left>(rect.left+rect.right)/2?1:-1}return view.docView.posFromDOM(node,offset,bias)}(view,elt,coords));var desc=view.docView.nearestDesc(elt,!0);return{pos:pos,inside:desc?desc.posAtStart-desc.border:-1}}function module_8008f8e9_singleRect(object,bias){var rects=object.getClientRects();return rects.length?rects[bias<0?0:rects.length-1]:object.getBoundingClientRect()}var module_8008f8e9_BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function module_8008f8e9_coordsAtPos(view,pos,side){var ref=view.docView.domFromPos(pos,side<0?-1:1),node=ref.node,offset=ref.offset,supportEmptyRange=module_8008f8e9_result.webkit||module_8008f8e9_result.gecko;if(3==node.nodeType){if(!supportEmptyRange||!module_8008f8e9_BIDI.test(node.nodeValue)&&(side<0?offset:offset!=node.nodeValue.length)){var from=offset,to=offset,takeSide=side<0?1:-1;return side<0&&!offset?(to++,takeSide=-1):side>=0&&offset==node.nodeValue.length?(from--,takeSide=1):side<0?from--:to++,module_8008f8e9_flattenV(module_8008f8e9_singleRect(module_8008f8e9_textRange(node,from,to),takeSide),takeSide<0)}var rect=module_8008f8e9_singleRect(module_8008f8e9_textRange(node,offset,offset),side);if(module_8008f8e9_result.gecko&&offset&&/\s/.test(node.nodeValue[offset-1])&&offset<node.nodeValue.length){var rectBefore=module_8008f8e9_singleRect(module_8008f8e9_textRange(node,offset-1,offset-1),-1);if(rectBefore.top==rect.top){var rectAfter=module_8008f8e9_singleRect(module_8008f8e9_textRange(node,offset,offset+1),-1);if(rectAfter.top!=rect.top)return module_8008f8e9_flattenV(rectAfter,rectAfter.left<rectBefore.left)}}return rect}if(!view.state.doc.resolve(pos).parent.inlineContent){if(offset&&(side<0||offset==module_8008f8e9_nodeSize(node))){var before=node.childNodes[offset-1];if(1==before.nodeType)return module_8008f8e9_flattenH(before.getBoundingClientRect(),!1)}if(offset<module_8008f8e9_nodeSize(node)){var after=node.childNodes[offset];if(1==after.nodeType)return module_8008f8e9_flattenH(after.getBoundingClientRect(),!0)}return module_8008f8e9_flattenH(node.getBoundingClientRect(),side>=0)}if(offset&&(side<0||offset==module_8008f8e9_nodeSize(node))){var before$1=node.childNodes[offset-1],target=3==before$1.nodeType?module_8008f8e9_textRange(before$1,module_8008f8e9_nodeSize(before$1)-(supportEmptyRange?0:1)):1!=before$1.nodeType||"BR"==before$1.nodeName&&before$1.nextSibling?null:before$1;if(target)return module_8008f8e9_flattenV(module_8008f8e9_singleRect(target,1),!1)}if(offset<module_8008f8e9_nodeSize(node)){var after$1=node.childNodes[offset],target$1=3==after$1.nodeType?module_8008f8e9_textRange(after$1,0,supportEmptyRange?0:1):1==after$1.nodeType?after$1:null;if(target$1)return module_8008f8e9_flattenV(module_8008f8e9_singleRect(target$1,-1),!0)}return module_8008f8e9_flattenV(module_8008f8e9_singleRect(3==node.nodeType?module_8008f8e9_textRange(node):node,-side),side>=0)}function module_8008f8e9_flattenV(rect,left){if(0==rect.width)return rect;var x=left?rect.left:rect.right;return{top:rect.top,bottom:rect.bottom,left:x,right:x}}function module_8008f8e9_flattenH(rect,top){if(0==rect.height)return rect;var y=top?rect.top:rect.bottom;return{top:y,bottom:y,left:rect.left,right:rect.right}}function module_8008f8e9_withFlushedState(view,state,f){var viewState=view.state,active=view.root.activeElement;viewState!=state&&view.updateState(state),active!=view.dom&&view.focus();try{return f()}finally{viewState!=state&&view.updateState(viewState),active!=view.dom&&active&&active.focus()}}var module_8008f8e9_maybeRTL=/[\u0590-\u08ac]/,module_8008f8e9_cachedState=null,module_8008f8e9_cachedDir=null,module_8008f8e9_cachedResult=!1,module_8008f8e9_ViewDesc=function(parent,children,dom,contentDOM){this.parent=parent,this.children=children,this.dom=dom,dom.pmViewDesc=this,this.contentDOM=contentDOM,this.dirty=0},module_8008f8e9_prototypeAccessors={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};module_8008f8e9_ViewDesc.prototype.matchesWidget=function(){return!1},module_8008f8e9_ViewDesc.prototype.matchesMark=function(){return!1},module_8008f8e9_ViewDesc.prototype.matchesNode=function(){return!1},module_8008f8e9_ViewDesc.prototype.matchesHack=function(_nodeName){return!1},module_8008f8e9_prototypeAccessors.beforePosition.get=function(){return!1},module_8008f8e9_ViewDesc.prototype.parseRule=function(){return null},module_8008f8e9_ViewDesc.prototype.stopEvent=function(){return!1},module_8008f8e9_prototypeAccessors.size.get=function(){for(var size=0,i=0;i<this.children.length;i++)size+=this.children[i].size;return size},module_8008f8e9_prototypeAccessors.border.get=function(){return 0},module_8008f8e9_ViewDesc.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var i=0;i<this.children.length;i++)this.children[i].destroy()},module_8008f8e9_ViewDesc.prototype.posBeforeChild=function(child){for(var i=0,pos=this.posAtStart;i<this.children.length;i++){var cur=this.children[i];if(cur==child)return pos;pos+=cur.size}},module_8008f8e9_prototypeAccessors.posBefore.get=function(){return this.parent.posBeforeChild(this)},module_8008f8e9_prototypeAccessors.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},module_8008f8e9_prototypeAccessors.posAfter.get=function(){return this.posBefore+this.size},module_8008f8e9_prototypeAccessors.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},module_8008f8e9_ViewDesc.prototype.localPosFromDOM=function(dom,offset,bias){if(this.contentDOM&&this.contentDOM.contains(1==dom.nodeType?dom:dom.parentNode)){if(bias<0){var domBefore,desc;if(dom==this.contentDOM)domBefore=dom.childNodes[offset-1];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domBefore=dom.previousSibling}for(;domBefore&&(!(desc=domBefore.pmViewDesc)||desc.parent!=this);)domBefore=domBefore.previousSibling;return domBefore?this.posBeforeChild(desc)+desc.size:this.posAtStart}var domAfter,desc$1;if(dom==this.contentDOM)domAfter=dom.childNodes[offset];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domAfter=dom.nextSibling}for(;domAfter&&(!(desc$1=domAfter.pmViewDesc)||desc$1.parent!=this);)domAfter=domAfter.nextSibling;return domAfter?this.posBeforeChild(desc$1):this.posAtEnd}var atEnd;if(dom==this.dom&&this.contentDOM)atEnd=offset>module_8008f8e9_domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))atEnd=2&dom.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==offset)for(var search=dom;;search=search.parentNode){if(search==this.dom){atEnd=!1;break}if(search.parentNode.firstChild!=search)break}if(null==atEnd&&offset==dom.childNodes.length)for(var search$1=dom;;search$1=search$1.parentNode){if(search$1==this.dom){atEnd=!0;break}if(search$1.parentNode.lastChild!=search$1)break}}return(null==atEnd?bias>0:atEnd)?this.posAtEnd:this.posAtStart},module_8008f8e9_ViewDesc.prototype.nearestDesc=function(dom,onlyNodes){for(var first=!0,cur=dom;cur;cur=cur.parentNode){var desc=this.getDesc(cur);if(desc&&(!onlyNodes||desc.node)){if(!first||!desc.nodeDOM||(1==desc.nodeDOM.nodeType?desc.nodeDOM.contains(1==dom.nodeType?dom:dom.parentNode):desc.nodeDOM==dom))return desc;first=!1}}},module_8008f8e9_ViewDesc.prototype.getDesc=function(dom){for(var desc=dom.pmViewDesc,cur=desc;cur;cur=cur.parent)if(cur==this)return desc},module_8008f8e9_ViewDesc.prototype.posFromDOM=function(dom,offset,bias){for(var scan=dom;scan;scan=scan.parentNode){var desc=this.getDesc(scan);if(desc)return desc.localPosFromDOM(dom,offset,bias)}return-1},module_8008f8e9_ViewDesc.prototype.descAt=function(pos){for(var i=0,offset=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(offset==pos&&end!=offset){for(;!child.border&&child.children.length;)child=child.children[0];return child}if(pos<end)return child.descAt(pos-offset-child.border);offset=end}},module_8008f8e9_ViewDesc.prototype.domFromPos=function(pos,side){if(!this.contentDOM)return{node:this.dom,offset:0};for(var offset=0,i=0,first=!0;;i++,first=!1){for(;i<this.children.length&&(this.children[i].beforePosition||this.children[i].dom.parentNode!=this.contentDOM);)offset+=this.children[i++].size;var child=i==this.children.length?null:this.children[i];if(offset==pos&&(0==side||!child||!child.size||child.border||side<0&&first)||child&&child.domAtom&&pos<offset+child.size)return{node:this.contentDOM,offset:child?module_8008f8e9_domIndex(child.dom):this.contentDOM.childNodes.length};if(!child)throw new Error("Invalid position "+pos);var end=offset+child.size;if(!child.domAtom&&(side<0&&!child.border?end>=pos:end>pos)&&(end>pos||i+1>=this.children.length||!this.children[i+1].beforePosition))return child.domFromPos(pos-offset-child.border,side);offset=end}},module_8008f8e9_ViewDesc.prototype.parseRange=function(from,to,base){if(void 0===base&&(base=0),0==this.children.length)return{node:this.contentDOM,from:from,to:to,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var fromOffset=-1,toOffset=-1,offset=base,i=0;;i++){var child=this.children[i],end=offset+child.size;if(-1==fromOffset&&from<=end){var childBase=offset+child.border;if(from>=childBase&&to<=end-child.border&&child.node&&child.contentDOM&&this.contentDOM.contains(child.contentDOM))return child.parseRange(from,to,childBase);from=offset;for(var j=i;j>0;j--){var prev=this.children[j-1];if(prev.size&&prev.dom.parentNode==this.contentDOM&&!prev.emptyChildAt(1)){fromOffset=module_8008f8e9_domIndex(prev.dom)+1;break}from-=prev.size}-1==fromOffset&&(fromOffset=0)}if(fromOffset>-1&&(end>to||i==this.children.length-1)){to=end;for(var j$1=i+1;j$1<this.children.length;j$1++){var next=this.children[j$1];if(next.size&&next.dom.parentNode==this.contentDOM&&!next.emptyChildAt(-1)){toOffset=module_8008f8e9_domIndex(next.dom);break}to+=next.size}-1==toOffset&&(toOffset=this.contentDOM.childNodes.length);break}offset=end}return{node:this.contentDOM,from:from,to:to,fromOffset:fromOffset,toOffset:toOffset}},module_8008f8e9_ViewDesc.prototype.emptyChildAt=function(side){if(this.border||!this.contentDOM||!this.children.length)return!1;var child=this.children[side<0?0:this.children.length-1];return 0==child.size||child.emptyChildAt(side)},module_8008f8e9_ViewDesc.prototype.domAfterPos=function(pos){var ref=this.domFromPos(pos,0),node=ref.node,offset=ref.offset;if(1!=node.nodeType||offset==node.childNodes.length)throw new RangeError("No node after pos "+pos);return node.childNodes[offset]},module_8008f8e9_ViewDesc.prototype.setSelection=function(anchor,head,root,force){for(var from=Math.min(anchor,head),to=Math.max(anchor,head),i=0,offset=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(from>offset&&to<end)return child.setSelection(anchor-offset-child.border,head-offset-child.border,root,force);offset=end}var anchorDOM=this.domFromPos(anchor,anchor?-1:1),headDOM=head==anchor?anchorDOM:this.domFromPos(head,head?-1:1),domSel=root.getSelection(),brKludge=!1;if((module_8008f8e9_result.gecko||module_8008f8e9_result.safari)&&anchor==head){var node=anchorDOM.node,offset$1=anchorDOM.offset;if(3==node.nodeType){if((brKludge=offset$1&&"\n"==node.nodeValue[offset$1-1])&&offset$1==node.nodeValue.length)for(var scan=node,after=void 0;scan;scan=scan.parentNode){if(after=scan.nextSibling){"BR"==after.nodeName&&(anchorDOM=headDOM={node:after.parentNode,offset:module_8008f8e9_domIndex(after)+1});break}var desc=scan.pmViewDesc;if(desc&&desc.node&&desc.node.isBlock)break}}else{var prev=node.childNodes[offset$1-1];brKludge=prev&&("BR"==prev.nodeName||"false"==prev.contentEditable)}}if(module_8008f8e9_result.gecko&&domSel.focusNode&&domSel.focusNode!=headDOM.node&&1==domSel.focusNode.nodeType){var after$1=domSel.focusNode.childNodes[domSel.focusOffset];after$1&&"false"==after$1.contentEditable&&(force=!0)}if(force||brKludge&&module_8008f8e9_result.safari||!module_8008f8e9_isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)||!module_8008f8e9_isEquivalentPosition(headDOM.node,headDOM.offset,domSel.focusNode,domSel.focusOffset)){var domSelExtended=!1;if((domSel.extend||anchor==head)&&!brKludge){domSel.collapse(anchorDOM.node,anchorDOM.offset);try{anchor!=head&&domSel.extend(headDOM.node,headDOM.offset),domSelExtended=!0}catch(err){if(!(err instanceof DOMException))throw err}}if(!domSelExtended){if(anchor>head){var tmp=anchorDOM;anchorDOM=headDOM,headDOM=tmp}var range=document.createRange();range.setEnd(headDOM.node,headDOM.offset),range.setStart(anchorDOM.node,anchorDOM.offset),domSel.removeAllRanges(),domSel.addRange(range)}}},module_8008f8e9_ViewDesc.prototype.ignoreMutation=function(mutation){return!this.contentDOM&&"selection"!=mutation.type},module_8008f8e9_prototypeAccessors.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},module_8008f8e9_ViewDesc.prototype.markDirty=function(from,to){for(var offset=0,i=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(offset==end?from<=end&&to>=offset:from<end&&to>offset){var startInside=offset+child.border,endInside=end-child.border;if(from>=startInside&&to<=endInside)return this.dirty=from==offset||to==end?2:1,void(from!=startInside||to!=endInside||!child.contentLost&&child.dom.parentNode==this.contentDOM?child.markDirty(from-startInside,to-startInside):child.dirty=3);child.dirty=child.dom==child.contentDOM&&child.dom.parentNode==this.contentDOM?2:3}offset=end}this.dirty=2},module_8008f8e9_ViewDesc.prototype.markParentsDirty=function(){for(var level=1,node=this.parent;node;node=node.parent,level++){var dirty=1==level?2:1;node.dirty<dirty&&(node.dirty=dirty)}},module_8008f8e9_prototypeAccessors.domAtom.get=function(){return!1},Object.defineProperties(module_8008f8e9_ViewDesc.prototype,module_8008f8e9_prototypeAccessors);var module_8008f8e9_nothing=[],module_8008f8e9_WidgetViewDesc=function(ViewDesc){function WidgetViewDesc(parent,widget,view,pos){var self,dom=widget.type.toDOM;if("function"==typeof dom&&(dom=dom(view,(function(){return self?self.parent?self.parent.posBeforeChild(self):void 0:pos}))),!widget.type.spec.raw){if(1!=dom.nodeType){var wrap=document.createElement("span");wrap.appendChild(dom),dom=wrap}dom.contentEditable=!1,dom.classList.add("ProseMirror-widget")}ViewDesc.call(this,parent,module_8008f8e9_nothing,dom,null),this.widget=widget,self=this}ViewDesc&&(WidgetViewDesc.__proto__=ViewDesc),WidgetViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),WidgetViewDesc.prototype.constructor=WidgetViewDesc;var prototypeAccessors$1={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return prototypeAccessors$1.beforePosition.get=function(){return this.widget.type.side<0},WidgetViewDesc.prototype.matchesWidget=function(widget){return 0==this.dirty&&widget.type.eq(this.widget.type)},WidgetViewDesc.prototype.parseRule=function(){return{ignore:!0}},WidgetViewDesc.prototype.stopEvent=function(event){var stop=this.widget.spec.stopEvent;return!!stop&&stop(event)},WidgetViewDesc.prototype.ignoreMutation=function(mutation){return"selection"!=mutation.type||this.widget.spec.ignoreSelection},prototypeAccessors$1.domAtom.get=function(){return!0},Object.defineProperties(WidgetViewDesc.prototype,prototypeAccessors$1),WidgetViewDesc}(module_8008f8e9_ViewDesc),module_8008f8e9_CompositionViewDesc=function(ViewDesc){function CompositionViewDesc(parent,dom,textDOM,text){ViewDesc.call(this,parent,module_8008f8e9_nothing,dom,null),this.textDOM=textDOM,this.text=text}ViewDesc&&(CompositionViewDesc.__proto__=ViewDesc),CompositionViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),CompositionViewDesc.prototype.constructor=CompositionViewDesc;var prototypeAccessors$2={size:{configurable:!0}};return prototypeAccessors$2.size.get=function(){return this.text.length},CompositionViewDesc.prototype.localPosFromDOM=function(dom,offset){return dom!=this.textDOM?this.posAtStart+(offset?this.size:0):this.posAtStart+offset},CompositionViewDesc.prototype.domFromPos=function(pos){return{node:this.textDOM,offset:pos}},CompositionViewDesc.prototype.ignoreMutation=function(mut){return"characterData"===mut.type&&mut.target.nodeValue==mut.oldValue},Object.defineProperties(CompositionViewDesc.prototype,prototypeAccessors$2),CompositionViewDesc}(module_8008f8e9_ViewDesc),module_8008f8e9_MarkViewDesc=function(ViewDesc){function MarkViewDesc(parent,mark,dom,contentDOM){ViewDesc.call(this,parent,[],dom,contentDOM),this.mark=mark}return ViewDesc&&(MarkViewDesc.__proto__=ViewDesc),MarkViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),MarkViewDesc.prototype.constructor=MarkViewDesc,MarkViewDesc.create=function(parent,mark,inline,view){var custom=view.nodeViews[mark.type.name],spec=custom&&custom(mark,view,inline);return spec&&spec.dom||(spec=module_8008f8e9_DOMSerializer.renderSpec(document,mark.type.spec.toDOM(mark,inline))),new MarkViewDesc(parent,mark,spec.dom,spec.contentDOM||spec.dom)},MarkViewDesc.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},MarkViewDesc.prototype.matchesMark=function(mark){return 3!=this.dirty&&this.mark.eq(mark)},MarkViewDesc.prototype.markDirty=function(from,to){if(ViewDesc.prototype.markDirty.call(this,from,to),0!=this.dirty){for(var parent=this.parent;!parent.node;)parent=parent.parent;parent.dirty<this.dirty&&(parent.dirty=this.dirty),this.dirty=0}},MarkViewDesc.prototype.slice=function(from,to,view){var copy=MarkViewDesc.create(this.parent,this.mark,!0,view),nodes=this.children,size=this.size;to<size&&(nodes=module_8008f8e9_replaceNodes(nodes,to,size,view)),from>0&&(nodes=module_8008f8e9_replaceNodes(nodes,0,from,view));for(var i=0;i<nodes.length;i++)nodes[i].parent=copy;return copy.children=nodes,copy},MarkViewDesc}(module_8008f8e9_ViewDesc),module_8008f8e9_NodeViewDesc=function(ViewDesc){function NodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos){ViewDesc.call(this,parent,node.isLeaf?module_8008f8e9_nothing:[],dom,contentDOM),this.nodeDOM=nodeDOM,this.node=node,this.outerDeco=outerDeco,this.innerDeco=innerDeco,contentDOM&&this.updateChildren(view,pos)}ViewDesc&&(NodeViewDesc.__proto__=ViewDesc),NodeViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),NodeViewDesc.prototype.constructor=NodeViewDesc;var prototypeAccessors$3={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return NodeViewDesc.create=function(parent,node,outerDeco,innerDeco,view,pos){var assign,descObj,custom=view.nodeViews[node.type.name],spec=custom&&custom(node,view,(function(){return descObj?descObj.parent?descObj.parent.posBeforeChild(descObj):void 0:pos}),outerDeco,innerDeco),dom=spec&&spec.dom,contentDOM=spec&&spec.contentDOM;if(node.isText)if(dom){if(3!=dom.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else dom=document.createTextNode(node.text);else dom||(dom=(assign=module_8008f8e9_DOMSerializer.renderSpec(document,node.type.spec.toDOM(node))).dom,contentDOM=assign.contentDOM);contentDOM||node.isText||"BR"==dom.nodeName||(dom.hasAttribute("contenteditable")||(dom.contentEditable=!1),node.type.spec.draggable&&(dom.draggable=!0));var nodeDOM=dom;return dom=module_8008f8e9_applyOuterDeco(dom,outerDeco,node),spec?descObj=new module_8008f8e9_CustomNodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,spec,view,pos+1):node.isText?new module_8008f8e9_TextViewDesc(parent,node,outerDeco,innerDeco,dom,nodeDOM,view):new NodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos+1)},NodeViewDesc.prototype.parseRule=function(){var this$1$1=this;if(this.node.type.spec.reparseInView)return null;var rule={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(rule.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?rule.contentElement=this.contentDOM:rule.getContent=function(){return this$1$1.contentDOM?module_8008f8e9_Fragment.empty:this$1$1.node.content},rule},NodeViewDesc.prototype.matchesNode=function(node,outerDeco,innerDeco){return 0==this.dirty&&node.eq(this.node)&&module_8008f8e9_sameOuterDeco(outerDeco,this.outerDeco)&&innerDeco.eq(this.innerDeco)},prototypeAccessors$3.size.get=function(){return this.node.nodeSize},prototypeAccessors$3.border.get=function(){return this.node.isLeaf?0:1},NodeViewDesc.prototype.updateChildren=function(view,pos){var this$1$1=this,inline=this.node.inlineContent,off=pos,composition=view.composing&&this.localCompositionInfo(view,pos),localComposition=composition&&composition.pos>-1?composition:null,compositionInChild=composition&&composition.pos<0,updater=new module_8008f8e9_ViewTreeUpdater(this,localComposition&&localComposition.node);!function(parent,deco,onWidget,onNode){var locals=deco.locals(parent),offset=0;if(0!=locals.length)for(var decoIndex=0,active=[],restNode=null,parentIndex=0;;){if(decoIndex<locals.length&&locals[decoIndex].to==offset){for(var widget=locals[decoIndex++],widgets=void 0;decoIndex<locals.length&&locals[decoIndex].to==offset;)(widgets||(widgets=[widget])).push(locals[decoIndex++]);if(widgets){widgets.sort(module_8008f8e9_compareSide);for(var i$1=0;i$1<widgets.length;i$1++)onWidget(widgets[i$1],parentIndex,!!restNode)}else onWidget(widget,parentIndex,!!restNode)}var child$1=void 0,index=void 0;if(restNode)index=-1,child$1=restNode,restNode=null;else{if(!(parentIndex<parent.childCount))break;index=parentIndex,child$1=parent.child(parentIndex++)}for(var i$2=0;i$2<active.length;i$2++)active[i$2].to<=offset&&active.splice(i$2--,1);for(;decoIndex<locals.length&&locals[decoIndex].from<=offset&&locals[decoIndex].to>offset;)active.push(locals[decoIndex++]);var end=offset+child$1.nodeSize;if(child$1.isText){var cutAt=end;decoIndex<locals.length&&locals[decoIndex].from<cutAt&&(cutAt=locals[decoIndex].from);for(var i$3=0;i$3<active.length;i$3++)active[i$3].to<cutAt&&(cutAt=active[i$3].to);cutAt<end&&(restNode=child$1.cut(cutAt-offset),child$1=child$1.cut(0,cutAt-offset),end=cutAt,index=-1)}onNode(child$1,active.length?child$1.isInline&&!child$1.isLeaf?active.filter((function(d){return!d.inline})):active.slice():module_8008f8e9_nothing,deco.forChild(offset,child$1),index),offset=end}else for(var i=0;i<parent.childCount;i++){var child=parent.child(i);onNode(child,locals,deco.forChild(offset,child),i),offset+=child.nodeSize}}(this.node,this.innerDeco,(function(widget,i,insideNode){widget.spec.marks?updater.syncToMarks(widget.spec.marks,inline,view):widget.type.side>=0&&!insideNode&&updater.syncToMarks(i==this$1$1.node.childCount?Mark$1.none:this$1$1.node.child(i).marks,inline,view),updater.placeWidget(widget,view,off)}),(function(child,outerDeco,innerDeco,i){var compIndex;updater.syncToMarks(child.marks,inline,view),updater.findNodeMatch(child,outerDeco,innerDeco,i)||compositionInChild&&view.state.selection.from>off&&view.state.selection.to<off+child.nodeSize&&(compIndex=updater.findIndexWithChild(composition.node))>-1&&updater.updateNodeAt(child,outerDeco,innerDeco,compIndex,view)||updater.updateNextNode(child,outerDeco,innerDeco,view,i)||updater.addNode(child,outerDeco,innerDeco,view,off),off+=child.nodeSize})),updater.syncToMarks(module_8008f8e9_nothing,inline,view),this.node.isTextblock&&updater.addTextblockHacks(),updater.destroyRest(),(updater.changed||2==this.dirty)&&(localComposition&&this.protectLocalComposition(view,localComposition),module_8008f8e9_renderDescs(this.contentDOM,this.children,view),module_8008f8e9_result.ios&&function(dom){if("UL"==dom.nodeName||"OL"==dom.nodeName){var oldCSS=dom.style.cssText;dom.style.cssText=oldCSS+"; list-style: square !important",window.getComputedStyle(dom).listStyle,dom.style.cssText=oldCSS}}(this.dom))},NodeViewDesc.prototype.localCompositionInfo=function(view,pos){var ref=view.state.selection,from=ref.from,to=ref.to;if(!(!(view.state.selection instanceof module_8008f8e9_TextSelection)||from<pos||to>pos+this.node.content.size)){var sel=view.root.getSelection(),textNode=function(node,offset){for(;;){if(3==node.nodeType)return node;if(1==node.nodeType&&offset>0){if(node.childNodes.length>offset&&3==node.childNodes[offset].nodeType)return node.childNodes[offset];offset=module_8008f8e9_nodeSize(node=node.childNodes[offset-1])}else{if(!(1==node.nodeType&&offset<node.childNodes.length))return null;node=node.childNodes[offset],offset=0}}}(sel.focusNode,sel.focusOffset);if(textNode&&this.dom.contains(textNode.parentNode)){if(this.node.inlineContent){var text=textNode.nodeValue,textPos=function(frag,text,from,to){for(var i=0,pos=0;i<frag.childCount&&pos<=to;){var child=frag.child(i++),childStart=pos;if(pos+=child.nodeSize,child.isText){for(var str=child.text;i<frag.childCount;){var next=frag.child(i++);if(pos+=next.nodeSize,!next.isText)break;str+=next.text}if(pos>=from){var found=str.lastIndexOf(text,to-childStart);if(found>=0&&found+text.length+childStart>=from)return childStart+found}}}return-1}(this.node.content,text,from-pos,to-pos);return textPos<0?null:{node:textNode,pos:textPos,text:text}}return{node:textNode,pos:-1}}}},NodeViewDesc.prototype.protectLocalComposition=function(view,ref){var node=ref.node,pos=ref.pos,text=ref.text;if(!this.getDesc(node)){for(var topNode=node;topNode.parentNode!=this.contentDOM;topNode=topNode.parentNode){for(;topNode.previousSibling;)topNode.parentNode.removeChild(topNode.previousSibling);for(;topNode.nextSibling;)topNode.parentNode.removeChild(topNode.nextSibling);topNode.pmViewDesc&&(topNode.pmViewDesc=null)}var desc=new module_8008f8e9_CompositionViewDesc(this,topNode,node,text);view.compositionNodes.push(desc),this.children=module_8008f8e9_replaceNodes(this.children,pos,pos+text.length,view,desc)}},NodeViewDesc.prototype.update=function(node,outerDeco,innerDeco,view){return!(3==this.dirty||!node.sameMarkup(this.node)||(this.updateInner(node,outerDeco,innerDeco,view),0))},NodeViewDesc.prototype.updateInner=function(node,outerDeco,innerDeco,view){this.updateOuterDeco(outerDeco),this.node=node,this.innerDeco=innerDeco,this.contentDOM&&this.updateChildren(view,this.posAtStart),this.dirty=0},NodeViewDesc.prototype.updateOuterDeco=function(outerDeco){if(!module_8008f8e9_sameOuterDeco(outerDeco,this.outerDeco)){var needsWrap=1!=this.nodeDOM.nodeType,oldDOM=this.dom;this.dom=module_8008f8e9_patchOuterDeco(this.dom,this.nodeDOM,module_8008f8e9_computeOuterDeco(this.outerDeco,this.node,needsWrap),module_8008f8e9_computeOuterDeco(outerDeco,this.node,needsWrap)),this.dom!=oldDOM&&(oldDOM.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=outerDeco}},NodeViewDesc.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},NodeViewDesc.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},prototypeAccessors$3.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(NodeViewDesc.prototype,prototypeAccessors$3),NodeViewDesc}(module_8008f8e9_ViewDesc);function module_8008f8e9_docViewDesc(doc,outerDeco,innerDeco,dom,view){return module_8008f8e9_applyOuterDeco(dom,outerDeco,doc),new module_8008f8e9_NodeViewDesc(null,doc,outerDeco,innerDeco,dom,dom,dom,view,0)}var module_8008f8e9_TextViewDesc=function(NodeViewDesc){function TextViewDesc(parent,node,outerDeco,innerDeco,dom,nodeDOM,view){NodeViewDesc.call(this,parent,node,outerDeco,innerDeco,dom,null,nodeDOM,view)}NodeViewDesc&&(TextViewDesc.__proto__=NodeViewDesc),TextViewDesc.prototype=Object.create(NodeViewDesc&&NodeViewDesc.prototype),TextViewDesc.prototype.constructor=TextViewDesc;var prototypeAccessors$4={domAtom:{configurable:!0}};return TextViewDesc.prototype.parseRule=function(){for(var skip=this.nodeDOM.parentNode;skip&&skip!=this.dom&&!skip.pmIsDeco;)skip=skip.parentNode;return{skip:skip||!0}},TextViewDesc.prototype.update=function(node,outerDeco,_,view){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!node.sameMarkup(this.node)||(this.updateOuterDeco(outerDeco),0==this.dirty&&node.text==this.node.text||node.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=node.text,view.trackWrites==this.nodeDOM&&(view.trackWrites=null)),this.node=node,this.dirty=0,0))},TextViewDesc.prototype.inParent=function(){for(var parentDOM=this.parent.contentDOM,n=this.nodeDOM;n;n=n.parentNode)if(n==parentDOM)return!0;return!1},TextViewDesc.prototype.domFromPos=function(pos){return{node:this.nodeDOM,offset:pos}},TextViewDesc.prototype.localPosFromDOM=function(dom,offset,bias){return dom==this.nodeDOM?this.posAtStart+Math.min(offset,this.node.text.length):NodeViewDesc.prototype.localPosFromDOM.call(this,dom,offset,bias)},TextViewDesc.prototype.ignoreMutation=function(mutation){return"characterData"!=mutation.type&&"selection"!=mutation.type},TextViewDesc.prototype.slice=function(from,to,view){var node=this.node.cut(from,to),dom=document.createTextNode(node.text);return new TextViewDesc(this.parent,node,this.outerDeco,this.innerDeco,dom,dom,view)},TextViewDesc.prototype.markDirty=function(from,to){NodeViewDesc.prototype.markDirty.call(this,from,to),this.dom==this.nodeDOM||0!=from&&to!=this.nodeDOM.nodeValue.length||(this.dirty=3)},prototypeAccessors$4.domAtom.get=function(){return!1},Object.defineProperties(TextViewDesc.prototype,prototypeAccessors$4),TextViewDesc}(module_8008f8e9_NodeViewDesc),module_8008f8e9_TrailingHackViewDesc=function(ViewDesc){function TrailingHackViewDesc(){ViewDesc.apply(this,arguments)}ViewDesc&&(TrailingHackViewDesc.__proto__=ViewDesc),TrailingHackViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype),TrailingHackViewDesc.prototype.constructor=TrailingHackViewDesc;var prototypeAccessors$5={domAtom:{configurable:!0}};return TrailingHackViewDesc.prototype.parseRule=function(){return{ignore:!0}},TrailingHackViewDesc.prototype.matchesHack=function(nodeName){return 0==this.dirty&&this.dom.nodeName==nodeName},prototypeAccessors$5.domAtom.get=function(){return!0},Object.defineProperties(TrailingHackViewDesc.prototype,prototypeAccessors$5),TrailingHackViewDesc}(module_8008f8e9_ViewDesc),module_8008f8e9_CustomNodeViewDesc=function(NodeViewDesc){function CustomNodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,spec,view,pos){NodeViewDesc.call(this,parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos),this.spec=spec}return NodeViewDesc&&(CustomNodeViewDesc.__proto__=NodeViewDesc),CustomNodeViewDesc.prototype=Object.create(NodeViewDesc&&NodeViewDesc.prototype),CustomNodeViewDesc.prototype.constructor=CustomNodeViewDesc,CustomNodeViewDesc.prototype.update=function(node,outerDeco,innerDeco,view){if(3==this.dirty)return!1;if(this.spec.update){var result=this.spec.update(node,outerDeco,innerDeco);return result&&this.updateInner(node,outerDeco,innerDeco,view),result}return!(!this.contentDOM&&!node.isLeaf)&&NodeViewDesc.prototype.update.call(this,node,outerDeco,innerDeco,view)},CustomNodeViewDesc.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():NodeViewDesc.prototype.selectNode.call(this)},CustomNodeViewDesc.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():NodeViewDesc.prototype.deselectNode.call(this)},CustomNodeViewDesc.prototype.setSelection=function(anchor,head,root,force){this.spec.setSelection?this.spec.setSelection(anchor,head,root):NodeViewDesc.prototype.setSelection.call(this,anchor,head,root,force)},CustomNodeViewDesc.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),NodeViewDesc.prototype.destroy.call(this)},CustomNodeViewDesc.prototype.stopEvent=function(event){return!!this.spec.stopEvent&&this.spec.stopEvent(event)},CustomNodeViewDesc.prototype.ignoreMutation=function(mutation){return this.spec.ignoreMutation?this.spec.ignoreMutation(mutation):NodeViewDesc.prototype.ignoreMutation.call(this,mutation)},CustomNodeViewDesc}(module_8008f8e9_NodeViewDesc);function module_8008f8e9_renderDescs(parentDOM,descs,view){for(var dom=parentDOM.firstChild,written=!1,i=0;i<descs.length;i++){var desc=descs[i],childDOM=desc.dom;if(childDOM.parentNode==parentDOM){for(;childDOM!=dom;)dom=module_8008f8e9_rm(dom),written=!0;dom=dom.nextSibling}else written=!0,parentDOM.insertBefore(childDOM,dom);if(desc instanceof module_8008f8e9_MarkViewDesc){var pos=dom?dom.previousSibling:parentDOM.lastChild;module_8008f8e9_renderDescs(desc.contentDOM,desc.children,view),dom=pos?pos.nextSibling:parentDOM.firstChild}}for(;dom;)dom=module_8008f8e9_rm(dom),written=!0;written&&view.trackWrites==parentDOM&&(view.trackWrites=null)}function module_8008f8e9_OuterDecoLevel(nodeName){nodeName&&(this.nodeName=nodeName)}module_8008f8e9_OuterDecoLevel.prototype=Object.create(null);var module_8008f8e9_noDeco=[new module_8008f8e9_OuterDecoLevel];function module_8008f8e9_computeOuterDeco(outerDeco,node,needsWrap){if(0==outerDeco.length)return module_8008f8e9_noDeco;for(var top=needsWrap?module_8008f8e9_noDeco[0]:new module_8008f8e9_OuterDecoLevel,result=[top],i=0;i<outerDeco.length;i++){var attrs=outerDeco[i].type.attrs;if(attrs)for(var name in attrs.nodeName&&result.push(top=new module_8008f8e9_OuterDecoLevel(attrs.nodeName)),attrs){var val=attrs[name];null!=val&&(needsWrap&&1==result.length&&result.push(top=new module_8008f8e9_OuterDecoLevel(node.isInline?"span":"div")),"class"==name?top.class=(top.class?top.class+" ":"")+val:"style"==name?top.style=(top.style?top.style+";":"")+val:"nodeName"!=name&&(top[name]=val))}}return result}function module_8008f8e9_patchOuterDeco(outerDOM,nodeDOM,prevComputed,curComputed){if(prevComputed==module_8008f8e9_noDeco&&curComputed==module_8008f8e9_noDeco)return nodeDOM;for(var curDOM=nodeDOM,i=0;i<curComputed.length;i++){var deco=curComputed[i],prev=prevComputed[i];if(i){var parent=void 0;prev&&prev.nodeName==deco.nodeName&&curDOM!=outerDOM&&(parent=curDOM.parentNode)&&parent.tagName.toLowerCase()==deco.nodeName||((parent=document.createElement(deco.nodeName)).pmIsDeco=!0,parent.appendChild(curDOM),prev=module_8008f8e9_noDeco[0]),curDOM=parent}module_8008f8e9_patchAttributes(curDOM,prev||module_8008f8e9_noDeco[0],deco)}return curDOM}function module_8008f8e9_patchAttributes(dom,prev,cur){for(var name in prev)"class"==name||"style"==name||"nodeName"==name||name in cur||dom.removeAttribute(name);for(var name$1 in cur)"class"!=name$1&&"style"!=name$1&&"nodeName"!=name$1&&cur[name$1]!=prev[name$1]&&dom.setAttribute(name$1,cur[name$1]);if(prev.class!=cur.class){for(var prevList=prev.class?prev.class.split(" ").filter(Boolean):module_8008f8e9_nothing,curList=cur.class?cur.class.split(" ").filter(Boolean):module_8008f8e9_nothing,i=0;i<prevList.length;i++)-1==curList.indexOf(prevList[i])&&dom.classList.remove(prevList[i]);for(var i$1=0;i$1<curList.length;i$1++)-1==prevList.indexOf(curList[i$1])&&dom.classList.add(curList[i$1])}if(prev.style!=cur.style){if(prev.style)for(var m,prop=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;m=prop.exec(prev.style);)dom.style.removeProperty(m[1]);cur.style&&(dom.style.cssText+=cur.style)}}function module_8008f8e9_applyOuterDeco(dom,deco,node){return module_8008f8e9_patchOuterDeco(dom,dom,module_8008f8e9_noDeco,module_8008f8e9_computeOuterDeco(deco,node,1!=dom.nodeType))}function module_8008f8e9_sameOuterDeco(a,b){if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!a[i].type.eq(b[i].type))return!1;return!0}function module_8008f8e9_rm(dom){var next=dom.nextSibling;return dom.parentNode.removeChild(dom),next}var module_8008f8e9_ViewTreeUpdater=function(top,lockedNode){this.top=top,this.lock=lockedNode,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(frag,descs){for(var fI=frag.childCount,dI=descs.length,matched=new Map;fI>0&&dI>0;dI--){var desc=descs[dI-1],node=desc.node;if(node){if(node!=frag.child(fI-1))break;--fI,matched.set(desc,fI)}}return{index:fI,matched:matched}}(top.node.content,top.children)};function module_8008f8e9_compareSide(a,b){return a.type.side-b.type.side}function module_8008f8e9_replaceNodes(nodes,from,to,view,replacement){for(var result=[],i=0,off=0;i<nodes.length;i++){var child=nodes[i],start=off,end=off+=child.size;start>=to||end<=from?result.push(child):(start<from&&result.push(child.slice(0,from-start,view)),replacement&&(result.push(replacement),replacement=null),end>to&&result.push(child.slice(to-start,child.size,view)))}return result}function module_8008f8e9_selectionFromDOM(view,origin){var domSel=view.root.getSelection(),doc=view.state.doc;if(!domSel.focusNode)return null;var nearestDesc=view.docView.nearestDesc(domSel.focusNode),inWidget=nearestDesc&&0==nearestDesc.size,head=view.docView.posFromDOM(domSel.focusNode,domSel.focusOffset);if(head<0)return null;var $anchor,selection,$head=doc.resolve(head);if(module_8008f8e9_selectionCollapsed(domSel)){for($anchor=$head;nearestDesc&&!nearestDesc.node;)nearestDesc=nearestDesc.parent;if(nearestDesc&&nearestDesc.node.isAtom&&module_8008f8e9_NodeSelection.isSelectable(nearestDesc.node)&&nearestDesc.parent&&(!nearestDesc.node.isInline||!function(node,offset,parent){for(var atStart=0==offset,atEnd=offset==module_8008f8e9_nodeSize(node);atStart||atEnd;){if(node==parent)return!0;var index=module_8008f8e9_domIndex(node);if(!(node=node.parentNode))return!1;atStart=atStart&&0==index,atEnd=atEnd&&index==module_8008f8e9_nodeSize(node)}}(domSel.focusNode,domSel.focusOffset,nearestDesc.dom))){var pos=nearestDesc.posBefore;selection=new module_8008f8e9_NodeSelection(head==pos?$head:doc.resolve(pos))}}else{var anchor=view.docView.posFromDOM(domSel.anchorNode,domSel.anchorOffset);if(anchor<0)return null;$anchor=doc.resolve(anchor)}return selection||(selection=module_8008f8e9_selectionBetween(view,$anchor,$head,"pointer"==origin||view.state.selection.head<$head.pos&&!inWidget?1:-1)),selection}function module_8008f8e9_editorOwnsSelection(view){return view.editable?view.hasFocus():module_8008f8e9_hasSelection(view)&&document.activeElement&&document.activeElement.contains(view.dom)}function module_8008f8e9_selectionToDOM(view,force){var sel=view.state.selection;if(module_8008f8e9_syncNodeSelection(view,sel),module_8008f8e9_editorOwnsSelection(view)){if(view.domObserver.disconnectSelection(),view.cursorWrapper)!function(view){var domSel=view.root.getSelection(),range=document.createRange(),node=view.cursorWrapper.dom,img="IMG"==node.nodeName;img?range.setEnd(node.parentNode,module_8008f8e9_domIndex(node)+1):range.setEnd(node,0),range.collapse(!1),domSel.removeAllRanges(),domSel.addRange(range),!img&&!view.state.selection.visible&&module_8008f8e9_result.ie&&module_8008f8e9_result.ie_version<=11&&(node.disabled=!0,node.disabled=!1)}(view);else{var resetEditableFrom,resetEditableTo,anchor=sel.anchor,head=sel.head;!module_8008f8e9_brokenSelectBetweenUneditable||sel instanceof module_8008f8e9_TextSelection||(sel.$from.parent.inlineContent||(resetEditableFrom=module_8008f8e9_temporarilyEditableNear(view,sel.from)),sel.empty||sel.$from.parent.inlineContent||(resetEditableTo=module_8008f8e9_temporarilyEditableNear(view,sel.to))),view.docView.setSelection(anchor,head,view.root,force),module_8008f8e9_brokenSelectBetweenUneditable&&(resetEditableFrom&&module_8008f8e9_resetEditable(resetEditableFrom),resetEditableTo&&module_8008f8e9_resetEditable(resetEditableTo)),sel.visible?view.dom.classList.remove("ProseMirror-hideselection"):(view.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(view){var doc=view.dom.ownerDocument;doc.removeEventListener("selectionchange",view.hideSelectionGuard);var domSel=view.root.getSelection(),node=domSel.anchorNode,offset=domSel.anchorOffset;doc.addEventListener("selectionchange",view.hideSelectionGuard=function(){domSel.anchorNode==node&&domSel.anchorOffset==offset||(doc.removeEventListener("selectionchange",view.hideSelectionGuard),setTimeout((function(){module_8008f8e9_editorOwnsSelection(view)&&!view.state.selection.visible||view.dom.classList.remove("ProseMirror-hideselection")}),20))})}(view))}view.domObserver.setCurSelection(),view.domObserver.connectSelection()}}module_8008f8e9_ViewTreeUpdater.prototype.destroyBetween=function(start,end){if(start!=end){for(var i=start;i<end;i++)this.top.children[i].destroy();this.top.children.splice(start,end-start),this.changed=!0}},module_8008f8e9_ViewTreeUpdater.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},module_8008f8e9_ViewTreeUpdater.prototype.syncToMarks=function(marks,inline,view){for(var keep=0,depth=this.stack.length>>1,maxKeep=Math.min(depth,marks.length);keep<maxKeep&&(keep==depth-1?this.top:this.stack[keep+1<<1]).matchesMark(marks[keep])&&!1!==marks[keep].type.spec.spanning;)keep++;for(;keep<depth;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),depth--;for(;depth<marks.length;){this.stack.push(this.top,this.index+1);for(var found=-1,i=this.index;i<Math.min(this.index+3,this.top.children.length);i++)if(this.top.children[i].matchesMark(marks[depth])){found=i;break}if(found>-1)found>this.index&&(this.changed=!0,this.destroyBetween(this.index,found)),this.top=this.top.children[this.index];else{var markDesc=module_8008f8e9_MarkViewDesc.create(this.top,marks[depth],inline,view);this.top.children.splice(this.index,0,markDesc),this.top=markDesc,this.changed=!0}this.index=0,depth++}},module_8008f8e9_ViewTreeUpdater.prototype.findNodeMatch=function(node,outerDeco,innerDeco,index){var children=this.top.children,found=-1;if(index>=this.preMatch.index){for(var i=this.index;i<children.length;i++)if(children[i].matchesNode(node,outerDeco,innerDeco)){found=i;break}}else for(var i$1=this.index,e=Math.min(children.length,i$1+1);i$1<e;i$1++){var child=children[i$1];if(child.matchesNode(node,outerDeco,innerDeco)&&!this.preMatch.matched.has(child)){found=i$1;break}}return!(found<0||(this.destroyBetween(this.index,found),this.index++,0))},module_8008f8e9_ViewTreeUpdater.prototype.updateNodeAt=function(node,outerDeco,innerDeco,index,view){return!!this.top.children[index].update(node,outerDeco,innerDeco,view)&&(this.destroyBetween(this.index,index),this.index=index+1,!0)},module_8008f8e9_ViewTreeUpdater.prototype.findIndexWithChild=function(domNode){for(;;){var parent=domNode.parentNode;if(!parent)return-1;if(parent==this.top.contentDOM){var desc=domNode.pmViewDesc;if(desc)for(var i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==desc)return i;return-1}domNode=parent}},module_8008f8e9_ViewTreeUpdater.prototype.updateNextNode=function(node,outerDeco,innerDeco,view,index){for(var i=this.index;i<this.top.children.length;i++){var next=this.top.children[i];if(next instanceof module_8008f8e9_NodeViewDesc){var preMatch=this.preMatch.matched.get(next);if(null!=preMatch&&preMatch!=index)return!1;var nextDOM=next.dom;if((!this.lock||!(nextDOM==this.lock||1==nextDOM.nodeType&&nextDOM.contains(this.lock.parentNode))||node.isText&&next.node&&next.node.isText&&next.nodeDOM.nodeValue==node.text&&3!=next.dirty&&module_8008f8e9_sameOuterDeco(outerDeco,next.outerDeco))&&next.update(node,outerDeco,innerDeco,view))return this.destroyBetween(this.index,i),next.dom!=nextDOM&&(this.changed=!0),this.index++,!0;break}}return!1},module_8008f8e9_ViewTreeUpdater.prototype.addNode=function(node,outerDeco,innerDeco,view,pos){this.top.children.splice(this.index++,0,module_8008f8e9_NodeViewDesc.create(this.top,node,outerDeco,innerDeco,view,pos)),this.changed=!0},module_8008f8e9_ViewTreeUpdater.prototype.placeWidget=function(widget,view,pos){var next=this.index<this.top.children.length?this.top.children[this.index]:null;if(!next||!next.matchesWidget(widget)||widget!=next.widget&&next.widget.type.toDOM.parentNode){var desc=new module_8008f8e9_WidgetViewDesc(this.top,widget,view,pos);this.top.children.splice(this.index++,0,desc),this.changed=!0}else this.index++},module_8008f8e9_ViewTreeUpdater.prototype.addTextblockHacks=function(){for(var lastChild=this.top.children[this.index-1];lastChild instanceof module_8008f8e9_MarkViewDesc;)lastChild=lastChild.children[lastChild.children.length-1];lastChild&&lastChild instanceof module_8008f8e9_TextViewDesc&&!/\n$/.test(lastChild.node.text)||(module_8008f8e9_result.safari&&lastChild&&"false"==lastChild.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},module_8008f8e9_ViewTreeUpdater.prototype.addHackNode=function(nodeName){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(nodeName))this.index++;else{var dom=document.createElement(nodeName);this.top.children.splice(this.index++,0,new module_8008f8e9_TrailingHackViewDesc(this.top,module_8008f8e9_nothing,dom,null)),this.changed=!0}};var module_8008f8e9_brokenSelectBetweenUneditable=module_8008f8e9_result.safari||module_8008f8e9_result.chrome&&module_8008f8e9_result.chrome_version<63;function module_8008f8e9_temporarilyEditableNear(view,pos){var ref=view.docView.domFromPos(pos,0),node=ref.node,offset=ref.offset,after=offset<node.childNodes.length?node.childNodes[offset]:null,before=offset?node.childNodes[offset-1]:null;if(module_8008f8e9_result.safari&&after&&"false"==after.contentEditable)return module_8008f8e9_setEditable(after);if(!(after&&"false"!=after.contentEditable||before&&"false"!=before.contentEditable)){if(after)return module_8008f8e9_setEditable(after);if(before)return module_8008f8e9_setEditable(before)}}function module_8008f8e9_setEditable(element){return element.contentEditable="true",module_8008f8e9_result.safari&&element.draggable&&(element.draggable=!1,element.wasDraggable=!0),element}function module_8008f8e9_resetEditable(element){element.contentEditable="false",element.wasDraggable&&(element.draggable=!0,element.wasDraggable=null)}function module_8008f8e9_syncNodeSelection(view,sel){if(sel instanceof module_8008f8e9_NodeSelection){var desc=view.docView.descAt(sel.from);desc!=view.lastSelectedViewDesc&&(module_8008f8e9_clearNodeSelection(view),desc&&desc.selectNode(),view.lastSelectedViewDesc=desc)}else module_8008f8e9_clearNodeSelection(view)}function module_8008f8e9_clearNodeSelection(view){view.lastSelectedViewDesc&&(view.lastSelectedViewDesc.parent&&view.lastSelectedViewDesc.deselectNode(),view.lastSelectedViewDesc=null)}function module_8008f8e9_selectionBetween(view,$anchor,$head,bias){return view.someProp("createSelectionBetween",(function(f){return f(view,$anchor,$head)}))||module_8008f8e9_TextSelection.between($anchor,$head,bias)}function module_8008f8e9_hasSelection(view){var sel=view.root.getSelection();if(!sel.anchorNode)return!1;try{return view.dom.contains(3==sel.anchorNode.nodeType?sel.anchorNode.parentNode:sel.anchorNode)&&(view.editable||view.dom.contains(3==sel.focusNode.nodeType?sel.focusNode.parentNode:sel.focusNode))}catch(_){return!1}}function module_8008f8e9_moveSelectionBlock(state,dir){var ref=state.selection,$anchor=ref.$anchor,$head=ref.$head,$side=dir>0?$anchor.max($head):$anchor.min($head),$start=$side.parent.inlineContent?$side.depth?state.doc.resolve(dir>0?$side.after():$side.before()):null:$side;return $start&&module_8008f8e9_Selection.findFrom($start,dir)}function module_8008f8e9_apply(view,sel){return view.dispatch(view.state.tr.setSelection(sel).scrollIntoView()),!0}function module_8008f8e9_selectHorizontally(view,dir,mods){var sel=view.state.selection;if(!(sel instanceof module_8008f8e9_TextSelection)){if(sel instanceof module_8008f8e9_NodeSelection&&sel.node.isInline)return module_8008f8e9_apply(view,new module_8008f8e9_TextSelection(dir>0?sel.$to:sel.$from));var next$1=module_8008f8e9_moveSelectionBlock(view.state,dir);return!!next$1&&module_8008f8e9_apply(view,next$1)}if(!sel.empty||mods.indexOf("s")>-1)return!1;if(view.endOfTextblock(dir>0?"right":"left")){var next=module_8008f8e9_moveSelectionBlock(view.state,dir);return!!(next&&next instanceof module_8008f8e9_NodeSelection)&&module_8008f8e9_apply(view,next)}if(!(module_8008f8e9_result.mac&&mods.indexOf("m")>-1)){var desc,$head=sel.$head,node=$head.textOffset?null:dir<0?$head.nodeBefore:$head.nodeAfter;if(!node||node.isText)return!1;var nodePos=dir<0?$head.pos-node.nodeSize:$head.pos;return!!(node.isAtom||(desc=view.docView.descAt(nodePos))&&!desc.contentDOM)&&(module_8008f8e9_NodeSelection.isSelectable(node)?module_8008f8e9_apply(view,new module_8008f8e9_NodeSelection(dir<0?view.state.doc.resolve($head.pos-node.nodeSize):$head)):!!module_8008f8e9_result.webkit&&module_8008f8e9_apply(view,new module_8008f8e9_TextSelection(view.state.doc.resolve(dir<0?nodePos:nodePos+node.nodeSize))))}}function module_8008f8e9_nodeLen(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function module_8008f8e9_isIgnorable(dom){var desc=dom.pmViewDesc;return desc&&0==desc.size&&(dom.nextSibling||"BR"!=dom.nodeName)}function module_8008f8e9_skipIgnoredNodesLeft(view){var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;if(node){var moveNode,moveOffset,force=!1;for(module_8008f8e9_result.gecko&&1==node.nodeType&&offset<module_8008f8e9_nodeLen(node)&&module_8008f8e9_isIgnorable(node.childNodes[offset])&&(force=!0);;)if(offset>0){if(1!=node.nodeType)break;var before=node.childNodes[offset-1];if(module_8008f8e9_isIgnorable(before))moveNode=node,moveOffset=--offset;else{if(3!=before.nodeType)break;offset=(node=before).nodeValue.length}}else{if(module_8008f8e9_isBlockNode(node))break;for(var prev=node.previousSibling;prev&&module_8008f8e9_isIgnorable(prev);)moveNode=node.parentNode,moveOffset=module_8008f8e9_domIndex(prev),prev=prev.previousSibling;if(prev)offset=module_8008f8e9_nodeLen(node=prev);else{if((node=node.parentNode)==view.dom)break;offset=0}}force?module_8008f8e9_setSelFocus(view,sel,node,offset):moveNode&&module_8008f8e9_setSelFocus(view,sel,moveNode,moveOffset)}}function module_8008f8e9_skipIgnoredNodesRight(view){var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;if(node){for(var moveNode,moveOffset,len=module_8008f8e9_nodeLen(node);;)if(offset<len){if(1!=node.nodeType)break;if(!module_8008f8e9_isIgnorable(node.childNodes[offset]))break;moveNode=node,moveOffset=++offset}else{if(module_8008f8e9_isBlockNode(node))break;for(var next=node.nextSibling;next&&module_8008f8e9_isIgnorable(next);)moveNode=next.parentNode,moveOffset=module_8008f8e9_domIndex(next)+1,next=next.nextSibling;if(next)offset=0,len=module_8008f8e9_nodeLen(node=next);else{if((node=node.parentNode)==view.dom)break;offset=len=0}}moveNode&&module_8008f8e9_setSelFocus(view,sel,moveNode,moveOffset)}}function module_8008f8e9_isBlockNode(dom){var desc=dom.pmViewDesc;return desc&&desc.node&&desc.node.isBlock}function module_8008f8e9_setSelFocus(view,sel,node,offset){if(module_8008f8e9_selectionCollapsed(sel)){var range=document.createRange();range.setEnd(node,offset),range.setStart(node,offset),sel.removeAllRanges(),sel.addRange(range)}else sel.extend&&sel.extend(node,offset);view.domObserver.setCurSelection();var state=view.state;setTimeout((function(){view.state==state&&module_8008f8e9_selectionToDOM(view)}),50)}function module_8008f8e9_selectVertically(view,dir,mods){var sel=view.state.selection;if(sel instanceof module_8008f8e9_TextSelection&&!sel.empty||mods.indexOf("s")>-1)return!1;if(module_8008f8e9_result.mac&&mods.indexOf("m")>-1)return!1;var $from=sel.$from,$to=sel.$to;if(!$from.parent.inlineContent||view.endOfTextblock(dir<0?"up":"down")){var next=module_8008f8e9_moveSelectionBlock(view.state,dir);if(next&&next instanceof module_8008f8e9_NodeSelection)return module_8008f8e9_apply(view,next)}if(!$from.parent.inlineContent){var side=dir<0?$from:$to,beyond=sel instanceof module_8008f8e9_AllSelection?module_8008f8e9_Selection.near(side,dir):module_8008f8e9_Selection.findFrom(side,dir);return!!beyond&&module_8008f8e9_apply(view,beyond)}return!1}function module_8008f8e9_stopNativeHorizontalDelete(view,dir){if(!(view.state.selection instanceof module_8008f8e9_TextSelection))return!0;var ref=view.state.selection,$head=ref.$head,$anchor=ref.$anchor,empty=ref.empty;if(!$head.sameParent($anchor))return!0;if(!empty)return!1;if(view.endOfTextblock(dir>0?"forward":"backward"))return!0;var nextNode=!$head.textOffset&&(dir<0?$head.nodeBefore:$head.nodeAfter);if(nextNode&&!nextNode.isText){var tr=view.state.tr;return dir<0?tr.delete($head.pos-nextNode.nodeSize,$head.pos):tr.delete($head.pos,$head.pos+nextNode.nodeSize),view.dispatch(tr),!0}return!1}function module_8008f8e9_switchEditable(view,node,state){view.domObserver.stop(),node.contentEditable=state,view.domObserver.start()}function module_8008f8e9_ruleFromNode(dom){var desc=dom.pmViewDesc;if(desc)return desc.parseRule();if("BR"==dom.nodeName&&dom.parentNode){if(module_8008f8e9_result.safari&&/^(ul|ol)$/i.test(dom.parentNode.nodeName)){var skip=document.createElement("div");return skip.appendChild(document.createElement("li")),{skip:skip}}if(dom.parentNode.lastChild==dom||module_8008f8e9_result.safari&&/^(tr|table)$/i.test(dom.parentNode.nodeName))return{ignore:!0}}else if("IMG"==dom.nodeName&&dom.getAttribute("mark-placeholder"))return{ignore:!0}}function resolveSelection$1(view,doc,parsedSel){return Math.max(parsedSel.anchor,parsedSel.head)>doc.content.size?null:module_8008f8e9_selectionBetween(view,doc.resolve(parsedSel.anchor),doc.resolve(parsedSel.head))}function module_8008f8e9_skipClosingAndOpening($pos,fromEnd,mayOpen){for(var depth=$pos.depth,end=fromEnd?$pos.end():$pos.pos;depth>0&&(fromEnd||$pos.indexAfter(depth)==$pos.node(depth).childCount);)depth--,end++,fromEnd=!1;if(mayOpen)for(var next=$pos.node(depth).maybeChild($pos.indexAfter(depth));next&&!next.isLeaf;)next=next.firstChild,end++;return end}function module_8008f8e9_serializeForClipboard(view,slice){for(var context=[],content=slice.content,openStart=slice.openStart,openEnd=slice.openEnd;openStart>1&&openEnd>1&&1==content.childCount&&1==content.firstChild.childCount;){openStart--,openEnd--;var node=content.firstChild;context.push(node.type.name,node.attrs!=node.type.defaultAttrs?node.attrs:null),content=node.content}var serializer=view.someProp("clipboardSerializer")||module_8008f8e9_DOMSerializer.fromSchema(view.state.schema),doc=es_module_8008f8e9_detachedDoc(),wrap=doc.createElement("div");wrap.appendChild(serializer.serializeFragment(content,{document:doc}));for(var needsWrap,firstChild=wrap.firstChild;firstChild&&1==firstChild.nodeType&&(needsWrap=module_8008f8e9_wrapMap[firstChild.nodeName.toLowerCase()]);){for(var i=needsWrap.length-1;i>=0;i--){for(var wrapper=doc.createElement(needsWrap[i]);wrap.firstChild;)wrapper.appendChild(wrap.firstChild);wrap.appendChild(wrapper)}firstChild=wrap.firstChild}return firstChild&&1==firstChild.nodeType&&firstChild.setAttribute("data-pm-slice",openStart+" "+openEnd+" "+JSON.stringify(context)),{dom:wrap,text:view.someProp("clipboardTextSerializer",(function(f){return f(slice)}))||slice.content.textBetween(0,slice.content.size,"\n\n")}}function module_8008f8e9_parseFromClipboard(view,text,html,plainText,$context){var dom,slice,inCode=$context.parent.type.spec.code;if(!html&&!text)return null;var asText=text&&(plainText||inCode||!html);if(asText){if(view.someProp("transformPastedText",(function(f){text=f(text,inCode||plainText)})),inCode)return new module_8008f8e9_Slice(module_8008f8e9_Fragment.from(view.state.schema.text(text.replace(/\r\n?/g,"\n"))),0,0);var parsed=view.someProp("clipboardTextParser",(function(f){return f(text,$context,plainText)}));if(parsed)slice=parsed;else{var marks=$context.marks(),schema=view.state.schema,serializer=module_8008f8e9_DOMSerializer.fromSchema(schema);dom=document.createElement("div"),text.trim().split(/(?:\r\n?|\n)+/).forEach((function(block){dom.appendChild(document.createElement("p")).appendChild(serializer.serializeNode(schema.text(block,marks)))}))}}else view.someProp("transformPastedHTML",(function(f){html=f(html)})),dom=function(html){var metas=/^(\s*<meta [^>]*>)*/.exec(html);metas&&(html=html.slice(metas[0].length));var wrap,elt=es_module_8008f8e9_detachedDoc().createElement("div"),firstTag=/<([a-z][^>\s]+)/i.exec(html);if((wrap=firstTag&&module_8008f8e9_wrapMap[firstTag[1].toLowerCase()])&&(html=wrap.map((function(n){return"<"+n+">"})).join("")+html+wrap.map((function(n){return"</"+n+">"})).reverse().join("")),elt.innerHTML=html,wrap)for(var i=0;i<wrap.length;i++)elt=elt.querySelector(wrap[i])||elt;return elt}(html),module_8008f8e9_result.webkit&&function(dom){for(var nodes=dom.querySelectorAll(module_8008f8e9_result.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),i=0;i<nodes.length;i++){var node=nodes[i];1==node.childNodes.length&&""==node.textContent&&node.parentNode&&node.parentNode.replaceChild(dom.ownerDocument.createTextNode(" "),node)}}(dom);var contextNode=dom&&dom.querySelector("[data-pm-slice]"),sliceData=contextNode&&/^(\d+) (\d+) (.*)/.exec(contextNode.getAttribute("data-pm-slice"));if(!slice){var parser=view.someProp("clipboardParser")||view.someProp("domParser")||module_8008f8e9_DOMParser.fromSchema(view.state.schema);slice=parser.parseSlice(dom,{preserveWhitespace:!(!asText&&!sliceData),context:$context})}return slice=sliceData?function(slice,context){if(!slice.size)return slice;var array,schema=slice.content.firstChild.type.schema;try{array=JSON.parse(context)}catch(e){return slice}for(var content=slice.content,openStart=slice.openStart,openEnd=slice.openEnd,i=array.length-2;i>=0;i-=2){var type=schema.nodes[array[i]];if(!type||type.hasRequiredAttrs())break;content=module_8008f8e9_Fragment.from(type.create(array[i+1],content)),openStart++,openEnd++}return new module_8008f8e9_Slice(content,openStart,openEnd)}(function(slice,openStart,openEnd){return openStart<slice.openStart&&(slice=new module_8008f8e9_Slice(module_8008f8e9_closeRange(slice.content,-1,openStart,slice.openStart,0,slice.openEnd),openStart,slice.openEnd)),openEnd<slice.openEnd&&(slice=new module_8008f8e9_Slice(module_8008f8e9_closeRange(slice.content,1,openEnd,slice.openEnd,0,0),slice.openStart,openEnd)),slice}(slice,+sliceData[1],+sliceData[2]),sliceData[3]):module_8008f8e9_Slice.maxOpen(function(fragment,$context){if(fragment.childCount<2)return fragment;for(var loop=function(d){var match=$context.node(d).contentMatchAt($context.index(d)),lastWrap=void 0,result=[];if(fragment.forEach((function(node){if(result){var inLast,wrap=match.findWrapping(node.type);if(!wrap)return result=null;if(inLast=result.length&&lastWrap.length&&module_8008f8e9_addToSibling(wrap,lastWrap,node,result[result.length-1],0))result[result.length-1]=inLast;else{result.length&&(result[result.length-1]=module_8008f8e9_closeRight(result[result.length-1],lastWrap.length));var wrapped=module_8008f8e9_withWrappers(node,wrap);result.push(wrapped),match=match.matchType(wrapped.type,wrapped.attrs),lastWrap=wrap}}})),result)return{v:module_8008f8e9_Fragment.from(result)}},d=$context.depth;d>=0;d--){var returned=loop(d);if(returned)return returned.v}return fragment}(slice.content,$context),!1),view.someProp("transformPasted",(function(f){slice=f(slice)})),slice}function module_8008f8e9_withWrappers(node,wrap,from){void 0===from&&(from=0);for(var i=wrap.length-1;i>=from;i--)node=wrap[i].create(null,module_8008f8e9_Fragment.from(node));return node}function module_8008f8e9_addToSibling(wrap,lastWrap,node,sibling,depth){if(depth<wrap.length&&depth<lastWrap.length&&wrap[depth]==lastWrap[depth]){var inner=module_8008f8e9_addToSibling(wrap,lastWrap,node,sibling.lastChild,depth+1);if(inner)return sibling.copy(sibling.content.replaceChild(sibling.childCount-1,inner));if(sibling.contentMatchAt(sibling.childCount).matchType(depth==wrap.length-1?node.type:wrap[depth+1]))return sibling.copy(sibling.content.append(module_8008f8e9_Fragment.from(module_8008f8e9_withWrappers(node,wrap,depth+1))))}}function module_8008f8e9_closeRight(node,depth){if(0==depth)return node;var fragment=node.content.replaceChild(node.childCount-1,module_8008f8e9_closeRight(node.lastChild,depth-1)),fill=node.contentMatchAt(node.childCount).fillBefore(module_8008f8e9_Fragment.empty,!0);return node.copy(fragment.append(fill))}function module_8008f8e9_closeRange(fragment,side,from,to,depth,openEnd){var node=side<0?fragment.firstChild:fragment.lastChild,inner=node.content;return depth<to-1&&(inner=module_8008f8e9_closeRange(inner,side,from,to,depth+1,openEnd)),depth>=from&&(inner=side<0?node.contentMatchAt(0).fillBefore(inner,fragment.childCount>1||openEnd<=depth).append(inner):inner.append(node.contentMatchAt(node.childCount).fillBefore(module_8008f8e9_Fragment.empty,!0))),fragment.replaceChild(side<0?0:fragment.childCount-1,node.copy(inner))}var module_8008f8e9_wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},module_8008f8e9_detachedDoc=null;function es_module_8008f8e9_detachedDoc(){return module_8008f8e9_detachedDoc||(module_8008f8e9_detachedDoc=document.implementation.createHTMLDocument("title"))}var module_8008f8e9_observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},module_8008f8e9_useCharData=module_8008f8e9_result.ie&&module_8008f8e9_result.ie_version<=11,module_8008f8e9_SelectionState=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};module_8008f8e9_SelectionState.prototype.set=function(sel){this.anchorNode=sel.anchorNode,this.anchorOffset=sel.anchorOffset,this.focusNode=sel.focusNode,this.focusOffset=sel.focusOffset},module_8008f8e9_SelectionState.prototype.eq=function(sel){return sel.anchorNode==this.anchorNode&&sel.anchorOffset==this.anchorOffset&&sel.focusNode==this.focusNode&&sel.focusOffset==this.focusOffset};var module_8008f8e9_DOMObserver=function(view,handleDOMChange){var this$1$1=this;this.view=view,this.handleDOMChange=handleDOMChange,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(mutations){for(var i=0;i<mutations.length;i++)this$1$1.queue.push(mutations[i]);module_8008f8e9_result.ie&&module_8008f8e9_result.ie_version<=11&&mutations.some((function(m){return"childList"==m.type&&m.removedNodes.length||"characterData"==m.type&&m.oldValue.length>m.target.nodeValue.length}))?this$1$1.flushSoon():this$1$1.flush()})),this.currentSelection=new module_8008f8e9_SelectionState,module_8008f8e9_useCharData&&(this.onCharData=function(e){this$1$1.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this$1$1.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};module_8008f8e9_DOMObserver.prototype.flushSoon=function(){var this$1$1=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){this$1$1.flushingSoon=-1,this$1$1.flush()}),20))},module_8008f8e9_DOMObserver.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},module_8008f8e9_DOMObserver.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,module_8008f8e9_observeOptions),module_8008f8e9_useCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},module_8008f8e9_DOMObserver.prototype.stop=function(){var this$1$1=this;if(this.observer){var take=this.observer.takeRecords();if(take.length){for(var i=0;i<take.length;i++)this.queue.push(take[i]);window.setTimeout((function(){return this$1$1.flush()}),20)}this.observer.disconnect()}module_8008f8e9_useCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},module_8008f8e9_DOMObserver.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},module_8008f8e9_DOMObserver.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},module_8008f8e9_DOMObserver.prototype.suppressSelectionUpdates=function(){var this$1$1=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return this$1$1.suppressingSelectionUpdates=!1}),50)},module_8008f8e9_DOMObserver.prototype.onSelectionChange=function(){if((!(view=this.view).editable||view.root.activeElement==view.dom)&&module_8008f8e9_hasSelection(view)){var view;if(this.suppressingSelectionUpdates)return module_8008f8e9_selectionToDOM(this.view);if(module_8008f8e9_result.ie&&module_8008f8e9_result.ie_version<=11&&!this.view.state.selection.empty){var sel=this.view.root.getSelection();if(sel.focusNode&&module_8008f8e9_isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset))return this.flushSoon()}this.flush()}},module_8008f8e9_DOMObserver.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},module_8008f8e9_DOMObserver.prototype.ignoreSelectionChange=function(sel){if(0==sel.rangeCount)return!0;var container=sel.getRangeAt(0).commonAncestorContainer,desc=this.view.docView.nearestDesc(container);return desc&&desc.ignoreMutation({type:"selection",target:3==container.nodeType?container.parentNode:container})?(this.setCurSelection(),!0):void 0},module_8008f8e9_DOMObserver.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var mutations=this.observer?this.observer.takeRecords():[];this.queue.length&&(mutations=this.queue.concat(mutations),this.queue.length=0);var sel=this.view.root.getSelection(),newSel=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(sel)&&module_8008f8e9_hasSelection(this.view)&&!this.ignoreSelectionChange(sel),from=-1,to=-1,typeOver=!1,added=[];if(this.view.editable)for(var i=0;i<mutations.length;i++){var result$1=this.registerMutation(mutations[i],added);result$1&&(from=from<0?result$1.from:Math.min(result$1.from,from),to=to<0?result$1.to:Math.max(result$1.to,to),result$1.typeOver&&(typeOver=!0))}if(module_8008f8e9_result.gecko&&added.length>1){var brs=added.filter((function(n){return"BR"==n.nodeName}));if(2==brs.length){var a=brs[0],b=brs[1];a.parentNode&&a.parentNode.parentNode==b.parentNode?b.remove():a.remove()}}(from>-1||newSel)&&(from>-1&&(this.view.docView.markDirty(from,to),view=this.view,module_8008f8e9_cssChecked||(module_8008f8e9_cssChecked=!0,"normal"==getComputedStyle(view.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))),this.handleDOMChange(from,to,typeOver,added),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(sel)||module_8008f8e9_selectionToDOM(this.view),this.currentSelection.set(sel))}var view},module_8008f8e9_DOMObserver.prototype.registerMutation=function(mut,added){if(added.indexOf(mut.target)>-1)return null;var desc=this.view.docView.nearestDesc(mut.target);if("attributes"==mut.type&&(desc==this.view.docView||"contenteditable"==mut.attributeName||"style"==mut.attributeName&&!mut.oldValue&&!mut.target.getAttribute("style")))return null;if(!desc||desc.ignoreMutation(mut))return null;if("childList"==mut.type){for(var i=0;i<mut.addedNodes.length;i++)added.push(mut.addedNodes[i]);if(desc.contentDOM&&desc.contentDOM!=desc.dom&&!desc.contentDOM.contains(mut.target))return{from:desc.posBefore,to:desc.posAfter};var prev=mut.previousSibling,next=mut.nextSibling;if(module_8008f8e9_result.ie&&module_8008f8e9_result.ie_version<=11&&mut.addedNodes.length)for(var i$1=0;i$1<mut.addedNodes.length;i$1++){var ref=mut.addedNodes[i$1],previousSibling=ref.previousSibling,nextSibling=ref.nextSibling;(!previousSibling||Array.prototype.indexOf.call(mut.addedNodes,previousSibling)<0)&&(prev=previousSibling),(!nextSibling||Array.prototype.indexOf.call(mut.addedNodes,nextSibling)<0)&&(next=nextSibling)}var fromOffset=prev&&prev.parentNode==mut.target?module_8008f8e9_domIndex(prev)+1:0,from=desc.localPosFromDOM(mut.target,fromOffset,-1),toOffset=next&&next.parentNode==mut.target?module_8008f8e9_domIndex(next):mut.target.childNodes.length;return{from:from,to:desc.localPosFromDOM(mut.target,toOffset,1)}}return"attributes"==mut.type?{from:desc.posAtStart-desc.border,to:desc.posAtEnd+desc.border}:{from:desc.posAtStart,to:desc.posAtEnd,typeOver:mut.target.nodeValue==mut.oldValue}};var module_8008f8e9_cssChecked=!1,module_8008f8e9_handlers={},module_8008f8e9_editHandlers={};function module_8008f8e9_setSelectionOrigin(view,origin){view.lastSelectionOrigin=origin,view.lastSelectionTime=Date.now()}function module_8008f8e9_ensureListeners(view){view.someProp("handleDOMEvents",(function(currentHandlers){for(var type in currentHandlers)view.eventHandlers[type]||view.dom.addEventListener(type,view.eventHandlers[type]=function(event){return module_8008f8e9_runCustomHandler(view,event)})}))}function module_8008f8e9_runCustomHandler(view,event){return view.someProp("handleDOMEvents",(function(handlers){var handler=handlers[event.type];return!!handler&&(handler(view,event)||event.defaultPrevented)}))}function module_8008f8e9_eventCoords(event){return{left:event.clientX,top:event.clientY}}function module_8008f8e9_runHandlerOnContext(view,propName,pos,inside,event){if(-1==inside)return!1;for(var $pos=view.state.doc.resolve(inside),loop=function(i){if(view.someProp(propName,(function(f){return i>$pos.depth?f(view,pos,$pos.nodeAfter,$pos.before(i),event,!0):f(view,pos,$pos.node(i),$pos.before(i),event,!1)})))return{v:!0}},i=$pos.depth+1;i>0;i--){var returned=loop(i);if(returned)return returned.v}return!1}function module_8008f8e9_updateSelection(view,selection,origin){view.focused||view.focus();var tr=view.state.tr.setSelection(selection);"pointer"==origin&&tr.setMeta("pointer",!0),view.dispatch(tr)}function module_8008f8e9_handleDoubleClick(view,pos,inside,event){return module_8008f8e9_runHandlerOnContext(view,"handleDoubleClickOn",pos,inside,event)||view.someProp("handleDoubleClick",(function(f){return f(view,pos,event)}))}function module_8008f8e9_handleTripleClick(view,pos,inside,event){return module_8008f8e9_runHandlerOnContext(view,"handleTripleClickOn",pos,inside,event)||view.someProp("handleTripleClick",(function(f){return f(view,pos,event)}))||function(view,inside,event){if(0!=event.button)return!1;var doc=view.state.doc;if(-1==inside)return!!doc.inlineContent&&(module_8008f8e9_updateSelection(view,module_8008f8e9_TextSelection.create(doc,0,doc.content.size),"pointer"),!0);for(var $pos=doc.resolve(inside),i=$pos.depth+1;i>0;i--){var node=i>$pos.depth?$pos.nodeAfter:$pos.node(i),nodePos=$pos.before(i);if(node.inlineContent)module_8008f8e9_updateSelection(view,module_8008f8e9_TextSelection.create(doc,nodePos+1,nodePos+1+node.content.size),"pointer");else{if(!module_8008f8e9_NodeSelection.isSelectable(node))continue;module_8008f8e9_updateSelection(view,module_8008f8e9_NodeSelection.create(doc,nodePos),"pointer")}return!0}}(view,inside,event)}function module_8008f8e9_forceDOMFlush(view){return module_8008f8e9_endComposition(view)}module_8008f8e9_editHandlers.keydown=function(view,event){if(view.shiftKey=16==event.keyCode||event.shiftKey,!module_8008f8e9_inOrNearComposition(view,event))if(229!=event.keyCode&&view.domObserver.forceFlush(),view.lastKeyCode=event.keyCode,view.lastKeyCodeTime=Date.now(),!module_8008f8e9_result.ios||13!=event.keyCode||event.ctrlKey||event.altKey||event.metaKey)view.someProp("handleKeyDown",(function(f){return f(view,event)}))||function(view,event){var code=event.keyCode,mods=function(event){var result="";return event.ctrlKey&&(result+="c"),event.metaKey&&(result+="m"),event.altKey&&(result+="a"),event.shiftKey&&(result+="s"),result}(event);return 8==code||module_8008f8e9_result.mac&&72==code&&"c"==mods?module_8008f8e9_stopNativeHorizontalDelete(view,-1)||module_8008f8e9_skipIgnoredNodesLeft(view):46==code||module_8008f8e9_result.mac&&68==code&&"c"==mods?module_8008f8e9_stopNativeHorizontalDelete(view,1)||module_8008f8e9_skipIgnoredNodesRight(view):13==code||27==code||(37==code?module_8008f8e9_selectHorizontally(view,-1,mods)||module_8008f8e9_skipIgnoredNodesLeft(view):39==code?module_8008f8e9_selectHorizontally(view,1,mods)||module_8008f8e9_skipIgnoredNodesRight(view):38==code?module_8008f8e9_selectVertically(view,-1,mods)||module_8008f8e9_skipIgnoredNodesLeft(view):40==code?function(view){if(module_8008f8e9_result.safari&&!(view.state.selection.$head.parentOffset>0)){var ref=view.root.getSelection(),focusNode=ref.focusNode,focusOffset=ref.focusOffset;if(focusNode&&1==focusNode.nodeType&&0==focusOffset&&focusNode.firstChild&&"false"==focusNode.firstChild.contentEditable){var child=focusNode.firstChild;module_8008f8e9_switchEditable(view,child,!0),setTimeout((function(){return module_8008f8e9_switchEditable(view,child,!1)}),20)}}}(view)||module_8008f8e9_selectVertically(view,1,mods)||module_8008f8e9_skipIgnoredNodesRight(view):mods==(module_8008f8e9_result.mac?"m":"c")&&(66==code||73==code||89==code||90==code))}(view,event)?event.preventDefault():module_8008f8e9_setSelectionOrigin(view,"key");else{var now=Date.now();view.lastIOSEnter=now,view.lastIOSEnterFallbackTimeout=setTimeout((function(){view.lastIOSEnter==now&&(view.someProp("handleKeyDown",(function(f){return f(view,module_8008f8e9_keyEvent(13,"Enter"))})),view.lastIOSEnter=0)}),200)}},module_8008f8e9_editHandlers.keyup=function(view,e){16==e.keyCode&&(view.shiftKey=!1)},module_8008f8e9_editHandlers.keypress=function(view,event){if(!(module_8008f8e9_inOrNearComposition(view,event)||!event.charCode||event.ctrlKey&&!event.altKey||module_8008f8e9_result.mac&&event.metaKey))if(view.someProp("handleKeyPress",(function(f){return f(view,event)})))event.preventDefault();else{var sel=view.state.selection;if(!(sel instanceof module_8008f8e9_TextSelection&&sel.$from.sameParent(sel.$to))){var text=String.fromCharCode(event.charCode);view.someProp("handleTextInput",(function(f){return f(view,sel.$from.pos,sel.$to.pos,text)}))||view.dispatch(view.state.tr.insertText(text).scrollIntoView()),event.preventDefault()}}};var module_8008f8e9_selectNodeModifier=module_8008f8e9_result.mac?"metaKey":"ctrlKey";module_8008f8e9_handlers.mousedown=function(view,event){view.shiftKey=event.shiftKey;var flushed=module_8008f8e9_forceDOMFlush(view),now=Date.now(),type="singleClick";now-view.lastClick.time<500&&function(event,click){var dx=click.x-event.clientX,dy=click.y-event.clientY;return dx*dx+dy*dy<100}(event,view.lastClick)&&!event[module_8008f8e9_selectNodeModifier]&&("singleClick"==view.lastClick.type?type="doubleClick":"doubleClick"==view.lastClick.type&&(type="tripleClick")),view.lastClick={time:now,x:event.clientX,y:event.clientY,type:type};var pos=view.posAtCoords(module_8008f8e9_eventCoords(event));pos&&("singleClick"==type?(view.mouseDown&&view.mouseDown.done(),view.mouseDown=new module_8008f8e9_MouseDown(view,pos,event,flushed)):("doubleClick"==type?module_8008f8e9_handleDoubleClick:module_8008f8e9_handleTripleClick)(view,pos.pos,pos.inside,event)?event.preventDefault():module_8008f8e9_setSelectionOrigin(view,"pointer"))};var module_8008f8e9_MouseDown=function(view,pos,event,flushed){var targetNode,targetPos,this$1$1=this;if(this.view=view,this.startDoc=view.state.doc,this.pos=pos,this.event=event,this.flushed=flushed,this.selectNode=event[module_8008f8e9_selectNodeModifier],this.allowDefault=event.shiftKey,pos.inside>-1)targetNode=view.state.doc.nodeAt(pos.inside),targetPos=pos.inside;else{var $pos=view.state.doc.resolve(pos.pos);targetNode=$pos.parent,targetPos=$pos.depth?$pos.before():0}this.mightDrag=null;var target=flushed?null:event.target,targetDesc=target?view.docView.nearestDesc(target,!0):null;this.target=targetDesc?targetDesc.dom:null;var selection=view.state.selection;(0==event.button&&targetNode.type.spec.draggable&&!1!==targetNode.type.spec.selectable||selection instanceof module_8008f8e9_NodeSelection&&selection.from<=targetPos&&selection.to>targetPos)&&(this.mightDrag={node:targetNode,pos:targetPos,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&module_8008f8e9_result.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){this$1$1.view.mouseDown==this$1$1&&this$1$1.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),view.root.addEventListener("mouseup",this.up=this.up.bind(this)),view.root.addEventListener("mousemove",this.move=this.move.bind(this)),module_8008f8e9_setSelectionOrigin(view,"pointer")};function module_8008f8e9_inOrNearComposition(view,event){return!!view.composing||!!(module_8008f8e9_result.safari&&Math.abs(event.timeStamp-view.compositionEndedAt)<500)&&(view.compositionEndedAt=-2e8,!0)}module_8008f8e9_MouseDown.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},module_8008f8e9_MouseDown.prototype.up=function(event){if(this.done(),this.view.dom.contains(3==event.target.nodeType?event.target.parentNode:event.target)){var pos=this.pos;this.view.state.doc!=this.startDoc&&(pos=this.view.posAtCoords(module_8008f8e9_eventCoords(event))),this.allowDefault||!pos?module_8008f8e9_setSelectionOrigin(this.view,"pointer"):function(view,pos,inside,event,selectNode){return module_8008f8e9_runHandlerOnContext(view,"handleClickOn",pos,inside,event)||view.someProp("handleClick",(function(f){return f(view,pos,event)}))||(selectNode?function(view,inside){if(-1==inside)return!1;var selectedNode,selectAt,sel=view.state.selection;sel instanceof module_8008f8e9_NodeSelection&&(selectedNode=sel.node);for(var $pos=view.state.doc.resolve(inside),i=$pos.depth+1;i>0;i--){var node=i>$pos.depth?$pos.nodeAfter:$pos.node(i);if(module_8008f8e9_NodeSelection.isSelectable(node)){selectAt=selectedNode&&sel.$from.depth>0&&i>=sel.$from.depth&&$pos.before(sel.$from.depth+1)==sel.$from.pos?$pos.before(sel.$from.depth):$pos.before(i);break}}return null!=selectAt&&(module_8008f8e9_updateSelection(view,module_8008f8e9_NodeSelection.create(view.state.doc,selectAt),"pointer"),!0)}(view,inside):function(view,inside){if(-1==inside)return!1;var $pos=view.state.doc.resolve(inside),node=$pos.nodeAfter;return!!(node&&node.isAtom&&module_8008f8e9_NodeSelection.isSelectable(node))&&(module_8008f8e9_updateSelection(view,new module_8008f8e9_NodeSelection($pos),"pointer"),!0)}(view,inside))}(this.view,pos.pos,pos.inside,event,this.selectNode)?event.preventDefault():0==event.button&&(this.flushed||module_8008f8e9_result.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||module_8008f8e9_result.chrome&&!(this.view.state.selection instanceof module_8008f8e9_TextSelection)&&Math.min(Math.abs(pos.pos-this.view.state.selection.from),Math.abs(pos.pos-this.view.state.selection.to))<=2)?(module_8008f8e9_updateSelection(this.view,module_8008f8e9_Selection.near(this.view.state.doc.resolve(pos.pos)),"pointer"),event.preventDefault()):module_8008f8e9_setSelectionOrigin(this.view,"pointer")}},module_8008f8e9_MouseDown.prototype.move=function(event){!this.allowDefault&&(Math.abs(this.event.x-event.clientX)>4||Math.abs(this.event.y-event.clientY)>4)&&(this.allowDefault=!0),module_8008f8e9_setSelectionOrigin(this.view,"pointer"),0==event.buttons&&this.done()},module_8008f8e9_handlers.touchdown=function(view){module_8008f8e9_forceDOMFlush(view),module_8008f8e9_setSelectionOrigin(view,"pointer")},module_8008f8e9_handlers.contextmenu=function(view){return module_8008f8e9_forceDOMFlush(view)};var module_8008f8e9_timeoutComposition=module_8008f8e9_result.android?5e3:-1;function module_8008f8e9_scheduleComposeEnd(view,delay){clearTimeout(view.composingTimeout),delay>-1&&(view.composingTimeout=setTimeout((function(){return module_8008f8e9_endComposition(view)}),delay))}function module_8008f8e9_clearComposition(view){for(view.composing=!1;view.compositionNodes.length>0;)view.compositionNodes.pop().markParentsDirty()}function module_8008f8e9_endComposition(view,forceUpdate){if(view.domObserver.forceFlush(),module_8008f8e9_clearComposition(view),forceUpdate||view.docView.dirty){var sel=module_8008f8e9_selectionFromDOM(view);return sel&&!sel.eq(view.state.selection)?view.dispatch(view.state.tr.setSelection(sel)):view.updateState(view.state),!0}return!1}module_8008f8e9_editHandlers.compositionstart=module_8008f8e9_editHandlers.compositionupdate=function(view){if(!view.composing){view.domObserver.flush();var state=view.state,$pos=state.selection.$from;if(state.selection.empty&&(state.storedMarks||!$pos.textOffset&&$pos.parentOffset&&$pos.nodeBefore.marks.some((function(m){return!1===m.type.spec.inclusive}))))view.markCursor=view.state.storedMarks||$pos.marks(),module_8008f8e9_endComposition(view,!0),view.markCursor=null;else if(module_8008f8e9_endComposition(view),module_8008f8e9_result.gecko&&state.selection.empty&&$pos.parentOffset&&!$pos.textOffset&&$pos.nodeBefore.marks.length)for(var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;node&&1==node.nodeType&&0!=offset;){var before=offset<0?node.lastChild:node.childNodes[offset-1];if(!before)break;if(3==before.nodeType){sel.collapse(before,before.nodeValue.length);break}node=before,offset=-1}view.composing=!0}module_8008f8e9_scheduleComposeEnd(view,module_8008f8e9_timeoutComposition)},module_8008f8e9_editHandlers.compositionend=function(view,event){view.composing&&(view.composing=!1,view.compositionEndedAt=event.timeStamp,module_8008f8e9_scheduleComposeEnd(view,20))};var module_8008f8e9_brokenClipboardAPI=module_8008f8e9_result.ie&&module_8008f8e9_result.ie_version<15||module_8008f8e9_result.ios&&module_8008f8e9_result.webkit_version<604;function module_8008f8e9_doPaste(view,text,html,e){var slice=module_8008f8e9_parseFromClipboard(view,text,html,view.shiftKey,view.state.selection.$from);if(view.someProp("handlePaste",(function(f){return f(view,e,slice||module_8008f8e9_Slice.empty)})))return!0;if(!slice)return!1;var singleNode=function(slice){return 0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount?slice.content.firstChild:null}(slice),tr=singleNode?view.state.tr.replaceSelectionWith(singleNode,view.shiftKey):view.state.tr.replaceSelection(slice);return view.dispatch(tr.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}module_8008f8e9_handlers.copy=module_8008f8e9_editHandlers.cut=function(view,e){var sel=view.state.selection,cut="cut"==e.type;if(!sel.empty){var data=module_8008f8e9_brokenClipboardAPI?null:e.clipboardData,ref=module_8008f8e9_serializeForClipboard(view,sel.content()),dom=ref.dom,text=ref.text;data?(e.preventDefault(),data.clearData(),data.setData("text/html",dom.innerHTML),data.setData("text/plain",text)):function(view,dom){if(view.dom.parentNode){var wrap=view.dom.parentNode.appendChild(document.createElement("div"));wrap.appendChild(dom),wrap.style.cssText="position: fixed; left: -10000px; top: 10px";var sel=getSelection(),range=document.createRange();range.selectNodeContents(dom),view.dom.blur(),sel.removeAllRanges(),sel.addRange(range),setTimeout((function(){wrap.parentNode&&wrap.parentNode.removeChild(wrap),view.focus()}),50)}}(view,dom),cut&&view.dispatch(view.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},module_8008f8e9_editHandlers.paste=function(view,e){var data=module_8008f8e9_brokenClipboardAPI?null:e.clipboardData;data&&module_8008f8e9_doPaste(view,data.getData("text/plain"),data.getData("text/html"),e)?e.preventDefault():function(view,e){if(view.dom.parentNode){var plainText=view.shiftKey||view.state.selection.$from.parent.type.spec.code,target=view.dom.parentNode.appendChild(document.createElement(plainText?"textarea":"div"));plainText||(target.contentEditable="true"),target.style.cssText="position: fixed; left: -10000px; top: 10px",target.focus(),setTimeout((function(){view.focus(),target.parentNode&&target.parentNode.removeChild(target),plainText?module_8008f8e9_doPaste(view,target.value,null,e):module_8008f8e9_doPaste(view,target.textContent,target.innerHTML,e)}),50)}}(view,e)};var module_8008f8e9_Dragging=function(slice,move){this.slice=slice,this.move=move},module_8008f8e9_dragCopyModifier=module_8008f8e9_result.mac?"altKey":"ctrlKey";for(var module_8008f8e9_prop in module_8008f8e9_handlers.dragstart=function(view,e){var mouseDown=view.mouseDown;if(mouseDown&&mouseDown.done(),e.dataTransfer){var sel=view.state.selection,pos=sel.empty?null:view.posAtCoords(module_8008f8e9_eventCoords(e));if(pos&&pos.pos>=sel.from&&pos.pos<=(sel instanceof module_8008f8e9_NodeSelection?sel.to-1:sel.to));else if(mouseDown&&mouseDown.mightDrag)view.dispatch(view.state.tr.setSelection(module_8008f8e9_NodeSelection.create(view.state.doc,mouseDown.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var desc=view.docView.nearestDesc(e.target,!0);desc&&desc.node.type.spec.draggable&&desc!=view.docView&&view.dispatch(view.state.tr.setSelection(module_8008f8e9_NodeSelection.create(view.state.doc,desc.posBefore)))}var slice=view.state.selection.content(),ref=module_8008f8e9_serializeForClipboard(view,slice),dom=ref.dom,text=ref.text;e.dataTransfer.clearData(),e.dataTransfer.setData(module_8008f8e9_brokenClipboardAPI?"Text":"text/html",dom.innerHTML),e.dataTransfer.effectAllowed="copyMove",module_8008f8e9_brokenClipboardAPI||e.dataTransfer.setData("text/plain",text),view.dragging=new module_8008f8e9_Dragging(slice,!e[module_8008f8e9_dragCopyModifier])}},module_8008f8e9_handlers.dragend=function(view){var dragging=view.dragging;window.setTimeout((function(){view.dragging==dragging&&(view.dragging=null)}),50)},module_8008f8e9_editHandlers.dragover=module_8008f8e9_editHandlers.dragenter=function(_,e){return e.preventDefault()},module_8008f8e9_editHandlers.drop=function(view,e){var dragging=view.dragging;if(view.dragging=null,e.dataTransfer){var eventPos=view.posAtCoords(module_8008f8e9_eventCoords(e));if(eventPos){var $mouse=view.state.doc.resolve(eventPos.pos);if($mouse){var slice=dragging&&dragging.slice;slice?view.someProp("transformPasted",(function(f){slice=f(slice)})):slice=module_8008f8e9_parseFromClipboard(view,e.dataTransfer.getData(module_8008f8e9_brokenClipboardAPI?"Text":"text/plain"),module_8008f8e9_brokenClipboardAPI?null:e.dataTransfer.getData("text/html"),!1,$mouse);var move=dragging&&!e[module_8008f8e9_dragCopyModifier];if(view.someProp("handleDrop",(function(f){return f(view,e,slice||module_8008f8e9_Slice.empty,move)})))e.preventDefault();else if(slice){e.preventDefault();var insertPos=slice?function(doc,pos,slice){var $pos=doc.resolve(pos);if(!slice.content.size)return pos;for(var content=slice.content,i=0;i<slice.openStart;i++)content=content.firstChild.content;for(var pass=1;pass<=(0==slice.openStart&&slice.size?2:1);pass++)for(var d=$pos.depth;d>=0;d--){var bias=d==$pos.depth?0:$pos.pos<=($pos.start(d+1)+$pos.end(d+1))/2?-1:1,insertPos=$pos.index(d)+(bias>0?1:0),parent=$pos.node(d),fits=!1;if(1==pass)fits=parent.canReplace(insertPos,insertPos,content);else{var wrapping=parent.contentMatchAt(insertPos).findWrapping(content.firstChild.type);fits=wrapping&&parent.canReplaceWith(insertPos,insertPos,wrapping[0])}if(fits)return 0==bias?$pos.pos:bias<0?$pos.before(d+1):$pos.after(d+1)}return null}(view.state.doc,$mouse.pos,slice):$mouse.pos;null==insertPos&&(insertPos=$mouse.pos);var tr=view.state.tr;move&&tr.deleteSelection();var pos=tr.mapping.map(insertPos),isNode=0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount,beforeInsert=tr.doc;if(isNode?tr.replaceRangeWith(pos,pos,slice.content.firstChild):tr.replaceRange(pos,pos,slice),!tr.doc.eq(beforeInsert)){var $pos=tr.doc.resolve(pos);if(isNode&&module_8008f8e9_NodeSelection.isSelectable(slice.content.firstChild)&&$pos.nodeAfter&&$pos.nodeAfter.sameMarkup(slice.content.firstChild))tr.setSelection(new module_8008f8e9_NodeSelection($pos));else{var end=tr.mapping.map(insertPos);tr.mapping.maps[tr.mapping.maps.length-1].forEach((function(_from,_to,_newFrom,newTo){return end=newTo})),tr.setSelection(module_8008f8e9_selectionBetween(view,$pos,tr.doc.resolve(end)))}view.focus(),view.dispatch(tr.setMeta("uiEvent","drop"))}}}}}},module_8008f8e9_handlers.focus=function(view){view.focused||(view.domObserver.stop(),view.dom.classList.add("ProseMirror-focused"),view.domObserver.start(),view.focused=!0,setTimeout((function(){view.docView&&view.hasFocus()&&!view.domObserver.currentSelection.eq(view.root.getSelection())&&module_8008f8e9_selectionToDOM(view)}),20))},module_8008f8e9_handlers.blur=function(view){view.focused&&(view.domObserver.stop(),view.dom.classList.remove("ProseMirror-focused"),view.domObserver.start(),view.domObserver.currentSelection.set({}),view.focused=!1)},module_8008f8e9_handlers.beforeinput=function(view,event){if(module_8008f8e9_result.chrome&&module_8008f8e9_result.android&&"deleteContentBackward"==event.inputType){var domChangeCount=view.domChangeCount;setTimeout((function(){if(view.domChangeCount==domChangeCount&&(view.dom.blur(),view.focus(),!view.someProp("handleKeyDown",(function(f){return f(view,module_8008f8e9_keyEvent(8,"Backspace"))})))){var $cursor=view.state.selection.$cursor;$cursor&&$cursor.pos>0&&view.dispatch(view.state.tr.delete($cursor.pos-1,$cursor.pos).scrollIntoView())}}),50)}},module_8008f8e9_editHandlers)module_8008f8e9_handlers[module_8008f8e9_prop]=module_8008f8e9_editHandlers[module_8008f8e9_prop];function module_8008f8e9_compareObjs(a,b){if(a==b)return!0;for(var p in a)if(a[p]!==b[p])return!1;for(var p$1 in b)if(!(p$1 in a))return!1;return!0}var module_8008f8e9_WidgetType=function(toDOM,spec){this.spec=spec||module_8008f8e9_noSpec,this.side=this.spec.side||0,this.toDOM=toDOM};module_8008f8e9_WidgetType.prototype.map=function(mapping,span,offset,oldOffset){var ref=mapping.mapResult(span.from+oldOffset,this.side<0?-1:1),pos=ref.pos;return ref.deleted?null:new Decoration$2(pos-offset,pos-offset,this)},module_8008f8e9_WidgetType.prototype.valid=function(){return!0},module_8008f8e9_WidgetType.prototype.eq=function(other){return this==other||other instanceof module_8008f8e9_WidgetType&&(this.spec.key&&this.spec.key==other.spec.key||this.toDOM==other.toDOM&&module_8008f8e9_compareObjs(this.spec,other.spec))};var module_8008f8e9_InlineType=function(attrs,spec){this.spec=spec||module_8008f8e9_noSpec,this.attrs=attrs};module_8008f8e9_InlineType.prototype.map=function(mapping,span,offset,oldOffset){var from=mapping.map(span.from+oldOffset,this.spec.inclusiveStart?-1:1)-offset,to=mapping.map(span.to+oldOffset,this.spec.inclusiveEnd?1:-1)-offset;return from>=to?null:new Decoration$2(from,to,this)},module_8008f8e9_InlineType.prototype.valid=function(_,span){return span.from<span.to},module_8008f8e9_InlineType.prototype.eq=function(other){return this==other||other instanceof module_8008f8e9_InlineType&&module_8008f8e9_compareObjs(this.attrs,other.attrs)&&module_8008f8e9_compareObjs(this.spec,other.spec)},module_8008f8e9_InlineType.is=function(span){return span.type instanceof module_8008f8e9_InlineType};var module_8008f8e9_NodeType=function(attrs,spec){this.spec=spec||module_8008f8e9_noSpec,this.attrs=attrs};module_8008f8e9_NodeType.prototype.map=function(mapping,span,offset,oldOffset){var from=mapping.mapResult(span.from+oldOffset,1);if(from.deleted)return null;var to=mapping.mapResult(span.to+oldOffset,-1);return to.deleted||to.pos<=from.pos?null:new Decoration$2(from.pos-offset,to.pos-offset,this)},module_8008f8e9_NodeType.prototype.valid=function(node,span){var ref=node.content.findIndex(span.from),index=ref.index,offset=ref.offset;return offset==span.from&&offset+node.child(index).nodeSize==span.to},module_8008f8e9_NodeType.prototype.eq=function(other){return this==other||other instanceof module_8008f8e9_NodeType&&module_8008f8e9_compareObjs(this.attrs,other.attrs)&&module_8008f8e9_compareObjs(this.spec,other.spec)};var Decoration$2=function(from,to,type){this.from=from,this.to=to,this.type=type},module_8008f8e9_prototypeAccessors$1={spec:{configurable:!0},inline:{configurable:!0}};Decoration$2.prototype.copy=function(from,to){return new Decoration$2(from,to,this.type)},Decoration$2.prototype.eq=function(other,offset){return void 0===offset&&(offset=0),this.type.eq(other.type)&&this.from+offset==other.from&&this.to+offset==other.to},Decoration$2.prototype.map=function(mapping,offset,oldOffset){return this.type.map(mapping,this,offset,oldOffset)},Decoration$2.widget=function(pos,toDOM,spec){return new Decoration$2(pos,pos,new module_8008f8e9_WidgetType(toDOM,spec))},Decoration$2.inline=function(from,to,attrs,spec){return new Decoration$2(from,to,new module_8008f8e9_InlineType(attrs,spec))},Decoration$2.node=function(from,to,attrs,spec){return new Decoration$2(from,to,new module_8008f8e9_NodeType(attrs,spec))},module_8008f8e9_prototypeAccessors$1.spec.get=function(){return this.type.spec},module_8008f8e9_prototypeAccessors$1.inline.get=function(){return this.type instanceof module_8008f8e9_InlineType},Object.defineProperties(Decoration$2.prototype,module_8008f8e9_prototypeAccessors$1);var module_8008f8e9_none=[],module_8008f8e9_noSpec={},module_8008f8e9_DecorationSet=function(local,children){this.local=local&&local.length?local:module_8008f8e9_none,this.children=children&&children.length?children:module_8008f8e9_none};module_8008f8e9_DecorationSet.create=function(doc,decorations){return decorations.length?module_8008f8e9_buildTree(decorations,doc,0,module_8008f8e9_noSpec):module_8008f8e9_empty},module_8008f8e9_DecorationSet.prototype.find=function(start,end,predicate){var result=[];return this.findInner(null==start?0:start,null==end?1e9:end,result,0,predicate),result},module_8008f8e9_DecorationSet.prototype.findInner=function(start,end,result,offset,predicate){for(var i=0;i<this.local.length;i++){var span=this.local[i];span.from<=end&&span.to>=start&&(!predicate||predicate(span.spec))&&result.push(span.copy(span.from+offset,span.to+offset))}for(var i$1=0;i$1<this.children.length;i$1+=3)if(this.children[i$1]<end&&this.children[i$1+1]>start){var childOff=this.children[i$1]+1;this.children[i$1+2].findInner(start-childOff,end-childOff,result,offset+childOff,predicate)}},module_8008f8e9_DecorationSet.prototype.map=function(mapping,doc,options){return this==module_8008f8e9_empty||0==mapping.maps.length?this:this.mapInner(mapping,doc,0,0,options||module_8008f8e9_noSpec)},module_8008f8e9_DecorationSet.prototype.mapInner=function(mapping,node,offset,oldOffset,options){for(var newLocal,i=0;i<this.local.length;i++){var mapped=this.local[i].map(mapping,offset,oldOffset);mapped&&mapped.type.valid(node,mapped)?(newLocal||(newLocal=[])).push(mapped):options.onRemove&&options.onRemove(this.local[i].spec)}return this.children.length?function(oldChildren,newLocal,mapping,node,offset,oldOffset,options){for(var children=oldChildren.slice(),shift=function(oldStart,oldEnd,newStart,newEnd){for(var i=0;i<children.length;i+=3){var end=children[i+1],dSize=void 0;-1==end||oldStart>end+oldOffset||(oldEnd>=children[i]+oldOffset?children[i+1]=-1:newStart>=offset&&(dSize=newEnd-newStart-(oldEnd-oldStart))&&(children[i]+=dSize,children[i+1]+=dSize))}},i=0;i<mapping.maps.length;i++)mapping.maps[i].forEach(shift);for(var mustRebuild=!1,i$1=0;i$1<children.length;i$1+=3)if(-1==children[i$1+1]){var from=mapping.map(oldChildren[i$1]+oldOffset),fromLocal=from-offset;if(fromLocal<0||fromLocal>=node.content.size){mustRebuild=!0;continue}var toLocal=mapping.map(oldChildren[i$1+1]+oldOffset,-1)-offset,ref=node.content.findIndex(fromLocal),index=ref.index,childOffset=ref.offset,childNode=node.maybeChild(index);if(childNode&&childOffset==fromLocal&&childOffset+childNode.nodeSize==toLocal){var mapped=children[i$1+2].mapInner(mapping,childNode,from+1,oldChildren[i$1]+oldOffset+1,options);mapped!=module_8008f8e9_empty?(children[i$1]=fromLocal,children[i$1+1]=toLocal,children[i$1+2]=mapped):(children[i$1+1]=-2,mustRebuild=!0)}else mustRebuild=!0}if(mustRebuild){var built=module_8008f8e9_buildTree(function(children,oldChildren,decorations,mapping,offset,oldOffset,options){function gather(set,oldOffset){for(var i=0;i<set.local.length;i++){var mapped=set.local[i].map(mapping,offset,oldOffset);mapped?decorations.push(mapped):options.onRemove&&options.onRemove(set.local[i].spec)}for(var i$1=0;i$1<set.children.length;i$1+=3)gather(set.children[i$1+2],set.children[i$1]+oldOffset+1)}for(var i=0;i<children.length;i+=3)-1==children[i+1]&&gather(children[i+2],oldChildren[i]+oldOffset+1);return decorations}(children,oldChildren,newLocal||[],mapping,offset,oldOffset,options),node,0,options);newLocal=built.local;for(var i$2=0;i$2<children.length;i$2+=3)children[i$2+1]<0&&(children.splice(i$2,3),i$2-=3);for(var i$3=0,j=0;i$3<built.children.length;i$3+=3){for(var from$1=built.children[i$3];j<children.length&&children[j]<from$1;)j+=3;children.splice(j,0,built.children[i$3],built.children[i$3+1],built.children[i$3+2])}}return new module_8008f8e9_DecorationSet(newLocal&&newLocal.sort(module_8008f8e9_byPos),children)}(this.children,newLocal,mapping,node,offset,oldOffset,options):newLocal?new module_8008f8e9_DecorationSet(newLocal.sort(module_8008f8e9_byPos)):module_8008f8e9_empty},module_8008f8e9_DecorationSet.prototype.add=function(doc,decorations){return decorations.length?this==module_8008f8e9_empty?module_8008f8e9_DecorationSet.create(doc,decorations):this.addInner(doc,decorations,0):this},module_8008f8e9_DecorationSet.prototype.addInner=function(doc,decorations,offset){var children,this$1$1=this,childIndex=0;doc.forEach((function(childNode,childOffset){var found,baseOffset=childOffset+offset;if(found=module_8008f8e9_takeSpansForNode(decorations,childNode,baseOffset)){for(children||(children=this$1$1.children.slice());childIndex<children.length&&children[childIndex]<childOffset;)childIndex+=3;children[childIndex]==childOffset?children[childIndex+2]=children[childIndex+2].addInner(childNode,found,baseOffset+1):children.splice(childIndex,0,childOffset,childOffset+childNode.nodeSize,module_8008f8e9_buildTree(found,childNode,baseOffset+1,module_8008f8e9_noSpec)),childIndex+=3}}));for(var local=module_8008f8e9_moveSpans(childIndex?module_8008f8e9_withoutNulls(decorations):decorations,-offset),i=0;i<local.length;i++)local[i].type.valid(doc,local[i])||local.splice(i--,1);return new module_8008f8e9_DecorationSet(local.length?this.local.concat(local).sort(module_8008f8e9_byPos):this.local,children||this.children)},module_8008f8e9_DecorationSet.prototype.remove=function(decorations){return 0==decorations.length||this==module_8008f8e9_empty?this:this.removeInner(decorations,0)},module_8008f8e9_DecorationSet.prototype.removeInner=function(decorations,offset){for(var children=this.children,local=this.local,i=0;i<children.length;i+=3){for(var found=void 0,from=children[i]+offset,to=children[i+1]+offset,j=0,span=void 0;j<decorations.length;j++)(span=decorations[j])&&span.from>from&&span.to<to&&(decorations[j]=null,(found||(found=[])).push(span));if(found){children==this.children&&(children=this.children.slice());var removed=children[i+2].removeInner(found,from+1);removed!=module_8008f8e9_empty?children[i+2]=removed:(children.splice(i,3),i-=3)}}if(local.length)for(var i$1=0,span$1=void 0;i$1<decorations.length;i$1++)if(span$1=decorations[i$1])for(var j$1=0;j$1<local.length;j$1++)local[j$1].eq(span$1,offset)&&(local==this.local&&(local=this.local.slice()),local.splice(j$1--,1));return children==this.children&&local==this.local?this:local.length||children.length?new module_8008f8e9_DecorationSet(local,children):module_8008f8e9_empty},module_8008f8e9_DecorationSet.prototype.forChild=function(offset,node){if(this==module_8008f8e9_empty)return this;if(node.isLeaf)return module_8008f8e9_DecorationSet.empty;for(var child,local,i=0;i<this.children.length;i+=3)if(this.children[i]>=offset){this.children[i]==offset&&(child=this.children[i+2]);break}for(var start=offset+1,end=start+node.content.size,i$1=0;i$1<this.local.length;i$1++){var dec=this.local[i$1];if(dec.from<end&&dec.to>start&&dec.type instanceof module_8008f8e9_InlineType){var from=Math.max(start,dec.from)-start,to=Math.min(end,dec.to)-start;from<to&&(local||(local=[])).push(dec.copy(from,to))}}if(local){var localSet=new module_8008f8e9_DecorationSet(local.sort(module_8008f8e9_byPos));return child?new module_8008f8e9_DecorationGroup([localSet,child]):localSet}return child||module_8008f8e9_empty},module_8008f8e9_DecorationSet.prototype.eq=function(other){if(this==other)return!0;if(!(other instanceof module_8008f8e9_DecorationSet)||this.local.length!=other.local.length||this.children.length!=other.children.length)return!1;for(var i=0;i<this.local.length;i++)if(!this.local[i].eq(other.local[i]))return!1;for(var i$1=0;i$1<this.children.length;i$1+=3)if(this.children[i$1]!=other.children[i$1]||this.children[i$1+1]!=other.children[i$1+1]||!this.children[i$1+2].eq(other.children[i$1+2]))return!1;return!0},module_8008f8e9_DecorationSet.prototype.locals=function(node){return module_8008f8e9_removeOverlap(this.localsInner(node))},module_8008f8e9_DecorationSet.prototype.localsInner=function(node){if(this==module_8008f8e9_empty)return module_8008f8e9_none;if(node.inlineContent||!this.local.some(module_8008f8e9_InlineType.is))return this.local;for(var result=[],i=0;i<this.local.length;i++)this.local[i].type instanceof module_8008f8e9_InlineType||result.push(this.local[i]);return result};var module_8008f8e9_empty=new module_8008f8e9_DecorationSet;module_8008f8e9_DecorationSet.empty=module_8008f8e9_empty,module_8008f8e9_DecorationSet.removeOverlap=module_8008f8e9_removeOverlap;var module_8008f8e9_DecorationGroup=function(members){this.members=members};function module_8008f8e9_moveSpans(spans,offset){if(!offset||!spans.length)return spans;for(var result=[],i=0;i<spans.length;i++){var span=spans[i];result.push(new Decoration$2(span.from+offset,span.to+offset,span.type))}return result}function module_8008f8e9_takeSpansForNode(spans,node,offset){if(node.isLeaf)return null;for(var end=offset+node.nodeSize,found=null,i=0,span=void 0;i<spans.length;i++)(span=spans[i])&&span.from>offset&&span.to<end&&((found||(found=[])).push(span),spans[i]=null);return found}function module_8008f8e9_withoutNulls(array){for(var result=[],i=0;i<array.length;i++)null!=array[i]&&result.push(array[i]);return result}function module_8008f8e9_buildTree(spans,node,offset,options){var children=[],hasNulls=!1;node.forEach((function(childNode,localStart){var found=module_8008f8e9_takeSpansForNode(spans,childNode,localStart+offset);if(found){hasNulls=!0;var subtree=module_8008f8e9_buildTree(found,childNode,offset+localStart+1,options);subtree!=module_8008f8e9_empty&&children.push(localStart,localStart+childNode.nodeSize,subtree)}}));for(var locals=module_8008f8e9_moveSpans(hasNulls?module_8008f8e9_withoutNulls(spans):spans,-offset).sort(module_8008f8e9_byPos),i=0;i<locals.length;i++)locals[i].type.valid(node,locals[i])||(options.onRemove&&options.onRemove(locals[i].spec),locals.splice(i--,1));return locals.length||children.length?new module_8008f8e9_DecorationSet(locals,children):module_8008f8e9_empty}function module_8008f8e9_byPos(a,b){return a.from-b.from||a.to-b.to}function module_8008f8e9_removeOverlap(spans){for(var working=spans,i=0;i<working.length-1;i++){var span=working[i];if(span.from!=span.to)for(var j=i+1;j<working.length;j++){var next=working[j];if(next.from!=span.from){next.from<span.to&&(working==spans&&(working=spans.slice()),working[i]=span.copy(span.from,next.from),module_8008f8e9_insertAhead(working,j,span.copy(next.from,span.to)));break}next.to!=span.to&&(working==spans&&(working=spans.slice()),working[j]=next.copy(next.from,span.to),module_8008f8e9_insertAhead(working,j+1,next.copy(span.to,next.to)))}}return working}function module_8008f8e9_insertAhead(array,i,deco){for(;i<array.length&&module_8008f8e9_byPos(deco,array[i])>0;)i++;array.splice(i,0,deco)}function module_8008f8e9_viewDecorations(view){var found=[];return view.someProp("decorations",(function(f){var result=f(view.state);result&&result!=module_8008f8e9_empty&&found.push(result)})),view.cursorWrapper&&found.push(module_8008f8e9_DecorationSet.create(view.state.doc,[view.cursorWrapper.deco])),module_8008f8e9_DecorationGroup.from(found)}module_8008f8e9_DecorationGroup.prototype.forChild=function(offset,child){if(child.isLeaf)return module_8008f8e9_DecorationSet.empty;for(var found=[],i=0;i<this.members.length;i++){var result=this.members[i].forChild(offset,child);result!=module_8008f8e9_empty&&(result instanceof module_8008f8e9_DecorationGroup?found=found.concat(result.members):found.push(result))}return module_8008f8e9_DecorationGroup.from(found)},module_8008f8e9_DecorationGroup.prototype.eq=function(other){if(!(other instanceof module_8008f8e9_DecorationGroup)||other.members.length!=this.members.length)return!1;for(var i=0;i<this.members.length;i++)if(!this.members[i].eq(other.members[i]))return!1;return!0},module_8008f8e9_DecorationGroup.prototype.locals=function(node){for(var result,sorted=!0,i=0;i<this.members.length;i++){var locals=this.members[i].localsInner(node);if(locals.length)if(result){sorted&&(result=result.slice(),sorted=!1);for(var j=0;j<locals.length;j++)result.push(locals[j])}else result=locals}return result?module_8008f8e9_removeOverlap(sorted?result:result.sort(module_8008f8e9_byPos)):module_8008f8e9_none},module_8008f8e9_DecorationGroup.from=function(members){switch(members.length){case 0:return module_8008f8e9_empty;case 1:return members[0];default:return new module_8008f8e9_DecorationGroup(members)}};var module_8008f8e9_EditorView=function(place,props){this._props=props,this.state=props.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=place&&place.mount||document.createElement("div"),place&&(place.appendChild?place.appendChild(this.dom):place.apply?place(this.dom):place.mount&&(this.mounted=!0)),this.editable=module_8008f8e9_getEditable(this),this.markCursor=null,this.cursorWrapper=null,module_8008f8e9_updateCursorWrapper(this),this.nodeViews=module_8008f8e9_buildNodeViews(this),this.docView=module_8008f8e9_docViewDesc(this.state.doc,module_8008f8e9_computeDocDeco(this),module_8008f8e9_viewDecorations(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(view){view.shiftKey=!1,view.mouseDown=null,view.lastKeyCode=null,view.lastKeyCodeTime=0,view.lastClick={time:0,x:0,y:0,type:""},view.lastSelectionOrigin=null,view.lastSelectionTime=0,view.lastIOSEnter=0,view.lastIOSEnterFallbackTimeout=null,view.lastAndroidDelete=0,view.composing=!1,view.composingTimeout=null,view.compositionNodes=[],view.compositionEndedAt=-2e8,view.domObserver=new module_8008f8e9_DOMObserver(view,(function(from,to,typeOver,added){return function(view,from,to,typeOver,addedNodes){if(from<0){var origin=view.lastSelectionTime>Date.now()-50?view.lastSelectionOrigin:null,newSel=module_8008f8e9_selectionFromDOM(view,origin);if(newSel&&!view.state.selection.eq(newSel)){var tr$1=view.state.tr.setSelection(newSel);"pointer"==origin?tr$1.setMeta("pointer",!0):"key"==origin&&tr$1.scrollIntoView(),view.dispatch(tr$1)}}else{var $before=view.state.doc.resolve(from),shared=$before.sharedDepth(to);from=$before.before(shared+1),to=view.state.doc.resolve(to).after(shared+1);var sel=view.state.selection,parse=function(view,from_,to_){var ref=view.docView.parseRange(from_,to_),parent=ref.node,fromOffset=ref.fromOffset,toOffset=ref.toOffset,from=ref.from,to=ref.to,domSel=view.root.getSelection(),find=null,anchor=domSel.anchorNode;if(anchor&&view.dom.contains(1==anchor.nodeType?anchor:anchor.parentNode)&&(find=[{node:anchor,offset:domSel.anchorOffset}],module_8008f8e9_selectionCollapsed(domSel)||find.push({node:domSel.focusNode,offset:domSel.focusOffset})),module_8008f8e9_result.chrome&&8===view.lastKeyCode)for(var off=toOffset;off>fromOffset;off--){var node=parent.childNodes[off-1],desc=node.pmViewDesc;if("BR"==node.nodeName&&!desc){toOffset=off;break}if(!desc||desc.size)break}var startDoc=view.state.doc,parser=view.someProp("domParser")||module_8008f8e9_DOMParser.fromSchema(view.state.schema),$from=startDoc.resolve(from),sel=null,doc=parser.parse(parent,{topNode:$from.parent,topMatch:$from.parent.contentMatchAt($from.index()),topOpen:!0,from:fromOffset,to:toOffset,preserveWhitespace:!$from.parent.type.spec.code||"full",editableContent:!0,findPositions:find,ruleFromNode:module_8008f8e9_ruleFromNode,context:$from});if(find&&null!=find[0].pos){var anchor$1=find[0].pos,head=find[1]&&find[1].pos;null==head&&(head=anchor$1),sel={anchor:anchor$1+from,head:head+from}}return{doc:doc,sel:sel,from:from,to:to}}(view,from,to);if(module_8008f8e9_result.chrome&&view.cursorWrapper&&parse.sel&&parse.sel.anchor==view.cursorWrapper.deco.from){var text=view.cursorWrapper.deco.type.toDOM.nextSibling,size=text&&text.nodeValue?text.nodeValue.length:1;parse.sel={anchor:parse.sel.anchor+size,head:parse.sel.anchor+size}}var preferredPos,preferredSide,doc=view.state.doc,compare=doc.slice(parse.from,parse.to);8===view.lastKeyCode&&Date.now()-100<view.lastKeyCodeTime?(preferredPos=view.state.selection.to,preferredSide="end"):(preferredPos=view.state.selection.from,preferredSide="start"),view.lastKeyCode=null;var change=function(a,b,pos,preferredPos,preferredSide){var start=a.findDiffStart(b,pos);if(null==start)return null;var ref=a.findDiffEnd(b,pos+a.size,pos+b.size),endA=ref.a,endB=ref.b;return"end"==preferredSide&&(preferredPos-=endA+Math.max(0,start-Math.min(endA,endB))-start),endA<start&&a.size<b.size?(endB=(start-=preferredPos<=start&&preferredPos>=endA?start-preferredPos:0)+(endB-endA),endA=start):endB<start&&(endA=(start-=preferredPos<=start&&preferredPos>=endB?start-preferredPos:0)+(endA-endB),endB=start),{start:start,endA:endA,endB:endB}}(compare.content,parse.doc.content,parse.from,preferredPos,preferredSide);if(!change){if(!(typeOver&&sel instanceof module_8008f8e9_TextSelection&&!sel.empty&&sel.$head.sameParent(sel.$anchor))||view.composing||parse.sel&&parse.sel.anchor!=parse.sel.head){if((module_8008f8e9_result.ios&&view.lastIOSEnter>Date.now()-225||module_8008f8e9_result.android)&&addedNodes.some((function(n){return"DIV"==n.nodeName||"P"==n.nodeName}))&&view.someProp("handleKeyDown",(function(f){return f(view,module_8008f8e9_keyEvent(13,"Enter"))})))return void(view.lastIOSEnter=0);if(parse.sel){var sel$1=resolveSelection$1(view,view.state.doc,parse.sel);sel$1&&!sel$1.eq(view.state.selection)&&view.dispatch(view.state.tr.setSelection(sel$1))}return}change={start:sel.from,endA:sel.to,endB:sel.to}}view.domChangeCount++,view.state.selection.from<view.state.selection.to&&change.start==change.endB&&view.state.selection instanceof module_8008f8e9_TextSelection&&(change.start>view.state.selection.from&&change.start<=view.state.selection.from+2?change.start=view.state.selection.from:change.endA<view.state.selection.to&&change.endA>=view.state.selection.to-2&&(change.endB+=view.state.selection.to-change.endA,change.endA=view.state.selection.to)),module_8008f8e9_result.ie&&module_8008f8e9_result.ie_version<=11&&change.endB==change.start+1&&change.endA==change.start&&change.start>parse.from&&" "==parse.doc.textBetween(change.start-parse.from-1,change.start-parse.from+1)&&(change.start--,change.endA--,change.endB--);var nextSel,$from=parse.doc.resolveNoCache(change.start-parse.from),$to=parse.doc.resolveNoCache(change.endB-parse.from),inlineChange=$from.sameParent($to)&&$from.parent.inlineContent;if((module_8008f8e9_result.ios&&view.lastIOSEnter>Date.now()-225&&(!inlineChange||addedNodes.some((function(n){return"DIV"==n.nodeName||"P"==n.nodeName})))||!inlineChange&&$from.pos<parse.doc.content.size&&(nextSel=module_8008f8e9_Selection.findFrom(parse.doc.resolve($from.pos+1),1,!0))&&nextSel.head==$to.pos)&&view.someProp("handleKeyDown",(function(f){return f(view,module_8008f8e9_keyEvent(13,"Enter"))})))view.lastIOSEnter=0;else if(view.state.selection.anchor>change.start&&function(old,start,end,$newStart,$newEnd){if(!$newStart.parent.isTextblock||end-start<=$newEnd.pos-$newStart.pos||module_8008f8e9_skipClosingAndOpening($newStart,!0,!1)<$newEnd.pos)return!1;var $start=old.resolve(start);if($start.parentOffset<$start.parent.content.size||!$start.parent.isTextblock)return!1;var $next=old.resolve(module_8008f8e9_skipClosingAndOpening($start,!0,!0));return!(!$next.parent.isTextblock||$next.pos>end||module_8008f8e9_skipClosingAndOpening($next,!0,!1)<end)&&$newStart.parent.content.cut($newStart.parentOffset).eq($next.parent.content)}(doc,change.start,change.endA,$from,$to)&&view.someProp("handleKeyDown",(function(f){return f(view,module_8008f8e9_keyEvent(8,"Backspace"))})))module_8008f8e9_result.android&&module_8008f8e9_result.chrome&&view.domObserver.suppressSelectionUpdates();else{module_8008f8e9_result.chrome&&module_8008f8e9_result.android&&change.toB==change.from&&(view.lastAndroidDelete=Date.now()),module_8008f8e9_result.android&&!inlineChange&&$from.start()!=$to.start()&&0==$to.parentOffset&&$from.depth==$to.depth&&parse.sel&&parse.sel.anchor==parse.sel.head&&parse.sel.head==change.endA&&(change.endB-=2,$to=parse.doc.resolveNoCache(change.endB-parse.from),setTimeout((function(){view.someProp("handleKeyDown",(function(f){return f(view,module_8008f8e9_keyEvent(13,"Enter"))}))}),20));var tr,storedMarks,markChange,$from1,chFrom=change.start,chTo=change.endA;if(inlineChange)if($from.pos==$to.pos)module_8008f8e9_result.ie&&module_8008f8e9_result.ie_version<=11&&0==$from.parentOffset&&(view.domObserver.suppressSelectionUpdates(),setTimeout((function(){return module_8008f8e9_selectionToDOM(view)}),20)),tr=view.state.tr.delete(chFrom,chTo),storedMarks=doc.resolve(change.start).marksAcross(doc.resolve(change.endA));else if(change.endA==change.endB&&($from1=doc.resolve(change.start))&&(markChange=function(cur,prev){for(var type,mark,update,curMarks=cur.firstChild.marks,prevMarks=prev.firstChild.marks,added=curMarks,removed=prevMarks,i=0;i<prevMarks.length;i++)added=prevMarks[i].removeFromSet(added);for(var i$1=0;i$1<curMarks.length;i$1++)removed=curMarks[i$1].removeFromSet(removed);if(1==added.length&&0==removed.length)mark=added[0],type="add",update=function(node){return node.mark(mark.addToSet(node.marks))};else{if(0!=added.length||1!=removed.length)return null;mark=removed[0],type="remove",update=function(node){return node.mark(mark.removeFromSet(node.marks))}}for(var updated=[],i$2=0;i$2<prev.childCount;i$2++)updated.push(update(prev.child(i$2)));if(module_8008f8e9_Fragment.from(updated).eq(cur))return{mark:mark,type:type}}($from.parent.content.cut($from.parentOffset,$to.parentOffset),$from1.parent.content.cut($from1.parentOffset,change.endA-$from1.start()))))tr=view.state.tr,"add"==markChange.type?tr.addMark(chFrom,chTo,markChange.mark):tr.removeMark(chFrom,chTo,markChange.mark);else if($from.parent.child($from.index()).isText&&$from.index()==$to.index()-($to.textOffset?0:1)){var text$1=$from.parent.textBetween($from.parentOffset,$to.parentOffset);if(view.someProp("handleTextInput",(function(f){return f(view,chFrom,chTo,text$1)})))return;tr=view.state.tr.insertText(text$1,chFrom,chTo)}if(tr||(tr=view.state.tr.replace(chFrom,chTo,parse.doc.slice(change.start-parse.from,change.endB-parse.from))),parse.sel){var sel$2=resolveSelection$1(view,tr.doc,parse.sel);sel$2&&!(module_8008f8e9_result.chrome&&module_8008f8e9_result.android&&view.composing&&sel$2.empty&&(change.start!=change.endB||view.lastAndroidDelete<Date.now()-100)&&(sel$2.head==chFrom||sel$2.head==tr.mapping.map(chTo)-1)||module_8008f8e9_result.ie&&sel$2.empty&&sel$2.head==chFrom)&&tr.setSelection(sel$2)}storedMarks&&tr.ensureMarks(storedMarks),view.dispatch(tr.scrollIntoView())}}}(view,from,to,typeOver,added)})),view.domObserver.start(),view.domChangeCount=0,view.eventHandlers=Object.create(null);var loop=function(event){var handler=module_8008f8e9_handlers[event];view.dom.addEventListener(event,view.eventHandlers[event]=function(event){!function(view,event){if(!event.bubbles)return!0;if(event.defaultPrevented)return!1;for(var node=event.target;node!=view.dom;node=node.parentNode)if(!node||11==node.nodeType||node.pmViewDesc&&node.pmViewDesc.stopEvent(event))return!1;return!0}(view,event)||module_8008f8e9_runCustomHandler(view,event)||!view.editable&&event.type in module_8008f8e9_editHandlers||handler(view,event)})};for(var event in module_8008f8e9_handlers)loop(event);module_8008f8e9_result.safari&&view.dom.addEventListener("input",(function(){return null})),module_8008f8e9_ensureListeners(view)}(this),this.pluginViews=[],this.updatePluginViews()},module_8008f8e9_prototypeAccessors$2={props:{configurable:!0},root:{configurable:!0}};function module_8008f8e9_computeDocDeco(view){var attrs=Object.create(null);return attrs.class="ProseMirror",attrs.contenteditable=String(view.editable),view.someProp("attributes",(function(value){if("function"==typeof value&&(value=value(view.state)),value)for(var attr in value)"class"==attr?attrs.class+=" "+value[attr]:attrs[attr]||"contenteditable"==attr||"nodeName"==attr||(attrs[attr]=String(value[attr]))})),[Decoration$2.node(0,view.state.doc.content.size,attrs)]}function module_8008f8e9_updateCursorWrapper(view){if(view.markCursor){var dom=document.createElement("img");dom.setAttribute("mark-placeholder","true"),view.cursorWrapper={dom:dom,deco:Decoration$2.widget(view.state.selection.head,dom,{raw:!0,marks:view.markCursor})}}else view.cursorWrapper=null}function module_8008f8e9_getEditable(view){return!view.someProp("editable",(function(value){return!1===value(view.state)}))}function module_8008f8e9_buildNodeViews(view){var result={};return view.someProp("nodeViews",(function(obj){for(var prop in obj)Object.prototype.hasOwnProperty.call(result,prop)||(result[prop]=obj[prop])})),result}module_8008f8e9_prototypeAccessors$2.props.get=function(){if(this._props.state!=this.state){var prev=this._props;for(var name in this._props={},prev)this._props[name]=prev[name];this._props.state=this.state}return this._props},module_8008f8e9_EditorView.prototype.update=function(props){props.handleDOMEvents!=this._props.handleDOMEvents&&module_8008f8e9_ensureListeners(this),this._props=props,this.updateStateInner(props.state,!0)},module_8008f8e9_EditorView.prototype.setProps=function(props){var updated={};for(var name in this._props)updated[name]=this._props[name];for(var name$1 in updated.state=this.state,props)updated[name$1]=props[name$1];this.update(updated)},module_8008f8e9_EditorView.prototype.updateState=function(state){this.updateStateInner(state,this.state.plugins!=state.plugins)},module_8008f8e9_EditorView.prototype.updateStateInner=function(state,reconfigured){var this$1$1=this,prev=this.state,redraw=!1,updateSel=!1;if(state.storedMarks&&this.composing&&(module_8008f8e9_clearComposition(this),updateSel=!0),this.state=state,reconfigured){var nodeViews=module_8008f8e9_buildNodeViews(this);(function(a,b){var nA=0,nB=0;for(var prop in a){if(a[prop]!=b[prop])return!0;nA++}for(var _ in b)nB++;return nA!=nB})(nodeViews,this.nodeViews)&&(this.nodeViews=nodeViews,redraw=!0),module_8008f8e9_ensureListeners(this)}this.editable=module_8008f8e9_getEditable(this),module_8008f8e9_updateCursorWrapper(this);var innerDeco=module_8008f8e9_viewDecorations(this),outerDeco=module_8008f8e9_computeDocDeco(this),scroll=reconfigured?"reset":state.scrollToSelection>prev.scrollToSelection?"to selection":"preserve",updateDoc=redraw||!this.docView.matchesNode(state.doc,outerDeco,innerDeco);!updateDoc&&state.selection.eq(prev.selection)||(updateSel=!0);var anchorDOM,domSel,sel1,sel2,depth,ref,refDOM,refTop,newRefTop,oldScrollPos="preserve"==scroll&&updateSel&&null==this.dom.style.overflowAnchor&&function(view){for(var refDOM,refTop,rect=view.dom.getBoundingClientRect(),startY=Math.max(0,rect.top),x=(rect.left+rect.right)/2,y=startY+1;y<Math.min(innerHeight,rect.bottom);y+=5){var dom=view.root.elementFromPoint(x,y);if(dom!=view.dom&&view.dom.contains(dom)){var localRect=dom.getBoundingClientRect();if(localRect.top>=startY-20){refDOM=dom,refTop=localRect.top;break}}}return{refDOM:refDOM,refTop:refTop,stack:module_8008f8e9_scrollStack(view.dom)}}(this);if(updateSel){this.domObserver.stop();var forceSelUpdate=updateDoc&&(module_8008f8e9_result.ie||module_8008f8e9_result.chrome)&&!this.composing&&!prev.selection.empty&&!state.selection.empty&&(sel1=prev.selection,sel2=state.selection,depth=Math.min(sel1.$anchor.sharedDepth(sel1.head),sel2.$anchor.sharedDepth(sel2.head)),sel1.$anchor.start(depth)!=sel2.$anchor.start(depth));if(updateDoc){var chromeKludge=module_8008f8e9_result.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!redraw&&this.docView.update(state.doc,outerDeco,innerDeco,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=module_8008f8e9_docViewDesc(state.doc,outerDeco,innerDeco,this.dom,this)),chromeKludge&&!this.trackWrites&&(forceSelUpdate=!0)}forceSelUpdate||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(anchorDOM=this.docView.domFromPos(this.state.selection.anchor,0),domSel=this.root.getSelection(),module_8008f8e9_isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)))?module_8008f8e9_selectionToDOM(this,forceSelUpdate):(module_8008f8e9_syncNodeSelection(this,state.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(prev),"reset"==scroll)this.dom.scrollTop=0;else if("to selection"==scroll){var startDOM=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(f){return f(this$1$1)}))||(state.selection instanceof module_8008f8e9_NodeSelection?module_8008f8e9_scrollRectIntoView(this,this.docView.domAfterPos(state.selection.from).getBoundingClientRect(),startDOM):module_8008f8e9_scrollRectIntoView(this,this.coordsAtPos(state.selection.head,1),startDOM))}else oldScrollPos&&(refDOM=(ref=oldScrollPos).refDOM,refTop=ref.refTop,module_8008f8e9_restoreScrollStack(ref.stack,0==(newRefTop=refDOM?refDOM.getBoundingClientRect().top:0)?0:newRefTop-refTop))},module_8008f8e9_EditorView.prototype.destroyPluginViews=function(){for(var view;view=this.pluginViews.pop();)view.destroy&&view.destroy()},module_8008f8e9_EditorView.prototype.updatePluginViews=function(prevState){if(prevState&&prevState.plugins==this.state.plugins)for(var i$1=0;i$1<this.pluginViews.length;i$1++){var pluginView=this.pluginViews[i$1];pluginView.update&&pluginView.update(this,prevState)}else{this.destroyPluginViews();for(var i=0;i<this.state.plugins.length;i++){var plugin=this.state.plugins[i];plugin.spec.view&&this.pluginViews.push(plugin.spec.view(this))}}},module_8008f8e9_EditorView.prototype.someProp=function(propName,f){var value,prop=this._props&&this._props[propName];if(null!=prop&&(value=f?f(prop):prop))return value;var plugins=this.state.plugins;if(plugins)for(var i=0;i<plugins.length;i++){var prop$1=plugins[i].props[propName];if(null!=prop$1&&(value=f?f(prop$1):prop$1))return value}},module_8008f8e9_EditorView.prototype.hasFocus=function(){return this.root.activeElement==this.dom},module_8008f8e9_EditorView.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(dom){if(dom.setActive)return dom.setActive();if(module_8008f8e9_preventScrollSupported)return dom.focus(module_8008f8e9_preventScrollSupported);var stored=module_8008f8e9_scrollStack(dom);dom.focus(null==module_8008f8e9_preventScrollSupported?{get preventScroll(){return module_8008f8e9_preventScrollSupported={preventScroll:!0},!0}}:void 0),module_8008f8e9_preventScrollSupported||(module_8008f8e9_preventScrollSupported=!1,module_8008f8e9_restoreScrollStack(stored,0))}(this.dom),module_8008f8e9_selectionToDOM(this),this.domObserver.start()},module_8008f8e9_prototypeAccessors$2.root.get=function(){var cached=this._root;if(null==cached)for(var search=this.dom.parentNode;search;search=search.parentNode)if(9==search.nodeType||11==search.nodeType&&search.host)return search.getSelection||(Object.getPrototypeOf(search).getSelection=function(){return document.getSelection()}),this._root=search;return cached||document},module_8008f8e9_EditorView.prototype.posAtCoords=function(coords){return module_8008f8e9_posAtCoords(this,coords)},module_8008f8e9_EditorView.prototype.coordsAtPos=function(pos,side){return void 0===side&&(side=1),module_8008f8e9_coordsAtPos(this,pos,side)},module_8008f8e9_EditorView.prototype.domAtPos=function(pos,side){return void 0===side&&(side=0),this.docView.domFromPos(pos,side)},module_8008f8e9_EditorView.prototype.nodeDOM=function(pos){var desc=this.docView.descAt(pos);return desc?desc.nodeDOM:null},module_8008f8e9_EditorView.prototype.posAtDOM=function(node,offset,bias){void 0===bias&&(bias=-1);var pos=this.docView.posFromDOM(node,offset,bias);if(null==pos)throw new RangeError("DOM position not inside the editor");return pos},module_8008f8e9_EditorView.prototype.endOfTextblock=function(dir,state){return function(view,state,dir){return module_8008f8e9_cachedState==state&&module_8008f8e9_cachedDir==dir?module_8008f8e9_cachedResult:(module_8008f8e9_cachedState=state,module_8008f8e9_cachedDir=dir,module_8008f8e9_cachedResult="up"==dir||"down"==dir?function(view,state,dir){var sel=state.selection,$pos="up"==dir?sel.$from:sel.$to;return module_8008f8e9_withFlushedState(view,state,(function(){for(var dom=view.docView.domFromPos($pos.pos,"up"==dir?-1:1).node;;){var nearest=view.docView.nearestDesc(dom,!0);if(!nearest)break;if(nearest.node.isBlock){dom=nearest.dom;break}dom=nearest.dom.parentNode}for(var coords=module_8008f8e9_coordsAtPos(view,$pos.pos,1),child=dom.firstChild;child;child=child.nextSibling){var boxes=void 0;if(1==child.nodeType)boxes=child.getClientRects();else{if(3!=child.nodeType)continue;boxes=module_8008f8e9_textRange(child,0,child.nodeValue.length).getClientRects()}for(var i=0;i<boxes.length;i++){var box=boxes[i];if(box.bottom>box.top&&("up"==dir?box.bottom<coords.top+1:box.top>coords.bottom-1))return!1}}return!0}))}(view,state,dir):function(view,state,dir){var $head=state.selection.$head;if(!$head.parent.isTextblock)return!1;var offset=$head.parentOffset,atStart=!offset,atEnd=offset==$head.parent.content.size,sel=getSelection();return module_8008f8e9_maybeRTL.test($head.parent.textContent)&&sel.modify?module_8008f8e9_withFlushedState(view,state,(function(){var oldRange=sel.getRangeAt(0),oldNode=sel.focusNode,oldOff=sel.focusOffset,oldBidiLevel=sel.caretBidiLevel;sel.modify("move",dir,"character");var result=!($head.depth?view.docView.domAfterPos($head.before()):view.dom).contains(1==sel.focusNode.nodeType?sel.focusNode:sel.focusNode.parentNode)||oldNode==sel.focusNode&&oldOff==sel.focusOffset;return sel.removeAllRanges(),sel.addRange(oldRange),null!=oldBidiLevel&&(sel.caretBidiLevel=oldBidiLevel),result})):"left"==dir||"backward"==dir?atStart:atEnd}(view,state,dir))}(this,state||this.state,dir)},module_8008f8e9_EditorView.prototype.destroy=function(){this.docView&&(function(view){for(var type in view.domObserver.stop(),view.eventHandlers)view.dom.removeEventListener(type,view.eventHandlers[type]);clearTimeout(view.composingTimeout),clearTimeout(view.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],module_8008f8e9_viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},module_8008f8e9_EditorView.prototype.dispatchEvent=function(event){return function(view,event){module_8008f8e9_runCustomHandler(view,event)||!module_8008f8e9_handlers[event.type]||!view.editable&&event.type in module_8008f8e9_editHandlers||module_8008f8e9_handlers[event.type](view,event)}(this,event)},module_8008f8e9_EditorView.prototype.dispatch=function(tr){var dispatchTransaction=this._props.dispatchTransaction;dispatchTransaction?dispatchTransaction.call(this,tr):this.updateState(this.state.apply(tr))},Object.defineProperties(module_8008f8e9_EditorView.prototype,module_8008f8e9_prototypeAccessors$2);var module_8008f8e9_base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},module_8008f8e9_shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},module_8008f8e9_chrome="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent);"undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),"undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent);var mac$1="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);"undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),module_8008f8e9_chrome&&(mac$1||module_8008f8e9_chrome[1]);for(var module_8008f8e9_i=0;module_8008f8e9_i<10;module_8008f8e9_i++)module_8008f8e9_base[48+module_8008f8e9_i]=module_8008f8e9_base[96+module_8008f8e9_i]=String(module_8008f8e9_i);for(module_8008f8e9_i=1;module_8008f8e9_i<=24;module_8008f8e9_i++)module_8008f8e9_base[module_8008f8e9_i+111]="F"+module_8008f8e9_i;for(module_8008f8e9_i=65;module_8008f8e9_i<=90;module_8008f8e9_i++)module_8008f8e9_base[module_8008f8e9_i]=String.fromCharCode(module_8008f8e9_i+32),module_8008f8e9_shift[module_8008f8e9_i]=String.fromCharCode(module_8008f8e9_i);for(var module_8008f8e9_code in module_8008f8e9_base)module_8008f8e9_shift.hasOwnProperty(module_8008f8e9_code)||(module_8008f8e9_shift[module_8008f8e9_code]=module_8008f8e9_base[module_8008f8e9_code]);"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);var module_8008f8e9_InputRule=function(match,handler){var string;this.match=match,this.handler="string"==typeof handler?(string=handler,function(state,match,start,end){var insert=string;if(match[1]){var offset=match[0].lastIndexOf(match[1]);insert+=match[0].slice(offset+match[1].length);var cutOff=(start+=offset)-end;cutOff>0&&(insert=match[0].slice(offset-cutOff,offset)+insert,start=end)}return state.tr.insertText(insert,start,end)}):handler};function module_8008f8e9_wrappingInputRule(regexp,nodeType,getAttrs,joinPredicate){return new module_8008f8e9_InputRule(regexp,(function(state,match,start,end){var attrs=getAttrs instanceof Function?getAttrs(match):getAttrs,tr=state.tr.delete(start,end),range=tr.doc.resolve(start).blockRange(),wrapping=range&&module_8008f8e9_findWrapping(range,nodeType,attrs);if(!wrapping)return null;tr.wrap(range,wrapping);var before=tr.doc.resolve(start-1).nodeBefore;return before&&before.type==nodeType&&module_8008f8e9_canJoin(tr.doc,start-1)&&(!joinPredicate||joinPredicate(match,before))&&tr.join(start-1),tr}))}function deleteSelection$2(state,dispatch){return!state.selection.empty&&(dispatch&&dispatch(state.tr.deleteSelection().scrollIntoView()),!0)}function joinBackward$2(state,dispatch,view){var $cursor=state.selection.$cursor;if(!$cursor||(view?!view.endOfTextblock("backward",state):$cursor.parentOffset>0))return!1;var $cut=module_8008f8e9_findCutBefore($cursor);if(!$cut){var range=$cursor.blockRange(),target=range&&module_8008f8e9_liftTarget(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}var before=$cut.nodeBefore;if(!before.type.spec.isolating&&module_8008f8e9_deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(module_8008f8e9_textblockAt(before,"end")||module_8008f8e9_NodeSelection.isSelectable(before))){if(dispatch){var tr=state.tr.deleteRange($cursor.before(),$cursor.after());tr.setSelection(module_8008f8e9_textblockAt(before,"end")?module_8008f8e9_Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos,-1)),-1):module_8008f8e9_NodeSelection.create(tr.doc,$cut.pos-before.nodeSize)),dispatch(tr.scrollIntoView())}return!0}return!(!before.isAtom||$cut.depth!=$cursor.depth-1||(dispatch&&dispatch(state.tr.delete($cut.pos-before.nodeSize,$cut.pos).scrollIntoView()),0))}function module_8008f8e9_textblockAt(node,side,only){for(;node;node="start"==side?node.firstChild:node.lastChild){if(node.isTextblock)return!0;if(only&&1!=node.childCount)return!1}return!1}function selectNodeBackward$2(state,dispatch,view){var ref=state.selection,$head=ref.$head,$cut=$head;if(!ref.empty)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("backward",state):$head.parentOffset>0)return!1;$cut=module_8008f8e9_findCutBefore($head)}var node=$cut&&$cut.nodeBefore;return!(!node||!module_8008f8e9_NodeSelection.isSelectable(node)||(dispatch&&dispatch(state.tr.setSelection(module_8008f8e9_NodeSelection.create(state.doc,$cut.pos-node.nodeSize)).scrollIntoView()),0))}function module_8008f8e9_findCutBefore($pos){if(!$pos.parent.type.spec.isolating)for(var i=$pos.depth-1;i>=0;i--){if($pos.index(i)>0)return $pos.doc.resolve($pos.before(i+1));if($pos.node(i).type.spec.isolating)break}return null}function joinForward$2(state,dispatch,view){var $cursor=state.selection.$cursor;if(!$cursor||(view?!view.endOfTextblock("forward",state):$cursor.parentOffset<$cursor.parent.content.size))return!1;var $cut=module_8008f8e9_findCutAfter($cursor);if(!$cut)return!1;var after=$cut.nodeAfter;if(module_8008f8e9_deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(module_8008f8e9_textblockAt(after,"start")||module_8008f8e9_NodeSelection.isSelectable(after))){if(dispatch){var tr=state.tr.deleteRange($cursor.before(),$cursor.after());tr.setSelection(module_8008f8e9_textblockAt(after,"start")?module_8008f8e9_Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos)),1):module_8008f8e9_NodeSelection.create(tr.doc,tr.mapping.map($cut.pos))),dispatch(tr.scrollIntoView())}return!0}return!(!after.isAtom||$cut.depth!=$cursor.depth-1||(dispatch&&dispatch(state.tr.delete($cut.pos,$cut.pos+after.nodeSize).scrollIntoView()),0))}function selectNodeForward$2(state,dispatch,view){var ref=state.selection,$head=ref.$head,$cut=$head;if(!ref.empty)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("forward",state):$head.parentOffset<$head.parent.content.size)return!1;$cut=module_8008f8e9_findCutAfter($head)}var node=$cut&&$cut.nodeAfter;return!(!node||!module_8008f8e9_NodeSelection.isSelectable(node)||(dispatch&&dispatch(state.tr.setSelection(module_8008f8e9_NodeSelection.create(state.doc,$cut.pos)).scrollIntoView()),0))}function module_8008f8e9_findCutAfter($pos){if(!$pos.parent.type.spec.isolating)for(var i=$pos.depth-1;i>=0;i--){var parent=$pos.node(i);if($pos.index(i)+1<parent.childCount)return $pos.doc.resolve($pos.after(i+1));if(parent.type.spec.isolating)break}return null}function lift$2(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to),target=range&&module_8008f8e9_liftTarget(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}function newlineInCode$2(state,dispatch){var ref=state.selection,$head=ref.$head,$anchor=ref.$anchor;return!(!$head.parent.type.spec.code||!$head.sameParent($anchor)||(dispatch&&dispatch(state.tr.insertText("\n").scrollIntoView()),0))}function defaultBlockAt$1(match){for(var i=0;i<match.edgeCount;i++){var type=match.edge(i).type;if(type.isTextblock&&!type.hasRequiredAttrs())return type}return null}function exitCode$2(state,dispatch){var ref=state.selection,$head=ref.$head,$anchor=ref.$anchor;if(!$head.parent.type.spec.code||!$head.sameParent($anchor))return!1;var above=$head.node(-1),after=$head.indexAfter(-1),type=defaultBlockAt$1(above.contentMatchAt(after));if(!above.canReplaceWith(after,after,type))return!1;if(dispatch){var pos=$head.after(),tr=state.tr.replaceWith(pos,pos,type.createAndFill());tr.setSelection(module_8008f8e9_Selection.near(tr.doc.resolve(pos),1)),dispatch(tr.scrollIntoView())}return!0}function createParagraphNear$2(state,dispatch){var sel=state.selection,$from=sel.$from,$to=sel.$to;if(sel instanceof module_8008f8e9_AllSelection||$from.parent.inlineContent||$to.parent.inlineContent)return!1;var type=defaultBlockAt$1($to.parent.contentMatchAt($to.indexAfter()));if(!type||!type.isTextblock)return!1;if(dispatch){var side=(!$from.parentOffset&&$to.index()<$to.parent.childCount?$from:$to).pos,tr=state.tr.insert(side,type.createAndFill());tr.setSelection(module_8008f8e9_TextSelection.create(tr.doc,side+1)),dispatch(tr.scrollIntoView())}return!0}function liftEmptyBlock$2(state,dispatch){var $cursor=state.selection.$cursor;if(!$cursor||$cursor.parent.content.size)return!1;if($cursor.depth>1&&$cursor.after()!=$cursor.end(-1)){var before=$cursor.before();if(module_8008f8e9_canSplit(state.doc,before))return dispatch&&dispatch(state.tr.split(before).scrollIntoView()),!0}var range=$cursor.blockRange(),target=range&&module_8008f8e9_liftTarget(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}function selectAll$2(state,dispatch){return dispatch&&dispatch(state.tr.setSelection(new module_8008f8e9_AllSelection(state.doc))),!0}function module_8008f8e9_deleteBarrier(state,$cut,dispatch){var conn,match,before=$cut.nodeBefore,after=$cut.nodeAfter;if(before.type.spec.isolating||after.type.spec.isolating)return!1;if(function(state,$pos,dispatch){var before=$pos.nodeBefore,after=$pos.nodeAfter,index=$pos.index();return!(!(before&&after&&before.type.compatibleContent(after.type))||(!before.content.size&&$pos.parent.canReplace(index-1,index)?(dispatch&&dispatch(state.tr.delete($pos.pos-before.nodeSize,$pos.pos).scrollIntoView()),0):!$pos.parent.canReplace(index,index+1)||!after.isTextblock&&!module_8008f8e9_canJoin(state.doc,$pos.pos)||(dispatch&&dispatch(state.tr.clearIncompatible($pos.pos,before.type,before.contentMatchAt(before.childCount)).join($pos.pos).scrollIntoView()),0)))}(state,$cut,dispatch))return!0;var canDelAfter=$cut.parent.canReplace($cut.index(),$cut.index()+1);if(canDelAfter&&(conn=(match=before.contentMatchAt(before.childCount)).findWrapping(after.type))&&match.matchType(conn[0]||after.type).validEnd){if(dispatch){for(var end=$cut.pos+after.nodeSize,wrap=module_8008f8e9_Fragment.empty,i=conn.length-1;i>=0;i--)wrap=module_8008f8e9_Fragment.from(conn[i].create(null,wrap));wrap=module_8008f8e9_Fragment.from(before.copy(wrap));var tr=state.tr.step(new module_8008f8e9_ReplaceAroundStep($cut.pos-1,end,$cut.pos,end,new module_8008f8e9_Slice(wrap,1,0),conn.length,!0)),joinAt=end+2*conn.length;module_8008f8e9_canJoin(tr.doc,joinAt)&&tr.join(joinAt),dispatch(tr.scrollIntoView())}return!0}var selAfter=module_8008f8e9_Selection.findFrom($cut,1),range=selAfter&&selAfter.$from.blockRange(selAfter.$to),target=range&&module_8008f8e9_liftTarget(range);if(null!=target&&target>=$cut.depth)return dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0;if(canDelAfter&&module_8008f8e9_textblockAt(after,"start",!0)&&module_8008f8e9_textblockAt(before,"end")){for(var at=before,wrap$1=[];wrap$1.push(at),!at.isTextblock;)at=at.lastChild;for(var afterText=after,afterDepth=1;!afterText.isTextblock;afterText=afterText.firstChild)afterDepth++;if(at.canReplace(at.childCount,at.childCount,afterText.content)){if(dispatch){for(var end$1=module_8008f8e9_Fragment.empty,i$1=wrap$1.length-1;i$1>=0;i$1--)end$1=module_8008f8e9_Fragment.from(wrap$1[i$1].copy(end$1));dispatch(state.tr.step(new module_8008f8e9_ReplaceAroundStep($cut.pos-wrap$1.length,$cut.pos+after.nodeSize,$cut.pos+afterDepth,$cut.pos+after.nodeSize-afterDepth,new module_8008f8e9_Slice(end$1,wrap$1.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function wrapIn$2(nodeType,attrs){return function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to),wrapping=range&&module_8008f8e9_findWrapping(range,nodeType,attrs);return!!wrapping&&(dispatch&&dispatch(state.tr.wrap(range,wrapping).scrollIntoView()),!0)}}function module_8008f8e9_chainCommands(){for(var commands=[],len=arguments.length;len--;)commands[len]=arguments[len];return function(state,dispatch,view){for(var i=0;i<commands.length;i++)if(commands[i](state,dispatch,view))return!0;return!1}}new module_8008f8e9_InputRule(/--$/,""),new module_8008f8e9_InputRule(/\.\.\.$/,""),new module_8008f8e9_InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new module_8008f8e9_InputRule(/"$/,""),new module_8008f8e9_InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new module_8008f8e9_InputRule(/'$/,"");var module_8008f8e9_backspace=module_8008f8e9_chainCommands(deleteSelection$2,joinBackward$2,selectNodeBackward$2),module_8008f8e9_del=module_8008f8e9_chainCommands(deleteSelection$2,joinForward$2,selectNodeForward$2),module_8008f8e9_pcBaseKeymap={Enter:module_8008f8e9_chainCommands(newlineInCode$2,createParagraphNear$2,liftEmptyBlock$2,(function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to;if(state.selection instanceof module_8008f8e9_NodeSelection&&state.selection.node.isBlock)return!(!$from.parentOffset||!module_8008f8e9_canSplit(state.doc,$from.pos)||(dispatch&&dispatch(state.tr.split($from.pos).scrollIntoView()),0));if(!$from.parent.isBlock)return!1;if(dispatch){var atEnd=$to.parentOffset==$to.parent.content.size,tr=state.tr;(state.selection instanceof module_8008f8e9_TextSelection||state.selection instanceof module_8008f8e9_AllSelection)&&tr.deleteSelection();var deflt=0==$from.depth?null:defaultBlockAt$1($from.node(-1).contentMatchAt($from.indexAfter(-1))),types=atEnd&&deflt?[{type:deflt}]:null,can=module_8008f8e9_canSplit(tr.doc,tr.mapping.map($from.pos),1,types);if(types||can||!module_8008f8e9_canSplit(tr.doc,tr.mapping.map($from.pos),1,deflt&&[{type:deflt}])||(types=[{type:deflt}],can=!0),can&&(tr.split(tr.mapping.map($from.pos),1,types),!atEnd&&!$from.parentOffset&&$from.parent.type!=deflt)){var first=tr.mapping.map($from.before()),$first=tr.doc.resolve(first);$from.node(-1).canReplaceWith($first.index(),$first.index()+1,deflt)&&tr.setNodeMarkup(tr.mapping.map($from.before()),deflt)}dispatch(tr.scrollIntoView())}return!0})),"Mod-Enter":exitCode$2,Backspace:module_8008f8e9_backspace,"Mod-Backspace":module_8008f8e9_backspace,Delete:module_8008f8e9_del,"Mod-Delete":module_8008f8e9_del,"Mod-a":selectAll$2},module_8008f8e9_macBaseKeymap={"Ctrl-h":module_8008f8e9_pcBaseKeymap.Backspace,"Alt-Backspace":module_8008f8e9_pcBaseKeymap["Mod-Backspace"],"Ctrl-d":module_8008f8e9_pcBaseKeymap.Delete,"Ctrl-Alt-Backspace":module_8008f8e9_pcBaseKeymap["Mod-Delete"],"Alt-Delete":module_8008f8e9_pcBaseKeymap["Mod-Delete"],"Alt-d":module_8008f8e9_pcBaseKeymap["Mod-Delete"]};for(var module_8008f8e9_key in module_8008f8e9_pcBaseKeymap)module_8008f8e9_macBaseKeymap[module_8008f8e9_key]=module_8008f8e9_pcBaseKeymap[module_8008f8e9_key];function module_8008f8e9_getSchemaTypeNameByName(name,schema){return schema.nodes[name]?"node":schema.marks[name]?"mark":null}function module_8008f8e9_getNodeType(nameOrType,schema){if("string"==typeof nameOrType){if(!schema.nodes[nameOrType])throw Error("There is no node type named '"+nameOrType+"'. Maybe you forgot to add the extension?");return schema.nodes[nameOrType]}return nameOrType}function module_8008f8e9_getMarkType(nameOrType,schema){if("string"==typeof nameOrType){if(!schema.marks[nameOrType])throw Error("There is no mark type named '"+nameOrType+"'. Maybe you forgot to add the extension?");return schema.marks[nameOrType]}return nameOrType}function module_8008f8e9_objectIncludes(object1,object2){var keys=Object.keys(object2);return!keys.length||!!keys.filter((function(key){return object2[key]===object1[key]})).length}function module_8008f8e9_isNodeActive(state,typeOrName,attributes){void 0===attributes&&(attributes={});var _state$selection3=state.selection,from=_state$selection3.from,to=_state$selection3.to,empty=_state$selection3.empty,type=typeOrName?module_8008f8e9_getNodeType(typeOrName,state.schema):null,nodeRanges=[];if(state.doc.nodesBetween(from,to,(function(node,pos){if(!node.isText){var relativeFrom=Math.max(from,pos),relativeTo=Math.min(to,pos+node.nodeSize);nodeRanges=[].concat(nodeRanges,[{node:node,from:relativeFrom,to:relativeTo}])}})),empty)return!!nodeRanges.filter((function(nodeRange){return!type||type.name===nodeRange.node.type.name})).find((function(nodeRange){return module_8008f8e9_objectIncludes(nodeRange.node.attrs,attributes)}));var selectionRange=to-from;return nodeRanges.filter((function(nodeRange){return!type||type.name===nodeRange.node.type.name})).filter((function(nodeRange){return module_8008f8e9_objectIncludes(nodeRange.node.attrs,attributes)})).reduce((function(sum,nodeRange){return sum+(nodeRange.to-nodeRange.from)}),0)>=selectionRange}function module_8008f8e9_elementFromString(value){var wrappedValue="<body>"+value+"</body>";return(new window.DOMParser).parseFromString(wrappedValue,"text/html").body}function module_8008f8e9_createNodeFromContent(content,schema,options){if(options=extends_default()({slice:!0,parseOptions:{}},options),"object"==typeof content&&null!==content)try{return Array.isArray(content)?module_8008f8e9_Fragment.fromArray(content.map((function(item){return schema.nodeFromJSON(item)}))):schema.nodeFromJSON(content)}catch(error){return console.warn("[tiptap warn]: Invalid content.","Passed value:",content,"Error:",error),module_8008f8e9_createNodeFromContent("",schema,options)}if("string"==typeof content){var parser=module_8008f8e9_DOMParser.fromSchema(schema);return options.slice?parser.parseSlice(module_8008f8e9_elementFromString(content),options.parseOptions).content:parser.parse(module_8008f8e9_elementFromString(content),options.parseOptions)}return module_8008f8e9_createNodeFromContent("",schema,options)}function module_8008f8e9_getExtensionField(extension,field,context){return void 0===context&&(context={}),void 0===extension.config[field]&&extension.parent?module_8008f8e9_getExtensionField(extension.parent,field,context):"function"==typeof extension.config[field]?extension.config[field].bind(extends_default()({},context,{parent:extension.parent?module_8008f8e9_getExtensionField(extension.parent,field,context):null})):extension.config[field]}function module_8008f8e9_mergeAttributes(){for(var _len=arguments.length,objects=new Array(_len),_key=0;_key<_len;_key++)objects[_key]=arguments[_key];return objects.filter((function(item){return!!item})).reduce((function(items,item){var mergedAttributes=extends_default()({},items);return Object.entries(item).forEach((function(_ref7){var key=_ref7[0],value=_ref7[1];mergedAttributes[key]?mergedAttributes[key]="class"===key?[mergedAttributes[key],value].join(" "):"style"===key?[mergedAttributes[key],value].join("; "):value:mergedAttributes[key]=value})),mergedAttributes}),{})}function module_8008f8e9_isPlainObject(payload){return"Object"===function(payload){return Object.prototype.toString.call(payload).slice(8,-1)}(payload)&&payload.constructor===Object&&Object.getPrototypeOf(payload)===Object.prototype}function module_8008f8e9_mergeDeep(target,source){var output=extends_default()({},target);return module_8008f8e9_isPlainObject(target)&&module_8008f8e9_isPlainObject(source)&&Object.keys(source).forEach((function(key){var _Object$assign,_Object$assign2;module_8008f8e9_isPlainObject(source[key])?key in target?output[key]=module_8008f8e9_mergeDeep(target[key],source[key]):Object.assign(output,((_Object$assign={})[key]=source[key],_Object$assign)):Object.assign(output,((_Object$assign2={})[key]=source[key],_Object$assign2))})),output}"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();var module_8008f8e9_Extension=function(){function Extension(config){void 0===config&&(config={}),this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=extends_default()({},this.config,config),this.name=this.config.name,this.options=this.config.defaultOptions}Extension.create=function(config){return void 0===config&&(config={}),new Extension(config)};var _proto3=Extension.prototype;return _proto3.configure=function(options){void 0===options&&(options={});var extension=this.extend();return extension.options=module_8008f8e9_mergeDeep(this.options,options),extension},_proto3.extend=function(extendedConfig){void 0===extendedConfig&&(extendedConfig={});var extension=new Extension(extendedConfig);return extension.parent=this,this.child=extension,extension.name=extendedConfig.name?extendedConfig.name:extension.parent.name,extension.options=extendedConfig.defaultOptions?extendedConfig.defaultOptions:extension.parent.options,extension},Extension}();module_8008f8e9_Extension.create({name:"editable",addProseMirrorPlugins:function(){var _this11=this;return[new module_8008f8e9_Plugin({key:new module_8008f8e9_PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:function(){var editor=_this11.editor,_editor$state$selecti=editor.state.selection;return function(editor,from,to,blockSeparator,leafText){var text="",separated=!0;return editor.state.doc.nodesBetween(from,to,(function(node,pos){var _a,textSerializer=editor.extensionManager.textSerializers[node.type.name];textSerializer?(text+=textSerializer({node:node}),separated=!1):node.isText?(text+=null===(_a=null==node?void 0:node.text)||void 0===_a?void 0:_a.slice(Math.max(from,pos)-pos,to-pos),separated=!1):(node.isLeaf,!separated&&node.isBlock&&(text+="\n",separated=!0))}),0),text}(editor,_editor$state$selecti.from,_editor$state$selecti.to)}}})]}});var module_8008f8e9_blur$1=Object.freeze({__proto__:null,blur:function(){return function(_ref13){return _ref13.view.dom.blur(),!0}}}),module_8008f8e9_clearContent$1=Object.freeze({__proto__:null,clearContent:function(emitUpdate){return void 0===emitUpdate&&(emitUpdate=!1),function(_ref14){return _ref14.commands.setContent("",emitUpdate)}}}),module_8008f8e9_clearNodes$1=Object.freeze({__proto__:null,clearNodes:function(){return function(_ref15){var state=_ref15.state,tr=_ref15.tr,dispatch=_ref15.dispatch;return tr.selection.ranges.forEach((function(range){state.doc.nodesBetween(range.$from.pos,range.$to.pos,(function(node,pos){if(!node.type.isText){var $fromPos=tr.doc.resolve(tr.mapping.map(pos)),$toPos=tr.doc.resolve(tr.mapping.map(pos+node.nodeSize)),nodeRange=$fromPos.blockRange($toPos);if(nodeRange){var targetLiftDepth=module_8008f8e9_liftTarget(nodeRange);if(node.type.isTextblock&&dispatch){var defaultType=$fromPos.parent.contentMatchAt($fromPos.index()).defaultType;tr.setNodeMarkup(nodeRange.start,defaultType)}(targetLiftDepth||0===targetLiftDepth)&&dispatch&&tr.lift(nodeRange,targetLiftDepth)}}}))})),!0}}}),module_8008f8e9_command$1=Object.freeze({__proto__:null,command:function(fn){return function(props){return fn(props)}}}),module_8008f8e9_createParagraphNear$1=Object.freeze({__proto__:null,createParagraphNear:function(){return function(_ref16){return createParagraphNear$2(_ref16.state,_ref16.dispatch)}}}),module_8008f8e9_deleteRange$1=Object.freeze({__proto__:null,deleteRange:function(range){return function(_ref17){var tr=_ref17.tr,dispatch=_ref17.dispatch,from=range.from,to=range.to;return dispatch&&tr.delete(from,to),!0}}}),module_8008f8e9_deleteSelection$1=Object.freeze({__proto__:null,deleteSelection:function(){return function(_ref18){return deleteSelection$2(_ref18.state,_ref18.dispatch)}}}),module_8008f8e9_enter$1=Object.freeze({__proto__:null,enter:function(){return function(_ref19){return _ref19.commands.keyboardShortcut("Enter")}}}),module_8008f8e9_exitCode$1=Object.freeze({__proto__:null,exitCode:function(){return function(_ref20){return exitCode$2(_ref20.state,_ref20.dispatch)}}});function module_8008f8e9_findMarkInSet(marks,type,attributes){return void 0===attributes&&(attributes={}),marks.find((function(item){return item.type===type&&module_8008f8e9_objectIncludes(item.attrs,attributes)}))}function module_8008f8e9_isMarkInSet(marks,type,attributes){return void 0===attributes&&(attributes={}),!!module_8008f8e9_findMarkInSet(marks,type,attributes)}function module_8008f8e9_getMarkRange($pos,type,attributes){if(void 0===attributes&&(attributes={}),$pos&&type){var start=$pos.parent.childAfter($pos.parentOffset);if(start.node){var mark=module_8008f8e9_findMarkInSet(start.node.marks,type,attributes);if(mark){var startIndex=$pos.index(),startPos=$pos.start()+start.offset,endIndex=startIndex+1,endPos=startPos+start.node.nodeSize;for(module_8008f8e9_findMarkInSet(start.node.marks,type,attributes);startIndex>0&&mark.isInSet($pos.parent.child(startIndex-1).marks);)startIndex-=1,startPos-=$pos.parent.child(startIndex).nodeSize;for(;endIndex<$pos.parent.childCount&&module_8008f8e9_isMarkInSet($pos.parent.child(endIndex).marks,type,attributes);)endPos+=$pos.parent.child(endIndex).nodeSize,endIndex+=1;return{from:startPos,to:endPos}}}}}var module_8008f8e9_extendMarkRange$1=Object.freeze({__proto__:null,extendMarkRange:function(typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref21){var tr=_ref21.tr,state=_ref21.state,dispatch=_ref21.dispatch,type=module_8008f8e9_getMarkType(typeOrName,state.schema),doc=tr.doc,selection=tr.selection,$from=selection.$from,from=selection.from,to=selection.to;if(dispatch){var range=module_8008f8e9_getMarkRange($from,type,attributes);if(range&&range.from<=from&&range.to>=to){var newSelection=module_8008f8e9_TextSelection.create(doc,range.from,range.to);tr.setSelection(newSelection)}}return!0}}}),module_8008f8e9_first$1=Object.freeze({__proto__:null,first:function(commands){return function(props){for(var items="function"==typeof commands?commands(props):commands,i=0;i<items.length;i+=1)if(items[i](props))return!0;return!1}}});function module_8008f8e9_minMax(value,min,max){return void 0===value&&(value=0),void 0===min&&(min=0),void 0===max&&(max=0),Math.min(Math.max(value,min),max)}var module_8008f8e9_focus$1=Object.freeze({__proto__:null,focus:function(position){return void 0===position&&(position=null),function(_ref22){var value,item,editor=_ref22.editor,view=_ref22.view,tr=_ref22.tr,dispatch=_ref22.dispatch;if(view.hasFocus()&&null===position||!1===position)return!0;if(dispatch&&null===position&&(!(item=value=editor.state.selection)||"object"!=typeof item||Array.isArray(item)||function(item){var _a;return"class"===(null===(_a=item.constructor)||void 0===_a?void 0:_a.toString().substring(0,5))}(item)||!(value instanceof module_8008f8e9_TextSelection)))return view.focus(),!0;var _ref23=function(state,position){if(void 0===position&&(position=null),!position)return null;if("start"===position||!0===position)return{from:0,to:0};if("end"===position){var size=state.doc.content.size;return{from:size,to:size}}return{from:position,to:position}}(editor.state,position)||editor.state.selection,from=_ref23.from,to=_ref23.to,doc=tr.doc,storedMarks=tr.storedMarks,resolvedFrom=module_8008f8e9_minMax(from,0,doc.content.size),resolvedEnd=module_8008f8e9_minMax(to,0,doc.content.size),selection=module_8008f8e9_TextSelection.create(doc,resolvedFrom,resolvedEnd),isSameSelection=editor.state.selection.eq(selection);return dispatch&&(tr.setSelection(selection),isSameSelection&&storedMarks&&tr.setStoredMarks(storedMarks),view.focus()),!0}}}),module_8008f8e9_forEach$1=Object.freeze({__proto__:null,forEach:function(items,fn){return function(props){return items.every((function(item,index){return fn(item,extends_default()({},props,{index:index}))}))}}}),module_8008f8e9_insertContent$1=Object.freeze({__proto__:null,insertContent:function(value){return function(_ref24){var tr=_ref24.tr;return _ref24.commands.insertContentAt({from:tr.selection.from,to:tr.selection.to},value)}}}),module_8008f8e9_insertContentAt$1=Object.freeze({__proto__:null,insertContentAt:function(position,value){return function(_ref25){var tr=_ref25.tr,dispatch=_ref25.dispatch,editor=_ref25.editor;if(dispatch){var content=module_8008f8e9_createNodeFromContent(value,editor.schema,{parseOptions:{preserveWhitespace:"full"}});if("<>"===content.toString())return!0;var _ref26="number"==typeof position?{from:position,to:position}:position,from=_ref26.from,to=_ref26.to;tr.replaceWith(from,to,content),function(tr,startLen,bias){var last=tr.steps.length-1;if(!(last<startLen)){var step=tr.steps[last];if(step instanceof module_8008f8e9_ReplaceStep||step instanceof module_8008f8e9_ReplaceAroundStep){var map=tr.mapping.maps[last],end=0;map.forEach((function(_from,_to,_newFrom,newTo){0===end&&(end=newTo)})),tr.setSelection(module_8008f8e9_Selection.near(tr.doc.resolve(end),1))}}}(tr,tr.steps.length-1)}return!0}}}),module_8008f8e9_joinBackward$1=Object.freeze({__proto__:null,joinBackward:function(){return function(_ref27){return joinBackward$2(_ref27.state,_ref27.dispatch)}}}),module_8008f8e9_joinForward$1=Object.freeze({__proto__:null,joinForward:function(){return function(_ref28){return joinForward$2(_ref28.state,_ref28.dispatch)}}}),module_8008f8e9_mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),module_8008f8e9_keyboardShortcut$1=Object.freeze({__proto__:null,keyboardShortcut:function(name){return function(_ref29){var editor=_ref29.editor,view=_ref29.view,tr=_ref29.tr,dispatch=_ref29.dispatch,keys=function(name){var alt,ctrl,shift,meta,parts=name.split(/-(?!$)/),result=parts[parts.length-1];"Space"===result&&(result=" ");for(var i=0;i<parts.length-1;i+=1){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))meta=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)?$/i.test(mod))shift=!0;else{if(!/^mod$/i.test(mod))throw new Error("Unrecognized modifier name: "+mod);module_8008f8e9_mac?meta=!0:ctrl=!0}}return alt&&(result="Alt-"+result),ctrl&&(result="Ctrl-"+result),meta&&(result="Meta-"+result),shift&&(result="Shift-"+result),result}(name).split(/-(?!$)/),key=keys.find((function(item){return!["Alt","Ctrl","Meta","Shift"].includes(item)})),event=new KeyboardEvent("keydown",{key:"Space"===key?" ":key,altKey:keys.includes("Alt"),ctrlKey:keys.includes("Ctrl"),metaKey:keys.includes("Meta"),shiftKey:keys.includes("Shift"),bubbles:!0,cancelable:!0}),capturedTransaction=editor.captureTransaction((function(){view.someProp("handleKeyDown",(function(f){return f(view,event)}))}));return null==capturedTransaction||capturedTransaction.steps.forEach((function(step){var newStep=step.map(tr.mapping);newStep&&dispatch&&tr.maybeStep(newStep)})),!0}}}),module_8008f8e9_lift$1=Object.freeze({__proto__:null,lift:function(typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref30){var state=_ref30.state,dispatch=_ref30.dispatch;return!!module_8008f8e9_isNodeActive(state,module_8008f8e9_getNodeType(typeOrName,state.schema),attributes)&&lift$2(state,dispatch)}}}),module_8008f8e9_liftEmptyBlock$1=Object.freeze({__proto__:null,liftEmptyBlock:function(){return function(_ref31){return liftEmptyBlock$2(_ref31.state,_ref31.dispatch)}}}),module_8008f8e9_liftListItem$1=Object.freeze({__proto__:null,liftListItem:function(typeOrName){return function(_ref32){var itemType,state=_ref32.state,dispatch=_ref32.dispatch;return(itemType=module_8008f8e9_getNodeType(typeOrName,state.schema),function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to,(function(node){return node.childCount&&node.firstChild.type==itemType}));return!!range&&(!dispatch||($from.node(range.depth-1).type==itemType?function(state,dispatch,itemType,range){var tr=state.tr,end=range.end,endOfList=range.$to.end(range.depth);return end<endOfList&&(tr.step(new module_8008f8e9_ReplaceAroundStep(end-1,endOfList,end,endOfList,new module_8008f8e9_Slice(module_8008f8e9_Fragment.from(itemType.create(null,range.parent.copy())),1,0),1,!0)),range=new module_8008f8e9_NodeRange(tr.doc.resolve(range.$from.pos),tr.doc.resolve(endOfList),range.depth)),dispatch(tr.lift(range,module_8008f8e9_liftTarget(range)).scrollIntoView()),!0}(state,dispatch,itemType,range):function(state,dispatch,range){for(var tr=state.tr,list=range.parent,pos=range.end,i=range.endIndex-1,e=range.startIndex;i>e;i--)pos-=list.child(i).nodeSize,tr.delete(pos-1,pos+1);var $start=tr.doc.resolve(range.start),item=$start.nodeAfter,atStart=0==range.startIndex,atEnd=range.endIndex==list.childCount,parent=$start.node(-1),indexBefore=$start.index(-1);if(!parent.canReplace(indexBefore+(atStart?0:1),indexBefore+1,item.content.append(atEnd?module_8008f8e9_Fragment.empty:module_8008f8e9_Fragment.from(list))))return!1;var start=$start.pos,end=start+item.nodeSize;return tr.step(new module_8008f8e9_ReplaceAroundStep(start-(atStart?1:0),end+(atEnd?1:0),start+1,end-1,new module_8008f8e9_Slice((atStart?module_8008f8e9_Fragment.empty:module_8008f8e9_Fragment.from(list.copy(module_8008f8e9_Fragment.empty))).append(atEnd?module_8008f8e9_Fragment.empty:module_8008f8e9_Fragment.from(list.copy(module_8008f8e9_Fragment.empty))),atStart?0:1,atEnd?0:1),atStart?0:1)),dispatch(tr.scrollIntoView()),!0}(state,dispatch,range)))})(state,dispatch)}}}),module_8008f8e9_newlineInCode$1=Object.freeze({__proto__:null,newlineInCode:function(){return function(_ref33){return newlineInCode$2(_ref33.state,_ref33.dispatch)}}}),module_8008f8e9_replace$1=Object.freeze({__proto__:null,replace:function(typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref34){var state=_ref34.state,commands=_ref34.commands;console.warn("[tiptap warn]: replace() is deprecated. please use insertContent() instead.");var _state$selection5=state.selection,range={from:_state$selection5.from,to:_state$selection5.to};return commands.replaceRange(range,typeOrName,attributes)}}}),module_8008f8e9_replaceRange$1=Object.freeze({__proto__:null,replaceRange:function(range,typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref35){var tr=_ref35.tr,state=_ref35.state,dispatch=_ref35.dispatch;console.warn("[tiptap warn]: replaceRange() is deprecated. please use insertContent() instead.");var type=module_8008f8e9_getNodeType(typeOrName,state.schema),from=range.from,to=range.to;return dispatch&&tr.replaceRangeWith(from,to,type.create(attributes)),!0}}});function module_8008f8e9_deleteProps(obj,propOrProps){var props="string"==typeof propOrProps?[propOrProps]:propOrProps;return Object.keys(obj).reduce((function(newObj,prop){return props.includes(prop)||(newObj[prop]=obj[prop]),newObj}),{})}var module_8008f8e9_resetAttributes$1=Object.freeze({__proto__:null,resetAttributes:function(typeOrName,attributes){return function(_ref36){var tr=_ref36.tr,state=_ref36.state,dispatch=_ref36.dispatch,nodeType=null,markType=null,schemaType=module_8008f8e9_getSchemaTypeNameByName("string"==typeof typeOrName?typeOrName:typeOrName.name,state.schema);return!!schemaType&&("node"===schemaType&&(nodeType=module_8008f8e9_getNodeType(typeOrName,state.schema)),"mark"===schemaType&&(markType=module_8008f8e9_getMarkType(typeOrName,state.schema)),dispatch&&tr.selection.ranges.forEach((function(range){state.doc.nodesBetween(range.$from.pos,range.$to.pos,(function(node,pos){nodeType&&nodeType===node.type&&tr.setNodeMarkup(pos,void 0,module_8008f8e9_deleteProps(node.attrs,attributes)),markType&&node.marks.length&&node.marks.forEach((function(mark){markType===mark.type&&tr.addMark(pos,pos+node.nodeSize,markType.create(module_8008f8e9_deleteProps(mark.attrs,attributes)))}))}))})),!0)}}}),module_8008f8e9_scrollIntoView$1=Object.freeze({__proto__:null,scrollIntoView:function(){return function(_ref37){var tr=_ref37.tr;return _ref37.dispatch&&tr.scrollIntoView(),!0}}}),module_8008f8e9_selectAll$1=Object.freeze({__proto__:null,selectAll:function(){return function(_ref38){return selectAll$2(_ref38.state,_ref38.dispatch)}}}),module_8008f8e9_selectNodeBackward$1=Object.freeze({__proto__:null,selectNodeBackward:function(){return function(_ref39){return selectNodeBackward$2(_ref39.state,_ref39.dispatch)}}}),module_8008f8e9_selectNodeForward$1=Object.freeze({__proto__:null,selectNodeForward:function(){return function(_ref40){return selectNodeForward$2(_ref40.state,_ref40.dispatch)}}}),module_8008f8e9_selectParentNode$1=Object.freeze({__proto__:null,selectParentNode:function(){return function(_ref41){return state=_ref41.state,dispatch=_ref41.dispatch,$from=(ref=state.selection).$from,to=ref.to,0!=(same=$from.sharedDepth(to))&&(pos=$from.before(same),dispatch&&dispatch(state.tr.setSelection(module_8008f8e9_NodeSelection.create(state.doc,pos))),!0);var state,dispatch,pos,ref,$from,to,same}}}),module_8008f8e9_setContent$1=Object.freeze({__proto__:null,setContent:function(content,emitUpdate,parseOptions){return void 0===emitUpdate&&(emitUpdate=!1),void 0===parseOptions&&(parseOptions={}),function(_ref42){var tr=_ref42.tr,editor=_ref42.editor,dispatch=_ref42.dispatch,doc=tr.doc,document=function(content,schema,parseOptions){return void 0===parseOptions&&(parseOptions={}),module_8008f8e9_createNodeFromContent(content,schema,{slice:!1,parseOptions:parseOptions})}(content,editor.schema,parseOptions),selection=module_8008f8e9_TextSelection.create(doc,0,doc.content.size);return dispatch&&tr.setSelection(selection).replaceSelectionWith(document,!1).setMeta("preventUpdate",!emitUpdate),!0}}}),module_8008f8e9_setMark$1=Object.freeze({__proto__:null,setMark:function(typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref43){var tr=_ref43.tr,state=_ref43.state,dispatch=_ref43.dispatch,selection=tr.selection,empty=selection.empty,ranges=selection.ranges,type=module_8008f8e9_getMarkType(typeOrName,state.schema);if(dispatch)if(empty){var oldAttributes=function(state,typeOrName){var type=module_8008f8e9_getMarkType(typeOrName,state.schema),_state$selection2=state.selection,from=_state$selection2.from,to=_state$selection2.to,empty=_state$selection2.empty,marks=[];empty?marks=state.selection.$head.marks():state.doc.nodesBetween(from,to,(function(node){marks=[].concat(marks,node.marks)}));var mark=marks.find((function(markItem){return markItem.type.name===type.name}));return mark?extends_default()({},mark.attrs):{}}(state,type);tr.addStoredMark(type.create(extends_default()({},oldAttributes,attributes)))}else ranges.forEach((function(range){var from=range.$from.pos,to=range.$to.pos;state.doc.nodesBetween(from,to,(function(node,pos){var trimmedFrom=Math.max(pos,from),trimmedTo=Math.min(pos+node.nodeSize,to);node.marks.find((function(mark){return mark.type===type}))?node.marks.forEach((function(mark){type===mark.type&&tr.addMark(trimmedFrom,trimmedTo,type.create(extends_default()({},mark.attrs,attributes)))})):tr.addMark(trimmedFrom,trimmedTo,type.create(attributes))}))}));return!0}}}),module_8008f8e9_setMeta$1=Object.freeze({__proto__:null,setMeta:function(key,value){return function(_ref44){return _ref44.tr.setMeta(key,value),!0}}}),module_8008f8e9_setNode$1=Object.freeze({__proto__:null,setNode:function(typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref45){var nodeType,attrs,state=_ref45.state,dispatch=_ref45.dispatch,type=module_8008f8e9_getNodeType(typeOrName,state.schema);return(nodeType=type,attrs=attributes,function(state,dispatch){var ref=state.selection,from=ref.from,to=ref.to,applicable=!1;return state.doc.nodesBetween(from,to,(function(node,pos){if(applicable)return!1;if(node.isTextblock&&!node.hasMarkup(nodeType,attrs))if(node.type==nodeType)applicable=!0;else{var $pos=state.doc.resolve(pos),index=$pos.index();applicable=$pos.parent.canReplaceWith(index,index+1,nodeType)}})),!!applicable&&(dispatch&&dispatch(state.tr.setBlockType(from,to,nodeType,attrs).scrollIntoView()),!0)})(state,dispatch)}}}),module_8008f8e9_setNodeSelection$1=Object.freeze({__proto__:null,setNodeSelection:function(position){return function(_ref46){var tr=_ref46.tr;if(_ref46.dispatch){var doc=tr.doc,from=module_8008f8e9_minMax(position,0,doc.content.size),selection=module_8008f8e9_NodeSelection.create(doc,from);tr.setSelection(selection)}return!0}}}),module_8008f8e9_setTextSelection$1=Object.freeze({__proto__:null,setTextSelection:function(position){return function(_ref47){var tr=_ref47.tr;if(_ref47.dispatch){var doc=tr.doc,_ref48="number"==typeof position?{from:position,to:position}:position,from=_ref48.from,to=_ref48.to,boundedFrom=module_8008f8e9_minMax(from,0,doc.content.size),boundedTo=module_8008f8e9_minMax(to,0,doc.content.size),selection=module_8008f8e9_TextSelection.create(doc,boundedFrom,boundedTo);tr.setSelection(selection)}return!0}}}),module_8008f8e9_sinkListItem$1=Object.freeze({__proto__:null,sinkListItem:function(typeOrName){return function(_ref49){var itemType,state=_ref49.state,dispatch=_ref49.dispatch,type=module_8008f8e9_getNodeType(typeOrName,state.schema);return(itemType=type,function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to,(function(node){return node.childCount&&node.firstChild.type==itemType}));if(!range)return!1;var startIndex=range.startIndex;if(0==startIndex)return!1;var parent=range.parent,nodeBefore=parent.child(startIndex-1);if(nodeBefore.type!=itemType)return!1;if(dispatch){var nestedBefore=nodeBefore.lastChild&&nodeBefore.lastChild.type==parent.type,inner=module_8008f8e9_Fragment.from(nestedBefore?itemType.create():null),slice=new module_8008f8e9_Slice(module_8008f8e9_Fragment.from(itemType.create(null,module_8008f8e9_Fragment.from(parent.type.create(null,inner)))),nestedBefore?3:1,0),before=range.start,after=range.end;dispatch(state.tr.step(new module_8008f8e9_ReplaceAroundStep(before-(nestedBefore?3:1),after,before,after,slice,1,!0)).scrollIntoView())}return!0})(state,dispatch)}}});function module_8008f8e9_getSplittedAttributes(extensionAttributes,typeName,attributes){return Object.fromEntries(Object.entries(attributes).filter((function(_ref50){var name=_ref50[0],extensionAttribute=extensionAttributes.find((function(item){return item.type===typeName&&item.name===name}));return!!extensionAttribute&&extensionAttribute.attribute.keepOnSplit})))}function module_8008f8e9_ensureMarks(state,splittableMarks){var marks=state.storedMarks||state.selection.$to.parentOffset&&state.selection.$from.marks();if(marks){var filteredMarks=marks.filter((function(mark){return null==splittableMarks?void 0:splittableMarks.includes(mark.type.name)}));state.tr.ensureMarks(filteredMarks)}}var module_8008f8e9_splitBlock$1=Object.freeze({__proto__:null,splitBlock:function(_temp){var _ref51$keepMarks=(void 0===_temp?{}:_temp).keepMarks,keepMarks=void 0===_ref51$keepMarks||_ref51$keepMarks;return function(_ref52){var tr=_ref52.tr,state=_ref52.state,dispatch=_ref52.dispatch,editor=_ref52.editor,selection=tr.selection,doc=tr.doc,$from=selection.$from,$to=selection.$to,newAttributes=module_8008f8e9_getSplittedAttributes(editor.extensionManager.attributes,$from.node().type.name,$from.node().attrs);if(selection instanceof module_8008f8e9_NodeSelection&&selection.node.isBlock)return!(!$from.parentOffset||!module_8008f8e9_canSplit(doc,$from.pos)||(dispatch&&(keepMarks&&module_8008f8e9_ensureMarks(state,editor.extensionManager.splittableMarks),tr.split($from.pos).scrollIntoView()),0));if(!$from.parent.isBlock)return!1;if(dispatch){var atEnd=$to.parentOffset===$to.parent.content.size;selection instanceof module_8008f8e9_TextSelection&&tr.deleteSelection();var deflt=0===$from.depth?void 0:function(match){for(var i=0;i<match.edgeCount;i+=1){var type=match.edge(i).type;if(type.isTextblock&&!type.hasRequiredAttrs())return type}return null}($from.node(-1).contentMatchAt($from.indexAfter(-1))),types=atEnd&&deflt?[{type:deflt,attrs:newAttributes}]:void 0,can=module_8008f8e9_canSplit(tr.doc,tr.mapping.map($from.pos),1,types);if(types||can||!module_8008f8e9_canSplit(tr.doc,tr.mapping.map($from.pos),1,deflt?[{type:deflt}]:void 0)||(can=!0,types=deflt?[{type:deflt,attrs:newAttributes}]:void 0),can&&(tr.split(tr.mapping.map($from.pos),1,types),deflt&&!atEnd&&!$from.parentOffset&&$from.parent.type!==deflt)){var _first=tr.mapping.map($from.before()),$first=tr.doc.resolve(_first);$from.node(-1).canReplaceWith($first.index(),$first.index()+1,deflt)&&tr.setNodeMarkup(tr.mapping.map($from.before()),deflt)}keepMarks&&module_8008f8e9_ensureMarks(state,editor.extensionManager.splittableMarks),tr.scrollIntoView()}return!0}}}),module_8008f8e9_splitListItem$1=Object.freeze({__proto__:null,splitListItem:function(typeOrName){return function(_ref53){var _a,tr=_ref53.tr,state=_ref53.state,dispatch=_ref53.dispatch,editor=_ref53.editor,type=module_8008f8e9_getNodeType(typeOrName,state.schema),_state$selection6=state.selection,$from=_state$selection6.$from,$to=_state$selection6.$to,node=state.selection.node;if(node&&node.isBlock||$from.depth<2||!$from.sameParent($to))return!1;var grandParent=$from.node(-1);if(grandParent.type!==type)return!1;var extensionAttributes=editor.extensionManager.attributes;if(0===$from.parent.content.size&&$from.node(-1).childCount===$from.indexAfter(-1)){if(2===$from.depth||$from.node(-3).type!==type||$from.index(-2)!==$from.node(-2).childCount-1)return!1;if(dispatch){for(var wrap=module_8008f8e9_Fragment.empty,depthBefore=$from.index(-1)?1:$from.index(-2)?2:3,d=$from.depth-depthBefore;d>=$from.depth-3;d-=1)wrap=module_8008f8e9_Fragment.from($from.node(d).copy(wrap));var depthAfter=$from.indexAfter(-1)<$from.node(-2).childCount?1:$from.indexAfter(-2)<$from.node(-3).childCount?2:3,_newNextTypeAttributes=module_8008f8e9_getSplittedAttributes(extensionAttributes,$from.node().type.name,$from.node().attrs),_nextType=(null===(_a=type.contentMatch.defaultType)||void 0===_a?void 0:_a.createAndFill(_newNextTypeAttributes))||void 0;wrap=wrap.append(module_8008f8e9_Fragment.from(type.createAndFill(null,_nextType)||void 0));var start=$from.before($from.depth-(depthBefore-1));tr.replace(start,$from.after(-depthAfter),new module_8008f8e9_Slice(wrap,4-depthBefore,0));var sel=-1;tr.doc.nodesBetween(start,tr.doc.content.size,(function(n,pos){if(sel>-1)return!1;n.isTextblock&&0===n.content.size&&(sel=pos+1)})),sel>-1&&tr.setSelection(module_8008f8e9_TextSelection.near(tr.doc.resolve(sel))),tr.scrollIntoView()}return!0}var nextType=$to.pos===$from.end()?grandParent.contentMatchAt(0).defaultType:null,newTypeAttributes=module_8008f8e9_getSplittedAttributes(extensionAttributes,grandParent.type.name,grandParent.attrs),newNextTypeAttributes=module_8008f8e9_getSplittedAttributes(extensionAttributes,$from.node().type.name,$from.node().attrs);tr.delete($from.pos,$to.pos);var types=nextType?[{type:type,attrs:newTypeAttributes},{type:nextType,attrs:newNextTypeAttributes}]:[{type:type,attrs:newTypeAttributes}];return!!module_8008f8e9_canSplit(tr.doc,$from.pos,2)&&(dispatch&&tr.split($from.pos,2,types).scrollIntoView(),!0)}}});function module_8008f8e9_isList(name,extensions){var extension=function(extensions){return{baseExtensions:extensions.filter((function(extension){return"extension"===extension.type})),nodeExtensions:extensions.filter((function(extension){return"node"===extension.type})),markExtensions:extensions.filter((function(extension){return"mark"===extension.type}))}}(extensions).nodeExtensions.find((function(item){return item.name===name}));if(!extension)return!1;var group=function(value,context){if(void 0===context&&(context=void 0),"function"==typeof value){for(var _len2=arguments.length,props=new Array(_len2>2?_len2-2:0),_key2=2;_key2<_len2;_key2++)props[_key2-2]=arguments[_key2];return context?value.bind(context).apply(void 0,props):value.apply(void 0,props)}return value}(module_8008f8e9_getExtensionField(extension,"group",{name:extension.name,options:extension.options}));return"string"==typeof group&&group.split(" ").includes("list")}var module_8008f8e9_toggleList$1=Object.freeze({__proto__:null,toggleList:function(listTypeOrName,itemTypeOrName){return function(_ref54){var editor=_ref54.editor,tr=_ref54.tr,state=_ref54.state,dispatch=_ref54.dispatch,chain=_ref54.chain,commands=_ref54.commands,can=_ref54.can,extensions=editor.extensionManager.extensions,listType=module_8008f8e9_getNodeType(listTypeOrName,state.schema),itemType=module_8008f8e9_getNodeType(itemTypeOrName,state.schema),selection=state.selection,$from=selection.$from,$to=selection.$to,range=$from.blockRange($to);if(!range)return!1;var predicate,parentList=(predicate=function(node){return module_8008f8e9_isList(node.type.name,extensions)},function(selection){return function($pos,predicate){for(var i=$pos.depth;i>0;i-=1){var node=$pos.node(i);if(predicate(node))return{pos:i>0?$pos.before(i):0,start:$pos.start(i),depth:i,node:node}}}(selection.$from,predicate)})(selection);if(range.depth>=1&&parentList&&range.depth-parentList.depth<=1){if(parentList.node.type===listType)return commands.liftListItem(itemType);if(module_8008f8e9_isList(parentList.node.type.name,extensions)&&listType.validContent(parentList.node.content)&&dispatch)return tr.setNodeMarkup(parentList.pos,listType),!0}return can().wrapInList(listType)?commands.wrapInList(listType):chain().clearNodes().wrapInList(listType).run()}}}),module_8008f8e9_toggleMark$1=Object.freeze({__proto__:null,toggleMark:function(typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref55){var state=_ref55.state,commands=_ref55.commands,type=module_8008f8e9_getMarkType(typeOrName,state.schema);return function(state,typeOrName,attributes){void 0===attributes&&(attributes={});var _state$selection4=state.selection,from=_state$selection4.from,to=_state$selection4.to,empty=_state$selection4.empty,type=typeOrName?module_8008f8e9_getMarkType(typeOrName,state.schema):null;if(empty)return!!(state.storedMarks||state.selection.$from.marks()).filter((function(mark){return!type||type.name===mark.type.name})).find((function(mark){return module_8008f8e9_objectIncludes(mark.attrs,attributes)}));var selectionRange=0,markRanges=[];if(state.doc.nodesBetween(from,to,(function(node,pos){if(node.isText){var relativeFrom=Math.max(from,pos),relativeTo=Math.min(to,pos+node.nodeSize);selectionRange+=relativeTo-relativeFrom,markRanges=[].concat(markRanges,node.marks.map((function(mark){return{mark:mark,from:relativeFrom,to:relativeTo}})))}})),0===selectionRange)return!1;var matchedRange=markRanges.filter((function(markRange){return!type||type.name===markRange.mark.type.name})).filter((function(markRange){return module_8008f8e9_objectIncludes(markRange.mark.attrs,attributes)})).reduce((function(sum,markRange){return sum+(markRange.to-markRange.from)}),0),excludedRange=markRanges.filter((function(markRange){return!type||markRange.mark.type!==type&&markRange.mark.type.excludes(type)})).reduce((function(sum,markRange){return sum+(markRange.to-markRange.from)}),0);return(matchedRange>0?matchedRange+excludedRange:matchedRange)>=selectionRange}(state,type,attributes)?commands.unsetMark(type):commands.setMark(type,attributes)}}}),module_8008f8e9_toggleNode$1=Object.freeze({__proto__:null,toggleNode:function(typeOrName,toggleTypeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref56){var state=_ref56.state,commands=_ref56.commands,type=module_8008f8e9_getNodeType(typeOrName,state.schema),toggleType=module_8008f8e9_getNodeType(toggleTypeOrName,state.schema);return module_8008f8e9_isNodeActive(state,type,attributes)?commands.setNode(toggleType):commands.setNode(type,attributes)}}}),module_8008f8e9_toggleWrap$1=Object.freeze({__proto__:null,toggleWrap:function(typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref57){var state=_ref57.state,dispatch=_ref57.dispatch,type=module_8008f8e9_getNodeType(typeOrName,state.schema);return module_8008f8e9_isNodeActive(state,type,attributes)?lift$2(state,dispatch):wrapIn$2(type,attributes)(state,dispatch)}}}),module_8008f8e9_undoInputRule$1=Object.freeze({__proto__:null,undoInputRule:function(){return function(_ref58){return function(state,dispatch){for(var plugins=state.plugins,i=0;i<plugins.length;i++){var plugin=plugins[i],undoable=void 0;if(plugin.spec.isInputRules&&(undoable=plugin.getState(state))){if(dispatch){for(var tr=state.tr,toUndo=undoable.transform,j=toUndo.steps.length-1;j>=0;j--)tr.step(toUndo.steps[j].invert(toUndo.docs[j]));if(undoable.text){var marks=tr.doc.resolve(undoable.from).marks();tr.replaceWith(undoable.from,undoable.to,state.schema.text(undoable.text,marks))}else tr.delete(undoable.from,undoable.to);dispatch(tr)}return!0}}return!1}(_ref58.state,_ref58.dispatch)}}}),module_8008f8e9_unsetAllMarks$1=Object.freeze({__proto__:null,unsetAllMarks:function(){return function(_ref59){var tr=_ref59.tr,state=_ref59.state,dispatch=_ref59.dispatch,selection=tr.selection,empty=selection.empty,ranges=selection.ranges;return empty||dispatch&&Object.entries(state.schema.marks).forEach((function(_ref60){var mark=_ref60[1];ranges.forEach((function(range){tr.removeMark(range.$from.pos,range.$to.pos,mark)}))})),!0}}}),module_8008f8e9_unsetMark$1=Object.freeze({__proto__:null,unsetMark:function(typeOrName){return function(_ref61){var tr=_ref61.tr,state=_ref61.state,dispatch=_ref61.dispatch,selection=tr.selection,type=module_8008f8e9_getMarkType(typeOrName,state.schema),$from=selection.$from,empty=selection.empty,ranges=selection.ranges;if(dispatch){if(empty){var from=selection.from,to=selection.to,range=module_8008f8e9_getMarkRange($from,type);range&&(from=range.from,to=range.to),tr.removeMark(from,to,type)}else ranges.forEach((function(range){tr.removeMark(range.$from.pos,range.$to.pos,type)}));tr.removeStoredMark(type)}return!0}}}),module_8008f8e9_updateAttributes$1=Object.freeze({__proto__:null,updateAttributes:function(typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref62){var tr=_ref62.tr,state=_ref62.state,dispatch=_ref62.dispatch,nodeType=null,markType=null,schemaType=module_8008f8e9_getSchemaTypeNameByName("string"==typeof typeOrName?typeOrName:typeOrName.name,state.schema);return!!schemaType&&("node"===schemaType&&(nodeType=module_8008f8e9_getNodeType(typeOrName,state.schema)),"mark"===schemaType&&(markType=module_8008f8e9_getMarkType(typeOrName,state.schema)),dispatch&&tr.selection.ranges.forEach((function(range){var from=range.$from.pos,to=range.$to.pos;state.doc.nodesBetween(from,to,(function(node,pos){nodeType&&nodeType===node.type&&tr.setNodeMarkup(pos,void 0,extends_default()({},node.attrs,attributes)),markType&&node.marks.length&&node.marks.forEach((function(mark){if(markType===mark.type){var trimmedFrom=Math.max(pos,from),trimmedTo=Math.min(pos+node.nodeSize,to);tr.addMark(trimmedFrom,trimmedTo,markType.create(extends_default()({},mark.attrs,attributes)))}}))}))})),!0)}}}),module_8008f8e9_wrapIn$1=Object.freeze({__proto__:null,wrapIn:function(typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref63){var state=_ref63.state,dispatch=_ref63.dispatch,type=module_8008f8e9_getNodeType(typeOrName,state.schema);return!module_8008f8e9_isNodeActive(state,type,attributes)&&wrapIn$2(type,attributes)(state,dispatch)}}}),module_8008f8e9_wrapInList$1=Object.freeze({__proto__:null,wrapInList:function(typeOrName,attributes){return void 0===attributes&&(attributes={}),function(_ref64){var listType,attrs,state=_ref64.state,dispatch=_ref64.dispatch;return(listType=module_8008f8e9_getNodeType(typeOrName,state.schema),attrs=attributes,function(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to,range=$from.blockRange($to),doJoin=!1,outerRange=range;if(!range)return!1;if(range.depth>=2&&$from.node(range.depth-1).type.compatibleContent(listType)&&0==range.startIndex){if(0==$from.index(range.depth-1))return!1;var $insert=state.doc.resolve(range.start-2);outerRange=new module_8008f8e9_NodeRange($insert,$insert,range.depth),range.endIndex<range.parent.childCount&&(range=new module_8008f8e9_NodeRange($from,state.doc.resolve($to.end(range.depth)),range.depth)),doJoin=!0}var wrap=module_8008f8e9_findWrapping(outerRange,listType,attrs,range);return!!wrap&&(dispatch&&dispatch(function(tr,range,wrappers,joinBefore,listType){for(var content=module_8008f8e9_Fragment.empty,i=wrappers.length-1;i>=0;i--)content=module_8008f8e9_Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content));tr.step(new module_8008f8e9_ReplaceAroundStep(range.start-(joinBefore?2:0),range.end,range.start,range.end,new module_8008f8e9_Slice(content,0,0),wrappers.length,!0));for(var found=0,i$1=0;i$1<wrappers.length;i$1++)wrappers[i$1].type==listType&&(found=i$1+1);for(var splitDepth=wrappers.length-found,splitPos=range.start+wrappers.length-(joinBefore?2:0),parent=range.parent,i$2=range.startIndex,e=range.endIndex,first=!0;i$2<e;i$2++,first=!1)!first&&module_8008f8e9_canSplit(tr.doc,splitPos,splitDepth)&&(tr.split(splitPos,splitDepth),splitPos+=2*splitDepth),splitPos+=parent.child(i$2).nodeSize;return tr}(state.tr,range,wrap,doJoin,listType).scrollIntoView()),!0)})(state,dispatch)}}});module_8008f8e9_Extension.create({name:"commands",addCommands:function(){return extends_default()({},module_8008f8e9_blur$1,module_8008f8e9_clearContent$1,module_8008f8e9_clearNodes$1,module_8008f8e9_command$1,module_8008f8e9_createParagraphNear$1,module_8008f8e9_deleteRange$1,module_8008f8e9_deleteSelection$1,module_8008f8e9_enter$1,module_8008f8e9_exitCode$1,module_8008f8e9_extendMarkRange$1,module_8008f8e9_first$1,module_8008f8e9_focus$1,module_8008f8e9_forEach$1,module_8008f8e9_insertContent$1,module_8008f8e9_insertContentAt$1,module_8008f8e9_joinBackward$1,module_8008f8e9_joinForward$1,module_8008f8e9_keyboardShortcut$1,module_8008f8e9_lift$1,module_8008f8e9_liftEmptyBlock$1,module_8008f8e9_liftListItem$1,module_8008f8e9_newlineInCode$1,module_8008f8e9_replace$1,module_8008f8e9_replaceRange$1,module_8008f8e9_resetAttributes$1,module_8008f8e9_scrollIntoView$1,module_8008f8e9_selectAll$1,module_8008f8e9_selectNodeBackward$1,module_8008f8e9_selectNodeForward$1,module_8008f8e9_selectParentNode$1,module_8008f8e9_setContent$1,module_8008f8e9_setMark$1,module_8008f8e9_setMeta$1,module_8008f8e9_setNode$1,module_8008f8e9_setNodeSelection$1,module_8008f8e9_setTextSelection$1,module_8008f8e9_sinkListItem$1,module_8008f8e9_splitBlock$1,module_8008f8e9_splitListItem$1,module_8008f8e9_toggleList$1,module_8008f8e9_toggleMark$1,module_8008f8e9_toggleNode$1,module_8008f8e9_toggleWrap$1,module_8008f8e9_undoInputRule$1,module_8008f8e9_unsetAllMarks$1,module_8008f8e9_unsetMark$1,module_8008f8e9_updateAttributes$1,module_8008f8e9_wrapIn$1,module_8008f8e9_wrapInList$1)}}),module_8008f8e9_Extension.create({name:"editable",addProseMirrorPlugins:function(){var _this12=this;return[new module_8008f8e9_Plugin({key:new module_8008f8e9_PluginKey("editable"),props:{editable:function(){return _this12.editor.options.editable}}})]}}),module_8008f8e9_Extension.create({name:"focusEvents",addProseMirrorPlugins:function(){var editor=this.editor;return[new module_8008f8e9_Plugin({key:new module_8008f8e9_PluginKey("focusEvents"),props:{attributes:{tabindex:"0"},handleDOMEvents:{focus:function(view,event){editor.isFocused=!0;var transaction=editor.state.tr.setMeta("focus",{event:event}).setMeta("addToHistory",!1);return view.dispatch(transaction),!1},blur:function(view,event){editor.isFocused=!1;var transaction=editor.state.tr.setMeta("blur",{event:event}).setMeta("addToHistory",!1);return view.dispatch(transaction),!1}}}})]}}),module_8008f8e9_Extension.create({name:"keymap",addKeyboardShortcuts:function(){var _this13=this,handleBackspace=function(){return _this13.editor.commands.first((function(_ref65){var commands=_ref65.commands;return[function(){return commands.undoInputRule()},function(){return commands.deleteSelection()},function(){return commands.joinBackward()},function(){return commands.selectNodeBackward()}]}))},handleDelete=function(){return _this13.editor.commands.first((function(_ref66){var commands=_ref66.commands;return[function(){return commands.deleteSelection()},function(){return commands.joinForward()},function(){return commands.selectNodeForward()}]}))};return{Enter:function(){return _this13.editor.commands.first((function(_ref67){var commands=_ref67.commands;return[function(){return commands.newlineInCode()},function(){return commands.createParagraphNear()},function(){return commands.liftEmptyBlock()},function(){return commands.splitBlock()}]}))},"Mod-Enter":function(){return _this13.editor.commands.exitCode()},Backspace:function(){return handleBackspace()},"Mod-Backspace":function(){return handleBackspace()},Delete:function(){return handleDelete()},"Mod-Delete":function(){return handleDelete()}}}});var Node$2=function(){function Node(config){void 0===config&&(config={}),this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=extends_default()({},this.config,config),this.name=this.config.name,this.options=this.config.defaultOptions}Node.create=function(config){return void 0===config&&(config={}),new Node(config)};var _proto5=Node.prototype;return _proto5.configure=function(options){void 0===options&&(options={});var extension=this.extend();return extension.options=module_8008f8e9_mergeDeep(this.options,options),extension},_proto5.extend=function(extendedConfig){void 0===extendedConfig&&(extendedConfig={});var extension=new Node(extendedConfig);return extension.parent=this,this.child=extension,extension.name=extendedConfig.name?extendedConfig.name:extension.parent.name,extension.options=extendedConfig.defaultOptions?extendedConfig.defaultOptions:extension.parent.options,extension},Node}(),module_8008f8e9_Mark=function(){function Mark(config){void 0===config&&(config={}),this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=extends_default()({},this.config,config),this.name=this.config.name,this.options=this.config.defaultOptions}Mark.create=function(config){return void 0===config&&(config={}),new Mark(config)};var _proto6=Mark.prototype;return _proto6.configure=function(options){void 0===options&&(options={});var extension=this.extend();return extension.options=module_8008f8e9_mergeDeep(this.options,options),extension},_proto6.extend=function(extendedConfig){void 0===extendedConfig&&(extendedConfig={});var extension=new Mark(extendedConfig);return extension.parent=this,this.child=extension,extension.name=extendedConfig.name?extendedConfig.name:extension.parent.name,extension.options=extendedConfig.defaultOptions?extendedConfig.defaultOptions:extension.parent.options,extension},Mark}();function module_8008f8e9_markInputRule(regexp,markType,getAttributes){return new module_8008f8e9_InputRule(regexp,(function(state,match,start,end){var attributes=getAttributes instanceof Function?getAttributes(match):getAttributes,tr=state.tr,captureGroup=match[match.length-1],fullMatch=match[0],markEnd=end;if(captureGroup){var startSpaces=fullMatch.search(/\S/),textStart=start+fullMatch.indexOf(captureGroup),textEnd=textStart+captureGroup.length;if(function(from,to,state){var marks=[];return state.doc.nodesBetween(from,to,(function(node,pos){marks=[].concat(marks,node.marks.map((function(mark){return{from:pos,to:pos+node.nodeSize,mark:mark}})))})),marks}(start,end,state).filter((function(item){return item.mark.type.excluded.find((function(type){return type.name===markType.name}))})).filter((function(item){return item.to>textStart})).length)return null;textEnd<end&&tr.delete(textEnd,end),textStart>start&&tr.delete(start+startSpaces,textStart),markEnd=start+startSpaces+captureGroup.length,tr.addMark(start+startSpaces,markEnd,markType.create(attributes)),tr.removeStoredMark(markType)}return tr}))}function module_8008f8e9_markPasteRule(regexp,type,getAttributes){var handler=function handler(fragment,parent){var nodes=[];return fragment.forEach((function(child){if(child.isText&&child.text){for(var match,text=child.text,pos=0;null!==(match=regexp.exec(text));){var outerMatch=Math.max(match.length-2,0),innerMatch=Math.max(match.length-1,0);if(null==parent?void 0:parent.type.allowsMarkType(type)){var matchStart=match.index+match[0].indexOf(match[outerMatch]),matchEnd=matchStart+match[outerMatch].length,textStart=matchStart+match[outerMatch].lastIndexOf(match[innerMatch]),textEnd=textStart+match[innerMatch].length,attrs=getAttributes instanceof Function?getAttributes(match):getAttributes;if(!attrs)continue;matchStart>0&&nodes.push(child.cut(pos,matchStart)),nodes.push(child.cut(textStart,textEnd).mark(type.create(attrs).addToSet(child.marks))),pos=matchEnd}}pos<text.length&&nodes.push(child.cut(pos))}else nodes.push(child.copy(handler(child.content,child)))})),module_8008f8e9_Fragment.fromArray(nodes)};return new module_8008f8e9_Plugin({key:new module_8008f8e9_PluginKey("markPasteRule"),props:{transformPasted:function(slice){return new module_8008f8e9_Slice(handler(slice.content),slice.openStart,slice.openEnd)}}})}var module_8008f8e9_RicosExtensionManager=function(){function RicosExtensionManager(){}return RicosExtensionManager.extensionsConfigsToTiptapExtensions=function(ricosExtensionsConfigs){return ricosExtensionsConfigs.map((function(ricosExtensionConfig){var tiptapConfig=Object(lodash.omit)(ricosExtensionConfig,"addNodeViewHOC","extensionType");return"node"===ricosExtensionConfig.extensionType?Node$2.create(tiptapConfig):"mark"===ricosExtensionConfig.extensionType?module_8008f8e9_Mark.create(tiptapConfig):"extension"===ricosExtensionConfig.extensionType?module_8008f8e9_Extension.create(tiptapConfig):null}))},RicosExtensionManager.extractNodeViewsHOCsFromRicosExtensions=function(ricosExtensionsConfigs){return ricosExtensionsConfigs.sort((function(extA,extB){var extAPriority=extA.priority||100,extBPriority=extB.priority||100;return extAPriority>extBPriority?-1:extAPriority<extBPriority?1:0})).filter((function(ricosExtensionConfig){return"extension"===ricosExtensionConfig.extensionType})).filter((function(ricosExtensionConfig){return!!ricosExtensionConfig.addNodeViewHOC})).map((function(ricosExtensionConfig){var _ricosExtensionConfig=ricosExtensionConfig.addNodeViewHOC(),nodeViewHOC=_ricosExtensionConfig.nodeViewHOC;return{types:_ricosExtensionConfig.nodeTypes,nodeViewHOC:nodeViewHOC}})).flat().filter((function(_ref){return!!_ref.nodeViewHOC})).reduce((function(acc,_ref2){var types=_ref2.types,nodeViewHOC=_ref2.nodeViewHOC;return types.forEach((function(type){acc[type]||(acc[type]=[]),acc[type].push(nodeViewHOC)})),acc}),{})},RicosExtensionManager}(),Document=Node$2.create({name:"doc",topNode:!0,content:"block+"}),Underline=module_8008f8e9_Mark.create({name:"underline",defaultOptions:{HTMLAttributes:{}},parseHTML:function(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:function(style){return!!style.includes("underline")&&{}}}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["u",module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){return{setUnderline:function(){return function(_ref2){return _ref2.commands.setMark("underline")}},toggleUnderline:function(){return function(_ref3){return _ref3.commands.toggleMark("underline")}},unsetUnderline:function(){return function(_ref4){return _ref4.commands.unsetMark("underline")}}}},addKeyboardShortcuts:function(){var _this=this;return{"Mod-u":function(){return _this.editor.commands.toggleUnderline()}}}}),Text=Node$2.create({name:"text",group:"inline"}),starInputRegex$1=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/gm,starPasteRegex$1=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/gm,underscoreInputRegex$1=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/gm,underscorePasteRegex$1=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/gm,Italic=module_8008f8e9_Mark.create({name:"italic",defaultOptions:{HTMLAttributes:{}},parseHTML:function(){return[{tag:"em"},{tag:"i",getAttrs:function(node){return"normal"!==node.style.fontStyle&&null}},{style:"font-style=italic"}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["em",module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){return{setItalic:function(){return function(_ref2){return _ref2.commands.setMark("italic")}},toggleItalic:function(){return function(_ref3){return _ref3.commands.toggleMark("italic")}},unsetItalic:function(){return function(_ref4){return _ref4.commands.unsetMark("italic")}}}},addKeyboardShortcuts:function(){var _this=this;return{"Mod-i":function(){return _this.editor.commands.toggleItalic()}}},addInputRules:function(){return[module_8008f8e9_markInputRule(starInputRegex$1,this.type),module_8008f8e9_markInputRule(underscoreInputRegex$1,this.type)]},addPasteRules:function(){return[module_8008f8e9_markPasteRule(starPasteRegex$1,this.type),module_8008f8e9_markPasteRule(underscorePasteRegex$1,this.type)]}}),Heading=Node$2.create({name:"heading",defaultOptions:{levels:[1,2,3,4,5,6],HTMLAttributes:{}},content:"inline*",group:"block",defining:!0,addAttributes:function(){return{level:{default:1,rendered:!1}}},parseHTML:function(){return this.options.levels.map((function(level){return{tag:"h"+level,attrs:{level:level}}}))},renderHTML:function(_ref){var node=_ref.node,HTMLAttributes=_ref.HTMLAttributes;return["h"+(this.options.levels.includes(node.attrs.level)?node.attrs.level:this.options.levels[0]),module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){var _this=this;return{setHeading:function(attributes){return function(_ref2){var commands=_ref2.commands;return!!_this.options.levels.includes(attributes.level)&&commands.setNode("heading",attributes)}},toggleHeading:function(attributes){return function(_ref3){var commands=_ref3.commands;return!!_this.options.levels.includes(attributes.level)&&commands.toggleNode("heading","paragraph",attributes)}}}},addKeyboardShortcuts:function(){var _this2=this;return this.options.levels.reduce((function(items,level){var _extends2;return extends_default()({},items,((_extends2={})["Mod-Alt-"+level]=function(){return _this2.editor.commands.toggleHeading({level:level})},_extends2))}),{})},addInputRules:function(){var _this3=this;return this.options.levels.map((function(level){return regexp=new RegExp("^(#{1,"+level+"})\\s$"),nodeType=_this3.type,getAttrs={level:level},new module_8008f8e9_InputRule(regexp,(function(state,match,start,end){var $start=state.doc.resolve(start),attrs=getAttrs instanceof Function?getAttrs(match):getAttrs;return $start.node(-1).canReplaceWith($start.index(-1),$start.indexAfter(-1),nodeType)?state.tr.delete(start,end).setBlockType(start,start,nodeType,attrs):null}));var regexp,nodeType,getAttrs}))}}),inputRegex$2=/^\s*>\s$/gm,Blockquote=Node$2.create({name:"blockquote",defaultOptions:{HTMLAttributes:{}},content:"block*",group:"block",defining:!0,parseHTML:function(){return[{tag:"blockquote"}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["blockquote",module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){return{setBlockquote:function(){return function(_ref2){return _ref2.commands.wrapIn("blockquote")}},toggleBlockquote:function(){return function(_ref3){return _ref3.commands.toggleWrap("blockquote")}},unsetBlockquote:function(){return function(_ref4){return _ref4.commands.lift("blockquote")}}}},addKeyboardShortcuts:function(){var _this=this;return{"Mod-Shift-b":function(){return _this.editor.commands.toggleBlockquote()}}},addInputRules:function(){return[module_8008f8e9_wrappingInputRule(inputRegex$2,this.type)]}}),inputRegex$1=/^\s*([-+*])\s$/,BulletList=Node$2.create({name:"bulletList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",parseHTML:function(){return[{tag:"ul"}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["ul",module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){return{toggleBulletList:function(){return function(_ref2){return _ref2.commands.toggleList("bulletList","listItem")}}}},addKeyboardShortcuts:function(){var _this=this;return{"Mod-Shift-8":function(){return _this.editor.commands.toggleBulletList()}}},addInputRules:function(){return[module_8008f8e9_wrappingInputRule(inputRegex$1,this.type)]}}),_excluded$8=["start"],inputRegex=/^(\d+)\.\s$/,OrderedList=Node$2.create({name:"orderedList",defaultOptions:{HTMLAttributes:{}},group:"block list",content:"listItem+",addAttributes:function(){return{start:{default:1,parseHTML:function(element){return{start:element.hasAttribute("start")?parseInt(element.getAttribute("start")||"",10):1}}}}},parseHTML:function(){return[{tag:"ol"}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes,start=HTMLAttributes.start,attributesWithoutStart=objectWithoutPropertiesLoose_default()(HTMLAttributes,_excluded$8);return 1===start?["ol",module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,attributesWithoutStart),0]:["ol",module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){return{toggleOrderedList:function(){return function(_ref2){return _ref2.commands.toggleList("orderedList","listItem")}}}},addKeyboardShortcuts:function(){var _this=this;return{"Mod-Shift-7":function(){return _this.editor.commands.toggleOrderedList()}}},addInputRules:function(){return[module_8008f8e9_wrappingInputRule(inputRegex,this.type,(function(match){return{start:+match[1]}}),(function(match,node){return node.childCount+node.attrs.start===+match[1]}))]}}),ListItem=Node$2.create({name:"listItem",defaultOptions:{HTMLAttributes:{}},content:"paragraph block*",defining:!0,parseHTML:function(){return[{tag:"li"}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["li",module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,HTMLAttributes),0]},addKeyboardShortcuts:function(){var _this=this;return{Enter:function(){return _this.editor.commands.splitListItem("listItem")},Tab:function(){return _this.editor.commands.sinkListItem("listItem")},"Shift-Tab":function(){return _this.editor.commands.liftListItem("listItem")}}}}),__assign$m=function(){return(__assign$m=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function textStyle_TextAlignmentFromJSON(object){switch(object){case 0:case"AUTO":return"AUTO";case 1:case"LEFT":return"LEFT";case 2:case"RIGHT":return"RIGHT";case 3:case"CENTER":return"CENTER";case 4:case"JUSTIFY":return"JUSTIFY";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function textStyle_TextAlignmentToJSON(object){switch(object){case"AUTO":return"AUTO";case"LEFT":return"LEFT";case"RIGHT":return"RIGHT";case"CENTER":return"CENTER";case"JUSTIFY":return"JUSTIFY";default:return"UNKNOWN"}}function link_TargetFromJSON(object){switch(object){case 0:case"SELF":return"SELF";case 1:case"BLANK":return"BLANK";case 2:case"PARENT":return"PARENT";case 3:case"TOP":return"TOP";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function link_TargetToJSON(object){switch(object){case"SELF":return"SELF";case"BLANK":return"BLANK";case"PARENT":return"PARENT";case"TOP":return"TOP";default:return"UNKNOWN"}}function pluginContainerData_AlignmentFromJSON(object){switch(object){case 0:case"CENTER":return"CENTER";case 1:case"LEFT":return"LEFT";case 2:case"RIGHT":return"RIGHT";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function pluginContainerData_AlignmentToJSON(object){switch(object){case"CENTER":return"CENTER";case"LEFT":return"LEFT";case"RIGHT":return"RIGHT";default:return"UNKNOWN"}}function pluginContainerData_Width_TypeFromJSON(object){switch(object){case 0:case"CONTENT":return"CONTENT";case 1:case"SMALL":return"SMALL";case 2:case"ORIGINAL":return"ORIGINAL";case 3:case"FULL_WIDTH":return"FULL_WIDTH";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function pluginContainerData_Width_TypeToJSON(object){switch(object){case"CONTENT":return"CONTENT";case"SMALL":return"SMALL";case"ORIGINAL":return"ORIGINAL";case"FULL_WIDTH":return"FULL_WIDTH";default:return"UNKNOWN"}}var baseTextStyle$1={textAlignment:"AUTO"},TextStyle={fromJSON:function(object){var message=__assign$m({},baseTextStyle$1);return void 0!==object.textAlignment&&null!==object.textAlignment?message.textAlignment=textStyle_TextAlignmentFromJSON(object.textAlignment):message.textAlignment="AUTO",void 0!==object.lineHeight&&null!==object.lineHeight?message.lineHeight=String(object.lineHeight):message.lineHeight=void 0,message},toJSON:function(message){var obj={};return void 0!==message.textAlignment&&(obj.textAlignment=textStyle_TextAlignmentToJSON(message.textAlignment)),void 0!==message.lineHeight&&(obj.lineHeight=message.lineHeight),obj}},baseLink$2={target:"SELF"},Link$1={fromJSON:function(object){var message=__assign$m({},baseLink$2);return void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.anchor&&null!==object.anchor?message.anchor=String(object.anchor):message.anchor=void 0,void 0!==object.target&&null!==object.target?message.target=link_TargetFromJSON(object.target):message.target="SELF",void 0!==object.rel&&null!==object.rel?message.rel=Link_Rel$2.fromJSON(object.rel):message.rel=void 0,void 0!==object.customData&&null!==object.customData?message.customData=String(object.customData):message.customData=void 0,message},toJSON:function(message){var obj={};return void 0!==message.url&&(obj.url=message.url),void 0!==message.anchor&&(obj.anchor=message.anchor),void 0!==message.target&&(obj.target=link_TargetToJSON(message.target)),void 0!==message.rel&&(obj.rel=message.rel?Link_Rel$2.toJSON(message.rel):void 0),void 0!==message.customData&&(obj.customData=message.customData),obj}},baseLink_Rel$2={},Link_Rel$2={fromJSON:function(object){var message=__assign$m({},baseLink_Rel$2);return void 0!==object.nofollow&&null!==object.nofollow?message.nofollow=Boolean(object.nofollow):message.nofollow=void 0,void 0!==object.sponsored&&null!==object.sponsored?message.sponsored=Boolean(object.sponsored):message.sponsored=void 0,void 0!==object.ugc&&null!==object.ugc?message.ugc=Boolean(object.ugc):message.ugc=void 0,message},toJSON:function(message){var obj={};return void 0!==message.nofollow&&(obj.nofollow=message.nofollow),void 0!==message.sponsored&&(obj.sponsored=message.sponsored),void 0!==message.ugc&&(obj.ugc=message.ugc),obj}},basePluginContainerData$2={alignment:"CENTER"},PluginContainerData={fromJSON:function(object){var message=__assign$m({},basePluginContainerData$2);return void 0!==object.width&&null!==object.width?message.width=PluginContainerData_Width$2.fromJSON(object.width):message.width=void 0,void 0!==object.alignment&&null!==object.alignment?message.alignment=pluginContainerData_AlignmentFromJSON(object.alignment):message.alignment="CENTER",void 0!==object.spoiler&&null!==object.spoiler?message.spoiler=PluginContainerData_Spoiler$2.fromJSON(object.spoiler):message.spoiler=void 0,void 0!==object.height&&null!==object.height?message.height=PluginContainerData_Height$2.fromJSON(object.height):message.height=void 0,message},toJSON:function(message){var obj={};return void 0!==message.width&&(obj.width=message.width?PluginContainerData_Width$2.toJSON(message.width):void 0),void 0!==message.alignment&&(obj.alignment=pluginContainerData_AlignmentToJSON(message.alignment)),void 0!==message.spoiler&&(obj.spoiler=message.spoiler?PluginContainerData_Spoiler$2.toJSON(message.spoiler):void 0),void 0!==message.height&&(obj.height=message.height?PluginContainerData_Height$2.toJSON(message.height):void 0),obj}},basePluginContainerData_Spoiler$2={},PluginContainerData_Spoiler$2={fromJSON:function(object){var message=__assign$m({},basePluginContainerData_Spoiler$2);return void 0!==object.enabled&&null!==object.enabled?message.enabled=Boolean(object.enabled):message.enabled=void 0,void 0!==object.description&&null!==object.description?message.description=String(object.description):message.description=void 0,void 0!==object.buttonText&&null!==object.buttonText?message.buttonText=String(object.buttonText):message.buttonText=void 0,message},toJSON:function(message){var obj={};return void 0!==message.enabled&&(obj.enabled=message.enabled),void 0!==message.description&&(obj.description=message.description),void 0!==message.buttonText&&(obj.buttonText=message.buttonText),obj}},basePluginContainerData_Width$2={},PluginContainerData_Width$2={fromJSON:function(object){var message=__assign$m({},basePluginContainerData_Width$2);return void 0!==object.size&&null!==object.size?message.size=pluginContainerData_Width_TypeFromJSON(object.size):message.size=void 0,void 0!==object.custom&&null!==object.custom?message.custom=String(object.custom):message.custom=void 0,message},toJSON:function(message){var obj={};return void 0!==message.size&&(obj.size=void 0!==message.size?pluginContainerData_Width_TypeToJSON(message.size):void 0),void 0!==message.custom&&(obj.custom=message.custom),obj}},basePluginContainerData_Height$2={},PluginContainerData_Height$2={fromJSON:function(object){var message=__assign$m({},basePluginContainerData_Height$2);return void 0!==object.custom&&null!==object.custom?message.custom=String(object.custom):message.custom=void 0,message},toJSON:function(message){var obj={};return void 0!==message.custom&&(obj.custom=message.custom),obj}},baseFileSource$2={},FileSource={fromJSON:function(object){var message=__assign$m({},baseFileSource$2);return void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.custom&&null!==object.custom?message.custom=String(object.custom):message.custom=void 0,void 0!==object.id&&null!==object.id?message.id=String(object.id):message.id=void 0,void 0!==object.private&&null!==object.private?message.private=Boolean(object.private):message.private=void 0,message},toJSON:function(message){var obj={};return void 0!==message.url&&(obj.url=message.url),void 0!==message.custom&&(obj.custom=message.custom),void 0!==message.id&&(obj.id=message.id),void 0!==message.private&&(obj.private=message.private),obj}},baseMedia$2={},Media={fromJSON:function(object){var message=__assign$m({},baseMedia$2);return void 0!==object.src&&null!==object.src?message.src=FileSource.fromJSON(object.src):message.src=void 0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=void 0,void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=void 0,message},toJSON:function(message){var obj={};return void 0!==message.src&&(obj.src=message.src?FileSource.toJSON(message.src):void 0),void 0!==message.width&&(obj.width=message.width),void 0!==message.height&&(obj.height=message.height),obj}},baseOembed$2={},Oembed={fromJSON:function(object){var message=__assign$m({},baseOembed$2);return void 0!==object.type&&null!==object.type?message.type=String(object.type):message.type=void 0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=void 0,void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.html&&null!==object.html?message.html=String(object.html):message.html=void 0,void 0!==object.authorName&&null!==object.authorName?message.authorName=String(object.authorName):message.authorName=void 0,void 0!==object.authorUrl&&null!==object.authorUrl?message.authorUrl=String(object.authorUrl):message.authorUrl=void 0,void 0!==object.providerName&&null!==object.providerName?message.providerName=String(object.providerName):message.providerName=void 0,void 0!==object.providerUrl&&null!==object.providerUrl?message.providerUrl=String(object.providerUrl):message.providerUrl=void 0,void 0!==object.thumbnailUrl&&null!==object.thumbnailUrl?message.thumbnailUrl=String(object.thumbnailUrl):message.thumbnailUrl=void 0,void 0!==object.thumbnailWidth&&null!==object.thumbnailWidth?message.thumbnailWidth=String(object.thumbnailWidth):message.thumbnailWidth=void 0,void 0!==object.thumbnailHeight&&null!==object.thumbnailHeight?message.thumbnailHeight=String(object.thumbnailHeight):message.thumbnailHeight=void 0,void 0!==object.videoUrl&&null!==object.videoUrl?message.videoUrl=String(object.videoUrl):message.videoUrl=void 0,void 0!==object.version&&null!==object.version?message.version=String(object.version):message.version=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=message.type),void 0!==message.width&&(obj.width=message.width),void 0!==message.height&&(obj.height=message.height),void 0!==message.title&&(obj.title=message.title),void 0!==message.url&&(obj.url=message.url),void 0!==message.html&&(obj.html=message.html),void 0!==message.authorName&&(obj.authorName=message.authorName),void 0!==message.authorUrl&&(obj.authorUrl=message.authorUrl),void 0!==message.providerName&&(obj.providerName=message.providerName),void 0!==message.providerUrl&&(obj.providerUrl=message.providerUrl),void 0!==message.thumbnailUrl&&(obj.thumbnailUrl=message.thumbnailUrl),void 0!==message.thumbnailWidth&&(obj.thumbnailWidth=message.thumbnailWidth),void 0!==message.thumbnailHeight&&(obj.thumbnailHeight=message.thumbnailHeight),void 0!==message.videoUrl&&(obj.videoUrl=message.videoUrl),void 0!==message.version&&(obj.version=message.version),obj}},__assign$l=function(){return(__assign$l=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseAnchorData$1={anchor:""},AnchorData={fromJSON:function(object){var message=__assign$l({},baseAnchorData$1);return void 0!==object.anchor&&null!==object.anchor?message.anchor=String(object.anchor):message.anchor="",message},toJSON:function(message){var obj={};return void 0!==message.anchor&&(obj.anchor=message.anchor),obj}},__assign$k=function(){return(__assign$k=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseColorData$1={},ColorData={fromJSON:function(object){var message=__assign$k({},baseColorData$1);return void 0!==object.background&&null!==object.background?message.background=String(object.background):message.background=void 0,void 0!==object.foreground&&null!==object.foreground?message.foreground=String(object.foreground):message.foreground=void 0,message},toJSON:function(message){var obj={};return void 0!==message.background&&(obj.background=message.background),void 0!==message.foreground&&(obj.foreground=message.foreground),obj}},__assign$j=function(){return(__assign$j=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseLinkData$1={},LinkData={fromJSON:function(object){var message=__assign$j({},baseLinkData$1);return void 0!==object.link&&null!==object.link?message.link=Link$1.fromJSON(object.link):message.link=void 0,message},toJSON:function(message){var obj={};return void 0!==message.link&&(obj.link=message.link?Link$1.toJSON(message.link):void 0),obj}},__assign$i=function(){return(__assign$i=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseMentionData$1={name:"",slug:""},MentionData={fromJSON:function(object){var message=__assign$i({},baseMentionData$1);return void 0!==object.name&&null!==object.name?message.name=String(object.name):message.name="",void 0!==object.slug&&null!==object.slug?message.slug=String(object.slug):message.slug="",message},toJSON:function(message){var obj={};return void 0!==message.name&&(obj.name=message.name),void 0!==message.slug&&(obj.slug=message.slug),obj}},__assign$h=function(){return(__assign$h=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseCodeBlockData$1={},CodeBlockData={fromJSON:function(object){var message=__assign$h({},baseCodeBlockData$1);return void 0!==object.textStyle&&null!==object.textStyle?message.textStyle=TextStyle.fromJSON(object.textStyle):message.textStyle=void 0,message},toJSON:function(message){var obj={};return void 0!==message.textStyle&&(obj.textStyle=message.textStyle?TextStyle.toJSON(message.textStyle):void 0),obj}},__assign$g=function(){return(__assign$g=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseHeadingData$1={level:0},HeadingData={fromJSON:function(object){var message=__assign$g({},baseHeadingData$1);return void 0!==object.level&&null!==object.level?message.level=Number(object.level):message.level=0,void 0!==object.textStyle&&null!==object.textStyle?message.textStyle=TextStyle.fromJSON(object.textStyle):message.textStyle=void 0,void 0!==object.indentation&&null!==object.indentation?message.indentation=Number(object.indentation):message.indentation=void 0,message},toJSON:function(message){var obj={};return void 0!==message.level&&(obj.level=message.level),void 0!==message.textStyle&&(obj.textStyle=message.textStyle?TextStyle.toJSON(message.textStyle):void 0),void 0!==message.indentation&&(obj.indentation=message.indentation),obj}},__assign$f=function(){return(__assign$f=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseParagraphData$1={},ParagraphData={fromJSON:function(object){var message=__assign$f({},baseParagraphData$1);return void 0!==object.textStyle&&null!==object.textStyle?message.textStyle=TextStyle.fromJSON(object.textStyle):message.textStyle=void 0,void 0!==object.indentation&&null!==object.indentation?message.indentation=Number(object.indentation):message.indentation=void 0,message},toJSON:function(message){var obj={};return void 0!==message.textStyle&&(obj.textStyle=message.textStyle?TextStyle.toJSON(message.textStyle):void 0),void 0!==message.indentation&&(obj.indentation=message.indentation),obj}},__assign$e=function(){return(__assign$e=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function appEmbedData_AppTypeFromJSON(object){switch(object){case 0:case"PRODUCT":return"PRODUCT";case 1:case"EVENT":return"EVENT";case 2:case"BOOKING":return"BOOKING";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function appEmbedData_AppTypeToJSON(object){switch(object){case"PRODUCT":return"PRODUCT";case"EVENT":return"EVENT";case"BOOKING":return"BOOKING";default:return"UNKNOWN"}}var baseAppEmbedData$2={type:"PRODUCT"},AppEmbedData$2={fromJSON:function(object){var message=__assign$e({},baseAppEmbedData$2);return void 0!==object.type&&null!==object.type?message.type=appEmbedData_AppTypeFromJSON(object.type):message.type="PRODUCT",void 0!==object.itemId&&null!==object.itemId?message.itemId=String(object.itemId):message.itemId=void 0,void 0!==object.name&&null!==object.name?message.name=String(object.name):message.name=void 0,void 0!==object.imageSrc&&null!==object.imageSrc?message.imageSrc=String(object.imageSrc):message.imageSrc=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.bookingData&&null!==object.bookingData?message.bookingData=AppEmbedData_BookingData$2.fromJSON(object.bookingData):message.bookingData=void 0,void 0!==object.eventData&&null!==object.eventData?message.eventData=AppEmbedData_EventData$2.fromJSON(object.eventData):message.eventData=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=appEmbedData_AppTypeToJSON(message.type)),void 0!==message.itemId&&(obj.itemId=message.itemId),void 0!==message.name&&(obj.name=message.name),void 0!==message.imageSrc&&(obj.imageSrc=message.imageSrc),void 0!==message.url&&(obj.url=message.url),void 0!==message.bookingData&&(obj.bookingData=message.bookingData?AppEmbedData_BookingData$2.toJSON(message.bookingData):void 0),void 0!==message.eventData&&(obj.eventData=message.eventData?AppEmbedData_EventData$2.toJSON(message.eventData):void 0),obj}},baseAppEmbedData_BookingData$2={},AppEmbedData_BookingData$2={fromJSON:function(object){var message=__assign$e({},baseAppEmbedData_BookingData$2);return void 0!==object.durations&&null!==object.durations?message.durations=String(object.durations):message.durations=void 0,message},toJSON:function(message){var obj={};return void 0!==message.durations&&(obj.durations=message.durations),obj}},baseAppEmbedData_EventData$2={},AppEmbedData_EventData$2={fromJSON:function(object){var message=__assign$e({},baseAppEmbedData_EventData$2);return void 0!==object.scheduling&&null!==object.scheduling?message.scheduling=String(object.scheduling):message.scheduling=void 0,void 0!==object.location&&null!==object.location?message.location=String(object.location):message.location=void 0,message},toJSON:function(message){var obj={};return void 0!==message.scheduling&&(obj.scheduling=message.scheduling),void 0!==message.location&&(obj.location=message.location),obj}},__assign$d=function(){return(__assign$d=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function buttonData_TypeFromJSON(object){switch(object){case 0:case"LINK":return"LINK";case 1:case"ACTION":return"ACTION";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function buttonData_TypeToJSON(object){switch(object){case"LINK":return"LINK";case"ACTION":return"ACTION";default:return"UNKNOWN"}}var baseButtonData$2={type:"LINK"},ButtonData$2={fromJSON:function(object){var message=__assign$d({},baseButtonData$2);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.type&&null!==object.type?message.type=buttonData_TypeFromJSON(object.type):message.type="LINK",void 0!==object.styles&&null!==object.styles?message.styles=ButtonData_ButtonStyles$2.fromJSON(object.styles):message.styles=void 0,void 0!==object.text&&null!==object.text?message.text=String(object.text):message.text=void 0,void 0!==object.link&&null!==object.link?message.link=Link$1.fromJSON(object.link):message.link=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),void 0!==message.type&&(obj.type=buttonData_TypeToJSON(message.type)),void 0!==message.styles&&(obj.styles=message.styles?ButtonData_ButtonStyles$2.toJSON(message.styles):void 0),void 0!==message.text&&(obj.text=message.text),void 0!==message.link&&(obj.link=message.link?Link$1.toJSON(message.link):void 0),obj}},baseButtonData_ButtonStyles$2={},ButtonData_ButtonStyles$2={fromJSON:function(object){var message=__assign$d({},baseButtonData_ButtonStyles$2);return void 0!==object.borderWidth&&null!==object.borderWidth?message.borderWidth=Number(object.borderWidth):message.borderWidth=void 0,void 0!==object.borderRadius&&null!==object.borderRadius?message.borderRadius=Number(object.borderRadius):message.borderRadius=void 0,void 0!==object.textColor&&null!==object.textColor?message.textColor=String(object.textColor):message.textColor=void 0,void 0!==object.borderColor&&null!==object.borderColor?message.borderColor=String(object.borderColor):message.borderColor=void 0,void 0!==object.backgroundColor&&null!==object.backgroundColor?message.backgroundColor=String(object.backgroundColor):message.backgroundColor=void 0,message},toJSON:function(message){var obj={};return void 0!==message.borderWidth&&(obj.borderWidth=message.borderWidth),void 0!==message.borderRadius&&(obj.borderRadius=message.borderRadius),void 0!==message.textColor&&(obj.textColor=message.textColor),void 0!==message.borderColor&&(obj.borderColor=message.borderColor),void 0!==message.backgroundColor&&(obj.backgroundColor=message.backgroundColor),obj}},__assign$c=function(){return(__assign$c=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function dividerData_LineStyleFromJSON(object){switch(object){case 0:case"SINGLE":return"SINGLE";case 1:case"DOUBLE":return"DOUBLE";case 2:case"DASHED":return"DASHED";case 3:case"DOTTED":return"DOTTED";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function dividerData_LineStyleToJSON(object){switch(object){case"SINGLE":return"SINGLE";case"DOUBLE":return"DOUBLE";case"DASHED":return"DASHED";case"DOTTED":return"DOTTED";default:return"UNKNOWN"}}function dividerData_WidthFromJSON(object){switch(object){case 0:case"LARGE":return"LARGE";case 1:case"MEDIUM":return"MEDIUM";case 2:case"SMALL":return"SMALL";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function dividerData_WidthToJSON(object){switch(object){case"LARGE":return"LARGE";case"MEDIUM":return"MEDIUM";case"SMALL":return"SMALL";default:return"UNKNOWN"}}function dividerData_AlignmentFromJSON(object){switch(object){case 0:case"CENTER":return"CENTER";case 1:case"LEFT":return"LEFT";case 2:case"RIGHT":return"RIGHT";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function dividerData_AlignmentToJSON(object){switch(object){case"CENTER":return"CENTER";case"LEFT":return"LEFT";case"RIGHT":return"RIGHT";default:return"UNKNOWN"}}var baseDividerData$2={lineStyle:"SINGLE",width:"LARGE",alignment:"CENTER"},DividerData$2={fromJSON:function(object){var message=__assign$c({},baseDividerData$2);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.lineStyle&&null!==object.lineStyle?message.lineStyle=dividerData_LineStyleFromJSON(object.lineStyle):message.lineStyle="SINGLE",void 0!==object.width&&null!==object.width?message.width=dividerData_WidthFromJSON(object.width):message.width="LARGE",void 0!==object.alignment&&null!==object.alignment?message.alignment=dividerData_AlignmentFromJSON(object.alignment):message.alignment="CENTER",message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),void 0!==message.lineStyle&&(obj.lineStyle=dividerData_LineStyleToJSON(message.lineStyle)),void 0!==message.width&&(obj.width=dividerData_WidthToJSON(message.width)),void 0!==message.alignment&&(obj.alignment=dividerData_AlignmentToJSON(message.alignment)),obj}},__assign$b=function(){return(__assign$b=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseEmbedData$2={},EmbedData$2={fromJSON:function(object){var message=__assign$b({},baseEmbedData$2);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.oembed&&null!==object.oembed?message.oembed=Oembed.fromJSON(object.oembed):message.oembed=void 0,void 0!==object.src&&null!==object.src?message.src=String(object.src):message.src=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),void 0!==message.oembed&&(obj.oembed=message.oembed?Oembed.toJSON(message.oembed):void 0),void 0!==message.src&&(obj.src=message.src),obj}},__assign$a=function(){return(__assign$a=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseFileData$2={},FileData$2={fromJSON:function(object){var message=__assign$a({},baseFileData$2);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.src&&null!==object.src?message.src=FileSource.fromJSON(object.src):message.src=void 0,void 0!==object.name&&null!==object.name?message.name=String(object.name):message.name=void 0,void 0!==object.type&&null!==object.type?message.type=String(object.type):message.type=void 0,void 0!==object.size&&null!==object.size?message.size=Number(object.size):message.size=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),void 0!==message.src&&(obj.src=message.src?FileSource.toJSON(message.src):void 0),void 0!==message.name&&(obj.name=message.name),void 0!==message.type&&(obj.type=message.type),void 0!==message.size&&(obj.size=message.size),obj}},__assign$9=function(){return(__assign$9=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseGalleryData$2={},GalleryData$2={fromJSON:function(object){var message=__assign$9({},baseGalleryData$2);if(message.items=[],void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.items&&null!==object.items)for(var _i=0,_a=object.items;_i<_a.length;_i++){var e=_a[_i];message.items.push(GalleryItem$2.fromJSON(e))}return void 0!==object.styles&&null!==object.styles?message.styles=GalleryStyles$2.fromJSON(object.styles):message.styles=void 0,void 0!==object.config&&null!==object.config?message.config=GalleryConfig$2.fromJSON(object.config):message.config=void 0,void 0!==object.disableExpand&&null!==object.disableExpand?message.disableExpand=Boolean(object.disableExpand):message.disableExpand=void 0,void 0!==object.disableDownload&&null!==object.disableDownload?message.disableDownload=Boolean(object.disableDownload):message.disableDownload=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),message.items?obj.items=message.items.map((function(e){return e?GalleryItem$2.toJSON(e):void 0})):obj.items=[],void 0!==message.styles&&(obj.styles=message.styles?GalleryStyles$2.toJSON(message.styles):void 0),void 0!==message.config&&(obj.config=message.config?GalleryConfig$2.toJSON(message.config):void 0),void 0!==message.disableExpand&&(obj.disableExpand=message.disableExpand),void 0!==message.disableDownload&&(obj.disableDownload=message.disableDownload),obj}},baseGalleryStyles$2={},GalleryStyles$2={fromJSON:function(object){var message=__assign$9({},baseGalleryStyles$2);return void 0!==object.galleryLayout&&null!==object.galleryLayout?message.galleryLayout=Number(object.galleryLayout):message.galleryLayout=void 0,void 0!==object.gallerySizeType&&null!==object.gallerySizeType?message.gallerySizeType=String(object.gallerySizeType):message.gallerySizeType=void 0,void 0!==object.gallerySizePx&&null!==object.gallerySizePx?message.gallerySizePx=Number(object.gallerySizePx):message.gallerySizePx=void 0,void 0!==object.oneRow&&null!==object.oneRow?message.oneRow=Boolean(object.oneRow):message.oneRow=void 0,void 0!==object.cubeRatio&&null!==object.cubeRatio?message.cubeRatio=Number(object.cubeRatio):message.cubeRatio=void 0,void 0!==object.galleryThumbnailsAlignment&&null!==object.galleryThumbnailsAlignment?message.galleryThumbnailsAlignment=String(object.galleryThumbnailsAlignment):message.galleryThumbnailsAlignment=void 0,void 0!==object.isVertical&&null!==object.isVertical?message.isVertical=Boolean(object.isVertical):message.isVertical=void 0,void 0!==object.numberOfImagesPerRow&&null!==object.numberOfImagesPerRow?message.numberOfImagesPerRow=Number(object.numberOfImagesPerRow):message.numberOfImagesPerRow=void 0,void 0!==object.imageMargin&&null!==object.imageMargin?message.imageMargin=Number(object.imageMargin):message.imageMargin=void 0,void 0!==object.thumbnailSpacings&&null!==object.thumbnailSpacings?message.thumbnailSpacings=Number(object.thumbnailSpacings):message.thumbnailSpacings=void 0,void 0!==object.cubeType&&null!==object.cubeType?message.cubeType=String(object.cubeType):message.cubeType=void 0,void 0!==object.enableInfiniteScroll&&null!==object.enableInfiniteScroll?message.enableInfiniteScroll=Boolean(object.enableInfiniteScroll):message.enableInfiniteScroll=void 0,void 0!==object.titlePlacement&&null!==object.titlePlacement?message.titlePlacement=String(object.titlePlacement):message.titlePlacement=void 0,void 0!==object.allowHover&&null!==object.allowHover?message.allowHover=Boolean(object.allowHover):message.allowHover=void 0,void 0!==object.itemClick&&null!==object.itemClick?message.itemClick=String(object.itemClick):message.itemClick=void 0,void 0!==object.showArrows&&null!==object.showArrows?message.showArrows=Boolean(object.showArrows):message.showArrows=void 0,void 0!==object.gridStyle&&null!==object.gridStyle?message.gridStyle=Number(object.gridStyle):message.gridStyle=void 0,void 0!==object.loveButton&&null!==object.loveButton?message.loveButton=Boolean(object.loveButton):message.loveButton=void 0,void 0!==object.allowSocial&&null!==object.allowSocial?message.allowSocial=Boolean(object.allowSocial):message.allowSocial=void 0,void 0!==object.allowDownload&&null!==object.allowDownload?message.allowDownload=Boolean(object.allowDownload):message.allowDownload=void 0,void 0!==object.cubeImages&&null!==object.cubeImages?message.cubeImages=Boolean(object.cubeImages):message.cubeImages=void 0,void 0!==object.groupSize&&null!==object.groupSize?message.groupSize=Number(object.groupSize):message.groupSize=void 0,void 0!==object.groupTypes&&null!==object.groupTypes?message.groupTypes=String(object.groupTypes):message.groupTypes=void 0,void 0!==object.fixedColumns&&null!==object.fixedColumns?message.fixedColumns=Number(object.fixedColumns):message.fixedColumns=void 0,void 0!==object.hasThumbnails&&null!==object.hasThumbnails?message.hasThumbnails=Boolean(object.hasThumbnails):message.hasThumbnails=void 0,void 0!==object.enableScroll&&null!==object.enableScroll?message.enableScroll=Boolean(object.enableScroll):message.enableScroll=void 0,void 0!==object.isGrid&&null!==object.isGrid?message.isGrid=Boolean(object.isGrid):message.isGrid=void 0,void 0!==object.isSlider&&null!==object.isSlider?message.isSlider=Boolean(object.isSlider):message.isSlider=void 0,void 0!==object.isColumns&&null!==object.isColumns?message.isColumns=Boolean(object.isColumns):message.isColumns=void 0,void 0!==object.isSlideshow&&null!==object.isSlideshow?message.isSlideshow=Boolean(object.isSlideshow):message.isSlideshow=void 0,void 0!==object.cropOnlyFill&&null!==object.cropOnlyFill?message.cropOnlyFill=Boolean(object.cropOnlyFill):message.cropOnlyFill=void 0,void 0!==object.galleryMargin&&null!==object.galleryMargin?message.galleryMargin=Number(object.galleryMargin):message.galleryMargin=void 0,void 0!==object.fullscreen&&null!==object.fullscreen?message.fullscreen=Boolean(object.fullscreen):message.fullscreen=void 0,void 0!==object.mobileSwipeAnimation&&null!==object.mobileSwipeAnimation?message.mobileSwipeAnimation=String(object.mobileSwipeAnimation):message.mobileSwipeAnimation=void 0,void 0!==object.thumbnailSize&&null!==object.thumbnailSize?message.thumbnailSize=Number(object.thumbnailSize):message.thumbnailSize=void 0,void 0!==object.gotStyleParams&&null!==object.gotStyleParams?message.gotStyleParams=Boolean(object.gotStyleParams):message.gotStyleParams=void 0,void 0!==object.showVideoPlayButton&&null!==object.showVideoPlayButton?message.showVideoPlayButton=Boolean(object.showVideoPlayButton):message.showVideoPlayButton=void 0,void 0!==object.videoPlay&&null!==object.videoPlay?message.videoPlay=String(object.videoPlay):message.videoPlay=void 0,void 0!==object.galleryType&&null!==object.galleryType?message.galleryType=String(object.galleryType):message.galleryType=void 0,message},toJSON:function(message){var obj={};return void 0!==message.galleryLayout&&(obj.galleryLayout=message.galleryLayout),void 0!==message.gallerySizeType&&(obj.gallerySizeType=message.gallerySizeType),void 0!==message.gallerySizePx&&(obj.gallerySizePx=message.gallerySizePx),void 0!==message.oneRow&&(obj.oneRow=message.oneRow),void 0!==message.cubeRatio&&(obj.cubeRatio=message.cubeRatio),void 0!==message.galleryThumbnailsAlignment&&(obj.galleryThumbnailsAlignment=message.galleryThumbnailsAlignment),void 0!==message.isVertical&&(obj.isVertical=message.isVertical),void 0!==message.numberOfImagesPerRow&&(obj.numberOfImagesPerRow=message.numberOfImagesPerRow),void 0!==message.imageMargin&&(obj.imageMargin=message.imageMargin),void 0!==message.thumbnailSpacings&&(obj.thumbnailSpacings=message.thumbnailSpacings),void 0!==message.cubeType&&(obj.cubeType=message.cubeType),void 0!==message.enableInfiniteScroll&&(obj.enableInfiniteScroll=message.enableInfiniteScroll),void 0!==message.titlePlacement&&(obj.titlePlacement=message.titlePlacement),void 0!==message.allowHover&&(obj.allowHover=message.allowHover),void 0!==message.itemClick&&(obj.itemClick=message.itemClick),void 0!==message.showArrows&&(obj.showArrows=message.showArrows),void 0!==message.gridStyle&&(obj.gridStyle=message.gridStyle),void 0!==message.loveButton&&(obj.loveButton=message.loveButton),void 0!==message.allowSocial&&(obj.allowSocial=message.allowSocial),void 0!==message.allowDownload&&(obj.allowDownload=message.allowDownload),void 0!==message.cubeImages&&(obj.cubeImages=message.cubeImages),void 0!==message.groupSize&&(obj.groupSize=message.groupSize),void 0!==message.groupTypes&&(obj.groupTypes=message.groupTypes),void 0!==message.fixedColumns&&(obj.fixedColumns=message.fixedColumns),void 0!==message.hasThumbnails&&(obj.hasThumbnails=message.hasThumbnails),void 0!==message.enableScroll&&(obj.enableScroll=message.enableScroll),void 0!==message.isGrid&&(obj.isGrid=message.isGrid),void 0!==message.isSlider&&(obj.isSlider=message.isSlider),void 0!==message.isColumns&&(obj.isColumns=message.isColumns),void 0!==message.isSlideshow&&(obj.isSlideshow=message.isSlideshow),void 0!==message.cropOnlyFill&&(obj.cropOnlyFill=message.cropOnlyFill),void 0!==message.galleryMargin&&(obj.galleryMargin=message.galleryMargin),void 0!==message.fullscreen&&(obj.fullscreen=message.fullscreen),void 0!==message.mobileSwipeAnimation&&(obj.mobileSwipeAnimation=message.mobileSwipeAnimation),void 0!==message.thumbnailSize&&(obj.thumbnailSize=message.thumbnailSize),void 0!==message.gotStyleParams&&(obj.gotStyleParams=message.gotStyleParams),void 0!==message.showVideoPlayButton&&(obj.showVideoPlayButton=message.showVideoPlayButton),void 0!==message.videoPlay&&(obj.videoPlay=message.videoPlay),void 0!==message.galleryType&&(obj.galleryType=message.galleryType),obj}},baseGalleryConfig$2={},GalleryConfig$2={fromJSON:function(object){var message=__assign$9({},baseGalleryConfig$2);return void 0!==object.layout&&null!==object.layout?message.layout=String(object.layout):message.layout=void 0,void 0!==object.spacing&&null!==object.spacing?message.spacing=Number(object.spacing):message.spacing=void 0,void 0!==object.key&&null!==object.key?message.key=String(object.key):message.key=void 0,void 0!==object.disableExpand&&null!==object.disableExpand?message.disableExpand=Boolean(object.disableExpand):message.disableExpand=void 0,message},toJSON:function(message){var obj={};return void 0!==message.layout&&(obj.layout=message.layout),void 0!==message.spacing&&(obj.spacing=message.spacing),void 0!==message.key&&(obj.key=message.key),void 0!==message.disableExpand&&(obj.disableExpand=message.disableExpand),obj}},baseGalleyItemMetadata$2={},GalleyItemMetadata={fromJSON:function(object){var message=__assign$9({},baseGalleyItemMetadata$2);return void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=void 0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.type&&null!==object.type?message.type=String(object.type):message.type=void 0,message},toJSON:function(message){var obj={};return void 0!==message.height&&(obj.height=message.height),void 0!==message.width&&(obj.width=message.width),void 0!==message.title&&(obj.title=message.title),void 0!==message.type&&(obj.type=message.type),obj}},baseGalleryItem$2={},GalleryItem$2={fromJSON:function(object){var message=__assign$9({},baseGalleryItem$2);return void 0!==object.metadata&&null!==object.metadata?message.metadata=GalleyItemMetadata.fromJSON(object.metadata):message.metadata=void 0,void 0!==object.itemId&&null!==object.itemId?message.itemId=String(object.itemId):message.itemId=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.selected&&null!==object.selected?message.selected=Boolean(object.selected):message.selected=void 0,message},toJSON:function(message){var obj={};return void 0!==message.metadata&&(obj.metadata=message.metadata?GalleyItemMetadata.toJSON(message.metadata):void 0),void 0!==message.itemId&&(obj.itemId=message.itemId),void 0!==message.url&&(obj.url=message.url),void 0!==message.selected&&(obj.selected=message.selected),obj}},__assign$8=function(){return(__assign$8=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseGIFData$2={height:0,width:0},GIFData$2={fromJSON:function(object){var message=__assign$8({},baseGIFData$2);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.original&&null!==object.original?message.original=GIF$2.fromJSON(object.original):message.original=void 0,void 0!==object.downsized&&null!==object.downsized?message.downsized=GIF$2.fromJSON(object.downsized):message.downsized=void 0,void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),void 0!==message.original&&(obj.original=message.original?GIF$2.toJSON(message.original):void 0),void 0!==message.downsized&&(obj.downsized=message.downsized?GIF$2.toJSON(message.downsized):void 0),void 0!==message.height&&(obj.height=message.height),void 0!==message.width&&(obj.width=message.width),obj}},baseGIF$2={},GIF$2={fromJSON:function(object){var message=__assign$8({},baseGIF$2);return void 0!==object.gif&&null!==object.gif?message.gif=String(object.gif):message.gif=void 0,void 0!==object.mp4&&null!==object.mp4?message.mp4=String(object.mp4):message.mp4=void 0,void 0!==object.still&&null!==object.still?message.still=String(object.still):message.still=void 0,message},toJSON:function(message){var obj={};return void 0!==message.gif&&(obj.gif=message.gif),void 0!==message.mp4&&(obj.mp4=message.mp4),void 0!==message.still&&(obj.still=message.still),obj}},__assign$7=function(){return(__assign$7=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseHTMLData$2={},HTMLData$2={fromJSON:function(object){var message=__assign$7({},baseHTMLData$2);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.html&&null!==object.html?message.html=String(object.html):message.html=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),void 0!==message.url&&(obj.url=message.url),void 0!==message.html&&(obj.html=message.html),obj}},__assign$6=function(){return(__assign$6=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseImageData$2={},ImageData$2={fromJSON:function(object){var message=__assign$6({},baseImageData$2);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.image&&null!==object.image?message.image=Media.fromJSON(object.image):message.image=void 0,void 0!==object.link&&null!==object.link?message.link=Link$1.fromJSON(object.link):message.link=void 0,void 0!==object.disableExpand&&null!==object.disableExpand?message.disableExpand=Boolean(object.disableExpand):message.disableExpand=void 0,void 0!==object.altText&&null!==object.altText?message.altText=String(object.altText):message.altText=void 0,void 0!==object.caption&&null!==object.caption?message.caption=String(object.caption):message.caption=void 0,void 0!==object.disableDownload&&null!==object.disableDownload?message.disableDownload=Boolean(object.disableDownload):message.disableDownload=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),void 0!==message.image&&(obj.image=message.image?Media.toJSON(message.image):void 0),void 0!==message.link&&(obj.link=message.link?Link$1.toJSON(message.link):void 0),void 0!==message.disableExpand&&(obj.disableExpand=message.disableExpand),void 0!==message.altText&&(obj.altText=message.altText),void 0!==message.caption&&(obj.caption=message.caption),void 0!==message.disableDownload&&(obj.disableDownload=message.disableDownload),obj}},__assign$5=function(){return(__assign$5=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseLinkPreviewData$2={},LinkPreviewData$2={fromJSON:function(object){var message=__assign$5({},baseLinkPreviewData$2);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.link&&null!==object.link?message.link=Link$1.fromJSON(object.link):message.link=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.thumbnailUrl&&null!==object.thumbnailUrl?message.thumbnailUrl=String(object.thumbnailUrl):message.thumbnailUrl=void 0,void 0!==object.description&&null!==object.description?message.description=String(object.description):message.description=void 0,void 0!==object.html&&null!==object.html?message.html=String(object.html):message.html=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),void 0!==message.link&&(obj.link=message.link?Link$1.toJSON(message.link):void 0),void 0!==message.title&&(obj.title=message.title),void 0!==message.thumbnailUrl&&(obj.thumbnailUrl=message.thumbnailUrl),void 0!==message.description&&(obj.description=message.description),void 0!==message.html&&(obj.html=message.html),obj}},__assign$4=function(){return(__assign$4=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function mapTypeFromJSON(object){switch(object){case 0:case"ROADMAP":return"ROADMAP";case 1:case"SATELITE":return"SATELITE";case 2:case"HYBRID":return"HYBRID";case 3:case"TERRAIN":return"TERRAIN";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function mapTypeToJSON(object){switch(object){case"ROADMAP":return"ROADMAP";case"SATELITE":return"SATELITE";case"HYBRID":return"HYBRID";case"TERRAIN":return"TERRAIN";default:return"UNKNOWN"}}var baseMapData$2={},MapData$2={fromJSON:function(object){var message=__assign$4({},baseMapData$2);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.mapSettings&&null!==object.mapSettings?message.mapSettings=MapSettings$2.fromJSON(object.mapSettings):message.mapSettings=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),void 0!==message.mapSettings&&(obj.mapSettings=message.mapSettings?MapSettings$2.toJSON(message.mapSettings):void 0),obj}},baseMapSettings$2={mapType:"ROADMAP"},MapSettings$2={fromJSON:function(object){var message=__assign$4({},baseMapSettings$2);return void 0!==object.address&&null!==object.address?message.address=String(object.address):message.address=void 0,void 0!==object.draggable&&null!==object.draggable?message.draggable=Boolean(object.draggable):message.draggable=void 0,void 0!==object.marker&&null!==object.marker?message.marker=Boolean(object.marker):message.marker=void 0,void 0!==object.streetViewControl&&null!==object.streetViewControl?message.streetViewControl=Boolean(object.streetViewControl):message.streetViewControl=void 0,void 0!==object.zoomControl&&null!==object.zoomControl?message.zoomControl=Boolean(object.zoomControl):message.zoomControl=void 0,void 0!==object.lat&&null!==object.lat?message.lat=Number(object.lat):message.lat=void 0,void 0!==object.lng&&null!==object.lng?message.lng=Number(object.lng):message.lng=void 0,void 0!==object.locationName&&null!==object.locationName?message.locationName=String(object.locationName):message.locationName=void 0,void 0!==object.viewModeControl&&null!==object.viewModeControl?message.viewModeControl=Boolean(object.viewModeControl):message.viewModeControl=void 0,void 0!==object.initialZoom&&null!==object.initialZoom?message.initialZoom=Number(object.initialZoom):message.initialZoom=void 0,void 0!==object.mapType&&null!==object.mapType?message.mapType=mapTypeFromJSON(object.mapType):message.mapType="ROADMAP",message},toJSON:function(message){var obj={};return void 0!==message.address&&(obj.address=message.address),void 0!==message.draggable&&(obj.draggable=message.draggable),void 0!==message.marker&&(obj.marker=message.marker),void 0!==message.streetViewControl&&(obj.streetViewControl=message.streetViewControl),void 0!==message.zoomControl&&(obj.zoomControl=message.zoomControl),void 0!==message.lat&&(obj.lat=message.lat),void 0!==message.lng&&(obj.lng=message.lng),void 0!==message.locationName&&(obj.locationName=message.locationName),void 0!==message.viewModeControl&&(obj.viewModeControl=message.viewModeControl),void 0!==message.initialZoom&&(obj.initialZoom=message.initialZoom),void 0!==message.mapType&&(obj.mapType=mapTypeToJSON(message.mapType)),obj}},__assign$3=function(){return(__assign$3=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function pollSettings_ResultsVisibilityFromJSON(object){switch(object){case 0:case"ALWAYS":return"ALWAYS";case 1:case"VOTERS_ONLY":return"VOTERS_ONLY";case 2:case"ONLY_ME":return"ONLY_ME";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function pollSettings_ResultsVisibilityToJSON(object){switch(object){case"ALWAYS":return"ALWAYS";case"VOTERS_ONLY":return"VOTERS_ONLY";case"ONLY_ME":return"ONLY_ME";default:return"UNKNOWN"}}function pollSettings_VoteRoleFromJSON(object){switch(object){case 0:case"ALL":return"ALL";case 1:case"SITE_MEMBERS":return"SITE_MEMBERS";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function pollSettings_VoteRoleToJSON(object){switch(object){case"ALL":return"ALL";case"SITE_MEMBERS":return"SITE_MEMBERS";default:return"UNKNOWN"}}function pollWidgetLayout_PollLayout_LayoutTypeFromJSON(object){switch(object){case 0:case"LIST":return"LIST";case 1:case"GRID":return"GRID";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function pollWidgetLayout_PollLayout_LayoutTypeToJSON(object){switch(object){case"LIST":return"LIST";case"GRID":return"GRID";default:return"UNKNOWN"}}function pollWidgetLayout_PollLayout_DirectionFromJSON(object){switch(object){case 0:case"LTR":return"LTR";case 1:case"RTL":return"RTL";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function pollWidgetLayout_PollLayout_DirectionToJSON(object){switch(object){case"LTR":return"LTR";case"RTL":return"RTL";default:return"UNKNOWN"}}function pollWidgetDesign_PollDesign_BackgroundTypeFromJSON(object){switch(object){case 0:case"COLOR":return"COLOR";case 1:case"IMAGE":return"IMAGE";case 2:case"GRADIENT":return"GRADIENT";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function pollWidgetDesign_PollDesign_BackgroundTypeToJSON(object){switch(object){case"COLOR":return"COLOR";case"IMAGE":return"IMAGE";case"GRADIENT":return"GRADIENT";default:return"UNKNOWN"}}var basePollData$2={},PollData$2={fromJSON:function(object){var message=__assign$3({},basePollData$2);return void 0!==object.config&&null!==object.config?message.config=PollConfig$2.fromJSON(object.config):message.config=void 0,void 0!==object.poll&&null!==object.poll?message.poll=Poll$2.fromJSON(object.poll):message.poll=void 0,void 0!==object.layout&&null!==object.layout?message.layout=PollWidgetLayout$2.fromJSON(object.layout):message.layout=void 0,void 0!==object.design&&null!==object.design?message.design=PollWidgetDesign$2.fromJSON(object.design):message.design=void 0,void 0!==object.siteToken&&null!==object.siteToken?message.siteToken=String(object.siteToken):message.siteToken=void 0,message},toJSON:function(message){var obj={};return void 0!==message.config&&(obj.config=message.config?PollConfig$2.toJSON(message.config):void 0),void 0!==message.poll&&(obj.poll=message.poll?Poll$2.toJSON(message.poll):void 0),void 0!==message.layout&&(obj.layout=message.layout?PollWidgetLayout$2.toJSON(message.layout):void 0),void 0!==message.design&&(obj.design=message.design?PollWidgetDesign$2.toJSON(message.design):void 0),void 0!==message.siteToken&&(obj.siteToken=message.siteToken),obj}},basePollConfig$2={},PollConfig$2={fromJSON:function(object){var message=__assign$3({},basePollConfig$2);return void 0!==object.enableVoteRole&&null!==object.enableVoteRole?message.enableVoteRole=Boolean(object.enableVoteRole):message.enableVoteRole=void 0,message},toJSON:function(message){var obj={};return void 0!==message.enableVoteRole&&(obj.enableVoteRole=message.enableVoteRole),obj}},basePollOption$2={},PollOption={fromJSON:function(object){var message=__assign$3({},basePollOption$2);if(message.latestVoters=[],void 0!==object.anonymousCount&&null!==object.anonymousCount?message.anonymousCount=Number(object.anonymousCount):message.anonymousCount=void 0,void 0!==object.count&&null!==object.count?message.count=Number(object.count):message.count=void 0,void 0!==object.optionId&&null!==object.optionId?message.optionId=String(object.optionId):message.optionId=void 0,void 0!==object.latestVoters&&null!==object.latestVoters)for(var _i=0,_a=object.latestVoters;_i<_a.length;_i++){var e=_a[_i];message.latestVoters.push(String(e))}return void 0!==object.mediaId&&null!==object.mediaId?message.mediaId=String(object.mediaId):message.mediaId=void 0,void 0!==object.rating&&null!==object.rating?message.rating=Number(object.rating):message.rating=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,message},toJSON:function(message){var obj={};return void 0!==message.anonymousCount&&(obj.anonymousCount=message.anonymousCount),void 0!==message.count&&(obj.count=message.count),void 0!==message.optionId&&(obj.optionId=message.optionId),message.latestVoters?obj.latestVoters=message.latestVoters.map((function(e){return e})):obj.latestVoters=[],void 0!==message.mediaId&&(obj.mediaId=message.mediaId),void 0!==message.rating&&(obj.rating=message.rating),void 0!==message.title&&(obj.title=message.title),obj}},basePollSettings$2={resultsVisibility:"ALWAYS",voteRole:"ALL"},PollSettings={fromJSON:function(object){var message=__assign$3({},basePollSettings$2);return void 0!==object.multipleVotes&&null!==object.multipleVotes?message.multipleVotes=Boolean(object.multipleVotes):message.multipleVotes=void 0,void 0!==object.resultsVisibility&&null!==object.resultsVisibility?message.resultsVisibility=pollSettings_ResultsVisibilityFromJSON(object.resultsVisibility):message.resultsVisibility="ALWAYS",void 0!==object.voteRole&&null!==object.voteRole?message.voteRole=pollSettings_VoteRoleFromJSON(object.voteRole):message.voteRole="ALL",void 0!==object.votersDisplay&&null!==object.votersDisplay?message.votersDisplay=Boolean(object.votersDisplay):message.votersDisplay=void 0,void 0!==object.votesDisplay&&null!==object.votesDisplay?message.votesDisplay=Boolean(object.votesDisplay):message.votesDisplay=void 0,message},toJSON:function(message){var obj={};return void 0!==message.multipleVotes&&(obj.multipleVotes=message.multipleVotes),void 0!==message.resultsVisibility&&(obj.resultsVisibility=pollSettings_ResultsVisibilityToJSON(message.resultsVisibility)),void 0!==message.voteRole&&(obj.voteRole=pollSettings_VoteRoleToJSON(message.voteRole)),void 0!==message.votersDisplay&&(obj.votersDisplay=message.votersDisplay),void 0!==message.votesDisplay&&(obj.votesDisplay=message.votesDisplay),obj}},basePollWidgetLayout$2={},PollWidgetLayout$2={fromJSON:function(object){var message=__assign$3({},basePollWidgetLayout$2);return void 0!==object.poll&&null!==object.poll?message.poll=PollWidgetLayout_PollLayout$2.fromJSON(object.poll):message.poll=void 0,void 0!==object.option&&null!==object.option?message.option=PollWidgetLayout_PollOptionLayout$2.fromJSON(object.option):message.option=void 0,message},toJSON:function(message){var obj={};return void 0!==message.poll&&(obj.poll=message.poll?PollWidgetLayout_PollLayout$2.toJSON(message.poll):void 0),void 0!==message.option&&(obj.option=message.option?PollWidgetLayout_PollOptionLayout$2.toJSON(message.option):void 0),obj}},basePollWidgetLayout_PollLayout$2={type:"LIST",direction:"LTR"},PollWidgetLayout_PollLayout$2={fromJSON:function(object){var message=__assign$3({},basePollWidgetLayout_PollLayout$2);return void 0!==object.type&&null!==object.type?message.type=pollWidgetLayout_PollLayout_LayoutTypeFromJSON(object.type):message.type="LIST",void 0!==object.direction&&null!==object.direction?message.direction=pollWidgetLayout_PollLayout_DirectionFromJSON(object.direction):message.direction="LTR",void 0!==object.enableImage&&null!==object.enableImage?message.enableImage=Boolean(object.enableImage):message.enableImage=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=pollWidgetLayout_PollLayout_LayoutTypeToJSON(message.type)),void 0!==message.direction&&(obj.direction=pollWidgetLayout_PollLayout_DirectionToJSON(message.direction)),void 0!==message.enableImage&&(obj.enableImage=message.enableImage),obj}},basePollWidgetLayout_PollOptionLayout$2={},PollWidgetLayout_PollOptionLayout$2={fromJSON:function(object){var message=__assign$3({},basePollWidgetLayout_PollOptionLayout$2);return void 0!==object.enableImage&&null!==object.enableImage?message.enableImage=Boolean(object.enableImage):message.enableImage=void 0,message},toJSON:function(message){var obj={};return void 0!==message.enableImage&&(obj.enableImage=message.enableImage),obj}},basePoll$2={},Poll$2={fromJSON:function(object){var message=__assign$3({},basePoll$2);if(message.options=[],message.ownVotes=[],void 0!==object.anonymousCount&&null!==object.anonymousCount?message.anonymousCount=Number(object.anonymousCount):message.anonymousCount=void 0,void 0!==object.count&&null!==object.count?message.count=Number(object.count):message.count=void 0,void 0!==object.createdBy&&null!==object.createdBy?message.createdBy=String(object.createdBy):message.createdBy=void 0,void 0!==object.creatorFlag&&null!==object.creatorFlag?message.creatorFlag=Boolean(object.creatorFlag):message.creatorFlag=void 0,void 0!==object.pollId&&null!==object.pollId?message.pollId=String(object.pollId):message.pollId=void 0,void 0!==object.mediaId&&null!==object.mediaId?message.mediaId=String(object.mediaId):message.mediaId=void 0,void 0!==object.options&&null!==object.options)for(var _i=0,_a=object.options;_i<_a.length;_i++){var e=_a[_i];message.options.push(PollOption.fromJSON(e))}if(void 0!==object.ownVotes&&null!==object.ownVotes)for(var _b=0,_c=object.ownVotes;_b<_c.length;_b++)e=_c[_b],message.ownVotes.push(String(e));return void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.settings&&null!==object.settings?message.settings=PollSettings.fromJSON(object.settings):message.settings=void 0,message},toJSON:function(message){var obj={};return void 0!==message.anonymousCount&&(obj.anonymousCount=message.anonymousCount),void 0!==message.count&&(obj.count=message.count),void 0!==message.createdBy&&(obj.createdBy=message.createdBy),void 0!==message.creatorFlag&&(obj.creatorFlag=message.creatorFlag),void 0!==message.pollId&&(obj.pollId=message.pollId),void 0!==message.mediaId&&(obj.mediaId=message.mediaId),message.options?obj.options=message.options.map((function(e){return e?PollOption.toJSON(e):void 0})):obj.options=[],message.ownVotes?obj.ownVotes=message.ownVotes.map((function(e){return e})):obj.ownVotes=[],void 0!==message.title&&(obj.title=message.title),void 0!==message.settings&&(obj.settings=message.settings?PollSettings.toJSON(message.settings):void 0),obj}},basePollWidgetDesign$2={},PollWidgetDesign$2={fromJSON:function(object){var message=__assign$3({},basePollWidgetDesign$2);return void 0!==object.poll&&null!==object.poll?message.poll=PollWidgetDesign_PollDesign$2.fromJSON(object.poll):message.poll=void 0,void 0!==object.option&&null!==object.option?message.option=PollWidgetDesign_PollOptionDesign$2.fromJSON(object.option):message.option=void 0,message},toJSON:function(message){var obj={};return void 0!==message.poll&&(obj.poll=message.poll?PollWidgetDesign_PollDesign$2.toJSON(message.poll):void 0),void 0!==message.option&&(obj.option=message.option?PollWidgetDesign_PollOptionDesign$2.toJSON(message.option):void 0),obj}},basePollWidgetDesign_PollDesign$2={backgroundType:"COLOR"},PollWidgetDesign_PollDesign$2={fromJSON:function(object){var message=__assign$3({},basePollWidgetDesign_PollDesign$2);return void 0!==object.backgroundType&&null!==object.backgroundType?message.backgroundType=pollWidgetDesign_PollDesign_BackgroundTypeFromJSON(object.backgroundType):message.backgroundType="COLOR",void 0!==object.background&&null!==object.background?message.background=String(object.background):message.background=void 0,void 0!==object.borderRadius&&null!==object.borderRadius?message.borderRadius=Number(object.borderRadius):message.borderRadius=void 0,message},toJSON:function(message){var obj={};return void 0!==message.backgroundType&&(obj.backgroundType=pollWidgetDesign_PollDesign_BackgroundTypeToJSON(message.backgroundType)),void 0!==message.background&&(obj.background=message.background),void 0!==message.borderRadius&&(obj.borderRadius=message.borderRadius),obj}},basePollWidgetDesign_PollOptionDesign$2={},PollWidgetDesign_PollOptionDesign$2={fromJSON:function(object){var message=__assign$3({},basePollWidgetDesign_PollOptionDesign$2);return void 0!==object.borderRadius&&null!==object.borderRadius?message.borderRadius=Number(object.borderRadius):message.borderRadius=void 0,message},toJSON:function(message){var obj={};return void 0!==message.borderRadius&&(obj.borderRadius=message.borderRadius),obj}},__assign$2=function(){return(__assign$2=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseVideoData$2={},VideoData$2={fromJSON:function(object){var message=__assign$2({},baseVideoData$2);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData.fromJSON(object.containerData):message.containerData=void 0,void 0!==object.video&&null!==object.video?message.video=Media.fromJSON(object.video):message.video=void 0,void 0!==object.thumbnail&&null!==object.thumbnail?message.thumbnail=Media.fromJSON(object.thumbnail):message.thumbnail=void 0,void 0!==object.disableDownload&&null!==object.disableDownload?message.disableDownload=Boolean(object.disableDownload):message.disableDownload=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData.toJSON(message.containerData):void 0),void 0!==message.video&&(obj.video=message.video?Media.toJSON(message.video):void 0),void 0!==message.thumbnail&&(obj.thumbnail=message.thumbnail?Media.toJSON(message.thumbnail):void 0),void 0!==message.disableDownload&&(obj.disableDownload=message.disableDownload),void 0!==message.title&&(obj.title=message.title),obj}},__assign$1=function(){return(__assign$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseTimestamp={seconds:0,nanos:0},__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function node_TypeFromJSON(object){switch(object){case 0:case"PARAGRAPH":return"PARAGRAPH";case 1:case"TEXT":return"TEXT";case 2:case"HEADING":return"HEADING";case 3:case"BULLETED_LIST":return"BULLETED_LIST";case 4:case"ORDERED_LIST":return"ORDERED_LIST";case 5:case"LIST_ITEM":return"LIST_ITEM";case 6:case"BLOCKQUOTE":return"BLOCKQUOTE";case 7:case"CODE_BLOCK":return"CODE_BLOCK";case 8:case"VIDEO":return"VIDEO";case 9:case"DIVIDER":return"DIVIDER";case 10:case"FILE":return"FILE";case 11:case"GALLERY":return"GALLERY";case 12:case"GIF":return"GIF";case 13:case"HTML":return"HTML";case 14:case"IMAGE":return"IMAGE";case 15:case"LINK_PREVIEW":return"LINK_PREVIEW";case 16:case"MAP":return"MAP";case 17:case"POLL":return"POLL";case 18:case"APP_EMBED":return"APP_EMBED";case 19:case"BUTTON":return"BUTTON";case 20:case"COLLAPSIBLE_LIST":return"COLLAPSIBLE_LIST";case 21:case"TABLE":return"TABLE";case 22:case"EMBED":return"EMBED";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function node_TypeToJSON(object){switch(object){case"PARAGRAPH":return"PARAGRAPH";case"TEXT":return"TEXT";case"HEADING":return"HEADING";case"BULLETED_LIST":return"BULLETED_LIST";case"ORDERED_LIST":return"ORDERED_LIST";case"LIST_ITEM":return"LIST_ITEM";case"BLOCKQUOTE":return"BLOCKQUOTE";case"CODE_BLOCK":return"CODE_BLOCK";case"VIDEO":return"VIDEO";case"DIVIDER":return"DIVIDER";case"FILE":return"FILE";case"GALLERY":return"GALLERY";case"GIF":return"GIF";case"HTML":return"HTML";case"IMAGE":return"IMAGE";case"LINK_PREVIEW":return"LINK_PREVIEW";case"MAP":return"MAP";case"POLL":return"POLL";case"APP_EMBED":return"APP_EMBED";case"BUTTON":return"BUTTON";case"COLLAPSIBLE_LIST":return"COLLAPSIBLE_LIST";case"TABLE":return"TABLE";case"EMBED":return"EMBED";default:return"UNKNOWN"}}function decoration_TypeFromJSON(object){switch(object){case 0:case"BOLD":return"BOLD";case 1:case"ITALIC":return"ITALIC";case 2:case"UNDERLINE":return"UNDERLINE";case 3:case"SPOILER":return"SPOILER";case 4:case"ANCHOR":return"ANCHOR";case 5:case"MENTION":return"MENTION";case 6:case"LINK":return"LINK";case 7:case"COLOR":return"COLOR";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}function decoration_TypeToJSON(object){switch(object){case"BOLD":return"BOLD";case"ITALIC":return"ITALIC";case"UNDERLINE":return"UNDERLINE";case"SPOILER":return"SPOILER";case"ANCHOR":return"ANCHOR";case"MENTION":return"MENTION";case"LINK":return"LINK";case"COLOR":return"COLOR";default:return"UNKNOWN"}}var baseRichContent$1={},RichContent={fromJSON:function(object){var message=__assign({},baseRichContent$1);if(message.nodes=[],void 0!==object.nodes&&null!==object.nodes)for(var _i=0,_a=object.nodes;_i<_a.length;_i++){var e=_a[_i];message.nodes.push(Node$1.fromJSON(e))}return void 0!==object.metadata&&null!==object.metadata?message.metadata=Metadata$1.fromJSON(object.metadata):message.metadata=void 0,message},toJSON:function(message){var obj={};return message.nodes?obj.nodes=message.nodes.map((function(e){return e?Node$1.toJSON(e):void 0})):obj.nodes=[],void 0!==message.metadata&&(obj.metadata=message.metadata?Metadata$1.toJSON(message.metadata):void 0),obj}},baseNode$1={type:"PARAGRAPH",id:""},Node$1={fromJSON:function(object){var message=__assign({},baseNode$1);if(message.nodes=[],void 0!==object.type&&null!==object.type?message.type=node_TypeFromJSON(object.type):message.type="PARAGRAPH",void 0!==object.id&&null!==object.id?message.id=String(object.id):message.id="",void 0!==object.nodes&&null!==object.nodes)for(var _i=0,_a=object.nodes;_i<_a.length;_i++){var e=_a[_i];message.nodes.push(Node$1.fromJSON(e))}return void 0!==object.style&&null!==object.style?message.style=NodeStyle$1.fromJSON(object.style):message.style=void 0,void 0!==object.buttonData&&null!==object.buttonData?message.buttonData=ButtonData$2.fromJSON(object.buttonData):message.buttonData=void 0,void 0!==object.codeBlockData&&null!==object.codeBlockData?message.codeBlockData=CodeBlockData.fromJSON(object.codeBlockData):message.codeBlockData=void 0,void 0!==object.dividerData&&null!==object.dividerData?message.dividerData=DividerData$2.fromJSON(object.dividerData):message.dividerData=void 0,void 0!==object.fileData&&null!==object.fileData?message.fileData=FileData$2.fromJSON(object.fileData):message.fileData=void 0,void 0!==object.galleryData&&null!==object.galleryData?message.galleryData=GalleryData$2.fromJSON(object.galleryData):message.galleryData=void 0,void 0!==object.gifData&&null!==object.gifData?message.gifData=GIFData$2.fromJSON(object.gifData):message.gifData=void 0,void 0!==object.headingData&&null!==object.headingData?message.headingData=HeadingData.fromJSON(object.headingData):message.headingData=void 0,void 0!==object.htmlData&&null!==object.htmlData?message.htmlData=HTMLData$2.fromJSON(object.htmlData):message.htmlData=void 0,void 0!==object.imageData&&null!==object.imageData?message.imageData=ImageData$2.fromJSON(object.imageData):message.imageData=void 0,void 0!==object.linkPreviewData&&null!==object.linkPreviewData?message.linkPreviewData=LinkPreviewData$2.fromJSON(object.linkPreviewData):message.linkPreviewData=void 0,void 0!==object.mapData&&null!==object.mapData?message.mapData=MapData$2.fromJSON(object.mapData):message.mapData=void 0,void 0!==object.paragraphData&&null!==object.paragraphData?message.paragraphData=ParagraphData.fromJSON(object.paragraphData):message.paragraphData=void 0,void 0!==object.pollData&&null!==object.pollData?message.pollData=PollData$2.fromJSON(object.pollData):message.pollData=void 0,void 0!==object.textData&&null!==object.textData?message.textData=TextData$1.fromJSON(object.textData):message.textData=void 0,void 0!==object.appEmbedData&&null!==object.appEmbedData?message.appEmbedData=AppEmbedData$2.fromJSON(object.appEmbedData):message.appEmbedData=void 0,void 0!==object.videoData&&null!==object.videoData?message.videoData=VideoData$2.fromJSON(object.videoData):message.videoData=void 0,void 0!==object.embedData&&null!==object.embedData?message.embedData=EmbedData$2.fromJSON(object.embedData):message.embedData=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=node_TypeToJSON(message.type)),void 0!==message.id&&(obj.id=message.id),message.nodes?obj.nodes=message.nodes.map((function(e){return e?Node$1.toJSON(e):void 0})):obj.nodes=[],void 0!==message.style&&(obj.style=message.style?NodeStyle$1.toJSON(message.style):void 0),void 0!==message.buttonData&&(obj.buttonData=message.buttonData?ButtonData$2.toJSON(message.buttonData):void 0),void 0!==message.codeBlockData&&(obj.codeBlockData=message.codeBlockData?CodeBlockData.toJSON(message.codeBlockData):void 0),void 0!==message.dividerData&&(obj.dividerData=message.dividerData?DividerData$2.toJSON(message.dividerData):void 0),void 0!==message.fileData&&(obj.fileData=message.fileData?FileData$2.toJSON(message.fileData):void 0),void 0!==message.galleryData&&(obj.galleryData=message.galleryData?GalleryData$2.toJSON(message.galleryData):void 0),void 0!==message.gifData&&(obj.gifData=message.gifData?GIFData$2.toJSON(message.gifData):void 0),void 0!==message.headingData&&(obj.headingData=message.headingData?HeadingData.toJSON(message.headingData):void 0),void 0!==message.htmlData&&(obj.htmlData=message.htmlData?HTMLData$2.toJSON(message.htmlData):void 0),void 0!==message.imageData&&(obj.imageData=message.imageData?ImageData$2.toJSON(message.imageData):void 0),void 0!==message.linkPreviewData&&(obj.linkPreviewData=message.linkPreviewData?LinkPreviewData$2.toJSON(message.linkPreviewData):void 0),void 0!==message.mapData&&(obj.mapData=message.mapData?MapData$2.toJSON(message.mapData):void 0),void 0!==message.paragraphData&&(obj.paragraphData=message.paragraphData?ParagraphData.toJSON(message.paragraphData):void 0),void 0!==message.pollData&&(obj.pollData=message.pollData?PollData$2.toJSON(message.pollData):void 0),void 0!==message.textData&&(obj.textData=message.textData?TextData$1.toJSON(message.textData):void 0),void 0!==message.appEmbedData&&(obj.appEmbedData=message.appEmbedData?AppEmbedData$2.toJSON(message.appEmbedData):void 0),void 0!==message.videoData&&(obj.videoData=message.videoData?VideoData$2.toJSON(message.videoData):void 0),void 0!==message.embedData&&(obj.embedData=message.embedData?EmbedData$2.toJSON(message.embedData):void 0),obj}},baseNodeStyle$1={},NodeStyle$1={fromJSON:function(object){var message=__assign({},baseNodeStyle$1);return void 0!==object.paddingTop&&null!==object.paddingTop?message.paddingTop=String(object.paddingTop):message.paddingTop=void 0,void 0!==object.paddingBottom&&null!==object.paddingBottom?message.paddingBottom=String(object.paddingBottom):message.paddingBottom=void 0,void 0!==object.backgroundColor&&null!==object.backgroundColor?message.backgroundColor=String(object.backgroundColor):message.backgroundColor=void 0,message},toJSON:function(message){var obj={};return void 0!==message.paddingTop&&(obj.paddingTop=message.paddingTop),void 0!==message.paddingBottom&&(obj.paddingBottom=message.paddingBottom),void 0!==message.backgroundColor&&(obj.backgroundColor=message.backgroundColor),obj}},baseTextData$1={text:""},TextData$1={fromJSON:function(object){var message=__assign({},baseTextData$1);if(message.decorations=[],void 0!==object.text&&null!==object.text?message.text=String(object.text):message.text="",void 0!==object.decorations&&null!==object.decorations)for(var _i=0,_a=object.decorations;_i<_a.length;_i++){var e=_a[_i];message.decorations.push(Decoration$1.fromJSON(e))}return message},toJSON:function(message){var obj={};return void 0!==message.text&&(obj.text=message.text),message.decorations?obj.decorations=message.decorations.map((function(e){return e?Decoration$1.toJSON(e):void 0})):obj.decorations=[],obj}},baseDecoration$1={type:"BOLD"},Decoration$1={fromJSON:function(object){var message=__assign({},baseDecoration$1);return void 0!==object.type&&null!==object.type?message.type=decoration_TypeFromJSON(object.type):message.type="BOLD",void 0!==object.anchorData&&null!==object.anchorData?message.anchorData=AnchorData.fromJSON(object.anchorData):message.anchorData=void 0,void 0!==object.colorData&&null!==object.colorData?message.colorData=ColorData.fromJSON(object.colorData):message.colorData=void 0,void 0!==object.linkData&&null!==object.linkData?message.linkData=LinkData.fromJSON(object.linkData):message.linkData=void 0,void 0!==object.mentionData&&null!==object.mentionData?message.mentionData=MentionData.fromJSON(object.mentionData):message.mentionData=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=decoration_TypeToJSON(message.type)),void 0!==message.anchorData&&(obj.anchorData=message.anchorData?AnchorData.toJSON(message.anchorData):void 0),void 0!==message.colorData&&(obj.colorData=message.colorData?ColorData.toJSON(message.colorData):void 0),void 0!==message.linkData&&(obj.linkData=message.linkData?LinkData.toJSON(message.linkData):void 0),void 0!==message.mentionData&&(obj.mentionData=message.mentionData?MentionData.toJSON(message.mentionData):void 0),obj}},baseMetadata$1={version:0},Metadata$1={fromJSON:function(object){var message=__assign({},baseMetadata$1);return void 0!==object.version&&null!==object.version?message.version=Number(object.version):message.version=0,void 0!==object.createdTimestamp&&null!==object.createdTimestamp?message.createdTimestamp=fromJsonTimestamp(object.createdTimestamp):message.createdTimestamp=void 0,void 0!==object.updatedTimestamp&&null!==object.updatedTimestamp?message.updatedTimestamp=fromJsonTimestamp(object.updatedTimestamp):message.updatedTimestamp=void 0,message},toJSON:function(message){var obj={};return void 0!==message.version&&(obj.version=message.version),void 0!==message.createdTimestamp&&(obj.createdTimestamp=void 0!==message.createdTimestamp?message.createdTimestamp.toISOString():null),void 0!==message.updatedTimestamp&&(obj.updatedTimestamp=void 0!==message.updatedTimestamp?message.updatedTimestamp.toISOString():null),obj}};function fromJsonTimestamp(o){return o instanceof Date?o:"string"==typeof o?new Date(o):(object=o,message=__assign$1({},baseTimestamp),void 0!==object.seconds&&null!==object.seconds?message.seconds=Number(object.seconds):message.seconds=0,void 0!==object.nanos&&null!==object.nanos?message.nanos=Number(object.nanos):message.nanos=0,millis=1e3*(t=message).seconds,millis+=t.nanos/1e6,new Date(millis));var object,message,t,millis}var _FROM_DRAFT_LIST_TYPE$2,_TO_RICOS_NODE_TYPE$2,_TO_RICOS_DECORATION_$2,_ENTITY_DECORATION_TO$2,_RICOS_NODE_TYPE_TO_D$2,_DRAFT_BLOCK_TYPE_TO_$2,_ENTITY_DECORATION_TO2$2,BlockType$2,HeaderLevel$2,ricosSchema=Object.freeze({__proto__:null,LATEST_VERSION:1,textStyle_TextAlignmentFromJSON:textStyle_TextAlignmentFromJSON,textStyle_TextAlignmentToJSON:textStyle_TextAlignmentToJSON,link_TargetFromJSON:link_TargetFromJSON,link_TargetToJSON:link_TargetToJSON,pluginContainerData_AlignmentFromJSON:pluginContainerData_AlignmentFromJSON,pluginContainerData_AlignmentToJSON:pluginContainerData_AlignmentToJSON,pluginContainerData_Width_TypeFromJSON:pluginContainerData_Width_TypeFromJSON,pluginContainerData_Width_TypeToJSON:pluginContainerData_Width_TypeToJSON,TextStyle:TextStyle,Link:Link$1,Link_Rel:Link_Rel$2,PluginContainerData:PluginContainerData,PluginContainerData_Spoiler:PluginContainerData_Spoiler$2,PluginContainerData_Width:PluginContainerData_Width$2,PluginContainerData_Height:PluginContainerData_Height$2,FileSource:FileSource,Media:Media,Oembed:Oembed,AnchorData:AnchorData,ColorData:ColorData,LinkData:LinkData,MentionData:MentionData,CodeBlockData:CodeBlockData,HeadingData:HeadingData,ParagraphData:ParagraphData,appEmbedData_AppTypeFromJSON:appEmbedData_AppTypeFromJSON,appEmbedData_AppTypeToJSON:appEmbedData_AppTypeToJSON,AppEmbedData:AppEmbedData$2,AppEmbedData_BookingData:AppEmbedData_BookingData$2,AppEmbedData_EventData:AppEmbedData_EventData$2,buttonData_TypeFromJSON:buttonData_TypeFromJSON,buttonData_TypeToJSON:buttonData_TypeToJSON,ButtonData:ButtonData$2,ButtonData_ButtonStyles:ButtonData_ButtonStyles$2,dividerData_LineStyleFromJSON:dividerData_LineStyleFromJSON,dividerData_LineStyleToJSON:dividerData_LineStyleToJSON,dividerData_WidthFromJSON:dividerData_WidthFromJSON,dividerData_WidthToJSON:dividerData_WidthToJSON,dividerData_AlignmentFromJSON:dividerData_AlignmentFromJSON,dividerData_AlignmentToJSON:dividerData_AlignmentToJSON,DividerData:DividerData$2,EmbedData:EmbedData$2,FileData:FileData$2,GalleryData:GalleryData$2,GalleryStyles:GalleryStyles$2,GalleryConfig:GalleryConfig$2,GalleyItemMetadata:GalleyItemMetadata,GalleryItem:GalleryItem$2,GIFData:GIFData$2,GIF:GIF$2,HTMLData:HTMLData$2,ImageData:ImageData$2,LinkPreviewData:LinkPreviewData$2,mapTypeFromJSON:mapTypeFromJSON,mapTypeToJSON:mapTypeToJSON,MapData:MapData$2,MapSettings:MapSettings$2,pollSettings_ResultsVisibilityFromJSON:pollSettings_ResultsVisibilityFromJSON,pollSettings_ResultsVisibilityToJSON:pollSettings_ResultsVisibilityToJSON,pollSettings_VoteRoleFromJSON:pollSettings_VoteRoleFromJSON,pollSettings_VoteRoleToJSON:pollSettings_VoteRoleToJSON,pollWidgetLayout_PollLayout_LayoutTypeFromJSON:pollWidgetLayout_PollLayout_LayoutTypeFromJSON,pollWidgetLayout_PollLayout_LayoutTypeToJSON:pollWidgetLayout_PollLayout_LayoutTypeToJSON,pollWidgetLayout_PollLayout_DirectionFromJSON:pollWidgetLayout_PollLayout_DirectionFromJSON,pollWidgetLayout_PollLayout_DirectionToJSON:pollWidgetLayout_PollLayout_DirectionToJSON,pollWidgetDesign_PollDesign_BackgroundTypeFromJSON:pollWidgetDesign_PollDesign_BackgroundTypeFromJSON,pollWidgetDesign_PollDesign_BackgroundTypeToJSON:pollWidgetDesign_PollDesign_BackgroundTypeToJSON,PollData:PollData$2,PollConfig:PollConfig$2,PollOption:PollOption,PollSettings:PollSettings,PollWidgetLayout:PollWidgetLayout$2,PollWidgetLayout_PollLayout:PollWidgetLayout_PollLayout$2,PollWidgetLayout_PollOptionLayout:PollWidgetLayout_PollOptionLayout$2,Poll:Poll$2,PollWidgetDesign:PollWidgetDesign$2,PollWidgetDesign_PollDesign:PollWidgetDesign_PollDesign$2,PollWidgetDesign_PollOptionDesign:PollWidgetDesign_PollOptionDesign$2,VideoData:VideoData$2,node_TypeFromJSON:node_TypeFromJSON,node_TypeToJSON:node_TypeToJSON,decoration_TypeFromJSON:decoration_TypeFromJSON,decoration_TypeToJSON:decoration_TypeToJSON,RichContent:RichContent,Node:Node$1,NodeStyle:NodeStyle$1,TextData:TextData$1,Decoration:Decoration$1,Metadata:Metadata$1}),Paragraph=Node$2.create({name:"paragraph",priority:1e3,defaultOptions:{HTMLAttributes:{}},group:"block",content:"inline*",addAttributes:function(){return ParagraphData.fromJSON({})},parseHTML:function(){return[{tag:"div"}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["div",module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){return{setParagraph:function(){return function(_ref2){return _ref2.commands.toggleNode("paragraph","paragraph")}}}},addKeyboardShortcuts:function(){var _this=this;return{"Mod-Alt-0":function(){return _this.editor.commands.setParagraph()}}}}),pasteRegex=/https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)/gi,pasteRegexExact=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)$/gi,Link=module_8008f8e9_Mark.create({name:"link",priority:1e3,inclusive:!1,defaultOptions:{openOnClick:!0,linkOnPaste:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow"}},addAttributes:function(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target}}},parseHTML:function(){return[{tag:"a[href]"}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["a",module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){return{setLink:function(attributes){return function(_ref2){return _ref2.commands.setMark("link",attributes)}},toggleLink:function(attributes){return function(_ref3){return _ref3.commands.toggleMark("link",attributes)}},unsetLink:function(){return function(_ref4){return _ref4.commands.unsetMark("link")}}}},addPasteRules:function(){return[module_8008f8e9_markPasteRule(pasteRegex,this.type,(function(match){return{href:match[0]}}))]},addProseMirrorPlugins:function(){var _this=this,plugins=[];return this.options.openOnClick&&plugins.push(new module_8008f8e9_Plugin({key:new module_8008f8e9_PluginKey("handleClickLink"),props:{handleClick:function(view,pos,event){var _a,attrs=_this.editor.getAttributes("link");return!(!(null===(_a=event.target)||void 0===_a?void 0:_a.closest("a"))||!attrs.href||(window.open(attrs.href,attrs.target),0))}}})),this.options.linkOnPaste&&plugins.push(new module_8008f8e9_Plugin({key:new module_8008f8e9_PluginKey("handlePasteLink"),props:{handlePaste:function(view,event,slice){if(view.state.selection.empty)return!1;var textContent="";return slice.content.forEach((function(node){textContent+=node.textContent})),!(!textContent||!textContent.match(pasteRegexExact)||(_this.editor.commands.setMark(_this.type,{href:textContent}),0))}}})),plugins}}),starInputRegex=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/gm,starPasteRegex=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/gm,underscoreInputRegex=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/gm,underscorePasteRegex=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/gm,Bold=module_8008f8e9_Mark.create({name:"bold",defaultOptions:{HTMLAttributes:{}},parseHTML:function(){return[{tag:"strong"},{tag:"b",getAttrs:function(node){return"normal"!==node.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(value){return/^(bold(er)?|[5-9]\d{2,})$/.test(value)&&null}}]},renderHTML:function(_ref){var HTMLAttributes=_ref.HTMLAttributes;return["strong",module_8008f8e9_mergeAttributes(this.options.HTMLAttributes,HTMLAttributes),0]},addCommands:function(){return{setBold:function(){return function(_ref2){return _ref2.commands.setMark("bold")}},toggleBold:function(){return function(_ref3){return _ref3.commands.toggleMark("bold")}},unsetBold:function(){return function(_ref4){return _ref4.commands.unsetMark("bold")}}}},addKeyboardShortcuts:function(){var _this=this;return{"Mod-b":function(){return _this.editor.commands.toggleBold()}}},addInputRules:function(){return[module_8008f8e9_markInputRule(starInputRegex,this.type),module_8008f8e9_markInputRule(underscoreInputRegex,this.type)]},addPasteRules:function(){return[module_8008f8e9_markPasteRule(starPasteRegex,this.type),module_8008f8e9_markPasteRule(underscorePasteRegex,this.type)]}}),extendedAttrs=function(attrs){return{addAttributes:function(){var _this$parent;return extends_default()({},null===(_this$parent=this.parent)||void 0===_this$parent?void 0:_this$parent.call(this),attrs)}}},withKey=extendedAttrs({key:""}),tiptapExtensions=[Blockquote.extend(withKey),Underline,BulletList.extend(withKey),Document.extend(extendedAttrs({metadata:{}})),Heading.extend(withKey).extend(extendedAttrs(HeadingData.fromJSON({}))),Italic,ListItem.extend(withKey),OrderedList.extend(withKey),Paragraph.extend(withKey),Text,Link.extend(extendedAttrs(LinkData.fromJSON({}))),Bold],createRicosGenericExtensionConfig=function(_ref){var createConfig=_ref.createConfig;return extends_default()({},createConfig({mergeAttributes:mergeAttributes}),{extensionType:"extension"})};function fromEntries$3(iterable){return[].concat(iterable).reduce((function(obj,_ref){var key=_ref[0],val=_ref[1];return obj[key]=val,obj}),{})}Object.freeze({ONE:"header-one",TWO:"header-two",THREE:"header-three",FOUR:"header-four",FIVE:"header-five",SIX:"header-six"}),Object.freeze(["header-one","header-two","header-three","header-four","header-five","header-six","unordered-list-item","ordered-list-item","blockquote","atomic","code-block","unstyled"]),function(BlockType){BlockType.Unstyled="unstyled",BlockType.HeaderOne="header-one",BlockType.HeaderTwo="header-two",BlockType.HeaderThree="header-three",BlockType.HeaderFour="header-four",BlockType.HeaderFive="header-five",BlockType.HeaderSix="header-six",BlockType.UnorderedListItem="unordered-list-item",BlockType.OrderedListItem="ordered-list-item",BlockType.Blockquote="blockquote",BlockType.CodeBlock="code-block",BlockType.Atomic="atomic"}(BlockType$2||(BlockType$2={})),function(HeaderLevel){HeaderLevel[HeaderLevel["header-one"]=1]="header-one",HeaderLevel[HeaderLevel["header-two"]=2]="header-two",HeaderLevel[HeaderLevel["header-three"]=3]="header-three",HeaderLevel[HeaderLevel["header-four"]=4]="header-four",HeaderLevel[HeaderLevel["header-five"]=5]="header-five",HeaderLevel[HeaderLevel["header-six"]=6]="header-six"}(HeaderLevel$2||(HeaderLevel$2={}));var FROM_DRAFT_LIST_TYPE$2=((_FROM_DRAFT_LIST_TYPE$2={})[BlockType$2.UnorderedListItem]="BULLETED_LIST",_FROM_DRAFT_LIST_TYPE$2[BlockType$2.OrderedListItem]="ORDERED_LIST",_FROM_DRAFT_LIST_TYPE$2);fromEntries$3(Object.entries(FROM_DRAFT_LIST_TYPE$2).map((function(_ref){var key=_ref[0];return[_ref[1],key]})));var TO_RICOS_NODE_TYPE$2=((_TO_RICOS_NODE_TYPE$2={})["wix-draft-plugin-link-button"]="BUTTON",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-action-button"]="BUTTON",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-divider"]="DIVIDER",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-file-upload"]="FILE",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-gallery"]="GALLERY",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-giphy"]="GIF",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-html"]="HTML",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-image"]="IMAGE",_TO_RICOS_NODE_TYPE$2.IMAGE="IMAGE",_TO_RICOS_NODE_TYPE$2["wix-rich-content-plugin-collapsible-list"]="COLLAPSIBLE_LIST",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-link-preview"]="LINK_PREVIEW",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-map"]="MAP",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-vertical-embed"]="APP_EMBED",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-video"]="VIDEO",_TO_RICOS_NODE_TYPE$2["VIDEO-EMBED"]="VIDEO",_TO_RICOS_NODE_TYPE$2["wix-draft-plugin-poll"]="POLL",_TO_RICOS_NODE_TYPE$2["wix-rich-content-plugin-table"]="TABLE",_TO_RICOS_NODE_TYPE$2.EMBED="EMBED",_TO_RICOS_NODE_TYPE$2),DUPLICATE_KEYS$2=["IMAGE","VIDEO-EMBED"];fromEntries$3(Object.entries(TO_RICOS_NODE_TYPE$2).filter((function(_ref2){var key=_ref2[0];return!DUPLICATE_KEYS$2.includes(key)})).map((function(_ref3){var key=_ref3[0];return[_ref3[1],key]})));var TO_RICOS_DECORATION_TYPE$2=((_TO_RICOS_DECORATION_$2={BOLD:"BOLD",ITALIC:"ITALIC",UNDERLINE:"UNDERLINE"})["wix-rich-content-plugin-spoiler"]="SPOILER",_TO_RICOS_DECORATION_$2.ANCHOR="ANCHOR",_TO_RICOS_DECORATION_$2.mention="MENTION",_TO_RICOS_DECORATION_$2.LINK="LINK",_TO_RICOS_DECORATION_$2);extends_default()({},TO_RICOS_NODE_TYPE$2,TO_RICOS_DECORATION_TYPE$2),fromEntries$3(Object.entries(TO_RICOS_DECORATION_TYPE$2).map((function(_ref4){var key=_ref4[0];return[_ref4[1],key]}))),(_ENTITY_DECORATION_TO$2={}).ANCHOR="MUTABLE",_ENTITY_DECORATION_TO$2.LINK="MUTABLE",_ENTITY_DECORATION_TO$2.mention="SEGMENTED",_ENTITY_DECORATION_TO$2.EMOJI_TYPE="IMMUTABLE";var RICOS_NODE_TYPE_TO_DATA_FIELD$2=((_RICOS_NODE_TYPE_TO_D$2={}).BUTTON="buttonData",_RICOS_NODE_TYPE_TO_D$2.DIVIDER="dividerData",_RICOS_NODE_TYPE_TO_D$2.FILE="fileData",_RICOS_NODE_TYPE_TO_D$2.GALLERY="galleryData",_RICOS_NODE_TYPE_TO_D$2.GIF="gifData",_RICOS_NODE_TYPE_TO_D$2.HTML="htmlData",_RICOS_NODE_TYPE_TO_D$2.IMAGE="imageData",_RICOS_NODE_TYPE_TO_D$2.COLLAPSIBLE_LIST="collapsibleListData",_RICOS_NODE_TYPE_TO_D$2.LINK_PREVIEW="linkPreviewData",_RICOS_NODE_TYPE_TO_D$2.MAP="mapData",_RICOS_NODE_TYPE_TO_D$2.APP_EMBED="appEmbedData",_RICOS_NODE_TYPE_TO_D$2.VIDEO="videoData",_RICOS_NODE_TYPE_TO_D$2.POLL="pollData",_RICOS_NODE_TYPE_TO_D$2.TABLE="tableData",_RICOS_NODE_TYPE_TO_D$2.PARAGRAPH="paragraphData",_RICOS_NODE_TYPE_TO_D$2.LIST_ITEM="paragraphData",_RICOS_NODE_TYPE_TO_D$2.HEADING="headingData",_RICOS_NODE_TYPE_TO_D$2.CODE_BLOCK="codeBlockData",_RICOS_NODE_TYPE_TO_D$2.BLOCKQUOTE="paragraphData",_RICOS_NODE_TYPE_TO_D$2.EMBED="embedData",_RICOS_NODE_TYPE_TO_D$2),DRAFT_BLOCK_TYPE_TO_DATA_FIELD$2=((_DRAFT_BLOCK_TYPE_TO_$2={})[BlockType$2.Unstyled]="paragraphData",_DRAFT_BLOCK_TYPE_TO_$2[BlockType$2.UnorderedListItem]="paragraphData",_DRAFT_BLOCK_TYPE_TO_$2[BlockType$2.OrderedListItem]="paragraphData",_DRAFT_BLOCK_TYPE_TO_$2[BlockType$2.HeaderOne]="headingData",_DRAFT_BLOCK_TYPE_TO_$2[BlockType$2.HeaderTwo]="headingData",_DRAFT_BLOCK_TYPE_TO_$2[BlockType$2.HeaderThree]="headingData",_DRAFT_BLOCK_TYPE_TO_$2[BlockType$2.HeaderFour]="headingData",_DRAFT_BLOCK_TYPE_TO_$2[BlockType$2.HeaderFive]="headingData",_DRAFT_BLOCK_TYPE_TO_$2[BlockType$2.HeaderSix]="headingData",_DRAFT_BLOCK_TYPE_TO_$2[BlockType$2.CodeBlock]="codeBlockData",_DRAFT_BLOCK_TYPE_TO_$2[BlockType$2.Blockquote]="paragraphData",_DRAFT_BLOCK_TYPE_TO_$2),DRAFT_PLUGIN_TYPE_TO_DATA_FIELD$2=fromEntries$3(Object.entries(TO_RICOS_NODE_TYPE$2).map((function(_ref5){var key=_ref5[0],value=_ref5[1];return[key,RICOS_NODE_TYPE_TO_DATA_FIELD$2[value]]}))),ENTITY_DECORATION_TO_DATA_FIELD$2=((_ENTITY_DECORATION_TO2$2={}).ANCHOR="anchorData",_ENTITY_DECORATION_TO2$2.LINK="linkData",_ENTITY_DECORATION_TO2$2.mention="mentionData",_ENTITY_DECORATION_TO2$2.EMOJI_TYPE="emojiData",_ENTITY_DECORATION_TO2$2),TO_RICOS_DATA_FIELD$1=extends_default()({},ENTITY_DECORATION_TO_DATA_FIELD$2,DRAFT_PLUGIN_TYPE_TO_DATA_FIELD$2,DRAFT_BLOCK_TYPE_TO_DATA_FIELD$2);function fromEntries$2(iterable){return[].concat(iterable).reduce((function(obj,_ref){var key=_ref[0],val=_ref[1];return obj[key]=val,obj}),{})}var NODE_TYPES=["PARAGRAPH","TEXT","HEADING","BULLETED_LIST","ORDERED_LIST","LIST_ITEM","BLOCKQUOTE","CODE_BLOCK","VIDEO","DIVIDER","FILE","GALLERY","GIF","HTML","IMAGE","LINK_PREVIEW","MAP","POLL","APP_EMBED","BUTTON","COLLAPSIBLE_LIST","TABLE","EMBED"],NODE_MAP=fromEntries$2(NODE_TYPES.map((function(v){return[v,v]}))),DECORATION_TYPES=["BOLD","ITALIC","UNDERLINE","SPOILER","ANCHOR","MENTION","LINK","COLOR"],hasSpace$2=/\s/,hasSeparator$2=/(_|-|\.|:)/,hasCamel$2=/([a-z][A-Z]|[A-Z][a-z])/,separatorSplitter$2=/[\W_]+(.|$)/g,camelSplitter$2=/(.)([A-Z]+)/g,toSpaceCase_1$2=function(string){return function(string){return hasSpace$2.test(string)?string.toLowerCase():hasSeparator$2.test(string)?(function(string){return string.replace(separatorSplitter$2,(function(m,next){return next?" "+next:""}))}(string)||string).toLowerCase():hasCamel$2.test(string)?function(string){return string.replace(camelSplitter$2,(function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")}))}(string).toLowerCase():string.toLowerCase()}(string).replace(/[\W_]+(.|$)/g,(function(matches,match){return match?" "+match:""})).trim()},toCamelCase_1$1=function(string){return toSpaceCase_1$2(string).replace(/\s(\w)/g,(function(matches,letter){return letter.toUpperCase()}))},toConstantCase_1$2=function(string){return function(string){return toSpaceCase_1$2(string).replace(/\s/g,"_")}(string).toUpperCase()},TYPES=[].concat(NODE_TYPES,DECORATION_TYPES),isTextNode=function(object){var _object$type;return"TEXT"===(null==object||null===(_object$type=object.type)||void 0===_object$type?void 0:_object$type.toUpperCase())&&("text"in object||"textData"in object)},module_8008f8e9_isNode=function(object){return isTextNode(object)||function(object){var _object$type2;return"PARAGRAPH"===(null==object||null===(_object$type2=object.type)||void 0===_object$type2?void 0:_object$type2.toUpperCase())}(object)||function(object){return NODE_MAP[toConstantCase_1$2((null==object?void 0:object.type)||"")]&&(function(object){return"nodes"in object||"content"in object}(object)||function(object){return RICOS_NODE_TYPE_TO_DATA_FIELD$2[null==object?void 0:object.type]in object||"attrs"in object}(object))}(object)},isDecoration=function(object){var _object$type3;return DECORATION_TYPES.includes(null==object||null===(_object$type3=object.type)||void 0===_object$type3?void 0:_object$type3.toUpperCase())},isRichContent=function(object){return!(null==object||!object.nodes||module_8008f8e9_isNode(object))},DATA_FIELDS_MAP=TYPES.reduce((function(map,type){var _extends2;return extends_default()({},map,((_extends2={})[type]=function(type){return toCamelCase_1$1(type).split("_").map((function(str,index){return 0===index?str:Object(lodash.capitalize)(str)})).join("").concat("Data")}(type),_extends2))}),{}),_excluded$7=["metadata"],_excluded2$1=["textData"],_excluded3$1=["style","id"],toTiptap=function(richContent){var jsonContent=isRichContent(richContent)?RichContent.toJSON(richContent):module_8008f8e9_isNode(richContent)?Node$1.toJSON(richContent):JSON.parse(JSON.stringify(richContent));return module_8008f8e9_convertToProse({proseContent:jsonContent}).proseContent},PROSE_DATA_FIELDS_MAP=fromEntries$2(Object.values(TO_RICOS_DATA_FIELD$1).concat("textData").map((function(value){return[value,"attrs"]}))),FIELDS_MAP$1=extends_default()({nodes:"content",decorations:"marks"},PROSE_DATA_FIELDS_MAP),module_8008f8e9_convertToProse=function convertToProse(obj){return Object(lodash.transform)(obj,(function(result,value,key){var convertedValue=function(value){var node,textData,newNode,object,_ref,metadata,content,newValue=value;return isRichContent(newValue)&&(metadata=(_ref=newValue=extends_default()({type:"doc"},newValue)).metadata,content=objectWithoutPropertiesLoose_default()(_ref,_excluded$7),newValue=extends_default()({},content,{attrs:{metadata:metadata}})),isTextNode(newValue)&&(textData=(node=newValue).textData,newNode=objectWithoutPropertiesLoose_default()(node,_excluded2$1),newValue=extends_default()({},newNode,textData)),module_8008f8e9_isNode(newValue)&&(newValue=function(node){var _extends2,style=node.style,id=node.id,rest=objectWithoutPropertiesLoose_default()(node,_excluded3$1),dataFieldName=DATA_FIELDS_MAP[node.type],dataField=extends_default()({},node[dataFieldName],Object(lodash.pickBy)({style:style,id:id},(function(x){return void 0!==x})));return extends_default()({},rest,((_extends2={})[dataFieldName]=dataField,_extends2))}(newValue)),(module_8008f8e9_isNode(newValue)||isDecoration(newValue))&&(newValue=extends_default()({},object=newValue,{type:toCamelCase_1$1(object.type)})),newValue}(value);result[function(fieldName,value){return function(fieldName,value){return(null==value?void 0:value.id)&&fieldName.toString().includes("Data")}(fieldName,value)?"attrs":FIELDS_MAP$1[fieldName]||fieldName}(key,convertedValue)]=Object(lodash.isObject)(convertedValue)?convertToProse(convertedValue):convertedValue}))},_excluded$6=["id"],_excluded2=["type"],_excluded3=["attrs"],_excluded4=["marks","text","attrs"],_excluded5=["attrs"],_excluded6=["attrs"],_excluded7=["style","id"],fromTiptap=function(proseContent){var richContent=module_8008f8e9_convertFromProse({richContent:proseContent}).richContent;return removeIdFromData(richContent)},FIELDS_MAP={content:"nodes",marks:"decorations"},removeIdFromData=function(value){value.id;var newValue=objectWithoutPropertiesLoose_default()(value,_excluded$6);return module_8008f8e9_isNode(value)?value:newValue},module_8008f8e9_convertFromProse=function convertFromProse(obj){return Object(lodash.transform)(obj,(function(result,value,key){var convertedValue=function(value){var _ref2,attrs,content,_ref,object,newValue=value;return null!=(object=newValue)&&object.content&&!module_8008f8e9_isNode(object)&&((_ref=newValue).type,attrs=(_ref2=newValue=objectWithoutPropertiesLoose_default()(_ref,_excluded2)).attrs,content=objectWithoutPropertiesLoose_default()(_ref2,_excluded3),newValue=extends_default()({metadata:(null==attrs?void 0:attrs.metadata)||{version:1,createdTimestamp:new Date,updatedTimestamp:new Date}},content)),isTextNode(newValue)&&(newValue=function(object){var marks=object.marks,text=object.text,attrs=object.attrs,newValue=objectWithoutPropertiesLoose_default()(object,_excluded4);return extends_default()({},newValue,{attrs:extends_default()({},attrs,{marks:marks,text:text})})}(newValue)),module_8008f8e9_isNode(newValue)&&(newValue=function(object){var attrs=object.attrs,newValue=objectWithoutPropertiesLoose_default()(object,_excluded6),_ref4=attrs||{},style=_ref4.style,id=_ref4.id,rest=objectWithoutPropertiesLoose_default()(_ref4,_excluded7),newAttrs=Object.keys(rest).length>0?rest:void 0;return Object(lodash.pickBy)(extends_default()({},newValue,{attrs:newAttrs,style:style,id:id}),(function(x){return void 0!==x}))}(newValue)),(module_8008f8e9_isNode(newValue)||isDecoration(newValue))&&(newValue=function(object){var _ref3,dataField=DATA_FIELDS_MAP[object.type],attrs=object.attrs,newValue=objectWithoutPropertiesLoose_default()(object,_excluded5);return extends_default()({},newValue,attrs?((_ref3={})[dataField]=attrs,_ref3):{})}(newValue=function(object){return extends_default()({},object,{type:toConstantCase_1$2(object.type)})}(newValue))),newValue}(value);result[FIELDS_MAP[key]||key]=Object(lodash.isObject)(convertedValue)?convertFromProse(convertedValue):convertedValue}))};Object.freeze({ONE:"header-one",TWO:"header-two",THREE:"header-three",FOUR:"header-four",FIVE:"header-five",SIX:"header-six"}),Object.freeze(["header-one","header-two","header-three","header-four","header-five","header-six","unordered-list-item","ordered-list-item","blockquote","atomic","code-block","unstyled"]);var _FROM_DRAFT_LIST_TYPE$1,_TO_RICOS_NODE_TYPE$1,_TO_RICOS_DECORATION_$1,_ENTITY_DECORATION_TO$1,_RICOS_NODE_TYPE_TO_D$1,_DRAFT_BLOCK_TYPE_TO_$1,_ENTITY_DECORATION_TO2$1,BlockType$1,HeaderLevel$1,ACTION_BUTTON_TYPE$1="wix-draft-plugin-action-button",DIVIDER_TYPE$1="wix-draft-plugin-divider",EMOJI_TYPE="wix-draft-plugin-emoji",LINK_PREVIEW_TYPE$1="wix-draft-plugin-link-preview",MAP_TYPE$1="wix-draft-plugin-map";function fromEntries$1(iterable){return[].concat(iterable).reduce((function(obj,_ref){var key=_ref[0],val=_ref[1];return obj[key]=val,obj}),{})}!function(BlockType){BlockType.Unstyled="unstyled",BlockType.HeaderOne="header-one",BlockType.HeaderTwo="header-two",BlockType.HeaderThree="header-three",BlockType.HeaderFour="header-four",BlockType.HeaderFive="header-five",BlockType.HeaderSix="header-six",BlockType.UnorderedListItem="unordered-list-item",BlockType.OrderedListItem="ordered-list-item",BlockType.Blockquote="blockquote",BlockType.CodeBlock="code-block",BlockType.Atomic="atomic"}(BlockType$1||(BlockType$1={})),function(HeaderLevel){HeaderLevel[HeaderLevel["header-one"]=1]="header-one",HeaderLevel[HeaderLevel["header-two"]=2]="header-two",HeaderLevel[HeaderLevel["header-three"]=3]="header-three",HeaderLevel[HeaderLevel["header-four"]=4]="header-four",HeaderLevel[HeaderLevel["header-five"]=5]="header-five",HeaderLevel[HeaderLevel["header-six"]=6]="header-six"}(HeaderLevel$1||(HeaderLevel$1={}));var FROM_DRAFT_LIST_TYPE$1=((_FROM_DRAFT_LIST_TYPE$1={})[BlockType$1.UnorderedListItem]="BULLETED_LIST",_FROM_DRAFT_LIST_TYPE$1[BlockType$1.OrderedListItem]="ORDERED_LIST",_FROM_DRAFT_LIST_TYPE$1),TO_DRAFT_LIST_TYPE=fromEntries$1(Object.entries(FROM_DRAFT_LIST_TYPE$1).map((function(_ref){var key=_ref[0];return[_ref[1],key]}))),TO_RICOS_NODE_TYPE$1=((_TO_RICOS_NODE_TYPE$1={})["wix-draft-plugin-link-button"]="BUTTON",_TO_RICOS_NODE_TYPE$1[ACTION_BUTTON_TYPE$1]="BUTTON",_TO_RICOS_NODE_TYPE$1[DIVIDER_TYPE$1]="DIVIDER",_TO_RICOS_NODE_TYPE$1["wix-draft-plugin-file-upload"]="FILE",_TO_RICOS_NODE_TYPE$1["wix-draft-plugin-gallery"]="GALLERY",_TO_RICOS_NODE_TYPE$1["wix-draft-plugin-giphy"]="GIF",_TO_RICOS_NODE_TYPE$1["wix-draft-plugin-html"]="HTML",_TO_RICOS_NODE_TYPE$1["wix-draft-plugin-image"]="IMAGE",_TO_RICOS_NODE_TYPE$1.IMAGE="IMAGE",_TO_RICOS_NODE_TYPE$1["wix-rich-content-plugin-collapsible-list"]="COLLAPSIBLE_LIST",_TO_RICOS_NODE_TYPE$1[LINK_PREVIEW_TYPE$1]="LINK_PREVIEW",_TO_RICOS_NODE_TYPE$1[MAP_TYPE$1]="MAP",_TO_RICOS_NODE_TYPE$1["wix-draft-plugin-vertical-embed"]="APP_EMBED",_TO_RICOS_NODE_TYPE$1["wix-draft-plugin-video"]="VIDEO",_TO_RICOS_NODE_TYPE$1["VIDEO-EMBED"]="VIDEO",_TO_RICOS_NODE_TYPE$1["wix-draft-plugin-poll"]="POLL",_TO_RICOS_NODE_TYPE$1["wix-rich-content-plugin-table"]="TABLE",_TO_RICOS_NODE_TYPE$1.EMBED="EMBED",_TO_RICOS_NODE_TYPE$1),DUPLICATE_KEYS$1=["IMAGE","VIDEO-EMBED"],FROM_RICOS_ENTITY_TYPE=fromEntries$1(Object.entries(TO_RICOS_NODE_TYPE$1).filter((function(_ref2){var key=_ref2[0];return!DUPLICATE_KEYS$1.includes(key)})).map((function(_ref3){var key=_ref3[0];return[_ref3[1],key]}))),TO_RICOS_DECORATION_TYPE$1=((_TO_RICOS_DECORATION_$1={BOLD:"BOLD",ITALIC:"ITALIC",UNDERLINE:"UNDERLINE"})["wix-rich-content-plugin-spoiler"]="SPOILER",_TO_RICOS_DECORATION_$1.ANCHOR="ANCHOR",_TO_RICOS_DECORATION_$1.mention="MENTION",_TO_RICOS_DECORATION_$1.LINK="LINK",_TO_RICOS_DECORATION_$1),TO_RICOS_PLUGIN_TYPE=extends_default()({},TO_RICOS_NODE_TYPE$1,TO_RICOS_DECORATION_TYPE$1),FROM_RICOS_DECORATION_TYPE=fromEntries$1(Object.entries(TO_RICOS_DECORATION_TYPE$1).map((function(_ref4){var key=_ref4[0];return[_ref4[1],key]}))),ENTITY_DECORATION_TO_MUTABILITY=((_ENTITY_DECORATION_TO$1={}).ANCHOR="MUTABLE",_ENTITY_DECORATION_TO$1.LINK="MUTABLE",_ENTITY_DECORATION_TO$1.mention="SEGMENTED",_ENTITY_DECORATION_TO$1.EMOJI_TYPE="IMMUTABLE",_ENTITY_DECORATION_TO$1),RICOS_NODE_TYPE_TO_DATA_FIELD$1=((_RICOS_NODE_TYPE_TO_D$1={}).BUTTON="buttonData",_RICOS_NODE_TYPE_TO_D$1.DIVIDER="dividerData",_RICOS_NODE_TYPE_TO_D$1.FILE="fileData",_RICOS_NODE_TYPE_TO_D$1.GALLERY="galleryData",_RICOS_NODE_TYPE_TO_D$1.GIF="gifData",_RICOS_NODE_TYPE_TO_D$1.HTML="htmlData",_RICOS_NODE_TYPE_TO_D$1.IMAGE="imageData",_RICOS_NODE_TYPE_TO_D$1.COLLAPSIBLE_LIST="collapsibleListData",_RICOS_NODE_TYPE_TO_D$1.LINK_PREVIEW="linkPreviewData",_RICOS_NODE_TYPE_TO_D$1.MAP="mapData",_RICOS_NODE_TYPE_TO_D$1.APP_EMBED="appEmbedData",_RICOS_NODE_TYPE_TO_D$1.VIDEO="videoData",_RICOS_NODE_TYPE_TO_D$1.POLL="pollData",_RICOS_NODE_TYPE_TO_D$1.TABLE="tableData",_RICOS_NODE_TYPE_TO_D$1.PARAGRAPH="paragraphData",_RICOS_NODE_TYPE_TO_D$1.LIST_ITEM="paragraphData",_RICOS_NODE_TYPE_TO_D$1.HEADING="headingData",_RICOS_NODE_TYPE_TO_D$1.CODE_BLOCK="codeBlockData",_RICOS_NODE_TYPE_TO_D$1.BLOCKQUOTE="paragraphData",_RICOS_NODE_TYPE_TO_D$1.EMBED="embedData",_RICOS_NODE_TYPE_TO_D$1),DRAFT_BLOCK_TYPE_TO_DATA_FIELD$1=((_DRAFT_BLOCK_TYPE_TO_$1={})[BlockType$1.Unstyled]="paragraphData",_DRAFT_BLOCK_TYPE_TO_$1[BlockType$1.UnorderedListItem]="paragraphData",_DRAFT_BLOCK_TYPE_TO_$1[BlockType$1.OrderedListItem]="paragraphData",_DRAFT_BLOCK_TYPE_TO_$1[BlockType$1.HeaderOne]="headingData",_DRAFT_BLOCK_TYPE_TO_$1[BlockType$1.HeaderTwo]="headingData",_DRAFT_BLOCK_TYPE_TO_$1[BlockType$1.HeaderThree]="headingData",_DRAFT_BLOCK_TYPE_TO_$1[BlockType$1.HeaderFour]="headingData",_DRAFT_BLOCK_TYPE_TO_$1[BlockType$1.HeaderFive]="headingData",_DRAFT_BLOCK_TYPE_TO_$1[BlockType$1.HeaderSix]="headingData",_DRAFT_BLOCK_TYPE_TO_$1[BlockType$1.CodeBlock]="codeBlockData",_DRAFT_BLOCK_TYPE_TO_$1[BlockType$1.Blockquote]="paragraphData",_DRAFT_BLOCK_TYPE_TO_$1),DRAFT_PLUGIN_TYPE_TO_DATA_FIELD$1=fromEntries$1(Object.entries(TO_RICOS_NODE_TYPE$1).map((function(_ref5){var key=_ref5[0],value=_ref5[1];return[key,RICOS_NODE_TYPE_TO_DATA_FIELD$1[value]]}))),ENTITY_DECORATION_TO_DATA_FIELD$1=((_ENTITY_DECORATION_TO2$1={}).ANCHOR="anchorData",_ENTITY_DECORATION_TO2$1.LINK="linkData",_ENTITY_DECORATION_TO2$1.mention="mentionData",_ENTITY_DECORATION_TO2$1.EMOJI_TYPE="emojiData",_ENTITY_DECORATION_TO2$1),TO_RICOS_DATA_FIELD=extends_default()({},ENTITY_DECORATION_TO_DATA_FIELD$1,DRAFT_PLUGIN_TYPE_TO_DATA_FIELD$1,DRAFT_BLOCK_TYPE_TO_DATA_FIELD$1),_assign$m$1=function(){return(_assign$m$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseTextStyle={textAlignment:"AUTO"},TextStyle_fromJSON=function(object){var message=_assign$m$1({},baseTextStyle);return void 0!==object.textAlignment&&null!==object.textAlignment?message.textAlignment=function(object){switch(object){case 0:case"AUTO":return"AUTO";case 1:case"LEFT":return"LEFT";case 2:case"RIGHT":return"RIGHT";case 3:case"CENTER":return"CENTER";case 4:case"JUSTIFY":return"JUSTIFY";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.textAlignment):message.textAlignment="AUTO",void 0!==object.lineHeight&&null!==object.lineHeight?message.lineHeight=String(object.lineHeight):message.lineHeight=void 0,message},TextStyle_toJSON=function(message){var obj={};return void 0!==message.textAlignment&&(obj.textAlignment=function(object){switch(object){case"AUTO":return"AUTO";case"LEFT":return"LEFT";case"RIGHT":return"RIGHT";case"CENTER":return"CENTER";case"JUSTIFY":return"JUSTIFY";default:return"UNKNOWN"}}(message.textAlignment)),void 0!==message.lineHeight&&(obj.lineHeight=message.lineHeight),obj},baseLink$1={target:"SELF"},Link_fromJSON$1=function(object){var message=_assign$m$1({},baseLink$1);return void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.anchor&&null!==object.anchor?message.anchor=String(object.anchor):message.anchor=void 0,void 0!==object.target&&null!==object.target?message.target=function(object){switch(object){case 0:case"SELF":return"SELF";case 1:case"BLANK":return"BLANK";case 2:case"PARENT":return"PARENT";case 3:case"TOP":return"TOP";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.target):message.target="SELF",void 0!==object.rel&&null!==object.rel?message.rel=Link_Rel$1.fromJSON(object.rel):message.rel=void 0,void 0!==object.customData&&null!==object.customData?message.customData=String(object.customData):message.customData=void 0,message},Link_toJSON$1=function(message){var obj={};return void 0!==message.url&&(obj.url=message.url),void 0!==message.anchor&&(obj.anchor=message.anchor),void 0!==message.target&&(obj.target=function(object){switch(object){case"SELF":return"SELF";case"BLANK":return"BLANK";case"PARENT":return"PARENT";case"TOP":return"TOP";default:return"UNKNOWN"}}(message.target)),void 0!==message.rel&&(obj.rel=message.rel?Link_Rel$1.toJSON(message.rel):void 0),void 0!==message.customData&&(obj.customData=message.customData),obj},baseLink_Rel$1={},Link_Rel$1={fromJSON:function(object){var message=_assign$m$1({},baseLink_Rel$1);return void 0!==object.nofollow&&null!==object.nofollow?message.nofollow=Boolean(object.nofollow):message.nofollow=void 0,void 0!==object.sponsored&&null!==object.sponsored?message.sponsored=Boolean(object.sponsored):message.sponsored=void 0,void 0!==object.ugc&&null!==object.ugc?message.ugc=Boolean(object.ugc):message.ugc=void 0,message},toJSON:function(message){var obj={};return void 0!==message.nofollow&&(obj.nofollow=message.nofollow),void 0!==message.sponsored&&(obj.sponsored=message.sponsored),void 0!==message.ugc&&(obj.ugc=message.ugc),obj}},basePluginContainerData$1={alignment:"CENTER"},PluginContainerData_fromJSON$1=function(object){var message=_assign$m$1({},basePluginContainerData$1);return void 0!==object.width&&null!==object.width?message.width=PluginContainerData_Width$1.fromJSON(object.width):message.width=void 0,void 0!==object.alignment&&null!==object.alignment?message.alignment=function(object){switch(object){case 0:case"CENTER":return"CENTER";case 1:case"LEFT":return"LEFT";case 2:case"RIGHT":return"RIGHT";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.alignment):message.alignment="CENTER",void 0!==object.spoiler&&null!==object.spoiler?message.spoiler=PluginContainerData_Spoiler$1.fromJSON(object.spoiler):message.spoiler=void 0,void 0!==object.height&&null!==object.height?message.height=PluginContainerData_Height$1.fromJSON(object.height):message.height=void 0,message},PluginContainerData_toJSON$1=function(message){var obj={};return void 0!==message.width&&(obj.width=message.width?PluginContainerData_Width$1.toJSON(message.width):void 0),void 0!==message.alignment&&(obj.alignment=function(object){switch(object){case"CENTER":return"CENTER";case"LEFT":return"LEFT";case"RIGHT":return"RIGHT";default:return"UNKNOWN"}}(message.alignment)),void 0!==message.spoiler&&(obj.spoiler=message.spoiler?PluginContainerData_Spoiler$1.toJSON(message.spoiler):void 0),void 0!==message.height&&(obj.height=message.height?PluginContainerData_Height$1.toJSON(message.height):void 0),obj},basePluginContainerData_Spoiler$1={},PluginContainerData_Spoiler$1={fromJSON:function(object){var message=_assign$m$1({},basePluginContainerData_Spoiler$1);return void 0!==object.enabled&&null!==object.enabled?message.enabled=Boolean(object.enabled):message.enabled=void 0,void 0!==object.description&&null!==object.description?message.description=String(object.description):message.description=void 0,void 0!==object.buttonText&&null!==object.buttonText?message.buttonText=String(object.buttonText):message.buttonText=void 0,message},toJSON:function(message){var obj={};return void 0!==message.enabled&&(obj.enabled=message.enabled),void 0!==message.description&&(obj.description=message.description),void 0!==message.buttonText&&(obj.buttonText=message.buttonText),obj}},basePluginContainerData_Width$1={},PluginContainerData_Width$1={fromJSON:function(object){var message=_assign$m$1({},basePluginContainerData_Width$1);return void 0!==object.size&&null!==object.size?message.size=function(object){switch(object){case 0:case"CONTENT":return"CONTENT";case 1:case"SMALL":return"SMALL";case 2:case"ORIGINAL":return"ORIGINAL";case 3:case"FULL_WIDTH":return"FULL_WIDTH";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.size):message.size=void 0,void 0!==object.custom&&null!==object.custom?message.custom=String(object.custom):message.custom=void 0,message},toJSON:function(message){var obj={};return void 0!==message.size&&(obj.size=void 0!==message.size?function(object){switch(object){case"CONTENT":return"CONTENT";case"SMALL":return"SMALL";case"ORIGINAL":return"ORIGINAL";case"FULL_WIDTH":return"FULL_WIDTH";default:return"UNKNOWN"}}(message.size):void 0),void 0!==message.custom&&(obj.custom=message.custom),obj}},basePluginContainerData_Height$1={},PluginContainerData_Height$1={fromJSON:function(object){var message=_assign$m$1({},basePluginContainerData_Height$1);return void 0!==object.custom&&null!==object.custom?message.custom=String(object.custom):message.custom=void 0,message},toJSON:function(message){var obj={};return void 0!==message.custom&&(obj.custom=message.custom),obj}},baseFileSource$1={},FileSource_fromJSON$1=function(object){var message=_assign$m$1({},baseFileSource$1);return void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.custom&&null!==object.custom?message.custom=String(object.custom):message.custom=void 0,void 0!==object.id&&null!==object.id?message.id=String(object.id):message.id=void 0,void 0!==object.private&&null!==object.private?message.private=Boolean(object.private):message.private=void 0,message},FileSource_toJSON$1=function(message){var obj={};return void 0!==message.url&&(obj.url=message.url),void 0!==message.custom&&(obj.custom=message.custom),void 0!==message.id&&(obj.id=message.id),void 0!==message.private&&(obj.private=message.private),obj},baseMedia$1={},Media_fromJSON$1=function(object){var message=_assign$m$1({},baseMedia$1);return void 0!==object.src&&null!==object.src?message.src=FileSource_fromJSON$1(object.src):message.src=void 0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=void 0,void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=void 0,message},Media_toJSON$1=function(message){var obj={};return void 0!==message.src&&(obj.src=message.src?FileSource_toJSON$1(message.src):void 0),void 0!==message.width&&(obj.width=message.width),void 0!==message.height&&(obj.height=message.height),obj},baseOembed$1={},_assign$l=function(){return(_assign$l=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseAnchorData={anchor:""},_assign$k=function(){return(_assign$k=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseColorData={},_assign$j=function(){return(_assign$j=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseLinkData={},_assign$i=function(){return(_assign$i=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseMentionData={name:"",slug:""},_assign$h=function(){return(_assign$h=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseCodeBlockData={},_assign$g=function(){return(_assign$g=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseHeadingData={level:0},_assign$f=function(){return(_assign$f=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseParagraphData={},_assign$e$1=function(){return(_assign$e$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseAppEmbedData$1={type:"PRODUCT"},AppEmbedData$1={fromJSON:function(object){var message=_assign$e$1({},baseAppEmbedData$1);return void 0!==object.type&&null!==object.type?message.type=function(object){switch(object){case 0:case"PRODUCT":return"PRODUCT";case 1:case"EVENT":return"EVENT";case 2:case"BOOKING":return"BOOKING";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.type):message.type="PRODUCT",void 0!==object.itemId&&null!==object.itemId?message.itemId=String(object.itemId):message.itemId=void 0,void 0!==object.name&&null!==object.name?message.name=String(object.name):message.name=void 0,void 0!==object.imageSrc&&null!==object.imageSrc?message.imageSrc=String(object.imageSrc):message.imageSrc=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.bookingData&&null!==object.bookingData?message.bookingData=AppEmbedData_BookingData$1.fromJSON(object.bookingData):message.bookingData=void 0,void 0!==object.eventData&&null!==object.eventData?message.eventData=AppEmbedData_EventData$1.fromJSON(object.eventData):message.eventData=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=function(object){switch(object){case"PRODUCT":return"PRODUCT";case"EVENT":return"EVENT";case"BOOKING":return"BOOKING";default:return"UNKNOWN"}}(message.type)),void 0!==message.itemId&&(obj.itemId=message.itemId),void 0!==message.name&&(obj.name=message.name),void 0!==message.imageSrc&&(obj.imageSrc=message.imageSrc),void 0!==message.url&&(obj.url=message.url),void 0!==message.bookingData&&(obj.bookingData=message.bookingData?AppEmbedData_BookingData$1.toJSON(message.bookingData):void 0),void 0!==message.eventData&&(obj.eventData=message.eventData?AppEmbedData_EventData$1.toJSON(message.eventData):void 0),obj}},baseAppEmbedData_BookingData$1={},AppEmbedData_BookingData$1={fromJSON:function(object){var message=_assign$e$1({},baseAppEmbedData_BookingData$1);return void 0!==object.durations&&null!==object.durations?message.durations=String(object.durations):message.durations=void 0,message},toJSON:function(message){var obj={};return void 0!==message.durations&&(obj.durations=message.durations),obj}},baseAppEmbedData_EventData$1={},AppEmbedData_EventData$1={fromJSON:function(object){var message=_assign$e$1({},baseAppEmbedData_EventData$1);return void 0!==object.scheduling&&null!==object.scheduling?message.scheduling=String(object.scheduling):message.scheduling=void 0,void 0!==object.location&&null!==object.location?message.location=String(object.location):message.location=void 0,message},toJSON:function(message){var obj={};return void 0!==message.scheduling&&(obj.scheduling=message.scheduling),void 0!==message.location&&(obj.location=message.location),obj}},_assign$d$1=function(){return(_assign$d$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseButtonData$1={type:"LINK"},ButtonData$1={fromJSON:function(object){var message=_assign$d$1({},baseButtonData$1);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.type&&null!==object.type?message.type=function(object){switch(object){case 0:case"LINK":return"LINK";case 1:case"ACTION":return"ACTION";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.type):message.type="LINK",void 0!==object.styles&&null!==object.styles?message.styles=ButtonData_ButtonStyles$1.fromJSON(object.styles):message.styles=void 0,void 0!==object.text&&null!==object.text?message.text=String(object.text):message.text=void 0,void 0!==object.link&&null!==object.link?message.link=Link_fromJSON$1(object.link):message.link=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),void 0!==message.type&&(obj.type=function(object){switch(object){case"LINK":return"LINK";case"ACTION":return"ACTION";default:return"UNKNOWN"}}(message.type)),void 0!==message.styles&&(obj.styles=message.styles?ButtonData_ButtonStyles$1.toJSON(message.styles):void 0),void 0!==message.text&&(obj.text=message.text),void 0!==message.link&&(obj.link=message.link?Link_toJSON$1(message.link):void 0),obj}},baseButtonData_ButtonStyles$1={},ButtonData_ButtonStyles$1={fromJSON:function(object){var message=_assign$d$1({},baseButtonData_ButtonStyles$1);return void 0!==object.borderWidth&&null!==object.borderWidth?message.borderWidth=Number(object.borderWidth):message.borderWidth=void 0,void 0!==object.borderRadius&&null!==object.borderRadius?message.borderRadius=Number(object.borderRadius):message.borderRadius=void 0,void 0!==object.textColor&&null!==object.textColor?message.textColor=String(object.textColor):message.textColor=void 0,void 0!==object.borderColor&&null!==object.borderColor?message.borderColor=String(object.borderColor):message.borderColor=void 0,void 0!==object.backgroundColor&&null!==object.backgroundColor?message.backgroundColor=String(object.backgroundColor):message.backgroundColor=void 0,message},toJSON:function(message){var obj={};return void 0!==message.borderWidth&&(obj.borderWidth=message.borderWidth),void 0!==message.borderRadius&&(obj.borderRadius=message.borderRadius),void 0!==message.textColor&&(obj.textColor=message.textColor),void 0!==message.borderColor&&(obj.borderColor=message.borderColor),void 0!==message.backgroundColor&&(obj.backgroundColor=message.backgroundColor),obj}},_assign$c$1=function(){return(_assign$c$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseDividerData$1={lineStyle:"SINGLE",width:"LARGE",alignment:"CENTER"},DividerData$1={fromJSON:function(object){var message=_assign$c$1({},baseDividerData$1);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.lineStyle&&null!==object.lineStyle?message.lineStyle=function(object){switch(object){case 0:case"SINGLE":return"SINGLE";case 1:case"DOUBLE":return"DOUBLE";case 2:case"DASHED":return"DASHED";case 3:case"DOTTED":return"DOTTED";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.lineStyle):message.lineStyle="SINGLE",void 0!==object.width&&null!==object.width?message.width=function(object){switch(object){case 0:case"LARGE":return"LARGE";case 1:case"MEDIUM":return"MEDIUM";case 2:case"SMALL":return"SMALL";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.width):message.width="LARGE",void 0!==object.alignment&&null!==object.alignment?message.alignment=function(object){switch(object){case 0:case"CENTER":return"CENTER";case 1:case"LEFT":return"LEFT";case 2:case"RIGHT":return"RIGHT";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.alignment):message.alignment="CENTER",message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),void 0!==message.lineStyle&&(obj.lineStyle=function(object){switch(object){case"SINGLE":return"SINGLE";case"DOUBLE":return"DOUBLE";case"DASHED":return"DASHED";case"DOTTED":return"DOTTED";default:return"UNKNOWN"}}(message.lineStyle)),void 0!==message.width&&(obj.width=function(object){switch(object){case"LARGE":return"LARGE";case"MEDIUM":return"MEDIUM";case"SMALL":return"SMALL";default:return"UNKNOWN"}}(message.width)),void 0!==message.alignment&&(obj.alignment=function(object){switch(object){case"CENTER":return"CENTER";case"LEFT":return"LEFT";case"RIGHT":return"RIGHT";default:return"UNKNOWN"}}(message.alignment)),obj}},_assign$b$1=function(){return(_assign$b$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseEmbedData$1={},EmbedData$1={fromJSON:function(object){var message=_assign$b$1({},baseEmbedData$1);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.oembed&&null!==object.oembed?message.oembed=function(object){var message=_assign$m$1({},baseOembed$1);return void 0!==object.type&&null!==object.type?message.type=String(object.type):message.type=void 0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=void 0,void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.html&&null!==object.html?message.html=String(object.html):message.html=void 0,void 0!==object.authorName&&null!==object.authorName?message.authorName=String(object.authorName):message.authorName=void 0,void 0!==object.authorUrl&&null!==object.authorUrl?message.authorUrl=String(object.authorUrl):message.authorUrl=void 0,void 0!==object.providerName&&null!==object.providerName?message.providerName=String(object.providerName):message.providerName=void 0,void 0!==object.providerUrl&&null!==object.providerUrl?message.providerUrl=String(object.providerUrl):message.providerUrl=void 0,void 0!==object.thumbnailUrl&&null!==object.thumbnailUrl?message.thumbnailUrl=String(object.thumbnailUrl):message.thumbnailUrl=void 0,void 0!==object.thumbnailWidth&&null!==object.thumbnailWidth?message.thumbnailWidth=String(object.thumbnailWidth):message.thumbnailWidth=void 0,void 0!==object.thumbnailHeight&&null!==object.thumbnailHeight?message.thumbnailHeight=String(object.thumbnailHeight):message.thumbnailHeight=void 0,void 0!==object.videoUrl&&null!==object.videoUrl?message.videoUrl=String(object.videoUrl):message.videoUrl=void 0,void 0!==object.version&&null!==object.version?message.version=String(object.version):message.version=void 0,message}(object.oembed):message.oembed=void 0,void 0!==object.src&&null!==object.src?message.src=String(object.src):message.src=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),void 0!==message.oembed&&(obj.oembed=message.oembed?function(message){var obj={};return void 0!==message.type&&(obj.type=message.type),void 0!==message.width&&(obj.width=message.width),void 0!==message.height&&(obj.height=message.height),void 0!==message.title&&(obj.title=message.title),void 0!==message.url&&(obj.url=message.url),void 0!==message.html&&(obj.html=message.html),void 0!==message.authorName&&(obj.authorName=message.authorName),void 0!==message.authorUrl&&(obj.authorUrl=message.authorUrl),void 0!==message.providerName&&(obj.providerName=message.providerName),void 0!==message.providerUrl&&(obj.providerUrl=message.providerUrl),void 0!==message.thumbnailUrl&&(obj.thumbnailUrl=message.thumbnailUrl),void 0!==message.thumbnailWidth&&(obj.thumbnailWidth=message.thumbnailWidth),void 0!==message.thumbnailHeight&&(obj.thumbnailHeight=message.thumbnailHeight),void 0!==message.videoUrl&&(obj.videoUrl=message.videoUrl),void 0!==message.version&&(obj.version=message.version),obj}(message.oembed):void 0),void 0!==message.src&&(obj.src=message.src),obj}},_assign$a$1=function(){return(_assign$a$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseFileData$1={},FileData$1={fromJSON:function(object){var message=_assign$a$1({},baseFileData$1);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.src&&null!==object.src?message.src=FileSource_fromJSON$1(object.src):message.src=void 0,void 0!==object.name&&null!==object.name?message.name=String(object.name):message.name=void 0,void 0!==object.type&&null!==object.type?message.type=String(object.type):message.type=void 0,void 0!==object.size&&null!==object.size?message.size=Number(object.size):message.size=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),void 0!==message.src&&(obj.src=message.src?FileSource_toJSON$1(message.src):void 0),void 0!==message.name&&(obj.name=message.name),void 0!==message.type&&(obj.type=message.type),void 0!==message.size&&(obj.size=message.size),obj}},_assign$$1=function(){return(_assign$$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseGalleryData$1={},GalleryData$1={fromJSON:function(object){var message=_assign$$1({},baseGalleryData$1);if(message.items=[],void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.items&&null!==object.items)for(var _i=0,_a=object.items;_i<_a.length;_i++){var e=_a[_i];message.items.push(GalleryItem$1.fromJSON(e))}return void 0!==object.styles&&null!==object.styles?message.styles=GalleryStyles$1.fromJSON(object.styles):message.styles=void 0,void 0!==object.config&&null!==object.config?message.config=GalleryConfig$1.fromJSON(object.config):message.config=void 0,void 0!==object.disableExpand&&null!==object.disableExpand?message.disableExpand=Boolean(object.disableExpand):message.disableExpand=void 0,void 0!==object.disableDownload&&null!==object.disableDownload?message.disableDownload=Boolean(object.disableDownload):message.disableDownload=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),message.items?obj.items=message.items.map((function(e){return e?GalleryItem$1.toJSON(e):void 0})):obj.items=[],void 0!==message.styles&&(obj.styles=message.styles?GalleryStyles$1.toJSON(message.styles):void 0),void 0!==message.config&&(obj.config=message.config?GalleryConfig$1.toJSON(message.config):void 0),void 0!==message.disableExpand&&(obj.disableExpand=message.disableExpand),void 0!==message.disableDownload&&(obj.disableDownload=message.disableDownload),obj}},baseGalleryStyles$1={},GalleryStyles$1={fromJSON:function(object){var message=_assign$$1({},baseGalleryStyles$1);return void 0!==object.galleryLayout&&null!==object.galleryLayout?message.galleryLayout=Number(object.galleryLayout):message.galleryLayout=void 0,void 0!==object.gallerySizeType&&null!==object.gallerySizeType?message.gallerySizeType=String(object.gallerySizeType):message.gallerySizeType=void 0,void 0!==object.gallerySizePx&&null!==object.gallerySizePx?message.gallerySizePx=Number(object.gallerySizePx):message.gallerySizePx=void 0,void 0!==object.oneRow&&null!==object.oneRow?message.oneRow=Boolean(object.oneRow):message.oneRow=void 0,void 0!==object.cubeRatio&&null!==object.cubeRatio?message.cubeRatio=Number(object.cubeRatio):message.cubeRatio=void 0,void 0!==object.galleryThumbnailsAlignment&&null!==object.galleryThumbnailsAlignment?message.galleryThumbnailsAlignment=String(object.galleryThumbnailsAlignment):message.galleryThumbnailsAlignment=void 0,void 0!==object.isVertical&&null!==object.isVertical?message.isVertical=Boolean(object.isVertical):message.isVertical=void 0,void 0!==object.numberOfImagesPerRow&&null!==object.numberOfImagesPerRow?message.numberOfImagesPerRow=Number(object.numberOfImagesPerRow):message.numberOfImagesPerRow=void 0,void 0!==object.imageMargin&&null!==object.imageMargin?message.imageMargin=Number(object.imageMargin):message.imageMargin=void 0,void 0!==object.thumbnailSpacings&&null!==object.thumbnailSpacings?message.thumbnailSpacings=Number(object.thumbnailSpacings):message.thumbnailSpacings=void 0,void 0!==object.cubeType&&null!==object.cubeType?message.cubeType=String(object.cubeType):message.cubeType=void 0,void 0!==object.enableInfiniteScroll&&null!==object.enableInfiniteScroll?message.enableInfiniteScroll=Boolean(object.enableInfiniteScroll):message.enableInfiniteScroll=void 0,void 0!==object.titlePlacement&&null!==object.titlePlacement?message.titlePlacement=String(object.titlePlacement):message.titlePlacement=void 0,void 0!==object.allowHover&&null!==object.allowHover?message.allowHover=Boolean(object.allowHover):message.allowHover=void 0,void 0!==object.itemClick&&null!==object.itemClick?message.itemClick=String(object.itemClick):message.itemClick=void 0,void 0!==object.showArrows&&null!==object.showArrows?message.showArrows=Boolean(object.showArrows):message.showArrows=void 0,void 0!==object.gridStyle&&null!==object.gridStyle?message.gridStyle=Number(object.gridStyle):message.gridStyle=void 0,void 0!==object.loveButton&&null!==object.loveButton?message.loveButton=Boolean(object.loveButton):message.loveButton=void 0,void 0!==object.allowSocial&&null!==object.allowSocial?message.allowSocial=Boolean(object.allowSocial):message.allowSocial=void 0,void 0!==object.allowDownload&&null!==object.allowDownload?message.allowDownload=Boolean(object.allowDownload):message.allowDownload=void 0,void 0!==object.cubeImages&&null!==object.cubeImages?message.cubeImages=Boolean(object.cubeImages):message.cubeImages=void 0,void 0!==object.groupSize&&null!==object.groupSize?message.groupSize=Number(object.groupSize):message.groupSize=void 0,void 0!==object.groupTypes&&null!==object.groupTypes?message.groupTypes=String(object.groupTypes):message.groupTypes=void 0,void 0!==object.fixedColumns&&null!==object.fixedColumns?message.fixedColumns=Number(object.fixedColumns):message.fixedColumns=void 0,void 0!==object.hasThumbnails&&null!==object.hasThumbnails?message.hasThumbnails=Boolean(object.hasThumbnails):message.hasThumbnails=void 0,void 0!==object.enableScroll&&null!==object.enableScroll?message.enableScroll=Boolean(object.enableScroll):message.enableScroll=void 0,void 0!==object.isGrid&&null!==object.isGrid?message.isGrid=Boolean(object.isGrid):message.isGrid=void 0,void 0!==object.isSlider&&null!==object.isSlider?message.isSlider=Boolean(object.isSlider):message.isSlider=void 0,void 0!==object.isColumns&&null!==object.isColumns?message.isColumns=Boolean(object.isColumns):message.isColumns=void 0,void 0!==object.isSlideshow&&null!==object.isSlideshow?message.isSlideshow=Boolean(object.isSlideshow):message.isSlideshow=void 0,void 0!==object.cropOnlyFill&&null!==object.cropOnlyFill?message.cropOnlyFill=Boolean(object.cropOnlyFill):message.cropOnlyFill=void 0,void 0!==object.galleryMargin&&null!==object.galleryMargin?message.galleryMargin=Number(object.galleryMargin):message.galleryMargin=void 0,void 0!==object.fullscreen&&null!==object.fullscreen?message.fullscreen=Boolean(object.fullscreen):message.fullscreen=void 0,void 0!==object.mobileSwipeAnimation&&null!==object.mobileSwipeAnimation?message.mobileSwipeAnimation=String(object.mobileSwipeAnimation):message.mobileSwipeAnimation=void 0,void 0!==object.thumbnailSize&&null!==object.thumbnailSize?message.thumbnailSize=Number(object.thumbnailSize):message.thumbnailSize=void 0,void 0!==object.gotStyleParams&&null!==object.gotStyleParams?message.gotStyleParams=Boolean(object.gotStyleParams):message.gotStyleParams=void 0,void 0!==object.showVideoPlayButton&&null!==object.showVideoPlayButton?message.showVideoPlayButton=Boolean(object.showVideoPlayButton):message.showVideoPlayButton=void 0,void 0!==object.videoPlay&&null!==object.videoPlay?message.videoPlay=String(object.videoPlay):message.videoPlay=void 0,void 0!==object.galleryType&&null!==object.galleryType?message.galleryType=String(object.galleryType):message.galleryType=void 0,message},toJSON:function(message){var obj={};return void 0!==message.galleryLayout&&(obj.galleryLayout=message.galleryLayout),void 0!==message.gallerySizeType&&(obj.gallerySizeType=message.gallerySizeType),void 0!==message.gallerySizePx&&(obj.gallerySizePx=message.gallerySizePx),void 0!==message.oneRow&&(obj.oneRow=message.oneRow),void 0!==message.cubeRatio&&(obj.cubeRatio=message.cubeRatio),void 0!==message.galleryThumbnailsAlignment&&(obj.galleryThumbnailsAlignment=message.galleryThumbnailsAlignment),void 0!==message.isVertical&&(obj.isVertical=message.isVertical),void 0!==message.numberOfImagesPerRow&&(obj.numberOfImagesPerRow=message.numberOfImagesPerRow),void 0!==message.imageMargin&&(obj.imageMargin=message.imageMargin),void 0!==message.thumbnailSpacings&&(obj.thumbnailSpacings=message.thumbnailSpacings),void 0!==message.cubeType&&(obj.cubeType=message.cubeType),void 0!==message.enableInfiniteScroll&&(obj.enableInfiniteScroll=message.enableInfiniteScroll),void 0!==message.titlePlacement&&(obj.titlePlacement=message.titlePlacement),void 0!==message.allowHover&&(obj.allowHover=message.allowHover),void 0!==message.itemClick&&(obj.itemClick=message.itemClick),void 0!==message.showArrows&&(obj.showArrows=message.showArrows),void 0!==message.gridStyle&&(obj.gridStyle=message.gridStyle),void 0!==message.loveButton&&(obj.loveButton=message.loveButton),void 0!==message.allowSocial&&(obj.allowSocial=message.allowSocial),void 0!==message.allowDownload&&(obj.allowDownload=message.allowDownload),void 0!==message.cubeImages&&(obj.cubeImages=message.cubeImages),void 0!==message.groupSize&&(obj.groupSize=message.groupSize),void 0!==message.groupTypes&&(obj.groupTypes=message.groupTypes),void 0!==message.fixedColumns&&(obj.fixedColumns=message.fixedColumns),void 0!==message.hasThumbnails&&(obj.hasThumbnails=message.hasThumbnails),void 0!==message.enableScroll&&(obj.enableScroll=message.enableScroll),void 0!==message.isGrid&&(obj.isGrid=message.isGrid),void 0!==message.isSlider&&(obj.isSlider=message.isSlider),void 0!==message.isColumns&&(obj.isColumns=message.isColumns),void 0!==message.isSlideshow&&(obj.isSlideshow=message.isSlideshow),void 0!==message.cropOnlyFill&&(obj.cropOnlyFill=message.cropOnlyFill),void 0!==message.galleryMargin&&(obj.galleryMargin=message.galleryMargin),void 0!==message.fullscreen&&(obj.fullscreen=message.fullscreen),void 0!==message.mobileSwipeAnimation&&(obj.mobileSwipeAnimation=message.mobileSwipeAnimation),void 0!==message.thumbnailSize&&(obj.thumbnailSize=message.thumbnailSize),void 0!==message.gotStyleParams&&(obj.gotStyleParams=message.gotStyleParams),void 0!==message.showVideoPlayButton&&(obj.showVideoPlayButton=message.showVideoPlayButton),void 0!==message.videoPlay&&(obj.videoPlay=message.videoPlay),void 0!==message.galleryType&&(obj.galleryType=message.galleryType),obj}},baseGalleryConfig$1={},GalleryConfig$1={fromJSON:function(object){var message=_assign$$1({},baseGalleryConfig$1);return void 0!==object.layout&&null!==object.layout?message.layout=String(object.layout):message.layout=void 0,void 0!==object.spacing&&null!==object.spacing?message.spacing=Number(object.spacing):message.spacing=void 0,void 0!==object.key&&null!==object.key?message.key=String(object.key):message.key=void 0,void 0!==object.disableExpand&&null!==object.disableExpand?message.disableExpand=Boolean(object.disableExpand):message.disableExpand=void 0,message},toJSON:function(message){var obj={};return void 0!==message.layout&&(obj.layout=message.layout),void 0!==message.spacing&&(obj.spacing=message.spacing),void 0!==message.key&&(obj.key=message.key),void 0!==message.disableExpand&&(obj.disableExpand=message.disableExpand),obj}},baseGalleyItemMetadata$1={},baseGalleryItem$1={},GalleryItem$1={fromJSON:function(object){var message=_assign$$1({},baseGalleryItem$1);return void 0!==object.metadata&&null!==object.metadata?message.metadata=function(object){var message=_assign$$1({},baseGalleyItemMetadata$1);return void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=void 0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.type&&null!==object.type?message.type=String(object.type):message.type=void 0,message}(object.metadata):message.metadata=void 0,void 0!==object.itemId&&null!==object.itemId?message.itemId=String(object.itemId):message.itemId=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.selected&&null!==object.selected?message.selected=Boolean(object.selected):message.selected=void 0,message},toJSON:function(message){var obj={};return void 0!==message.metadata&&(obj.metadata=message.metadata?function(message){var obj={};return void 0!==message.height&&(obj.height=message.height),void 0!==message.width&&(obj.width=message.width),void 0!==message.title&&(obj.title=message.title),void 0!==message.type&&(obj.type=message.type),obj}(message.metadata):void 0),void 0!==message.itemId&&(obj.itemId=message.itemId),void 0!==message.url&&(obj.url=message.url),void 0!==message.selected&&(obj.selected=message.selected),obj}},_assign$2$1=function(){return(_assign$2$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseGIFData$1={height:0,width:0},GIFData$1={fromJSON:function(object){var message=_assign$2$1({},baseGIFData$1);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.original&&null!==object.original?message.original=GIF$1.fromJSON(object.original):message.original=void 0,void 0!==object.downsized&&null!==object.downsized?message.downsized=GIF$1.fromJSON(object.downsized):message.downsized=void 0,void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),void 0!==message.original&&(obj.original=message.original?GIF$1.toJSON(message.original):void 0),void 0!==message.downsized&&(obj.downsized=message.downsized?GIF$1.toJSON(message.downsized):void 0),void 0!==message.height&&(obj.height=message.height),void 0!==message.width&&(obj.width=message.width),obj}},baseGIF$1={},GIF$1={fromJSON:function(object){var message=_assign$2$1({},baseGIF$1);return void 0!==object.gif&&null!==object.gif?message.gif=String(object.gif):message.gif=void 0,void 0!==object.mp4&&null!==object.mp4?message.mp4=String(object.mp4):message.mp4=void 0,void 0!==object.still&&null!==object.still?message.still=String(object.still):message.still=void 0,message},toJSON:function(message){var obj={};return void 0!==message.gif&&(obj.gif=message.gif),void 0!==message.mp4&&(obj.mp4=message.mp4),void 0!==message.still&&(obj.still=message.still),obj}},_assign$3$1=function(){return(_assign$3$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseHTMLData$1={},HTMLData$1={fromJSON:function(object){var message=_assign$3$1({},baseHTMLData$1);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.html&&null!==object.html?message.html=String(object.html):message.html=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),void 0!==message.url&&(obj.url=message.url),void 0!==message.html&&(obj.html=message.html),obj}},_assign$4$1=function(){return(_assign$4$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseImageData$1={},ImageData$1={fromJSON:function(object){var message=_assign$4$1({},baseImageData$1);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.image&&null!==object.image?message.image=Media_fromJSON$1(object.image):message.image=void 0,void 0!==object.link&&null!==object.link?message.link=Link_fromJSON$1(object.link):message.link=void 0,void 0!==object.disableExpand&&null!==object.disableExpand?message.disableExpand=Boolean(object.disableExpand):message.disableExpand=void 0,void 0!==object.altText&&null!==object.altText?message.altText=String(object.altText):message.altText=void 0,void 0!==object.caption&&null!==object.caption?message.caption=String(object.caption):message.caption=void 0,void 0!==object.disableDownload&&null!==object.disableDownload?message.disableDownload=Boolean(object.disableDownload):message.disableDownload=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),void 0!==message.image&&(obj.image=message.image?Media_toJSON$1(message.image):void 0),void 0!==message.link&&(obj.link=message.link?Link_toJSON$1(message.link):void 0),void 0!==message.disableExpand&&(obj.disableExpand=message.disableExpand),void 0!==message.altText&&(obj.altText=message.altText),void 0!==message.caption&&(obj.caption=message.caption),void 0!==message.disableDownload&&(obj.disableDownload=message.disableDownload),obj}},_assign$5$1=function(){return(_assign$5$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseLinkPreviewData$1={},LinkPreviewData$1={fromJSON:function(object){var message=_assign$5$1({},baseLinkPreviewData$1);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.link&&null!==object.link?message.link=Link_fromJSON$1(object.link):message.link=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.thumbnailUrl&&null!==object.thumbnailUrl?message.thumbnailUrl=String(object.thumbnailUrl):message.thumbnailUrl=void 0,void 0!==object.description&&null!==object.description?message.description=String(object.description):message.description=void 0,void 0!==object.html&&null!==object.html?message.html=String(object.html):message.html=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),void 0!==message.link&&(obj.link=message.link?Link_toJSON$1(message.link):void 0),void 0!==message.title&&(obj.title=message.title),void 0!==message.thumbnailUrl&&(obj.thumbnailUrl=message.thumbnailUrl),void 0!==message.description&&(obj.description=message.description),void 0!==message.html&&(obj.html=message.html),obj}},_assign$6$1=function(){return(_assign$6$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseMapData$1={},MapData$1={fromJSON:function(object){var message=_assign$6$1({},baseMapData$1);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.mapSettings&&null!==object.mapSettings?message.mapSettings=MapSettings$1.fromJSON(object.mapSettings):message.mapSettings=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),void 0!==message.mapSettings&&(obj.mapSettings=message.mapSettings?MapSettings$1.toJSON(message.mapSettings):void 0),obj}},baseMapSettings$1={mapType:"ROADMAP"},MapSettings$1={fromJSON:function(object){var message=_assign$6$1({},baseMapSettings$1);return void 0!==object.address&&null!==object.address?message.address=String(object.address):message.address=void 0,void 0!==object.draggable&&null!==object.draggable?message.draggable=Boolean(object.draggable):message.draggable=void 0,void 0!==object.marker&&null!==object.marker?message.marker=Boolean(object.marker):message.marker=void 0,void 0!==object.streetViewControl&&null!==object.streetViewControl?message.streetViewControl=Boolean(object.streetViewControl):message.streetViewControl=void 0,void 0!==object.zoomControl&&null!==object.zoomControl?message.zoomControl=Boolean(object.zoomControl):message.zoomControl=void 0,void 0!==object.lat&&null!==object.lat?message.lat=Number(object.lat):message.lat=void 0,void 0!==object.lng&&null!==object.lng?message.lng=Number(object.lng):message.lng=void 0,void 0!==object.locationName&&null!==object.locationName?message.locationName=String(object.locationName):message.locationName=void 0,void 0!==object.viewModeControl&&null!==object.viewModeControl?message.viewModeControl=Boolean(object.viewModeControl):message.viewModeControl=void 0,void 0!==object.initialZoom&&null!==object.initialZoom?message.initialZoom=Number(object.initialZoom):message.initialZoom=void 0,void 0!==object.mapType&&null!==object.mapType?message.mapType=function(object){switch(object){case 0:case"ROADMAP":return"ROADMAP";case 1:case"SATELITE":return"SATELITE";case 2:case"HYBRID":return"HYBRID";case 3:case"TERRAIN":return"TERRAIN";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.mapType):message.mapType="ROADMAP",message},toJSON:function(message){var obj={};return void 0!==message.address&&(obj.address=message.address),void 0!==message.draggable&&(obj.draggable=message.draggable),void 0!==message.marker&&(obj.marker=message.marker),void 0!==message.streetViewControl&&(obj.streetViewControl=message.streetViewControl),void 0!==message.zoomControl&&(obj.zoomControl=message.zoomControl),void 0!==message.lat&&(obj.lat=message.lat),void 0!==message.lng&&(obj.lng=message.lng),void 0!==message.locationName&&(obj.locationName=message.locationName),void 0!==message.viewModeControl&&(obj.viewModeControl=message.viewModeControl),void 0!==message.initialZoom&&(obj.initialZoom=message.initialZoom),void 0!==message.mapType&&(obj.mapType=function(object){switch(object){case"ROADMAP":return"ROADMAP";case"SATELITE":return"SATELITE";case"HYBRID":return"HYBRID";case"TERRAIN":return"TERRAIN";default:return"UNKNOWN"}}(message.mapType)),obj}},_assign$7$1=function(){return(_assign$7$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},basePollData$1={},PollData$1={fromJSON:function(object){var message=_assign$7$1({},basePollData$1);return void 0!==object.config&&null!==object.config?message.config=PollConfig$1.fromJSON(object.config):message.config=void 0,void 0!==object.poll&&null!==object.poll?message.poll=Poll$1.fromJSON(object.poll):message.poll=void 0,void 0!==object.layout&&null!==object.layout?message.layout=PollWidgetLayout$1.fromJSON(object.layout):message.layout=void 0,void 0!==object.design&&null!==object.design?message.design=PollWidgetDesign$1.fromJSON(object.design):message.design=void 0,void 0!==object.siteToken&&null!==object.siteToken?message.siteToken=String(object.siteToken):message.siteToken=void 0,message},toJSON:function(message){var obj={};return void 0!==message.config&&(obj.config=message.config?PollConfig$1.toJSON(message.config):void 0),void 0!==message.poll&&(obj.poll=message.poll?Poll$1.toJSON(message.poll):void 0),void 0!==message.layout&&(obj.layout=message.layout?PollWidgetLayout$1.toJSON(message.layout):void 0),void 0!==message.design&&(obj.design=message.design?PollWidgetDesign$1.toJSON(message.design):void 0),void 0!==message.siteToken&&(obj.siteToken=message.siteToken),obj}},basePollConfig$1={},PollConfig$1={fromJSON:function(object){var message=_assign$7$1({},basePollConfig$1);return void 0!==object.enableVoteRole&&null!==object.enableVoteRole?message.enableVoteRole=Boolean(object.enableVoteRole):message.enableVoteRole=void 0,message},toJSON:function(message){var obj={};return void 0!==message.enableVoteRole&&(obj.enableVoteRole=message.enableVoteRole),obj}},basePollOption$1={},PollOption_fromJSON$1=function(object){var message=_assign$7$1({},basePollOption$1);if(message.latestVoters=[],void 0!==object.anonymousCount&&null!==object.anonymousCount?message.anonymousCount=Number(object.anonymousCount):message.anonymousCount=void 0,void 0!==object.count&&null!==object.count?message.count=Number(object.count):message.count=void 0,void 0!==object.optionId&&null!==object.optionId?message.optionId=String(object.optionId):message.optionId=void 0,void 0!==object.latestVoters&&null!==object.latestVoters)for(var _i=0,_a=object.latestVoters;_i<_a.length;_i++){var e=_a[_i];message.latestVoters.push(String(e))}return void 0!==object.mediaId&&null!==object.mediaId?message.mediaId=String(object.mediaId):message.mediaId=void 0,void 0!==object.rating&&null!==object.rating?message.rating=Number(object.rating):message.rating=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,message},basePollSettings$1={resultsVisibility:"ALWAYS",voteRole:"ALL"},basePollWidgetLayout$1={},PollWidgetLayout$1={fromJSON:function(object){var message=_assign$7$1({},basePollWidgetLayout$1);return void 0!==object.poll&&null!==object.poll?message.poll=PollWidgetLayout_PollLayout$1.fromJSON(object.poll):message.poll=void 0,void 0!==object.option&&null!==object.option?message.option=PollWidgetLayout_PollOptionLayout$1.fromJSON(object.option):message.option=void 0,message},toJSON:function(message){var obj={};return void 0!==message.poll&&(obj.poll=message.poll?PollWidgetLayout_PollLayout$1.toJSON(message.poll):void 0),void 0!==message.option&&(obj.option=message.option?PollWidgetLayout_PollOptionLayout$1.toJSON(message.option):void 0),obj}},basePollWidgetLayout_PollLayout$1={type:"LIST",direction:"LTR"},PollWidgetLayout_PollLayout$1={fromJSON:function(object){var message=_assign$7$1({},basePollWidgetLayout_PollLayout$1);return void 0!==object.type&&null!==object.type?message.type=function(object){switch(object){case 0:case"LIST":return"LIST";case 1:case"GRID":return"GRID";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.type):message.type="LIST",void 0!==object.direction&&null!==object.direction?message.direction=function(object){switch(object){case 0:case"LTR":return"LTR";case 1:case"RTL":return"RTL";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.direction):message.direction="LTR",void 0!==object.enableImage&&null!==object.enableImage?message.enableImage=Boolean(object.enableImage):message.enableImage=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=function(object){switch(object){case"LIST":return"LIST";case"GRID":return"GRID";default:return"UNKNOWN"}}(message.type)),void 0!==message.direction&&(obj.direction=function(object){switch(object){case"LTR":return"LTR";case"RTL":return"RTL";default:return"UNKNOWN"}}(message.direction)),void 0!==message.enableImage&&(obj.enableImage=message.enableImage),obj}},basePollWidgetLayout_PollOptionLayout$1={},PollWidgetLayout_PollOptionLayout$1={fromJSON:function(object){var message=_assign$7$1({},basePollWidgetLayout_PollOptionLayout$1);return void 0!==object.enableImage&&null!==object.enableImage?message.enableImage=Boolean(object.enableImage):message.enableImage=void 0,message},toJSON:function(message){var obj={};return void 0!==message.enableImage&&(obj.enableImage=message.enableImage),obj}},basePoll$1={},Poll$1={fromJSON:function(object){var message=_assign$7$1({},basePoll$1);if(message.options=[],message.ownVotes=[],void 0!==object.anonymousCount&&null!==object.anonymousCount?message.anonymousCount=Number(object.anonymousCount):message.anonymousCount=void 0,void 0!==object.count&&null!==object.count?message.count=Number(object.count):message.count=void 0,void 0!==object.createdBy&&null!==object.createdBy?message.createdBy=String(object.createdBy):message.createdBy=void 0,void 0!==object.creatorFlag&&null!==object.creatorFlag?message.creatorFlag=Boolean(object.creatorFlag):message.creatorFlag=void 0,void 0!==object.pollId&&null!==object.pollId?message.pollId=String(object.pollId):message.pollId=void 0,void 0!==object.mediaId&&null!==object.mediaId?message.mediaId=String(object.mediaId):message.mediaId=void 0,void 0!==object.options&&null!==object.options)for(var _i=0,_a=object.options;_i<_a.length;_i++){var e=_a[_i];message.options.push(PollOption_fromJSON$1(e))}if(void 0!==object.ownVotes&&null!==object.ownVotes)for(var _b=0,_c=object.ownVotes;_b<_c.length;_b++)e=_c[_b],message.ownVotes.push(String(e));return void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.settings&&null!==object.settings?message.settings=function(object){var message=_assign$7$1({},basePollSettings$1);return void 0!==object.multipleVotes&&null!==object.multipleVotes?message.multipleVotes=Boolean(object.multipleVotes):message.multipleVotes=void 0,void 0!==object.resultsVisibility&&null!==object.resultsVisibility?message.resultsVisibility=function(object){switch(object){case 0:case"ALWAYS":return"ALWAYS";case 1:case"VOTERS_ONLY":return"VOTERS_ONLY";case 2:case"ONLY_ME":return"ONLY_ME";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.resultsVisibility):message.resultsVisibility="ALWAYS",void 0!==object.voteRole&&null!==object.voteRole?message.voteRole=function(object){switch(object){case 0:case"ALL":return"ALL";case 1:case"SITE_MEMBERS":return"SITE_MEMBERS";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.voteRole):message.voteRole="ALL",void 0!==object.votersDisplay&&null!==object.votersDisplay?message.votersDisplay=Boolean(object.votersDisplay):message.votersDisplay=void 0,void 0!==object.votesDisplay&&null!==object.votesDisplay?message.votesDisplay=Boolean(object.votesDisplay):message.votesDisplay=void 0,message}(object.settings):message.settings=void 0,message},toJSON:function(message){var obj={};return void 0!==message.anonymousCount&&(obj.anonymousCount=message.anonymousCount),void 0!==message.count&&(obj.count=message.count),void 0!==message.createdBy&&(obj.createdBy=message.createdBy),void 0!==message.creatorFlag&&(obj.creatorFlag=message.creatorFlag),void 0!==message.pollId&&(obj.pollId=message.pollId),void 0!==message.mediaId&&(obj.mediaId=message.mediaId),message.options?obj.options=message.options.map((function(e){return e?function(message){var obj={};return void 0!==message.anonymousCount&&(obj.anonymousCount=message.anonymousCount),void 0!==message.count&&(obj.count=message.count),void 0!==message.optionId&&(obj.optionId=message.optionId),message.latestVoters?obj.latestVoters=message.latestVoters.map((function(e){return e})):obj.latestVoters=[],void 0!==message.mediaId&&(obj.mediaId=message.mediaId),void 0!==message.rating&&(obj.rating=message.rating),void 0!==message.title&&(obj.title=message.title),obj}(e):void 0})):obj.options=[],message.ownVotes?obj.ownVotes=message.ownVotes.map((function(e){return e})):obj.ownVotes=[],void 0!==message.title&&(obj.title=message.title),void 0!==message.settings&&(obj.settings=message.settings?function(message){var obj={};return void 0!==message.multipleVotes&&(obj.multipleVotes=message.multipleVotes),void 0!==message.resultsVisibility&&(obj.resultsVisibility=function(object){switch(object){case"ALWAYS":return"ALWAYS";case"VOTERS_ONLY":return"VOTERS_ONLY";case"ONLY_ME":return"ONLY_ME";default:return"UNKNOWN"}}(message.resultsVisibility)),void 0!==message.voteRole&&(obj.voteRole=function(object){switch(object){case"ALL":return"ALL";case"SITE_MEMBERS":return"SITE_MEMBERS";default:return"UNKNOWN"}}(message.voteRole)),void 0!==message.votersDisplay&&(obj.votersDisplay=message.votersDisplay),void 0!==message.votesDisplay&&(obj.votesDisplay=message.votesDisplay),obj}(message.settings):void 0),obj}},basePollWidgetDesign$1={},PollWidgetDesign$1={fromJSON:function(object){var message=_assign$7$1({},basePollWidgetDesign$1);return void 0!==object.poll&&null!==object.poll?message.poll=PollWidgetDesign_PollDesign$1.fromJSON(object.poll):message.poll=void 0,void 0!==object.option&&null!==object.option?message.option=PollWidgetDesign_PollOptionDesign$1.fromJSON(object.option):message.option=void 0,message},toJSON:function(message){var obj={};return void 0!==message.poll&&(obj.poll=message.poll?PollWidgetDesign_PollDesign$1.toJSON(message.poll):void 0),void 0!==message.option&&(obj.option=message.option?PollWidgetDesign_PollOptionDesign$1.toJSON(message.option):void 0),obj}},basePollWidgetDesign_PollDesign$1={backgroundType:"COLOR"},PollWidgetDesign_PollDesign$1={fromJSON:function(object){var message=_assign$7$1({},basePollWidgetDesign_PollDesign$1);return void 0!==object.backgroundType&&null!==object.backgroundType?message.backgroundType=function(object){switch(object){case 0:case"COLOR":return"COLOR";case 1:case"IMAGE":return"IMAGE";case 2:case"GRADIENT":return"GRADIENT";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.backgroundType):message.backgroundType="COLOR",void 0!==object.background&&null!==object.background?message.background=String(object.background):message.background=void 0,void 0!==object.borderRadius&&null!==object.borderRadius?message.borderRadius=Number(object.borderRadius):message.borderRadius=void 0,message},toJSON:function(message){var obj={};return void 0!==message.backgroundType&&(obj.backgroundType=function(object){switch(object){case"COLOR":return"COLOR";case"IMAGE":return"IMAGE";case"GRADIENT":return"GRADIENT";default:return"UNKNOWN"}}(message.backgroundType)),void 0!==message.background&&(obj.background=message.background),void 0!==message.borderRadius&&(obj.borderRadius=message.borderRadius),obj}},basePollWidgetDesign_PollOptionDesign$1={},PollWidgetDesign_PollOptionDesign$1={fromJSON:function(object){var message=_assign$7$1({},basePollWidgetDesign_PollOptionDesign$1);return void 0!==object.borderRadius&&null!==object.borderRadius?message.borderRadius=Number(object.borderRadius):message.borderRadius=void 0,message},toJSON:function(message){var obj={};return void 0!==message.borderRadius&&(obj.borderRadius=message.borderRadius),obj}},_assign$8$1=function(){return(_assign$8$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseVideoData$1={},VideoData$1={fromJSON:function(object){var message=_assign$8$1({},baseVideoData$1);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON$1(object.containerData):message.containerData=void 0,void 0!==object.video&&null!==object.video?message.video=Media_fromJSON$1(object.video):message.video=void 0,void 0!==object.thumbnail&&null!==object.thumbnail?message.thumbnail=Media_fromJSON$1(object.thumbnail):message.thumbnail=void 0,void 0!==object.disableDownload&&null!==object.disableDownload?message.disableDownload=Boolean(object.disableDownload):message.disableDownload=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON$1(message.containerData):void 0),void 0!==message.video&&(obj.video=message.video?Media_toJSON$1(message.video):void 0),void 0!==message.thumbnail&&(obj.thumbnail=message.thumbnail?Media_toJSON$1(message.thumbnail):void 0),void 0!==message.disableDownload&&(obj.disableDownload=message.disableDownload),void 0!==message.title&&(obj.title=message.title),obj}},_assign$9=function(){return(_assign$9=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseTimestamp$1={seconds:0,nanos:0},_assign=function(){return(_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseRichContent={},RichContent_fromJSON=function(object){var message=_assign({},baseRichContent);if(message.nodes=[],void 0!==object.nodes&&null!==object.nodes)for(var _i=0,_a=object.nodes;_i<_a.length;_i++){var e=_a[_i];message.nodes.push(module_8008f8e9_Node.fromJSON(e))}return void 0!==object.metadata&&null!==object.metadata?message.metadata=Metadata.fromJSON(object.metadata):message.metadata=void 0,message},baseNode={type:"PARAGRAPH",id:""},module_8008f8e9_Node={fromJSON:function(object){var message=_assign({},baseNode);if(message.nodes=[],void 0!==object.type&&null!==object.type?message.type=function(object){switch(object){case 0:case"PARAGRAPH":return"PARAGRAPH";case 1:case"TEXT":return"TEXT";case 2:case"HEADING":return"HEADING";case 3:case"BULLETED_LIST":return"BULLETED_LIST";case 4:case"ORDERED_LIST":return"ORDERED_LIST";case 5:case"LIST_ITEM":return"LIST_ITEM";case 6:case"BLOCKQUOTE":return"BLOCKQUOTE";case 7:case"CODE_BLOCK":return"CODE_BLOCK";case 8:case"VIDEO":return"VIDEO";case 9:case"DIVIDER":return"DIVIDER";case 10:case"FILE":return"FILE";case 11:case"GALLERY":return"GALLERY";case 12:case"GIF":return"GIF";case 13:case"HTML":return"HTML";case 14:case"IMAGE":return"IMAGE";case 15:case"LINK_PREVIEW":return"LINK_PREVIEW";case 16:case"MAP":return"MAP";case 17:case"POLL":return"POLL";case 18:case"APP_EMBED":return"APP_EMBED";case 19:case"BUTTON":return"BUTTON";case 20:case"COLLAPSIBLE_LIST":return"COLLAPSIBLE_LIST";case 21:case"TABLE":return"TABLE";case 22:case"EMBED":return"EMBED";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.type):message.type="PARAGRAPH",void 0!==object.id&&null!==object.id?message.id=String(object.id):message.id="",void 0!==object.nodes&&null!==object.nodes)for(var _i=0,_a=object.nodes;_i<_a.length;_i++){var e=_a[_i];message.nodes.push(module_8008f8e9_Node.fromJSON(e))}return void 0!==object.style&&null!==object.style?message.style=NodeStyle.fromJSON(object.style):message.style=void 0,void 0!==object.buttonData&&null!==object.buttonData?message.buttonData=ButtonData$1.fromJSON(object.buttonData):message.buttonData=void 0,void 0!==object.codeBlockData&&null!==object.codeBlockData?message.codeBlockData=function(object){var message=_assign$h({},baseCodeBlockData);return void 0!==object.textStyle&&null!==object.textStyle?message.textStyle=TextStyle_fromJSON(object.textStyle):message.textStyle=void 0,message}(object.codeBlockData):message.codeBlockData=void 0,void 0!==object.dividerData&&null!==object.dividerData?message.dividerData=DividerData$1.fromJSON(object.dividerData):message.dividerData=void 0,void 0!==object.fileData&&null!==object.fileData?message.fileData=FileData$1.fromJSON(object.fileData):message.fileData=void 0,void 0!==object.galleryData&&null!==object.galleryData?message.galleryData=GalleryData$1.fromJSON(object.galleryData):message.galleryData=void 0,void 0!==object.gifData&&null!==object.gifData?message.gifData=GIFData$1.fromJSON(object.gifData):message.gifData=void 0,void 0!==object.headingData&&null!==object.headingData?message.headingData=function(object){var message=_assign$g({},baseHeadingData);return void 0!==object.level&&null!==object.level?message.level=Number(object.level):message.level=0,void 0!==object.textStyle&&null!==object.textStyle?message.textStyle=TextStyle_fromJSON(object.textStyle):message.textStyle=void 0,void 0!==object.indentation&&null!==object.indentation?message.indentation=Number(object.indentation):message.indentation=void 0,message}(object.headingData):message.headingData=void 0,void 0!==object.htmlData&&null!==object.htmlData?message.htmlData=HTMLData$1.fromJSON(object.htmlData):message.htmlData=void 0,void 0!==object.imageData&&null!==object.imageData?message.imageData=ImageData$1.fromJSON(object.imageData):message.imageData=void 0,void 0!==object.linkPreviewData&&null!==object.linkPreviewData?message.linkPreviewData=LinkPreviewData$1.fromJSON(object.linkPreviewData):message.linkPreviewData=void 0,void 0!==object.mapData&&null!==object.mapData?message.mapData=MapData$1.fromJSON(object.mapData):message.mapData=void 0,void 0!==object.paragraphData&&null!==object.paragraphData?message.paragraphData=function(object){var message=_assign$f({},baseParagraphData);return void 0!==object.textStyle&&null!==object.textStyle?message.textStyle=TextStyle_fromJSON(object.textStyle):message.textStyle=void 0,void 0!==object.indentation&&null!==object.indentation?message.indentation=Number(object.indentation):message.indentation=void 0,message}(object.paragraphData):message.paragraphData=void 0,void 0!==object.pollData&&null!==object.pollData?message.pollData=PollData$1.fromJSON(object.pollData):message.pollData=void 0,void 0!==object.textData&&null!==object.textData?message.textData=TextData.fromJSON(object.textData):message.textData=void 0,void 0!==object.appEmbedData&&null!==object.appEmbedData?message.appEmbedData=AppEmbedData$1.fromJSON(object.appEmbedData):message.appEmbedData=void 0,void 0!==object.videoData&&null!==object.videoData?message.videoData=VideoData$1.fromJSON(object.videoData):message.videoData=void 0,void 0!==object.embedData&&null!==object.embedData?message.embedData=EmbedData$1.fromJSON(object.embedData):message.embedData=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=function(object){switch(object){case"PARAGRAPH":return"PARAGRAPH";case"TEXT":return"TEXT";case"HEADING":return"HEADING";case"BULLETED_LIST":return"BULLETED_LIST";case"ORDERED_LIST":return"ORDERED_LIST";case"LIST_ITEM":return"LIST_ITEM";case"BLOCKQUOTE":return"BLOCKQUOTE";case"CODE_BLOCK":return"CODE_BLOCK";case"VIDEO":return"VIDEO";case"DIVIDER":return"DIVIDER";case"FILE":return"FILE";case"GALLERY":return"GALLERY";case"GIF":return"GIF";case"HTML":return"HTML";case"IMAGE":return"IMAGE";case"LINK_PREVIEW":return"LINK_PREVIEW";case"MAP":return"MAP";case"POLL":return"POLL";case"APP_EMBED":return"APP_EMBED";case"BUTTON":return"BUTTON";case"COLLAPSIBLE_LIST":return"COLLAPSIBLE_LIST";case"TABLE":return"TABLE";case"EMBED":return"EMBED";default:return"UNKNOWN"}}(message.type)),void 0!==message.id&&(obj.id=message.id),message.nodes?obj.nodes=message.nodes.map((function(e){return e?module_8008f8e9_Node.toJSON(e):void 0})):obj.nodes=[],void 0!==message.style&&(obj.style=message.style?NodeStyle.toJSON(message.style):void 0),void 0!==message.buttonData&&(obj.buttonData=message.buttonData?ButtonData$1.toJSON(message.buttonData):void 0),void 0!==message.codeBlockData&&(obj.codeBlockData=message.codeBlockData?function(message){var obj={};return void 0!==message.textStyle&&(obj.textStyle=message.textStyle?TextStyle_toJSON(message.textStyle):void 0),obj}(message.codeBlockData):void 0),void 0!==message.dividerData&&(obj.dividerData=message.dividerData?DividerData$1.toJSON(message.dividerData):void 0),void 0!==message.fileData&&(obj.fileData=message.fileData?FileData$1.toJSON(message.fileData):void 0),void 0!==message.galleryData&&(obj.galleryData=message.galleryData?GalleryData$1.toJSON(message.galleryData):void 0),void 0!==message.gifData&&(obj.gifData=message.gifData?GIFData$1.toJSON(message.gifData):void 0),void 0!==message.headingData&&(obj.headingData=message.headingData?function(message){var obj={};return void 0!==message.level&&(obj.level=message.level),void 0!==message.textStyle&&(obj.textStyle=message.textStyle?TextStyle_toJSON(message.textStyle):void 0),void 0!==message.indentation&&(obj.indentation=message.indentation),obj}(message.headingData):void 0),void 0!==message.htmlData&&(obj.htmlData=message.htmlData?HTMLData$1.toJSON(message.htmlData):void 0),void 0!==message.imageData&&(obj.imageData=message.imageData?ImageData$1.toJSON(message.imageData):void 0),void 0!==message.linkPreviewData&&(obj.linkPreviewData=message.linkPreviewData?LinkPreviewData$1.toJSON(message.linkPreviewData):void 0),void 0!==message.mapData&&(obj.mapData=message.mapData?MapData$1.toJSON(message.mapData):void 0),void 0!==message.paragraphData&&(obj.paragraphData=message.paragraphData?function(message){var obj={};return void 0!==message.textStyle&&(obj.textStyle=message.textStyle?TextStyle_toJSON(message.textStyle):void 0),void 0!==message.indentation&&(obj.indentation=message.indentation),obj}(message.paragraphData):void 0),void 0!==message.pollData&&(obj.pollData=message.pollData?PollData$1.toJSON(message.pollData):void 0),void 0!==message.textData&&(obj.textData=message.textData?TextData.toJSON(message.textData):void 0),void 0!==message.appEmbedData&&(obj.appEmbedData=message.appEmbedData?AppEmbedData$1.toJSON(message.appEmbedData):void 0),void 0!==message.videoData&&(obj.videoData=message.videoData?VideoData$1.toJSON(message.videoData):void 0),void 0!==message.embedData&&(obj.embedData=message.embedData?EmbedData$1.toJSON(message.embedData):void 0),obj}},baseNodeStyle={},NodeStyle={fromJSON:function(object){var message=_assign({},baseNodeStyle);return void 0!==object.paddingTop&&null!==object.paddingTop?message.paddingTop=String(object.paddingTop):message.paddingTop=void 0,void 0!==object.paddingBottom&&null!==object.paddingBottom?message.paddingBottom=String(object.paddingBottom):message.paddingBottom=void 0,void 0!==object.backgroundColor&&null!==object.backgroundColor?message.backgroundColor=String(object.backgroundColor):message.backgroundColor=void 0,message},toJSON:function(message){var obj={};return void 0!==message.paddingTop&&(obj.paddingTop=message.paddingTop),void 0!==message.paddingBottom&&(obj.paddingBottom=message.paddingBottom),void 0!==message.backgroundColor&&(obj.backgroundColor=message.backgroundColor),obj}},baseTextData={text:""},TextData={fromJSON:function(object){var message=_assign({},baseTextData);if(message.decorations=[],void 0!==object.text&&null!==object.text?message.text=String(object.text):message.text="",void 0!==object.decorations&&null!==object.decorations)for(var _i=0,_a=object.decorations;_i<_a.length;_i++){var e=_a[_i];message.decorations.push(module_8008f8e9_Decoration.fromJSON(e))}return message},toJSON:function(message){var obj={};return void 0!==message.text&&(obj.text=message.text),message.decorations?obj.decorations=message.decorations.map((function(e){return e?module_8008f8e9_Decoration.toJSON(e):void 0})):obj.decorations=[],obj}},baseDecoration={type:"BOLD"},module_8008f8e9_Decoration={fromJSON:function(object){var message=_assign({},baseDecoration);return void 0!==object.type&&null!==object.type?message.type=function(object){switch(object){case 0:case"BOLD":return"BOLD";case 1:case"ITALIC":return"ITALIC";case 2:case"UNDERLINE":return"UNDERLINE";case 3:case"SPOILER":return"SPOILER";case 4:case"ANCHOR":return"ANCHOR";case 5:case"MENTION":return"MENTION";case 6:case"LINK":return"LINK";case 7:case"COLOR":return"COLOR";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.type):message.type="BOLD",void 0!==object.anchorData&&null!==object.anchorData?message.anchorData=function(object){var message=_assign$l({},baseAnchorData);return void 0!==object.anchor&&null!==object.anchor?message.anchor=String(object.anchor):message.anchor="",message}(object.anchorData):message.anchorData=void 0,void 0!==object.colorData&&null!==object.colorData?message.colorData=function(object){var message=_assign$k({},baseColorData);return void 0!==object.background&&null!==object.background?message.background=String(object.background):message.background=void 0,void 0!==object.foreground&&null!==object.foreground?message.foreground=String(object.foreground):message.foreground=void 0,message}(object.colorData):message.colorData=void 0,void 0!==object.linkData&&null!==object.linkData?message.linkData=function(object){var message=_assign$j({},baseLinkData);return void 0!==object.link&&null!==object.link?message.link=Link_fromJSON$1(object.link):message.link=void 0,message}(object.linkData):message.linkData=void 0,void 0!==object.mentionData&&null!==object.mentionData?message.mentionData=function(object){var message=_assign$i({},baseMentionData);return void 0!==object.name&&null!==object.name?message.name=String(object.name):message.name="",void 0!==object.slug&&null!==object.slug?message.slug=String(object.slug):message.slug="",message}(object.mentionData):message.mentionData=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=function(object){switch(object){case"BOLD":return"BOLD";case"ITALIC":return"ITALIC";case"UNDERLINE":return"UNDERLINE";case"SPOILER":return"SPOILER";case"ANCHOR":return"ANCHOR";case"MENTION":return"MENTION";case"LINK":return"LINK";case"COLOR":return"COLOR";default:return"UNKNOWN"}}(message.type)),void 0!==message.anchorData&&(obj.anchorData=message.anchorData?function(message){var obj={};return void 0!==message.anchor&&(obj.anchor=message.anchor),obj}(message.anchorData):void 0),void 0!==message.colorData&&(obj.colorData=message.colorData?function(message){var obj={};return void 0!==message.background&&(obj.background=message.background),void 0!==message.foreground&&(obj.foreground=message.foreground),obj}(message.colorData):void 0),void 0!==message.linkData&&(obj.linkData=message.linkData?function(message){var obj={};return void 0!==message.link&&(obj.link=message.link?Link_toJSON$1(message.link):void 0),obj}(message.linkData):void 0),void 0!==message.mentionData&&(obj.mentionData=message.mentionData?function(message){var obj={};return void 0!==message.name&&(obj.name=message.name),void 0!==message.slug&&(obj.slug=message.slug),obj}(message.mentionData):void 0),obj}},baseMetadata={version:0},Metadata={fromJSON:function(object){var message=_assign({},baseMetadata);return void 0!==object.version&&null!==object.version?message.version=Number(object.version):message.version=0,void 0!==object.createdTimestamp&&null!==object.createdTimestamp?message.createdTimestamp=fromJsonTimestamp$1(object.createdTimestamp):message.createdTimestamp=void 0,void 0!==object.updatedTimestamp&&null!==object.updatedTimestamp?message.updatedTimestamp=fromJsonTimestamp$1(object.updatedTimestamp):message.updatedTimestamp=void 0,message},toJSON:function(message){var obj={};return void 0!==message.version&&(obj.version=message.version),void 0!==message.createdTimestamp&&(obj.createdTimestamp=void 0!==message.createdTimestamp?message.createdTimestamp.toISOString():null),void 0!==message.updatedTimestamp&&(obj.updatedTimestamp=void 0!==message.updatedTimestamp?message.updatedTimestamp.toISOString():null),obj}};function fromJsonTimestamp$1(o){return o instanceof Date?o:"string"==typeof o?new Date(o):(object=o,message=_assign$9({},baseTimestamp$1),void 0!==object.seconds&&null!==object.seconds?message.seconds=Number(object.seconds):message.seconds=0,void 0!==object.nanos&&null!==object.nanos?message.nanos=Number(object.nanos):message.nanos=0,millis=1e3*(t=message).seconds,millis+=t.nanos/1e6,new Date(millis));var object,message,t,millis}var _TO_RICOS_DATA$1,seenKeys={},MULTIPLIER=Math.pow(2,24);function generateId(){for(var key;void 0===key||seenKeys.hasOwnProperty(key)||!isNaN(Number(key));)key=Math.floor(Math.random()*MULTIPLIER).toString(32);return seenKeys[key]=!0,key}var TO_RICOS_DATA$1=((_TO_RICOS_DATA$1={})["wix-draft-plugin-link-button"]=ButtonData$1,_TO_RICOS_DATA$1[ACTION_BUTTON_TYPE$1]=ButtonData$1,_TO_RICOS_DATA$1[DIVIDER_TYPE$1]=DividerData$1,_TO_RICOS_DATA$1["wix-draft-plugin-file-upload"]=FileData$1,_TO_RICOS_DATA$1["wix-draft-plugin-gallery"]=GalleryData$1,_TO_RICOS_DATA$1["wix-draft-plugin-giphy"]=GIFData$1,_TO_RICOS_DATA$1["wix-draft-plugin-html"]=HTMLData$1,_TO_RICOS_DATA$1["wix-draft-plugin-image"]=ImageData$1,_TO_RICOS_DATA$1.IMAGE=ImageData$1,_TO_RICOS_DATA$1[LINK_PREVIEW_TYPE$1]=LinkPreviewData$1,_TO_RICOS_DATA$1[MAP_TYPE$1]=MapData$1,_TO_RICOS_DATA$1["wix-draft-plugin-vertical-embed"]=AppEmbedData$1,_TO_RICOS_DATA$1["wix-draft-plugin-video"]=VideoData$1,_TO_RICOS_DATA$1["VIDEO-EMBED"]=VideoData$1,_TO_RICOS_DATA$1["wix-draft-plugin-poll"]=PollData$1,_TO_RICOS_DATA$1.EMBED=EmbedData$1,_TO_RICOS_DATA$1);function identity(a){return a}function flow(ab,bc,cd,de,ef,fg,gh,hi,ij){switch(arguments.length){case 1:return ab;case 2:return function(){return bc(ab.apply(this,arguments))};case 3:return function(){return cd(bc(ab.apply(this,arguments)))};case 4:return function(){return de(cd(bc(ab.apply(this,arguments))))};case 5:return function(){return ef(de(cd(bc(ab.apply(this,arguments)))))};case 6:return function(){return fg(ef(de(cd(bc(ab.apply(this,arguments))))))};case 7:return function(){return gh(fg(ef(de(cd(bc(ab.apply(this,arguments)))))))};case 8:return function(){return hi(gh(fg(ef(de(cd(bc(ab.apply(this,arguments))))))))};case 9:return function(){return ij(hi(gh(fg(ef(de(cd(bc(ab.apply(this,arguments)))))))))}}}function pipe$1$2(a,ab,bc,cd,de,ef,fg,gh,hi,ij,jk,kl,lm,mn,no,op,pq,qr,rs,st){switch(arguments.length){case 1:return a;case 2:return ab(a);case 3:return bc(ab(a));case 4:return cd(bc(ab(a)));case 5:return de(cd(bc(ab(a))));case 6:return ef(de(cd(bc(ab(a)))));case 7:return fg(ef(de(cd(bc(ab(a))))));case 8:return gh(fg(ef(de(cd(bc(ab(a)))))));case 9:return hi(gh(fg(ef(de(cd(bc(ab(a))))))));case 10:return ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))));case 11:return jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))));case 12:return kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))));case 13:return lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))));case 14:return mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))));case 15:return no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))));case 16:return op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))));case 17:return pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))));case 18:return qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))));case 19:return rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))))));case 20:return st(rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))))))}}var _ref9,module_8008f8e9_ref7,module_8008f8e9_ref4,module_8008f8e9_f,replacer,toUpperCase$1=function(s){return s.toUpperCase()},createNode=function(type,_ref){var nodes=_ref.nodes,data=_ref.data,style=_ref.style,id=_ref.id;return extends_default()({type:type,id:null!=id?id:generateId(),nodes:nodes},dataByNodeType(type,data),{style:style})},dataByNodeType=function(type,data){var _CODE_BLOCK$DIVIDER$H;return(_CODE_BLOCK$DIVIDER$H={},_CODE_BLOCK$DIVIDER$H.CODE_BLOCK={codeBlockData:data},_CODE_BLOCK$DIVIDER$H.DIVIDER={dividerData:data},_CODE_BLOCK$DIVIDER$H.HEADING={headingData:data},_CODE_BLOCK$DIVIDER$H.FILE={fileData:data},_CODE_BLOCK$DIVIDER$H.GALLERY={galleryData:data},_CODE_BLOCK$DIVIDER$H.GIF={gifData:data},_CODE_BLOCK$DIVIDER$H.HTML={htmlData:data},_CODE_BLOCK$DIVIDER$H.IMAGE={imageData:data},_CODE_BLOCK$DIVIDER$H.BUTTON={buttonData:data},_CODE_BLOCK$DIVIDER$H.LINK_PREVIEW={LinkPreviewData:data},_CODE_BLOCK$DIVIDER$H.MAP={mapData:data},_CODE_BLOCK$DIVIDER$H.PARAGRAPH={paragraphData:data},_CODE_BLOCK$DIVIDER$H.POLL={pollData:data},_CODE_BLOCK$DIVIDER$H.TEXT={textData:data},_CODE_BLOCK$DIVIDER$H.VIDEO={videoData:data},_CODE_BLOCK$DIVIDER$H.APP_EMBED={appEmbedData:data},_CODE_BLOCK$DIVIDER$H.LINK_PREVIEW={linkPreviewData:data},_CODE_BLOCK$DIVIDER$H)[type]},toLinkTarget$1=function(target){return void 0===target&&(target="SELF"),pipe$1$2(target,toUpperCase$1,(function(s){return s.replace("_","")}))},createLink$1=function(_ref3){var url=_ref3.url,rel=_ref3.rel,target=_ref3.target,anchor=_ref3.anchor,relValues=(null==rel?void 0:rel.split(" ").filter((function(key){return["nofollow","sponsored","ugc"].includes(key)})).map((function(key){return[key,!0]})))||[];return{anchor:anchor,url:url,rel:relValues.length>0?fromEntries$1(relValues):void 0,target:toLinkTarget$1(target)}},hasSpace$1=/\s/,hasSeparator$1=/(_|-|\.|:)/,hasCamel$1=/([a-z][A-Z]|[A-Z][a-z])/,separatorSplitter$1=/[\W_]+(.|$)/g,camelSplitter$1=/(.)([A-Z]+)/g,toSpaceCase_1$1=function(string){return function(string){return hasSpace$1.test(string)?string.toLowerCase():hasSeparator$1.test(string)?(function(string){return string.replace(separatorSplitter$1,(function(m,next){return next?" "+next:""}))}(string)||string).toLowerCase():hasCamel$1.test(string)?function(string){return string.replace(camelSplitter$1,(function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")}))}(string).toLowerCase():string.toLowerCase()}(string).replace(/[\W_]+(.|$)/g,(function(matches,match){return match?" "+match:""})).trim()},_excluded$4$1=["id"],convertVideoData$1$1=function(data){if("string"==typeof data.src){data.video={src:{url:data.src}};var _ref3=data.metadata||{},thumbnail_url=_ref3.thumbnail_url,width=_ref3.width,height=_ref3.height,title=_ref3.title;title&&(data.title=title),data.thumbnail={src:{url:thumbnail_url},width:width,height:height}}else"object"==typeof data.src&&(data.video={src:{id:data.src.pathname}},data.thumbnail={src:{id:data.src.thumbnail.pathname},width:data.src.thumbnail.width,height:data.src.thumbnail.height})},convertDividerData$1$1=function(data){var _data$type,_data$config,_data$config$size,_data$config2,_data$config2$alignme;Object(lodash.has)(data,"type")&&(data.lineStyle=null===(_data$type=data.type)||void 0===_data$type?void 0:_data$type.toUpperCase()),Object(lodash.has)(data,"config.size")&&(data.width=null===(_data$config=data.config)||void 0===_data$config||null===(_data$config$size=_data$config.size)||void 0===_data$config$size?void 0:_data$config$size.toUpperCase()),Object(lodash.has)(data,"config.alignment")&&(data.alignment=null===(_data$config2=data.config)||void 0===_data$config2||null===(_data$config2$alignme=_data$config2.alignment)||void 0===_data$config2$alignme?void 0:_data$config2$alignme.toUpperCase()),data.containerData={width:{size:"CONTENT"}}},convertImageData$1$1=function(data){var _data$metadata,_data$metadata2,_ref4=data.src||{},file_name=_ref4.file_name,width=_ref4.width,height=_ref4.height,_ref5=data.config||{},link=_ref5.link,anchor=_ref5.anchor;data.image={src:{id:file_name},width:width,height:height},data.link=(link||anchor)&&createLink$1(extends_default()({},link,{anchor:anchor})),data.altText=null===(_data$metadata=data.metadata)||void 0===_data$metadata?void 0:_data$metadata.alt,data.caption=null===(_data$metadata2=data.metadata)||void 0===_data$metadata2?void 0:_data$metadata2.caption},convertGIFData$1$1=function(data){var _ref6=data.gif||{},originalUrl=_ref6.originalUrl,originalMp4=_ref6.originalMp4,stillUrl=_ref6.stillUrl,downsizedUrl=_ref6.downsizedUrl,downsizedSmallMp4=_ref6.downsizedSmallMp4,downsizedStillUrl=_ref6.downsizedStillUrl,height=_ref6.height,width=_ref6.width;data.original={gif:originalUrl,mp4:originalMp4,still:stillUrl},data.downsized={gif:downsizedUrl,mp4:downsizedSmallMp4,still:downsizedStillUrl},data.height=height,data.width=width,delete data.gif},convertPollData$1$1=function(data){Object(lodash.has)(data,"layout.poll.type")&&(data.layout.poll.type=data.layout.poll.type.toUpperCase()),Object(lodash.has)(data,"layout.poll.direction")&&(data.layout.poll.direction=data.layout.poll.direction.toUpperCase()),Object(lodash.has)(data,"design.poll.backgroundType")&&(data.design.poll.backgroundType=data.design.poll.backgroundType.toUpperCase()),Object(lodash.has)(data,"poll.id")&&(data.poll.pollId=data.poll.id),Object(lodash.has)(data,"poll.options")&&(data.poll.options=data.poll.options.map((function(_ref7){var id=_ref7.id,rest=objectWithoutPropertiesLoose_default()(_ref7,_excluded$4$1);return extends_default()({optionId:id},rest)})))},convertAppEmbedData$1$1=function(data){var _html$match,_html$match$,_data$type2,_data$selectedProduct=data.selectedProduct,id=_data$selectedProduct.id,name=_data$selectedProduct.name,imageSrc=_data$selectedProduct.imageSrc,description=_data$selectedProduct.description,pageUrl=_data$selectedProduct.pageUrl,scheduling=_data$selectedProduct.scheduling,location=_data$selectedProduct.location,html=_data$selectedProduct.html,durations=_data$selectedProduct.durations;if(data.url=pageUrl||html&&(data.url=null===(_html$match=html.match(/href="[^"]*/g))||void 0===_html$match||null===(_html$match$=_html$match[0])||void 0===_html$match$?void 0:_html$match$.slice(6)),data.itemId=id,data.name=name,data.imageSrc=imageSrc,"booking"===data.type)data.bookingData={durations:durations||description};else if("event"===data.type){var _description$match,_description$match2;data.eventData={location:location||description&&(null===(_description$match=description.match(/[^|]*$/))||void 0===_description$match?void 0:_description$match[0]),scheduling:scheduling||description&&(null===(_description$match2=description.match(/[^|]+/))||void 0===_description$match2?void 0:_description$match2[0])}}data.type=null===(_data$type2=data.type)||void 0===_data$type2?void 0:_data$type2.toUpperCase()},convertLinkPreviewData$1$1=function(data){var _data$config3,_data$config4;Object(lodash.has)(data,"thumbnail_url")&&(data.thumbnailUrl=data.thumbnail_url),(null===(_data$config3=data.config)||void 0===_data$config3?void 0:_data$config3.link)&&(data.link=createLink$1(null===(_data$config4=data.config)||void 0===_data$config4?void 0:_data$config4.link))},convertMentionData$1$1=function(data){var _data$mention,_data$mention2;data.name=null===(_data$mention=data.mention)||void 0===_data$mention?void 0:_data$mention.name,data.slug=null===(_data$mention2=data.mention)||void 0===_data$mention2?void 0:_data$mention2.slug,delete data.mention},convertFileData$1$1=function(data){var url=data.url,id=data.id,privacy=data.privacy,src={url:url,id:id,private:void 0!==privacy?"private"===privacy:void 0};data.src=src},convertButtonData$1$1=function(data,blockType){var _ref8=data.button||{},settings=_ref8.settings,_ref9=_ref8.design||{},borderRadius=_ref9.borderRadius,borderWidth=_ref9.borderWidth,background=_ref9.background,color=_ref9.color,borderColor=_ref9.borderColor,_ref10=settings||{},buttonText=_ref10.buttonText,url=_ref10.url,rel=_ref10.rel,target=_ref10.target;data.styles={borderRadius:borderRadius,borderWidth:borderWidth,backgroundColor:background,textColor:color,borderColor:borderColor},data.type=blockType===ACTION_BUTTON_TYPE$1?"ACTION":"LINK",data.text=buttonText,url&&(data.link=createLink$1({url:url,rel:rel,target:target}))},convertHTMLData$1$1=function(data){var src=data.src;data[data.srcType]=src},convertMapData$1$1=function(data){var _data$mapSettings=data.mapSettings,isDraggingAllowed=_data$mapSettings.isDraggingAllowed,isMarkerShown=_data$mapSettings.isMarkerShown,isStreetViewControlShown=_data$mapSettings.isStreetViewControlShown,isZoomControlShown=_data$mapSettings.isZoomControlShown,locationDisplayName=_data$mapSettings.locationDisplayName,isViewControlShown=_data$mapSettings.isViewControlShown,zoom=_data$mapSettings.zoom,mode=_data$mapSettings.mode;data.mapSettings.draggable=isDraggingAllowed,data.mapSettings.marker=isMarkerShown,data.mapSettings.streetViewControl=isStreetViewControlShown,data.mapSettings.zoomControl=isZoomControlShown,data.mapSettings.locationName=locationDisplayName,data.mapSettings.initialZoom=zoom,data.mapSettings.mapType=null==mode?void 0:mode.toUpperCase(),Object(lodash.has)(data.mapSettings,"isViewControlShown")&&(data.mapSettings.viewModeControl=isViewControlShown)},convertEmbedData$1$1=function(data){var _data$config5,_data$config5$link,url=null===(_data$config5=data.config)||void 0===_data$config5||null===(_data$config5$link=_data$config5.link)||void 0===_data$config5$link?void 0:_data$config5$link.url;url&&(data.src=url),data.oembed={type:"rich",thumbnailUrl:data.thumbnail_url,title:data.title,description:data.description,html:data.html}},convertLinkData$1$1=function(data){data.link=createLink$1(data)},getEntity=function(key,entityMap){var _ref,_entityMap$key=entityMap[key],type=_entityMap$key.type,data=_entityMap$key.data,blockType=type===LINK_PREVIEW_TYPE$1&&data.html?"EMBED":type,dataFieldName=TO_RICOS_DATA_FIELD[blockType];return void 0===dataFieldName?(console.error('Unknown entity type "'+blockType+'"!'),null):((_ref={type:TO_RICOS_PLUGIN_TYPE[blockType]})[dataFieldName]=function(type,data){var _converters,newData=Object(lodash.cloneDeep)(data),converters=((_converters={})["wix-draft-plugin-video"]=convertVideoData$1$1,_converters[DIVIDER_TYPE$1]=convertDividerData$1$1,_converters["wix-draft-plugin-file-upload"]=convertFileData$1$1,_converters["wix-draft-plugin-giphy"]=convertGIFData$1$1,_converters["wix-draft-plugin-image"]=convertImageData$1$1,_converters["wix-draft-plugin-poll"]=convertPollData$1$1,_converters["wix-draft-plugin-vertical-embed"]=convertAppEmbedData$1$1,_converters[LINK_PREVIEW_TYPE$1]=convertLinkPreviewData$1$1,_converters.mention=convertMentionData$1$1,_converters["wix-draft-plugin-link-button"]=convertButtonData$1$1,_converters[ACTION_BUTTON_TYPE$1]=convertButtonData$1$1,_converters["wix-draft-plugin-html"]=convertHTMLData$1$1,_converters[MAP_TYPE$1]=convertMapData$1$1,_converters.EMBED=convertEmbedData$1$1,_converters.LINK=convertLinkData$1$1,_converters),blockType=type;return type===LINK_PREVIEW_TYPE$1&&data.html&&(blockType="EMBED"),newData.config&&blockType!==DIVIDER_TYPE$1&&function(data){var string,_ref=data.config||{},size=_ref.size,alignment=_ref.alignment,width=_ref.width,spoiler=_ref.spoiler,height=_ref.height,_ref2=spoiler||{},enabled=_ref2.enabled,description=_ref2.description,buttonContent=_ref2.buttonContent,newSpoiler=spoiler&&{enabled:enabled||!1,description:description,buttonText:buttonContent};data.containerData={alignment:null==alignment?void 0:alignment.toUpperCase(),spoiler:newSpoiler},"number"==typeof height&&(data.containerData.height={custom:height}),"number"==typeof width?data.containerData.width={custom:width}:size&&(data.containerData.width={size:(string=size,function(string){return toSpaceCase_1$1(string).replace(/\s/g,"_")}(string).toUpperCase())})}(newData),blockType in converters&&(0,converters[blockType])(newData,blockType),function(data){var pluginDataMethods=TO_RICOS_DATA$1[blockType];return(null==pluginDataMethods?void 0:pluginDataMethods.fromJSON(data))||data}(newData)}(blockType,data),_ref)},getTextStyle=function(blockData){var _ref2=blockData||{},textAlignment=_ref2.textAlignment,lineHeight=(_ref2.dynamicStyles||{})["line-height"];return{textAlignment:null==textAlignment?void 0:textAlignment.toUpperCase(),lineHeight:lineHeight}},getNodeStyle=function(blockData){var _ref5=(blockData||{}).dynamicStyles||{},paddingTop=_ref5["padding-top"],paddingBottom=_ref5["padding-bottom"],backgroundColor=_ref5.backgroundColor,style=Object(lodash.pickBy)({paddingTop:paddingTop,paddingBottom:paddingBottom,backgroundColor:backgroundColor},lodash.identity);return Object.values(style).length>0?style:void 0},_excluded$3=["offset","length"],getTextNodes=function(block,entityMap){var text=block.text,inlineStyleRanges=block.inlineStyleRanges,entityRanges=block.entityRanges;if(0===text.length)return[];var rangeMap={};[].concat(inlineStyleRanges,function(entityRanges,entityMap){return entityRanges.filter((function(range){return!["EMOJI_TYPE",EMOJI_TYPE].includes(entityMap[range.key].type)}))}(entityRanges,entityMap)).forEach((function(_ref2){var offset=_ref2.offset,length=_ref2.length,props=objectWithoutPropertiesLoose_default()(_ref2,_excluded$3);rangeMap[offset]=[].concat(rangeMap[offset]||[],[extends_default()({action:"start"},props)]),rangeMap[offset+length]=[].concat(rangeMap[offset+length]||[],[extends_default()({action:"end"},props)])}));var textNodes=[],styles=[],keys=[];rangeMap[0]||(rangeMap[0]=[]);var numbers=Object.keys(rangeMap).map(Number);return numbers.forEach((function(point,i){numbers[i]<text.length&&(rangeMap[point].forEach((function(_ref3){var action=_ref3.action,key=_ref3.key,style=_ref3.style;"start"===action?style?styles.push(style):keys.push(key):style?styles=styles.filter((function(s){return s!==style})):keys=keys.filter((function(s){return s!==key}))})),textNodes.push(function(_ref){var _ref$styles=_ref.styles,styles=void 0===_ref$styles?[]:_ref$styles,_ref$keys=_ref.keys,keys=void 0===_ref$keys?[]:_ref$keys,textNode=function(text,decorations){return void 0===decorations&&(decorations=[]),createNode("TEXT",{nodes:[],id:"",data:{text:text,decorations:decorations}})}(_ref.text),decorations=[],keysDecorations=keys.map((function(key){return getEntity(key,entityMap)})).filter((function(x){return x})),stylesDecorations=function(decorations){var colorDecorations=decorations.filter((function(decoration){return"COLOR"===decoration.type})),otherDecorations=decorations.filter((function(decoration){return"COLOR"!==decoration.type}));return colorDecorations.length>0?otherDecorations.concat([lodash.merge.apply(void 0,[{}].concat(colorDecorations))]):otherDecorations}(styles.map((function(style){return function(style){var decoration;try{var _colorData,styleObj=JSON.parse(style),type=Object.keys(styleObj)[0],value=Object.values(styleObj)[0];if("FG"!==type&&"BG"!==type)throw Error('Unknown decoration type "'+type+'"!');decoration={type:"COLOR",colorData:(_colorData={},_colorData["FG"===type?"foreground":"background"]=value,_colorData)}}catch(_unused){if(void 0===TO_RICOS_DECORATION_TYPE$1[style])throw Error('Unknown decoration type "'+style+'"!');decoration={type:TO_RICOS_DECORATION_TYPE$1[style]}}return decoration}(style)})));return decorations=[].concat(decorations,keysDecorations,stylesDecorations),!Object(lodash.isEmpty)(decorations)&&textNode.textData&&(textNode.textData.decorations=decorations),textNode}({text:Array.from(text).slice(numbers[i],numbers[i+1]).join(""),styles:styles,keys:keys})))})),textNodes},fromDraft=function(draftJSON){var _cloneDeep=Object(lodash.cloneDeep)(draftJSON),blocks=_cloneDeep.blocks,entityMap=_cloneDeep.entityMap,nodes=[],parseTextBlock=function(block){var paragraphNode=function(nodes,data,style){return void 0===nodes&&(nodes=[]),createNode("PARAGRAPH",{nodes:nodes,data:extends_default()({textStyle:{textAlignment:"AUTO"}},data),style:style})}([],{textStyle:getTextStyle(block.data)},getNodeStyle(block.data));switch(block.type){case BlockType$1.Unstyled:paragraphNode.id=block.key;case BlockType$1.Blockquote:case BlockType$1.OrderedListItem:case BlockType$1.UnorderedListItem:paragraphNode.paragraphData&&(paragraphNode.paragraphData.indentation=block.depth)}var nodes=getTextNodes(block,entityMap);return Object(lodash.isEmpty)(nodes)||(paragraphNode.nodes=nodes),paragraphNode},parseListBlocks=function parseListBlocks(listStartIndex){for(var _blocks$listStartInde=blocks[listStartIndex],listType=_blocks$listStartInde.type,depth=_blocks$listStartInde.depth,listNodes=[],searchIndex=listStartIndex,nextBlock=blocks[searchIndex];nextBlock&&void 0!==FROM_DRAFT_LIST_TYPE$1[nextBlock.type]&&nextBlock.depth>=depth;){if(nextBlock.depth>depth||nextBlock.type!==listType){var _parseListBlocks2=parseListBlocks(searchIndex),node=_parseListBlocks2.node,nextIndex=_parseListBlocks2.nextIndex;listNodes[listNodes.length-1].nodes.push(node),searchIndex=nextIndex}else listNodes.push({id:(block=nextBlock).key,type:"LIST_ITEM",nodes:[parseTextBlock(block)]}),searchIndex++;nextBlock=blocks[searchIndex]}var block;return{node:{id:generateId(),type:FROM_DRAFT_LIST_TYPE$1[listType],nodes:listNodes},nextIndex:searchIndex}};!function parseBlocks(index){void 0===index&&(index=0);var block=blocks[index];if(block)switch(block.type){case BlockType$1.Atomic:var atomicBlock=function(_ref){var key=_ref.key,data=_ref.data,entityRanges=_ref.entityRanges;if(entityRanges&&entityRanges.length){var entity=getEntity(entityRanges[0].key,entityMap);if(entity)return extends_default()({id:key,nodes:[],style:getNodeStyle(data)},entity)}return null}(block);atomicBlock&&nodes.push(atomicBlock),parseBlocks(index+1);break;case BlockType$1.Blockquote:nodes.push(function(block){return{id:block.key,type:"BLOCKQUOTE",nodes:[parseTextBlock(block)],style:getNodeStyle(block.data)}}(block)),parseBlocks(index+1);break;case BlockType$1.CodeBlock:nodes.push(function(block){return{id:block.key,type:"CODE_BLOCK",nodes:getTextNodes(block,entityMap),style:getNodeStyle(block.data),codeBlockData:{textStyle:getTextStyle(block.data)}}}(block)),parseBlocks(index+1);break;case BlockType$1.HeaderOne:case BlockType$1.HeaderTwo:case BlockType$1.HeaderThree:case BlockType$1.HeaderFour:case BlockType$1.HeaderFive:case BlockType$1.HeaderSix:nodes.push(function(block){return{id:block.key,type:"HEADING",headingData:{level:function(blockType){if(Object.keys(HeaderLevel$1).includes(blockType))return HeaderLevel$1[blockType];throw Error('ERROR! Unknown header level "'+blockType+'"!')}(block.type),indentation:block.depth||void 0,textStyle:getTextStyle(block.data)},nodes:getTextNodes(block,entityMap),style:getNodeStyle(block.data)}}(block)),parseBlocks(index+1);break;case BlockType$1.OrderedListItem:case BlockType$1.UnorderedListItem:var _parseListBlocks=parseListBlocks(index),node=_parseListBlocks.node,nextIndex=_parseListBlocks.nextIndex;nodes.push(node),parseBlocks(nextIndex);break;case BlockType$1.Unstyled:nodes.push(parseTextBlock(block)),parseBlocks(index+1);break;default:throw Error('ERROR! Unknown block type "'+block.type+'"!')}}();var content={nodes:nodes,metadata:{version:1,createdTimestamp:new Date,updatedTimestamp:new Date}};return RichContent_fromJSON(content)},_excluded$2=["optionId"],convertVideoData=function(data){var _data$video,videoSrc=null===(_data$video=data.video)||void 0===_data$video?void 0:_data$video.src,_ref3=data.thumbnail||{},src=_ref3.src,width=_ref3.width,height=_ref3.height;null!=videoSrc&&videoSrc.url?(data.src=videoSrc.url,data.metadata={thumbnail_url:null==src?void 0:src.url,width:width,height:height,title:data.title}):(null!=videoSrc&&videoSrc.id||null!=videoSrc&&videoSrc.custom)&&(data.src={pathname:(null==videoSrc?void 0:videoSrc.id)||(null==videoSrc?void 0:videoSrc.custom),thumbnail:{pathname:(null==src?void 0:src.id)||(null==src?void 0:src.custom),width:width,height:height}}),delete data.video,delete data.title,delete data.thumbnail},convertDividerData=function(data){var _data$lineStyle,_data$width,_data$alignment;data.type=null===(_data$lineStyle=data.lineStyle)||void 0===_data$lineStyle?void 0:_data$lineStyle.toLowerCase(),delete data.lineStyle,data.config={textWrap:"nowrap"},Object(lodash.has)(data,"width")&&(data.config.size=null===(_data$width=data.width)||void 0===_data$width?void 0:_data$width.toLowerCase(),delete data.width),Object(lodash.has)(data,"alignment")&&(data.config.alignment=null===(_data$alignment=data.alignment)||void 0===_data$alignment?void 0:_data$alignment.toLowerCase(),delete data.alignment),delete data.containerData},convertImageData=function(data){var _links$link,link=data.link,config=data.config,image=data.image,altText=data.altText,caption=data.caption,_ref4=image||{},src=_ref4.src,width=_ref4.width,height=_ref4.height,id=(null==src?void 0:src.id)||(null==src?void 0:src.custom);data.src=id?{id:id,file_name:id,width:width,height:height}:{url:null==src?void 0:src.url,source:"static"};var links=null!=link&&link.anchor?{anchor:null==link?void 0:link.anchor}:{link:link&&parseLink(link)};if(null!==(_links$link=links.link)&&void 0!==_links$link&&_links$link.customData){var _links$link2,parsedCustomData=parseLinkCustomData(null===(_links$link2=links.link)||void 0===_links$link2?void 0:_links$link2.customData);Object(lodash.merge)(links.link,parsedCustomData),parsedCustomData.customData||delete links.link.customData}data.config=extends_default()({},config||{},links),data.metadata=(altText||caption)&&{caption:caption,alt:altText},delete data.image,delete data.link,delete data.caption,delete data.altText},convertGIFData=function(data){var _data$original=data.original,original=void 0===_data$original?{}:_data$original,_data$downsized=data.downsized,downsized=void 0===_data$downsized?{}:_data$downsized,height=data.height,width=data.width;data.gif={originalUrl:original.gif,originalMp4:original.mp4,stillUrl:original.still,downsizedUrl:downsized.gif,downsizedSmallMp4:downsized.mp4,downsizedStillUrl:downsized.still,height:height,width:width},delete data.original,delete data.downsized,delete data.height,delete data.width},convertPollData=function(data){Object(lodash.has)(data,"layout.poll.type")&&(data.layout.poll.type=data.layout.poll.type.toLowerCase()),Object(lodash.has)(data,"layout.poll.direction")&&(data.layout.poll.direction=data.layout.poll.direction.toLowerCase()),Object(lodash.has)(data,"design.poll.backgroundType")&&(data.design.poll.backgroundType=data.design.poll.backgroundType.toLowerCase()),Object(lodash.has)(data,"poll.pollId")&&(data.poll.id=data.poll.pollId),delete data.poll.pollId,Object(lodash.has)(data,"poll.options")&&(data.poll.options=data.poll.options.map((function(_ref5){var optionId=_ref5.optionId,rest=objectWithoutPropertiesLoose_default()(_ref5,_excluded$2);return extends_default()({id:optionId},rest)})))},convertAppEmbedData=function(data){var type=data.type,itemId=data.itemId,name=data.name,imageSrc=data.imageSrc,url=data.url,bookingData=data.bookingData,eventData=data.eventData;data.type=type.toLowerCase();var selectedProduct=extends_default()({id:itemId,name:name,imageSrc:imageSrc,pageUrl:url},bookingData||{},eventData||{});data.selectedProduct=selectedProduct,delete data.itemId,delete data.name,delete data.imageSrc,delete data.url,bookingData&&delete data.bookingData,eventData&&delete data.eventData},convertLinkPreviewData=function(data){Object(lodash.has)(data,"thumbnailUrl")&&(data.thumbnail_url=data.thumbnailUrl,delete data.thumbnailUrl),Object(lodash.has)(data,"link")&&(data.config.link=parseLink(data.link),delete data.link)},convertMentionData=function(data){data.mention={slug:data.slug,name:data.name},delete data.name,delete data.slug},convertFileData=function(data){var _ref6=data.src||{},url=_ref6.url,id=_ref6.id,custom=_ref6.custom,isPrivate=_ref6.private;data.url=url,data.id=id||custom,function(target,isPrivate){var privacy=void 0!==isPrivate?isPrivate?"private":"public":void 0;target.privacy=privacy}(data,isPrivate),delete data.src},convertButtonData=function(data){var link=data.link,text=data.text,_ref7=data.styles||{},borderRadius=_ref7.borderRadius,borderWidth=_ref7.borderWidth,backgroundColor=_ref7.backgroundColor,textColor=_ref7.textColor,borderColor=_ref7.borderColor,convertedLink=link?parseLink(link):{};data.button={settings:extends_default()({buttonText:text},convertedLink),design:{borderRadius:borderRadius,borderWidth:borderWidth,background:backgroundColor,color:textColor,borderColor:borderColor}},delete data.link,delete data.text,delete data.type,delete data.styles},convertHTMLData=function(data){var html=data.html,url=data.url,_data$config=data.config,config=void 0===_data$config?{}:_data$config,srcType=html?"html":"url";data.srcType=srcType,data.src=html||url,delete data[srcType],config.size&&delete data.config.size},convertMapData=function(data){var _data$mapSettings=data.mapSettings,draggable=_data$mapSettings.draggable,marker=_data$mapSettings.marker,streetViewControl=_data$mapSettings.streetViewControl,zoomControl=_data$mapSettings.zoomControl,locationName=_data$mapSettings.locationName,viewModeControl=_data$mapSettings.viewModeControl,initialZoom=_data$mapSettings.initialZoom,mapType=_data$mapSettings.mapType;data.mapSettings.isDraggingAllowed=draggable,data.mapSettings.isMarkerShown=marker,data.mapSettings.isStreetViewControlShown=streetViewControl,data.mapSettings.isZoomControlShown=zoomControl,data.mapSettings.locationDisplayName=locationName,data.mapSettings.zoom=initialZoom,data.mapSettings.mode=null==mapType?void 0:mapType.toLowerCase(),delete data.mapSettings.draggable,delete data.mapSettings.marker,delete data.mapSettings.streetViewControl,delete data.mapSettings.zoomControl,delete data.mapSettings.locationName,delete data.mapSettings.initialZoom,delete data.mapSettings.mapType,viewModeControl&&(data.mapSettings.isViewControlShown=viewModeControl,delete data.mapSettings.viewModeControl)},convertEmbedData=function(data){data.config=extends_default()({},(null==data?void 0:data.config)||{},{alignment:"center",size:"content",link:{url:data.src,target:"_blank",rel:"noopener"}});var _data$oembed=data.oembed,html=_data$oembed.html,thumbnailUrl=_data$oembed.thumbnailUrl,title=_data$oembed.title,description=_data$oembed.description;data.html=html,thumbnailUrl&&(data.thumbnail_url=thumbnailUrl),title&&(data.title=title),description&&(data.description=description),delete data.oembed,delete data.src},convertLinkData=function(data){if(data.link){var _parseLink=parseLink(data.link),url=_parseLink.url,target=_parseLink.target,rel=_parseLink.rel,customData=_parseLink.customData;if(data.url=url,target&&(data.target=target),rel&&(data.rel=rel),customData){var customDataObj=parseLinkCustomData(customData);Object(lodash.merge)(data,customDataObj)}delete data.link}},parseLinkCustomData=function(customData){try{return{customData:JSON.parse(customData)}}catch(e){return console.error("failed to parse customData",customData),{customData:customData}}},parseLink=function(_ref8){var url=_ref8.url,rel=_ref8.rel,target=_ref8.target,anchor=_ref8.anchor,customData=_ref8.customData;return{anchor:anchor,url:url,rel:rel&&Object.entries(rel).flatMap((function(_ref9){var key=_ref9[0];return _ref9[1]?key:[]})).join(" "),target:target&&"_"+target.toLowerCase(),customData:customData}},createEntity=function(key,_ref5){var _ref6,type=_ref5.type,mutability=_ref5.mutability,data=_ref5.data;return(_ref6={})[key.toString()]={type:type,mutability:mutability,data:data},_ref6},emojiRegex=/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])?|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#*0-9]\uFE0F\u20E3|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g,_excluded$1=["colorData"],isInlineStyleDecoration=function(decorationType){return void 0===ENTITY_DECORATION_TO_DATA_FIELD$1[decorationType]},mergeTextNodes=function(nodes){var length=0;return nodes.reduce((function(_ref,currNode){var text=_ref.text,decorationMap=_ref.decorationMap,accText=text;if(currNode.textData){var _currNode$textData=currNode.textData,currText=_currNode$textData.text,currDecorations=_currNode$textData.decorations,textLength=Array.from(currText).length;accText+=currText,currDecorations&&convertDecorationTypes(currDecorations).forEach((function(decoration){decorationMap[decoration.type]||(decorationMap[decoration.type]=[]),decorationMap[decoration.type]=[].concat(decorationMap[decoration.type],[extends_default()({},decoration,{start:length,end:length+textLength})])})),length+=textLength}return{text:accText,decorationMap:decorationMap}}),{text:"",decorationMap:{}})},getParagraphNode=function(node){if("PARAGRAPH"===node.nodes[0].type)return node.nodes[0];throw Error("Expected a paragraph node but found "+node.nodes[0].type)},convertDecorationTypes=function(decorations){return decorations.flatMap((function(decoration){return function(arg){for(var _len=arguments.length,fns=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)fns[_key-1]=arguments[_key];return fns.reduce((function(v,fn){return fn(v)}),arg)}(decoration,toDraftDecorationType,splitColorDecoration)}))},toDraftDecorationType=function(decoration){return extends_default()({},decoration,{type:FROM_RICOS_DECORATION_TYPE[decoration.type]})},splitColorDecoration=function(_ref5){var colorData=_ref5.colorData,decoration=objectWithoutPropertiesLoose_default()(_ref5,_excluded$1);if(!colorData)return decoration;var foreground=colorData.foreground,background=colorData.background;return[foreground&&{FG:foreground},background&&{BG:background}].filter((function(x){return x})).map((function(type){return extends_default()({},decoration,{type:JSON.stringify(type)})}))},decorationComparator=function(a,b){return"start"in a&&"start"in b?a.start-b.start:a[0].start-b[0].start},isLeft=function(ma){return"Left"===ma._tag},tryCatch=function(f,onThrow){try{return{_tag:"Right",right:f()}}catch(e){return function(e){return{_tag:"Left",left:e}}(onThrow(e))}},keyToId=function(v){return void 0!==(null==v?void 0:v.key)?extends_default()({id:v.key},v):v},bulletToBulleted=function(v){return"BULLET_LIST"===v?"BULLETED_LIST":v},appEmbedIdToItemId=function(v){return null!=v&&v.id&&null!=v&&v.imageSrc?extends_default()({},v,{itemId:v.id}):v},pollIdToOptionId=function(v){return null!=v&&v.id&&null!=v&&v.latestVoters?extends_default()({},v,{optionId:v.id}):v},idToPollId=function(v){return null!=v&&v.id&&null!=v&&v.options?extends_default()({},v,{pollId:v.id}):v},preprocess=flow((replacer=function(_,v){return pipe$1$2(v,keyToId,bulletToBulleted,appEmbedIdToItemId,pollIdToOptionId,idToPollId)},function(a){return tryCatch((function(){var s=JSON.stringify(a,replacer);if("string"!=typeof s)throw new Error("Converting unsupported structure to JSON");return s}),identity)}),(module_8008f8e9_f=function(s){return tryCatch((function(){return JSON.parse(s)}),identity)},function(ma){return isLeft(ma)?ma:module_8008f8e9_f(ma.right)}),(function(ma){return isLeft(ma)?(ma.left,{}):ma.right})),_excluded$5=["depth"],toDraft=flow(preprocess,(function(ricosContent){var message,obj,nodes=(message=RichContent_fromJSON(ricosContent),obj={},message.nodes?obj.nodes=message.nodes.map((function(e){return e?module_8008f8e9_Node.toJSON(e):void 0})):obj.nodes=[],void 0!==message.metadata&&(obj.metadata=message.metadata?Metadata.toJSON(message.metadata):void 0),obj).nodes,draftContent={blocks:[],entityMap:{}},latestEntityKey=-1,parseListNode=function parseListNode(node,indentation){void 0===indentation&&(indentation=0),node.nodes.forEach((function(listItem){var _listItem$nodes=listItem.nodes,paragraph=_listItem$nodes[0],childNode=_listItem$nodes[1];parseTextNodes(paragraph,{type:TO_DRAFT_LIST_TYPE[node.type],key:listItem.id,indentation:indentation}),childNode&&parseListNode(childNode,indentation+1)}))},parseTextNodes=function(node,_ref){var type=_ref.type,key=_ref.key,indentation=_ref.indentation,_mergeTextNodes=mergeTextNodes(node.nodes),text=_mergeTextNodes.text,_parseDecorations=function(decorationMap,text){var decorations=Object.values(decorationMap).sort(decorationComparator).reduce((function(decorations,currentDecorations){if(currentDecorations.length>0){var mergedDecorations=[currentDecorations.shift()];return currentDecorations.forEach((function(decoration){var lastDecoration=mergedDecorations.pop();decoration.start===lastDecoration.end?mergedDecorations.push(extends_default()({},lastDecoration,{end:decoration.end})):mergedDecorations.push(lastDecoration,decoration)})),[].concat(decorations,mergedDecorations.sort(decorationComparator))}return decorations}),[]),allDecorations=[].concat(decorations,function(text){for(var match,result=[];null!==(match=emojiRegex.exec(text));){var _match=match,emojiUnicode=_match[0],start=_match.index,decoration={type:"EMOJI_TYPE",emojiData:{emojiUnicode:emojiUnicode},start:start,end:start+Array.from(emojiUnicode).length};result.push(decoration)}return result}(text)),entityDecorations=allDecorations.filter((function(_ref2){var type=_ref2.type;return!isInlineStyleDecoration(type)})).sort(decorationComparator);return{inlineStyleDecorations:allDecorations.filter((function(_ref3){var type=_ref3.type;return isInlineStyleDecoration(type)})),entityDecorations:entityDecorations}}(_mergeTextNodes.decorationMap,text),inlineStyleDecorations=_parseDecorations.inlineStyleDecorations,entityDecorations=_parseDecorations.entityDecorations,inlineStyleRanges=inlineStyleDecorations.reduce((function(inlineStyleRanges,decoration){return[].concat(inlineStyleRanges,[{style:decoration.type,offset:decoration.start,length:decoration.end-decoration.start}])}),[]),_parseEntityDecoratio=function(decorations,latestEntityKey){var _decorations$reduce=decorations.reduce((function(_ref4,decoration){var entityRanges=_ref4.entityRanges,entityMap=_ref4.entityMap,newEntityKey=_ref4.latestEntityKey+1,newEntityMap=function(decoration,entityKey){var type=decoration.type,data=decoration.emojiData||function(decoration){var type=decoration.type;return function(decorationType,data){var _converters2,converters=((_converters2={}).MENTION=convertMentionData,_converters2.LINK=convertLinkData,_converters2);if(decorationType in converters){var convert=converters[decorationType],newData=Object(lodash.cloneDeep)(data);return convert(newData),newData}return data}(type,decoration[ENTITY_DECORATION_TO_DATA_FIELD$1[FROM_RICOS_DECORATION_TYPE[type]]])}(extends_default()({},decoration,{type:TO_RICOS_DECORATION_TYPE$1[type]}));if(void 0===data)throw Error('ERROR! Unknown entity type "'+type+'"!');var mutability=ENTITY_DECORATION_TO_MUTABILITY[type];return createEntity(entityKey,{type:type,mutability:mutability,data:data})}(decoration,newEntityKey);return{entityRanges:[].concat(entityRanges,[{key:newEntityKey,offset:decoration.start,length:decoration.end-decoration.start}]),entityMap:extends_default()({},entityMap,newEntityMap),latestEntityKey:newEntityKey}}),{entityRanges:[],entityMap:{},latestEntityKey:latestEntityKey});return{entityRanges:_decorations$reduce.entityRanges,entityMap:_decorations$reduce.entityMap,latestEntityKey:_decorations$reduce.latestEntityKey}}(entityDecorations,latestEntityKey),entityRanges=_parseEntityDecoratio.entityRanges,entityMap=_parseEntityDecoratio.entityMap,newLatestEntityKey=_parseEntityDecoratio.latestEntityKey;latestEntityKey=newLatestEntityKey;var _createTextBlockData=function(node){var indentation=(node[RICOS_NODE_TYPE_TO_DATA_FIELD$1[node.type]]||{}).indentation,_getDynamicStyles=function(node){var _ref2=(node[RICOS_NODE_TYPE_TO_DATA_FIELD$1[node.type]]||{}).textStyle||{},textAlignment=_ref2.textAlignment,lineHeight=_ref2.lineHeight,_ref3=node.style||{};return{textAlignment:textAlignment,lineHeight:lineHeight,paddingTop:_ref3.paddingTop,paddingBottom:_ref3.paddingBottom}}(node),textAlignment=_getDynamicStyles.textAlignment,lineHeight=_getDynamicStyles.lineHeight,paddingTop=_getDynamicStyles.paddingTop,paddingBottom=_getDynamicStyles.paddingBottom;return JSON.parse(JSON.stringify({textAlignment:"AUTO"!==textAlignment?null==textAlignment?void 0:textAlignment.toLowerCase():void 0,dynamicStyles:(paddingTop||paddingBottom||lineHeight)&&{"padding-top":paddingTop,"padding-bottom":paddingBottom,"line-height":lineHeight},depth:indentation}))}(node),depth=_createTextBlockData.depth,data=objectWithoutPropertiesLoose_default()(_createTextBlockData,_excluded$5);addBlock({key:key,type:type,text:text,depth:indentation||depth,inlineStyleRanges:inlineStyleRanges,entityRanges:entityRanges,data:data}),draftContent.entityMap=extends_default()({},draftContent.entityMap,entityMap)},addBlock=function(blockProps){var newBlock=Object(lodash.merge)({key:generateId(),type:BlockType$1.Unstyled,text:"",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},blockProps);draftContent.blocks=[].concat(draftContent.blocks,[newBlock])};return function parseNodes(index){void 0===index&&(index=0);var node=nodes[index];if(node){switch(node.type){case"BLOCKQUOTE":parseTextNodes(getParagraphNode(node),{type:BlockType$1.Blockquote,key:node.id});break;case"CODE_BLOCK":parseTextNodes(node,{type:BlockType$1.CodeBlock,key:node.id});break;case"HEADING":if(!node.headingData)throw Error("ERROR! Heading node with no data!");parseTextNodes(node,{type:HeaderLevel$1[node.headingData.level],key:node.id});break;case"ORDERED_LIST":case"BULLETED_LIST":parseListNode(node);break;case"PARAGRAPH":parseTextNodes(node,{type:BlockType$1.Unstyled,key:node.id});break;default:if(!RICOS_NODE_TYPE_TO_DATA_FIELD$1[node.type])throw Error('ERROR! Unknown node type "'+node.type+'"!');!function(node){var entityMap=function(node,entityKey){var _getNodeEntityData=function(node){var _node$buttonData,type=node.type,draftPluginType=FROM_RICOS_ENTITY_TYPE[type];"BUTTON"===type?draftPluginType="ACTION"===(null===(_node$buttonData=node.buttonData)||void 0===_node$buttonData?void 0:_node$buttonData.type)?ACTION_BUTTON_TYPE$1:"wix-draft-plugin-link-button":"EMBED"===type&&(draftPluginType=LINK_PREVIEW_TYPE$1);var data=function(node){var type=node.type,draftPluginType=FROM_RICOS_ENTITY_TYPE[type],dataFieldName=TO_RICOS_DATA_FIELD[draftPluginType];return dataFieldName||console.error("No data field name | Plugin Name: "+draftPluginType),function(nodeType,data){var _converters;if(!data)return console.error("No data for "+nodeType),{};var newData=Object(lodash.cloneDeep)(data),converters=((_converters={}).VIDEO=convertVideoData,_converters.DIVIDER=convertDividerData,_converters.FILE=convertFileData,_converters.GIF=convertGIFData,_converters.IMAGE=convertImageData,_converters.POLL=convertPollData,_converters.APP_EMBED=convertAppEmbedData,_converters.LINK_PREVIEW=convertLinkPreviewData,_converters.BUTTON=convertButtonData,_converters.HTML=convertHTMLData,_converters.MAP=convertMapData,_converters.EMBED=convertEmbedData,_converters);return newData.containerData&&"DIVIDER"!==nodeType&&function(data,nodeType){var string,_ref=data.containerData||{},width=_ref.width,alignment=_ref.alignment,spoiler=_ref.spoiler,height=_ref.height,_ref2=spoiler||{},_ref2$enabled=_ref2.enabled,enabled=void 0!==_ref2$enabled&&_ref2$enabled,description=_ref2.description,buttonText=_ref2.buttonText;data.config=Object.assign({},data.config,(null==width?void 0:width.size)&&{size:(string=width.size,toSpaceCase_1$1(string).replace(/\s(\w)/g,(function(matches,letter){return letter.toUpperCase()})))},(null==width?void 0:width.custom)&&{width:parseInt(width.custom)},(null==height?void 0:height.custom)&&{height:parseInt(height.custom)},alignment&&{alignment:null==alignment?void 0:alignment.toLowerCase()},spoiler&&{spoiler:{enabled:enabled,description:description,buttonContent:buttonText}}),"IMAGE"===nodeType&&null!=width&&width.custom?data.config.size="inline":"MAP"===nodeType&&null!=width&&width.custom&&(data.config.size="content"),delete data.containerData}(newData,nodeType),nodeType in converters&&(0,converters[nodeType])(newData),JSON.parse(JSON.stringify(newData))}(type,node[dataFieldName]||{})}(node);if(void 0===data)throw Error('ERROR! Unknown entity type "'+type+'"!');return{type:draftPluginType,data:data}}(node),type=_getNodeEntityData.type,data=_getNodeEntityData.data;return createEntity(entityKey,{type:type,mutability:"IMMUTABLE",data:data})}(node,latestEntityKey+=1);addBlock({key:node.id,type:BlockType$1.Atomic,text:" ",entityRanges:[{offset:0,length:1,key:latestEntityKey}]}),draftContent.entityMap=extends_default()({},draftContent.entityMap,entityMap)}(node)}parseNodes(index+1)}}(),draftContent.VERSION="8.48.2",draftContent})),module_8008f8e9_parseTextNodes=function(node){var _mergeTextNodes=mergeTextNodes(node.nodes),text=_mergeTextNodes.text,linkDecorations=_mergeTextNodes.decorationMap.LINK,textWithLinks=addLinksToText(text,linkDecorations);return removeTrailingNewLine(textWithLinks)},parseList=function parseList(listNode){return listNode.nodes.map((function(_ref){var _ref$nodes=_ref.nodes,paragraph=_ref$nodes[0],childNode=_ref$nodes[1];return[{type:listNode.type,item:module_8008f8e9_parseTextNodes(paragraph)},childNode?parseList(childNode):[]]})).flat(2)},module_8008f8e9_parseListNode=function(node,delimiter){return parseList(node).map((function(_ref2,index){var type=_ref2.type,item=_ref2.item;return function(index,type){return"ORDERED_LIST"===type?index+1+". ":" "}(index,type)+item})).join(delimiter)},addLinksToText=function(text,linkDecorations){return void 0===linkDecorations&&(linkDecorations=[]),linkDecorations.sort((function(a,b){return a.end-b.end})).reduce((function(newText,link){var _link$linkData,_link$linkData$link;return insertInText(newText,link.end+newText.length-text.length+1,"("+(null===(_link$linkData=link.linkData)||void 0===_link$linkData||null===(_link$linkData$link=_link$linkData.link)||void 0===_link$linkData$link?void 0:_link$linkData$link.url)+")")}),text)},insertInText=function(text,pos,insertedText){return text.substring(0,pos)+insertedText+text.substring(pos)},removeTrailingNewLine=function(text){return text.endsWith("\n")?text.substring(0,text.length-1):text},parseImage=(module_8008f8e9_ref4=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(_ref3,delimiter,urlShortener){var imageData,caption,_ref6,src,id,url;return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(imageData=_ref3.imageData,caption=(imageData||{}).caption,_ref6=(null==imageData?void 0:imageData.image)||{},src=_ref6.src,id=(null==src?void 0:src.id)||(null==src?void 0:src.custom),url="https://static.wixstatic.com/media/"+(null==id?void 0:id.replace("media/","")),!urlShortener){_context.next=9;break}return _context.next=8,urlShortener(url);case 8:url=_context.sent;case 9:return _context.abrupt("return",[caption,url].filter(Boolean).join(delimiter));case 10:case"end":return _context.stop()}}),_callee)}))),function(_x,_x2,_x3){return module_8008f8e9_ref4.apply(this,arguments)}),getDefaultVideoUrl=(module_8008f8e9_ref7=asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(fileId){return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.abrupt("return","https://video.wixstatic.com/"+fileId);case 1:case"end":return _context2.stop()}}),_callee2)}))),function(_x4){return module_8008f8e9_ref7.apply(this,arguments)}),parseVideo=(_ref9=asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(_ref8,delimiter,getVideoUrl){var videoData,_ref10,video,title,_ref11,custom,id,url,vidId,videoUrl;return regenerator_default.a.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return videoData=_ref8.videoData,void 0===getVideoUrl&&(getVideoUrl=getDefaultVideoUrl),video=(_ref10=videoData||{}).video,title=_ref10.title,_ref11=(null==video?void 0:video.src)||{},custom=_ref11.custom,id=_ref11.id,url=_ref11.url,videoUrl=((vidId=id||custom)?getVideoUrl(vidId):url)||"",_context3.abrupt("return",title?title+delimiter+videoUrl:videoUrl);case 7:case"end":return _context3.stop()}}),_callee3)}))),function(_x5,_x6,_x7){return _ref9.apply(this,arguments)}),parseAppEmbed=function(_ref15,delimiter){var _ref16=_ref15.appEmbedData||{},url=_ref16.url;return[_ref16.name,url].filter(Boolean).join(delimiter)},parseEmbed=function(_ref19,delimiter){var _embedData$oembed,embedData=_ref19.embedData;return[null==embedData||null===(_embedData$oembed=embedData.oembed)||void 0===_embedData$oembed?void 0:_embedData$oembed.title,null==embedData?void 0:embedData.src].filter(Boolean).join(delimiter)};asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(content,options){var ricosContent,nodes,_options,urlShortener,getVideoUrl,_options$delimiter,delimiter,plainText,parseNodes;return regenerator_default.a.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return void 0===options&&(options={}),ricosContent=RichContent_fromJSON(content),nodes=ricosContent.nodes,urlShortener=(_options=options).urlShortener,getVideoUrl=_options.getVideoUrl,_options$delimiter=_options.delimiter,delimiter=void 0===_options$delimiter?"\n":_options$delimiter,plainText="",parseNodes=function(){var _ref2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(index){var node;return regenerator_default.a.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(void 0===index&&(index=0),!(node=nodes[index])){_context.next=35;break}index>0&&(plainText+=delimiter),_context.t0=node.type,_context.next="CODE_BLOCK"===_context.t0||"PARAGRAPH"===_context.t0||"HEADING"===_context.t0?7:"BLOCKQUOTE"===_context.t0?9:"ORDERED_LIST"===_context.t0||"BULLETED_LIST"===_context.t0?11:"IMAGE"===_context.t0?13:"VIDEO"===_context.t0?18:"GIF"===_context.t0?23:"MAP"===_context.t0?25:"APP_EMBED"===_context.t0?27:"LINK_PREVIEW"===_context.t0?29:"EMBED"===_context.t0?31:33;break;case 7:return plainText+=module_8008f8e9_parseTextNodes(node),_context.abrupt("break",33);case 9:return plainText+=module_8008f8e9_parseTextNodes(getParagraphNode(node)),_context.abrupt("break",33);case 11:return plainText+=module_8008f8e9_parseListNode(node,delimiter),_context.abrupt("break",33);case 13:return _context.t1=plainText,_context.next=16,parseImage(node,delimiter,urlShortener);case 16:return plainText=_context.t1+=_context.sent,_context.abrupt("break",33);case 18:return _context.t2=plainText,_context.next=21,parseVideo(node,delimiter,getVideoUrl);case 21:return plainText=_context.t2+=_context.sent,_context.abrupt("break",33);case 23:return plainText+=(_gifData$original=void 0,(null==(gifData=node.gifData)||null===(_gifData$original=gifData.original)||void 0===_gifData$original?void 0:_gifData$original.gif)||""),_context.abrupt("break",33);case 25:return plainText+=((null==(mapData=node.mapData)?void 0:mapData.mapSettings)||{}).address||"",_context.abrupt("break",33);case 27:return plainText+=parseAppEmbed(node,delimiter),_context.abrupt("break",33);case 29:return plainText+=((null==(linkPreviewData=node.linkPreviewData)?void 0:linkPreviewData.link)||{}).url||"",_context.abrupt("break",33);case 31:return plainText+=parseEmbed(node),_context.abrupt("break",33);case 33:return _context.next=35,parseNodes(index+1);case 35:case"end":return _context.stop()}var linkPreviewData,mapData,_gifData$original,gifData}),_callee)})));return function(_x3){return _ref2.apply(this,arguments)}}(),_context2.next=8,parseNodes();case 8:return _context2.abrupt("return",plainText);case 9:case"end":return _context2.stop()}}),_callee2)}))),Object.freeze({ONE:"header-one",TWO:"header-two",THREE:"header-three",FOUR:"header-four",FIVE:"header-five",SIX:"header-six"}),Object.freeze(["header-one","header-two","header-three","header-four","header-five","header-six","unordered-list-item","ordered-list-item","blockquote","atomic","code-block","unstyled"]);var _FROM_DRAFT_LIST_TYPE,_TO_RICOS_NODE_TYPE,_TO_RICOS_DECORATION_,_ENTITY_DECORATION_TO,_RICOS_NODE_TYPE_TO_D,_DRAFT_BLOCK_TYPE_TO_,_ENTITY_DECORATION_TO2,BlockType,HeaderLevel,ACTION_BUTTON_TYPE="wix-draft-plugin-action-button",DIVIDER_TYPE="wix-draft-plugin-divider",GIPHY_TYPE="wix-draft-plugin-giphy",HTML_TYPE="wix-draft-plugin-html",IMAGE_TYPE="wix-draft-plugin-image",LINK_PREVIEW_TYPE="wix-draft-plugin-link-preview",MAP_TYPE="wix-draft-plugin-map",APP_EMBED_TYPE="wix-draft-plugin-vertical-embed",VIDEO_TYPE="wix-draft-plugin-video",POLL_TYPE="wix-draft-plugin-poll";function fromEntries(iterable){return[].concat(iterable).reduce((function(obj,_ref){var key=_ref[0],val=_ref[1];return obj[key]=val,obj}),{})}!function(BlockType){BlockType.Unstyled="unstyled",BlockType.HeaderOne="header-one",BlockType.HeaderTwo="header-two",BlockType.HeaderThree="header-three",BlockType.HeaderFour="header-four",BlockType.HeaderFive="header-five",BlockType.HeaderSix="header-six",BlockType.UnorderedListItem="unordered-list-item",BlockType.OrderedListItem="ordered-list-item",BlockType.Blockquote="blockquote",BlockType.CodeBlock="code-block",BlockType.Atomic="atomic"}(BlockType||(BlockType={})),function(HeaderLevel){HeaderLevel[HeaderLevel["header-one"]=1]="header-one",HeaderLevel[HeaderLevel["header-two"]=2]="header-two",HeaderLevel[HeaderLevel["header-three"]=3]="header-three",HeaderLevel[HeaderLevel["header-four"]=4]="header-four",HeaderLevel[HeaderLevel["header-five"]=5]="header-five",HeaderLevel[HeaderLevel["header-six"]=6]="header-six"}(HeaderLevel||(HeaderLevel={}));var FROM_DRAFT_LIST_TYPE=((_FROM_DRAFT_LIST_TYPE={})[BlockType.UnorderedListItem]="BULLETED_LIST",_FROM_DRAFT_LIST_TYPE[BlockType.OrderedListItem]="ORDERED_LIST",_FROM_DRAFT_LIST_TYPE);fromEntries(Object.entries(FROM_DRAFT_LIST_TYPE).map((function(_ref){var key=_ref[0];return[_ref[1],key]})));var TO_RICOS_NODE_TYPE=((_TO_RICOS_NODE_TYPE={})["wix-draft-plugin-link-button"]="BUTTON",_TO_RICOS_NODE_TYPE[ACTION_BUTTON_TYPE]="BUTTON",_TO_RICOS_NODE_TYPE[DIVIDER_TYPE]="DIVIDER",_TO_RICOS_NODE_TYPE["wix-draft-plugin-file-upload"]="FILE",_TO_RICOS_NODE_TYPE["wix-draft-plugin-gallery"]="GALLERY",_TO_RICOS_NODE_TYPE[GIPHY_TYPE]="GIF",_TO_RICOS_NODE_TYPE[HTML_TYPE]="HTML",_TO_RICOS_NODE_TYPE[IMAGE_TYPE]="IMAGE",_TO_RICOS_NODE_TYPE.IMAGE="IMAGE",_TO_RICOS_NODE_TYPE["wix-rich-content-plugin-collapsible-list"]="COLLAPSIBLE_LIST",_TO_RICOS_NODE_TYPE[LINK_PREVIEW_TYPE]="LINK_PREVIEW",_TO_RICOS_NODE_TYPE[MAP_TYPE]="MAP",_TO_RICOS_NODE_TYPE[APP_EMBED_TYPE]="APP_EMBED",_TO_RICOS_NODE_TYPE[VIDEO_TYPE]="VIDEO",_TO_RICOS_NODE_TYPE["VIDEO-EMBED"]="VIDEO",_TO_RICOS_NODE_TYPE[POLL_TYPE]="POLL",_TO_RICOS_NODE_TYPE["wix-rich-content-plugin-table"]="TABLE",_TO_RICOS_NODE_TYPE.EMBED="EMBED",_TO_RICOS_NODE_TYPE),DUPLICATE_KEYS=["IMAGE","VIDEO-EMBED"];fromEntries(Object.entries(TO_RICOS_NODE_TYPE).filter((function(_ref2){var key=_ref2[0];return!DUPLICATE_KEYS.includes(key)})).map((function(_ref3){var key=_ref3[0];return[_ref3[1],key]})));var TO_RICOS_DECORATION_TYPE=((_TO_RICOS_DECORATION_={BOLD:"BOLD",ITALIC:"ITALIC",UNDERLINE:"UNDERLINE"})["wix-rich-content-plugin-spoiler"]="SPOILER",_TO_RICOS_DECORATION_.ANCHOR="ANCHOR",_TO_RICOS_DECORATION_.mention="MENTION",_TO_RICOS_DECORATION_.LINK="LINK",_TO_RICOS_DECORATION_);extends_default()({},TO_RICOS_NODE_TYPE,TO_RICOS_DECORATION_TYPE),fromEntries(Object.entries(TO_RICOS_DECORATION_TYPE).map((function(_ref4){var key=_ref4[0];return[_ref4[1],key]}))),(_ENTITY_DECORATION_TO={}).ANCHOR="MUTABLE",_ENTITY_DECORATION_TO.LINK="MUTABLE",_ENTITY_DECORATION_TO.mention="SEGMENTED",_ENTITY_DECORATION_TO.EMOJI_TYPE="IMMUTABLE";var RICOS_NODE_TYPE_TO_DATA_FIELD=((_RICOS_NODE_TYPE_TO_D={}).BUTTON="buttonData",_RICOS_NODE_TYPE_TO_D.DIVIDER="dividerData",_RICOS_NODE_TYPE_TO_D.FILE="fileData",_RICOS_NODE_TYPE_TO_D.GALLERY="galleryData",_RICOS_NODE_TYPE_TO_D.GIF="gifData",_RICOS_NODE_TYPE_TO_D.HTML="htmlData",_RICOS_NODE_TYPE_TO_D.IMAGE="imageData",_RICOS_NODE_TYPE_TO_D.COLLAPSIBLE_LIST="collapsibleListData",_RICOS_NODE_TYPE_TO_D.LINK_PREVIEW="linkPreviewData",_RICOS_NODE_TYPE_TO_D.MAP="mapData",_RICOS_NODE_TYPE_TO_D.APP_EMBED="appEmbedData",_RICOS_NODE_TYPE_TO_D.VIDEO="videoData",_RICOS_NODE_TYPE_TO_D.POLL="pollData",_RICOS_NODE_TYPE_TO_D.TABLE="tableData",_RICOS_NODE_TYPE_TO_D.PARAGRAPH="paragraphData",_RICOS_NODE_TYPE_TO_D.LIST_ITEM="paragraphData",_RICOS_NODE_TYPE_TO_D.HEADING="headingData",_RICOS_NODE_TYPE_TO_D.CODE_BLOCK="codeBlockData",_RICOS_NODE_TYPE_TO_D.BLOCKQUOTE="paragraphData",_RICOS_NODE_TYPE_TO_D.EMBED="embedData",_RICOS_NODE_TYPE_TO_D),DRAFT_BLOCK_TYPE_TO_DATA_FIELD=((_DRAFT_BLOCK_TYPE_TO_={})[BlockType.Unstyled]="paragraphData",_DRAFT_BLOCK_TYPE_TO_[BlockType.UnorderedListItem]="paragraphData",_DRAFT_BLOCK_TYPE_TO_[BlockType.OrderedListItem]="paragraphData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderOne]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderTwo]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderThree]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderFour]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderFive]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderSix]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.CodeBlock]="codeBlockData",_DRAFT_BLOCK_TYPE_TO_[BlockType.Blockquote]="paragraphData",_DRAFT_BLOCK_TYPE_TO_),DRAFT_PLUGIN_TYPE_TO_DATA_FIELD=fromEntries(Object.entries(TO_RICOS_NODE_TYPE).map((function(_ref5){var key=_ref5[0],value=_ref5[1];return[key,RICOS_NODE_TYPE_TO_DATA_FIELD[value]]}))),ENTITY_DECORATION_TO_DATA_FIELD=((_ENTITY_DECORATION_TO2={}).ANCHOR="anchorData",_ENTITY_DECORATION_TO2.LINK="linkData",_ENTITY_DECORATION_TO2.mention="mentionData",_ENTITY_DECORATION_TO2.EMOJI_TYPE="emojiData",_ENTITY_DECORATION_TO2);extends_default()({},ENTITY_DECORATION_TO_DATA_FIELD,DRAFT_PLUGIN_TYPE_TO_DATA_FIELD,DRAFT_BLOCK_TYPE_TO_DATA_FIELD);var _TO_RICOS_DATA,_assign$m=function(){return(_assign$m=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseLink={target:"SELF"},Link_fromJSON=function(object){var message=_assign$m({},baseLink);return void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.anchor&&null!==object.anchor?message.anchor=String(object.anchor):message.anchor=void 0,void 0!==object.target&&null!==object.target?message.target=function(object){switch(object){case 0:case"SELF":return"SELF";case 1:case"BLANK":return"BLANK";case 2:case"PARENT":return"PARENT";case 3:case"TOP":return"TOP";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.target):message.target="SELF",void 0!==object.rel&&null!==object.rel?message.rel=Link_Rel.fromJSON(object.rel):message.rel=void 0,void 0!==object.customData&&null!==object.customData?message.customData=String(object.customData):message.customData=void 0,message},Link_toJSON=function(message){var obj={};return void 0!==message.url&&(obj.url=message.url),void 0!==message.anchor&&(obj.anchor=message.anchor),void 0!==message.target&&(obj.target=function(object){switch(object){case"SELF":return"SELF";case"BLANK":return"BLANK";case"PARENT":return"PARENT";case"TOP":return"TOP";default:return"UNKNOWN"}}(message.target)),void 0!==message.rel&&(obj.rel=message.rel?Link_Rel.toJSON(message.rel):void 0),void 0!==message.customData&&(obj.customData=message.customData),obj},baseLink_Rel={},Link_Rel={fromJSON:function(object){var message=_assign$m({},baseLink_Rel);return void 0!==object.nofollow&&null!==object.nofollow?message.nofollow=Boolean(object.nofollow):message.nofollow=void 0,void 0!==object.sponsored&&null!==object.sponsored?message.sponsored=Boolean(object.sponsored):message.sponsored=void 0,void 0!==object.ugc&&null!==object.ugc?message.ugc=Boolean(object.ugc):message.ugc=void 0,message},toJSON:function(message){var obj={};return void 0!==message.nofollow&&(obj.nofollow=message.nofollow),void 0!==message.sponsored&&(obj.sponsored=message.sponsored),void 0!==message.ugc&&(obj.ugc=message.ugc),obj}},basePluginContainerData={alignment:"CENTER"},PluginContainerData_fromJSON=function(object){var message=_assign$m({},basePluginContainerData);return void 0!==object.width&&null!==object.width?message.width=PluginContainerData_Width.fromJSON(object.width):message.width=void 0,void 0!==object.alignment&&null!==object.alignment?message.alignment=function(object){switch(object){case 0:case"CENTER":return"CENTER";case 1:case"LEFT":return"LEFT";case 2:case"RIGHT":return"RIGHT";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.alignment):message.alignment="CENTER",void 0!==object.spoiler&&null!==object.spoiler?message.spoiler=PluginContainerData_Spoiler.fromJSON(object.spoiler):message.spoiler=void 0,void 0!==object.height&&null!==object.height?message.height=PluginContainerData_Height.fromJSON(object.height):message.height=void 0,message},PluginContainerData_toJSON=function(message){var obj={};return void 0!==message.width&&(obj.width=message.width?PluginContainerData_Width.toJSON(message.width):void 0),void 0!==message.alignment&&(obj.alignment=function(object){switch(object){case"CENTER":return"CENTER";case"LEFT":return"LEFT";case"RIGHT":return"RIGHT";default:return"UNKNOWN"}}(message.alignment)),void 0!==message.spoiler&&(obj.spoiler=message.spoiler?PluginContainerData_Spoiler.toJSON(message.spoiler):void 0),void 0!==message.height&&(obj.height=message.height?PluginContainerData_Height.toJSON(message.height):void 0),obj},basePluginContainerData_Spoiler={},PluginContainerData_Spoiler={fromJSON:function(object){var message=_assign$m({},basePluginContainerData_Spoiler);return void 0!==object.enabled&&null!==object.enabled?message.enabled=Boolean(object.enabled):message.enabled=void 0,void 0!==object.description&&null!==object.description?message.description=String(object.description):message.description=void 0,void 0!==object.buttonText&&null!==object.buttonText?message.buttonText=String(object.buttonText):message.buttonText=void 0,message},toJSON:function(message){var obj={};return void 0!==message.enabled&&(obj.enabled=message.enabled),void 0!==message.description&&(obj.description=message.description),void 0!==message.buttonText&&(obj.buttonText=message.buttonText),obj}},basePluginContainerData_Width={},PluginContainerData_Width={fromJSON:function(object){var message=_assign$m({},basePluginContainerData_Width);return void 0!==object.size&&null!==object.size?message.size=function(object){switch(object){case 0:case"CONTENT":return"CONTENT";case 1:case"SMALL":return"SMALL";case 2:case"ORIGINAL":return"ORIGINAL";case 3:case"FULL_WIDTH":return"FULL_WIDTH";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.size):message.size=void 0,void 0!==object.custom&&null!==object.custom?message.custom=String(object.custom):message.custom=void 0,message},toJSON:function(message){var obj={};return void 0!==message.size&&(obj.size=void 0!==message.size?function(object){switch(object){case"CONTENT":return"CONTENT";case"SMALL":return"SMALL";case"ORIGINAL":return"ORIGINAL";case"FULL_WIDTH":return"FULL_WIDTH";default:return"UNKNOWN"}}(message.size):void 0),void 0!==message.custom&&(obj.custom=message.custom),obj}},basePluginContainerData_Height={},PluginContainerData_Height={fromJSON:function(object){var message=_assign$m({},basePluginContainerData_Height);return void 0!==object.custom&&null!==object.custom?message.custom=String(object.custom):message.custom=void 0,message},toJSON:function(message){var obj={};return void 0!==message.custom&&(obj.custom=message.custom),obj}},baseFileSource={},FileSource_fromJSON=function(object){var message=_assign$m({},baseFileSource);return void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.custom&&null!==object.custom?message.custom=String(object.custom):message.custom=void 0,void 0!==object.id&&null!==object.id?message.id=String(object.id):message.id=void 0,void 0!==object.private&&null!==object.private?message.private=Boolean(object.private):message.private=void 0,message},FileSource_toJSON=function(message){var obj={};return void 0!==message.url&&(obj.url=message.url),void 0!==message.custom&&(obj.custom=message.custom),void 0!==message.id&&(obj.id=message.id),void 0!==message.private&&(obj.private=message.private),obj},baseMedia={},Media_fromJSON=function(object){var message=_assign$m({},baseMedia);return void 0!==object.src&&null!==object.src?message.src=FileSource_fromJSON(object.src):message.src=void 0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=void 0,void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=void 0,message},Media_toJSON=function(message){var obj={};return void 0!==message.src&&(obj.src=message.src?FileSource_toJSON(message.src):void 0),void 0!==message.width&&(obj.width=message.width),void 0!==message.height&&(obj.height=message.height),obj},baseOembed={},_assign$e=function(){return(_assign$e=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseAppEmbedData={type:"PRODUCT"},AppEmbedData={fromJSON:function(object){var message=_assign$e({},baseAppEmbedData);return void 0!==object.type&&null!==object.type?message.type=function(object){switch(object){case 0:case"PRODUCT":return"PRODUCT";case 1:case"EVENT":return"EVENT";case 2:case"BOOKING":return"BOOKING";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.type):message.type="PRODUCT",void 0!==object.itemId&&null!==object.itemId?message.itemId=String(object.itemId):message.itemId=void 0,void 0!==object.name&&null!==object.name?message.name=String(object.name):message.name=void 0,void 0!==object.imageSrc&&null!==object.imageSrc?message.imageSrc=String(object.imageSrc):message.imageSrc=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.bookingData&&null!==object.bookingData?message.bookingData=AppEmbedData_BookingData.fromJSON(object.bookingData):message.bookingData=void 0,void 0!==object.eventData&&null!==object.eventData?message.eventData=AppEmbedData_EventData.fromJSON(object.eventData):message.eventData=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=function(object){switch(object){case"PRODUCT":return"PRODUCT";case"EVENT":return"EVENT";case"BOOKING":return"BOOKING";default:return"UNKNOWN"}}(message.type)),void 0!==message.itemId&&(obj.itemId=message.itemId),void 0!==message.name&&(obj.name=message.name),void 0!==message.imageSrc&&(obj.imageSrc=message.imageSrc),void 0!==message.url&&(obj.url=message.url),void 0!==message.bookingData&&(obj.bookingData=message.bookingData?AppEmbedData_BookingData.toJSON(message.bookingData):void 0),void 0!==message.eventData&&(obj.eventData=message.eventData?AppEmbedData_EventData.toJSON(message.eventData):void 0),obj}},baseAppEmbedData_BookingData={},AppEmbedData_BookingData={fromJSON:function(object){var message=_assign$e({},baseAppEmbedData_BookingData);return void 0!==object.durations&&null!==object.durations?message.durations=String(object.durations):message.durations=void 0,message},toJSON:function(message){var obj={};return void 0!==message.durations&&(obj.durations=message.durations),obj}},baseAppEmbedData_EventData={},AppEmbedData_EventData={fromJSON:function(object){var message=_assign$e({},baseAppEmbedData_EventData);return void 0!==object.scheduling&&null!==object.scheduling?message.scheduling=String(object.scheduling):message.scheduling=void 0,void 0!==object.location&&null!==object.location?message.location=String(object.location):message.location=void 0,message},toJSON:function(message){var obj={};return void 0!==message.scheduling&&(obj.scheduling=message.scheduling),void 0!==message.location&&(obj.location=message.location),obj}},_assign$d=function(){return(_assign$d=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseButtonData={type:"LINK"},ButtonData={fromJSON:function(object){var message=_assign$d({},baseButtonData);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.type&&null!==object.type?message.type=function(object){switch(object){case 0:case"LINK":return"LINK";case 1:case"ACTION":return"ACTION";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.type):message.type="LINK",void 0!==object.styles&&null!==object.styles?message.styles=ButtonData_ButtonStyles.fromJSON(object.styles):message.styles=void 0,void 0!==object.text&&null!==object.text?message.text=String(object.text):message.text=void 0,void 0!==object.link&&null!==object.link?message.link=Link_fromJSON(object.link):message.link=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),void 0!==message.type&&(obj.type=function(object){switch(object){case"LINK":return"LINK";case"ACTION":return"ACTION";default:return"UNKNOWN"}}(message.type)),void 0!==message.styles&&(obj.styles=message.styles?ButtonData_ButtonStyles.toJSON(message.styles):void 0),void 0!==message.text&&(obj.text=message.text),void 0!==message.link&&(obj.link=message.link?Link_toJSON(message.link):void 0),obj}},baseButtonData_ButtonStyles={},ButtonData_ButtonStyles={fromJSON:function(object){var message=_assign$d({},baseButtonData_ButtonStyles);return void 0!==object.borderWidth&&null!==object.borderWidth?message.borderWidth=Number(object.borderWidth):message.borderWidth=void 0,void 0!==object.borderRadius&&null!==object.borderRadius?message.borderRadius=Number(object.borderRadius):message.borderRadius=void 0,void 0!==object.textColor&&null!==object.textColor?message.textColor=String(object.textColor):message.textColor=void 0,void 0!==object.borderColor&&null!==object.borderColor?message.borderColor=String(object.borderColor):message.borderColor=void 0,void 0!==object.backgroundColor&&null!==object.backgroundColor?message.backgroundColor=String(object.backgroundColor):message.backgroundColor=void 0,message},toJSON:function(message){var obj={};return void 0!==message.borderWidth&&(obj.borderWidth=message.borderWidth),void 0!==message.borderRadius&&(obj.borderRadius=message.borderRadius),void 0!==message.textColor&&(obj.textColor=message.textColor),void 0!==message.borderColor&&(obj.borderColor=message.borderColor),void 0!==message.backgroundColor&&(obj.backgroundColor=message.backgroundColor),obj}},_assign$c=function(){return(_assign$c=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseDividerData={lineStyle:"SINGLE",width:"LARGE",alignment:"CENTER"},DividerData={fromJSON:function(object){var message=_assign$c({},baseDividerData);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.lineStyle&&null!==object.lineStyle?message.lineStyle=function(object){switch(object){case 0:case"SINGLE":return"SINGLE";case 1:case"DOUBLE":return"DOUBLE";case 2:case"DASHED":return"DASHED";case 3:case"DOTTED":return"DOTTED";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.lineStyle):message.lineStyle="SINGLE",void 0!==object.width&&null!==object.width?message.width=function(object){switch(object){case 0:case"LARGE":return"LARGE";case 1:case"MEDIUM":return"MEDIUM";case 2:case"SMALL":return"SMALL";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.width):message.width="LARGE",void 0!==object.alignment&&null!==object.alignment?message.alignment=function(object){switch(object){case 0:case"CENTER":return"CENTER";case 1:case"LEFT":return"LEFT";case 2:case"RIGHT":return"RIGHT";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.alignment):message.alignment="CENTER",message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),void 0!==message.lineStyle&&(obj.lineStyle=function(object){switch(object){case"SINGLE":return"SINGLE";case"DOUBLE":return"DOUBLE";case"DASHED":return"DASHED";case"DOTTED":return"DOTTED";default:return"UNKNOWN"}}(message.lineStyle)),void 0!==message.width&&(obj.width=function(object){switch(object){case"LARGE":return"LARGE";case"MEDIUM":return"MEDIUM";case"SMALL":return"SMALL";default:return"UNKNOWN"}}(message.width)),void 0!==message.alignment&&(obj.alignment=function(object){switch(object){case"CENTER":return"CENTER";case"LEFT":return"LEFT";case"RIGHT":return"RIGHT";default:return"UNKNOWN"}}(message.alignment)),obj}},_assign$b=function(){return(_assign$b=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseEmbedData={},EmbedData={fromJSON:function(object){var message=_assign$b({},baseEmbedData);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.oembed&&null!==object.oembed?message.oembed=function(object){var message=_assign$m({},baseOembed);return void 0!==object.type&&null!==object.type?message.type=String(object.type):message.type=void 0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=void 0,void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.html&&null!==object.html?message.html=String(object.html):message.html=void 0,void 0!==object.authorName&&null!==object.authorName?message.authorName=String(object.authorName):message.authorName=void 0,void 0!==object.authorUrl&&null!==object.authorUrl?message.authorUrl=String(object.authorUrl):message.authorUrl=void 0,void 0!==object.providerName&&null!==object.providerName?message.providerName=String(object.providerName):message.providerName=void 0,void 0!==object.providerUrl&&null!==object.providerUrl?message.providerUrl=String(object.providerUrl):message.providerUrl=void 0,void 0!==object.thumbnailUrl&&null!==object.thumbnailUrl?message.thumbnailUrl=String(object.thumbnailUrl):message.thumbnailUrl=void 0,void 0!==object.thumbnailWidth&&null!==object.thumbnailWidth?message.thumbnailWidth=String(object.thumbnailWidth):message.thumbnailWidth=void 0,void 0!==object.thumbnailHeight&&null!==object.thumbnailHeight?message.thumbnailHeight=String(object.thumbnailHeight):message.thumbnailHeight=void 0,void 0!==object.videoUrl&&null!==object.videoUrl?message.videoUrl=String(object.videoUrl):message.videoUrl=void 0,void 0!==object.version&&null!==object.version?message.version=String(object.version):message.version=void 0,message}(object.oembed):message.oembed=void 0,void 0!==object.src&&null!==object.src?message.src=String(object.src):message.src=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),void 0!==message.oembed&&(obj.oembed=message.oembed?function(message){var obj={};return void 0!==message.type&&(obj.type=message.type),void 0!==message.width&&(obj.width=message.width),void 0!==message.height&&(obj.height=message.height),void 0!==message.title&&(obj.title=message.title),void 0!==message.url&&(obj.url=message.url),void 0!==message.html&&(obj.html=message.html),void 0!==message.authorName&&(obj.authorName=message.authorName),void 0!==message.authorUrl&&(obj.authorUrl=message.authorUrl),void 0!==message.providerName&&(obj.providerName=message.providerName),void 0!==message.providerUrl&&(obj.providerUrl=message.providerUrl),void 0!==message.thumbnailUrl&&(obj.thumbnailUrl=message.thumbnailUrl),void 0!==message.thumbnailWidth&&(obj.thumbnailWidth=message.thumbnailWidth),void 0!==message.thumbnailHeight&&(obj.thumbnailHeight=message.thumbnailHeight),void 0!==message.videoUrl&&(obj.videoUrl=message.videoUrl),void 0!==message.version&&(obj.version=message.version),obj}(message.oembed):void 0),void 0!==message.src&&(obj.src=message.src),obj}},_assign$a=function(){return(_assign$a=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseFileData={},FileData={fromJSON:function(object){var message=_assign$a({},baseFileData);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.src&&null!==object.src?message.src=FileSource_fromJSON(object.src):message.src=void 0,void 0!==object.name&&null!==object.name?message.name=String(object.name):message.name=void 0,void 0!==object.type&&null!==object.type?message.type=String(object.type):message.type=void 0,void 0!==object.size&&null!==object.size?message.size=Number(object.size):message.size=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),void 0!==message.src&&(obj.src=message.src?FileSource_toJSON(message.src):void 0),void 0!==message.name&&(obj.name=message.name),void 0!==message.type&&(obj.type=message.type),void 0!==message.size&&(obj.size=message.size),obj}},_assign$=function(){return(_assign$=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseGalleryData={},GalleryData={fromJSON:function(object){var message=_assign$({},baseGalleryData);if(message.items=[],void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.items&&null!==object.items)for(var _i=0,_a=object.items;_i<_a.length;_i++){var e=_a[_i];message.items.push(GalleryItem.fromJSON(e))}return void 0!==object.styles&&null!==object.styles?message.styles=GalleryStyles.fromJSON(object.styles):message.styles=void 0,void 0!==object.config&&null!==object.config?message.config=GalleryConfig.fromJSON(object.config):message.config=void 0,void 0!==object.disableExpand&&null!==object.disableExpand?message.disableExpand=Boolean(object.disableExpand):message.disableExpand=void 0,void 0!==object.disableDownload&&null!==object.disableDownload?message.disableDownload=Boolean(object.disableDownload):message.disableDownload=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),message.items?obj.items=message.items.map((function(e){return e?GalleryItem.toJSON(e):void 0})):obj.items=[],void 0!==message.styles&&(obj.styles=message.styles?GalleryStyles.toJSON(message.styles):void 0),void 0!==message.config&&(obj.config=message.config?GalleryConfig.toJSON(message.config):void 0),void 0!==message.disableExpand&&(obj.disableExpand=message.disableExpand),void 0!==message.disableDownload&&(obj.disableDownload=message.disableDownload),obj}},baseGalleryStyles={},GalleryStyles={fromJSON:function(object){var message=_assign$({},baseGalleryStyles);return void 0!==object.galleryLayout&&null!==object.galleryLayout?message.galleryLayout=Number(object.galleryLayout):message.galleryLayout=void 0,void 0!==object.gallerySizeType&&null!==object.gallerySizeType?message.gallerySizeType=String(object.gallerySizeType):message.gallerySizeType=void 0,void 0!==object.gallerySizePx&&null!==object.gallerySizePx?message.gallerySizePx=Number(object.gallerySizePx):message.gallerySizePx=void 0,void 0!==object.oneRow&&null!==object.oneRow?message.oneRow=Boolean(object.oneRow):message.oneRow=void 0,void 0!==object.cubeRatio&&null!==object.cubeRatio?message.cubeRatio=Number(object.cubeRatio):message.cubeRatio=void 0,void 0!==object.galleryThumbnailsAlignment&&null!==object.galleryThumbnailsAlignment?message.galleryThumbnailsAlignment=String(object.galleryThumbnailsAlignment):message.galleryThumbnailsAlignment=void 0,void 0!==object.isVertical&&null!==object.isVertical?message.isVertical=Boolean(object.isVertical):message.isVertical=void 0,void 0!==object.numberOfImagesPerRow&&null!==object.numberOfImagesPerRow?message.numberOfImagesPerRow=Number(object.numberOfImagesPerRow):message.numberOfImagesPerRow=void 0,void 0!==object.imageMargin&&null!==object.imageMargin?message.imageMargin=Number(object.imageMargin):message.imageMargin=void 0,void 0!==object.thumbnailSpacings&&null!==object.thumbnailSpacings?message.thumbnailSpacings=Number(object.thumbnailSpacings):message.thumbnailSpacings=void 0,void 0!==object.cubeType&&null!==object.cubeType?message.cubeType=String(object.cubeType):message.cubeType=void 0,void 0!==object.enableInfiniteScroll&&null!==object.enableInfiniteScroll?message.enableInfiniteScroll=Boolean(object.enableInfiniteScroll):message.enableInfiniteScroll=void 0,void 0!==object.titlePlacement&&null!==object.titlePlacement?message.titlePlacement=String(object.titlePlacement):message.titlePlacement=void 0,void 0!==object.allowHover&&null!==object.allowHover?message.allowHover=Boolean(object.allowHover):message.allowHover=void 0,void 0!==object.itemClick&&null!==object.itemClick?message.itemClick=String(object.itemClick):message.itemClick=void 0,void 0!==object.showArrows&&null!==object.showArrows?message.showArrows=Boolean(object.showArrows):message.showArrows=void 0,void 0!==object.gridStyle&&null!==object.gridStyle?message.gridStyle=Number(object.gridStyle):message.gridStyle=void 0,void 0!==object.loveButton&&null!==object.loveButton?message.loveButton=Boolean(object.loveButton):message.loveButton=void 0,void 0!==object.allowSocial&&null!==object.allowSocial?message.allowSocial=Boolean(object.allowSocial):message.allowSocial=void 0,void 0!==object.allowDownload&&null!==object.allowDownload?message.allowDownload=Boolean(object.allowDownload):message.allowDownload=void 0,void 0!==object.cubeImages&&null!==object.cubeImages?message.cubeImages=Boolean(object.cubeImages):message.cubeImages=void 0,void 0!==object.groupSize&&null!==object.groupSize?message.groupSize=Number(object.groupSize):message.groupSize=void 0,void 0!==object.groupTypes&&null!==object.groupTypes?message.groupTypes=String(object.groupTypes):message.groupTypes=void 0,void 0!==object.fixedColumns&&null!==object.fixedColumns?message.fixedColumns=Number(object.fixedColumns):message.fixedColumns=void 0,void 0!==object.hasThumbnails&&null!==object.hasThumbnails?message.hasThumbnails=Boolean(object.hasThumbnails):message.hasThumbnails=void 0,void 0!==object.enableScroll&&null!==object.enableScroll?message.enableScroll=Boolean(object.enableScroll):message.enableScroll=void 0,void 0!==object.isGrid&&null!==object.isGrid?message.isGrid=Boolean(object.isGrid):message.isGrid=void 0,void 0!==object.isSlider&&null!==object.isSlider?message.isSlider=Boolean(object.isSlider):message.isSlider=void 0,void 0!==object.isColumns&&null!==object.isColumns?message.isColumns=Boolean(object.isColumns):message.isColumns=void 0,void 0!==object.isSlideshow&&null!==object.isSlideshow?message.isSlideshow=Boolean(object.isSlideshow):message.isSlideshow=void 0,void 0!==object.cropOnlyFill&&null!==object.cropOnlyFill?message.cropOnlyFill=Boolean(object.cropOnlyFill):message.cropOnlyFill=void 0,void 0!==object.galleryMargin&&null!==object.galleryMargin?message.galleryMargin=Number(object.galleryMargin):message.galleryMargin=void 0,void 0!==object.fullscreen&&null!==object.fullscreen?message.fullscreen=Boolean(object.fullscreen):message.fullscreen=void 0,void 0!==object.mobileSwipeAnimation&&null!==object.mobileSwipeAnimation?message.mobileSwipeAnimation=String(object.mobileSwipeAnimation):message.mobileSwipeAnimation=void 0,void 0!==object.thumbnailSize&&null!==object.thumbnailSize?message.thumbnailSize=Number(object.thumbnailSize):message.thumbnailSize=void 0,void 0!==object.gotStyleParams&&null!==object.gotStyleParams?message.gotStyleParams=Boolean(object.gotStyleParams):message.gotStyleParams=void 0,void 0!==object.showVideoPlayButton&&null!==object.showVideoPlayButton?message.showVideoPlayButton=Boolean(object.showVideoPlayButton):message.showVideoPlayButton=void 0,void 0!==object.videoPlay&&null!==object.videoPlay?message.videoPlay=String(object.videoPlay):message.videoPlay=void 0,void 0!==object.galleryType&&null!==object.galleryType?message.galleryType=String(object.galleryType):message.galleryType=void 0,message},toJSON:function(message){var obj={};return void 0!==message.galleryLayout&&(obj.galleryLayout=message.galleryLayout),void 0!==message.gallerySizeType&&(obj.gallerySizeType=message.gallerySizeType),void 0!==message.gallerySizePx&&(obj.gallerySizePx=message.gallerySizePx),void 0!==message.oneRow&&(obj.oneRow=message.oneRow),void 0!==message.cubeRatio&&(obj.cubeRatio=message.cubeRatio),void 0!==message.galleryThumbnailsAlignment&&(obj.galleryThumbnailsAlignment=message.galleryThumbnailsAlignment),void 0!==message.isVertical&&(obj.isVertical=message.isVertical),void 0!==message.numberOfImagesPerRow&&(obj.numberOfImagesPerRow=message.numberOfImagesPerRow),void 0!==message.imageMargin&&(obj.imageMargin=message.imageMargin),void 0!==message.thumbnailSpacings&&(obj.thumbnailSpacings=message.thumbnailSpacings),void 0!==message.cubeType&&(obj.cubeType=message.cubeType),void 0!==message.enableInfiniteScroll&&(obj.enableInfiniteScroll=message.enableInfiniteScroll),void 0!==message.titlePlacement&&(obj.titlePlacement=message.titlePlacement),void 0!==message.allowHover&&(obj.allowHover=message.allowHover),void 0!==message.itemClick&&(obj.itemClick=message.itemClick),void 0!==message.showArrows&&(obj.showArrows=message.showArrows),void 0!==message.gridStyle&&(obj.gridStyle=message.gridStyle),void 0!==message.loveButton&&(obj.loveButton=message.loveButton),void 0!==message.allowSocial&&(obj.allowSocial=message.allowSocial),void 0!==message.allowDownload&&(obj.allowDownload=message.allowDownload),void 0!==message.cubeImages&&(obj.cubeImages=message.cubeImages),void 0!==message.groupSize&&(obj.groupSize=message.groupSize),void 0!==message.groupTypes&&(obj.groupTypes=message.groupTypes),void 0!==message.fixedColumns&&(obj.fixedColumns=message.fixedColumns),void 0!==message.hasThumbnails&&(obj.hasThumbnails=message.hasThumbnails),void 0!==message.enableScroll&&(obj.enableScroll=message.enableScroll),void 0!==message.isGrid&&(obj.isGrid=message.isGrid),void 0!==message.isSlider&&(obj.isSlider=message.isSlider),void 0!==message.isColumns&&(obj.isColumns=message.isColumns),void 0!==message.isSlideshow&&(obj.isSlideshow=message.isSlideshow),void 0!==message.cropOnlyFill&&(obj.cropOnlyFill=message.cropOnlyFill),void 0!==message.galleryMargin&&(obj.galleryMargin=message.galleryMargin),void 0!==message.fullscreen&&(obj.fullscreen=message.fullscreen),void 0!==message.mobileSwipeAnimation&&(obj.mobileSwipeAnimation=message.mobileSwipeAnimation),void 0!==message.thumbnailSize&&(obj.thumbnailSize=message.thumbnailSize),void 0!==message.gotStyleParams&&(obj.gotStyleParams=message.gotStyleParams),void 0!==message.showVideoPlayButton&&(obj.showVideoPlayButton=message.showVideoPlayButton),void 0!==message.videoPlay&&(obj.videoPlay=message.videoPlay),void 0!==message.galleryType&&(obj.galleryType=message.galleryType),obj}},baseGalleryConfig={},GalleryConfig={fromJSON:function(object){var message=_assign$({},baseGalleryConfig);return void 0!==object.layout&&null!==object.layout?message.layout=String(object.layout):message.layout=void 0,void 0!==object.spacing&&null!==object.spacing?message.spacing=Number(object.spacing):message.spacing=void 0,void 0!==object.key&&null!==object.key?message.key=String(object.key):message.key=void 0,void 0!==object.disableExpand&&null!==object.disableExpand?message.disableExpand=Boolean(object.disableExpand):message.disableExpand=void 0,message},toJSON:function(message){var obj={};return void 0!==message.layout&&(obj.layout=message.layout),void 0!==message.spacing&&(obj.spacing=message.spacing),void 0!==message.key&&(obj.key=message.key),void 0!==message.disableExpand&&(obj.disableExpand=message.disableExpand),obj}},baseGalleyItemMetadata={},baseGalleryItem={},GalleryItem={fromJSON:function(object){var message=_assign$({},baseGalleryItem);return void 0!==object.metadata&&null!==object.metadata?message.metadata=function(object){var message=_assign$({},baseGalleyItemMetadata);return void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=void 0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.type&&null!==object.type?message.type=String(object.type):message.type=void 0,message}(object.metadata):message.metadata=void 0,void 0!==object.itemId&&null!==object.itemId?message.itemId=String(object.itemId):message.itemId=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.selected&&null!==object.selected?message.selected=Boolean(object.selected):message.selected=void 0,message},toJSON:function(message){var obj={};return void 0!==message.metadata&&(obj.metadata=message.metadata?function(message){var obj={};return void 0!==message.height&&(obj.height=message.height),void 0!==message.width&&(obj.width=message.width),void 0!==message.title&&(obj.title=message.title),void 0!==message.type&&(obj.type=message.type),obj}(message.metadata):void 0),void 0!==message.itemId&&(obj.itemId=message.itemId),void 0!==message.url&&(obj.url=message.url),void 0!==message.selected&&(obj.selected=message.selected),obj}},_assign$2=function(){return(_assign$2=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseGIFData={height:0,width:0},GIFData={fromJSON:function(object){var message=_assign$2({},baseGIFData);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.original&&null!==object.original?message.original=GIF.fromJSON(object.original):message.original=void 0,void 0!==object.downsized&&null!==object.downsized?message.downsized=GIF.fromJSON(object.downsized):message.downsized=void 0,void 0!==object.height&&null!==object.height?message.height=Number(object.height):message.height=0,void 0!==object.width&&null!==object.width?message.width=Number(object.width):message.width=0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),void 0!==message.original&&(obj.original=message.original?GIF.toJSON(message.original):void 0),void 0!==message.downsized&&(obj.downsized=message.downsized?GIF.toJSON(message.downsized):void 0),void 0!==message.height&&(obj.height=message.height),void 0!==message.width&&(obj.width=message.width),obj}},baseGIF={},GIF={fromJSON:function(object){var message=_assign$2({},baseGIF);return void 0!==object.gif&&null!==object.gif?message.gif=String(object.gif):message.gif=void 0,void 0!==object.mp4&&null!==object.mp4?message.mp4=String(object.mp4):message.mp4=void 0,void 0!==object.still&&null!==object.still?message.still=String(object.still):message.still=void 0,message},toJSON:function(message){var obj={};return void 0!==message.gif&&(obj.gif=message.gif),void 0!==message.mp4&&(obj.mp4=message.mp4),void 0!==message.still&&(obj.still=message.still),obj}},_assign$3=function(){return(_assign$3=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseHTMLData={},HTMLData={fromJSON:function(object){var message=_assign$3({},baseHTMLData);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.url&&null!==object.url?message.url=String(object.url):message.url=void 0,void 0!==object.html&&null!==object.html?message.html=String(object.html):message.html=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),void 0!==message.url&&(obj.url=message.url),void 0!==message.html&&(obj.html=message.html),obj}},_assign$4=function(){return(_assign$4=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseImageData={},ImageData={fromJSON:function(object){var message=_assign$4({},baseImageData);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.image&&null!==object.image?message.image=Media_fromJSON(object.image):message.image=void 0,void 0!==object.link&&null!==object.link?message.link=Link_fromJSON(object.link):message.link=void 0,void 0!==object.disableExpand&&null!==object.disableExpand?message.disableExpand=Boolean(object.disableExpand):message.disableExpand=void 0,void 0!==object.altText&&null!==object.altText?message.altText=String(object.altText):message.altText=void 0,void 0!==object.caption&&null!==object.caption?message.caption=String(object.caption):message.caption=void 0,void 0!==object.disableDownload&&null!==object.disableDownload?message.disableDownload=Boolean(object.disableDownload):message.disableDownload=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),void 0!==message.image&&(obj.image=message.image?Media_toJSON(message.image):void 0),void 0!==message.link&&(obj.link=message.link?Link_toJSON(message.link):void 0),void 0!==message.disableExpand&&(obj.disableExpand=message.disableExpand),void 0!==message.altText&&(obj.altText=message.altText),void 0!==message.caption&&(obj.caption=message.caption),void 0!==message.disableDownload&&(obj.disableDownload=message.disableDownload),obj}},_assign$5=function(){return(_assign$5=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseLinkPreviewData={},LinkPreviewData={fromJSON:function(object){var message=_assign$5({},baseLinkPreviewData);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.link&&null!==object.link?message.link=Link_fromJSON(object.link):message.link=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.thumbnailUrl&&null!==object.thumbnailUrl?message.thumbnailUrl=String(object.thumbnailUrl):message.thumbnailUrl=void 0,void 0!==object.description&&null!==object.description?message.description=String(object.description):message.description=void 0,void 0!==object.html&&null!==object.html?message.html=String(object.html):message.html=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),void 0!==message.link&&(obj.link=message.link?Link_toJSON(message.link):void 0),void 0!==message.title&&(obj.title=message.title),void 0!==message.thumbnailUrl&&(obj.thumbnailUrl=message.thumbnailUrl),void 0!==message.description&&(obj.description=message.description),void 0!==message.html&&(obj.html=message.html),obj}},_assign$6=function(){return(_assign$6=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseMapData={},MapData={fromJSON:function(object){var message=_assign$6({},baseMapData);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.mapSettings&&null!==object.mapSettings?message.mapSettings=MapSettings.fromJSON(object.mapSettings):message.mapSettings=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),void 0!==message.mapSettings&&(obj.mapSettings=message.mapSettings?MapSettings.toJSON(message.mapSettings):void 0),obj}},baseMapSettings={mapType:"ROADMAP"},MapSettings={fromJSON:function(object){var message=_assign$6({},baseMapSettings);return void 0!==object.address&&null!==object.address?message.address=String(object.address):message.address=void 0,void 0!==object.draggable&&null!==object.draggable?message.draggable=Boolean(object.draggable):message.draggable=void 0,void 0!==object.marker&&null!==object.marker?message.marker=Boolean(object.marker):message.marker=void 0,void 0!==object.streetViewControl&&null!==object.streetViewControl?message.streetViewControl=Boolean(object.streetViewControl):message.streetViewControl=void 0,void 0!==object.zoomControl&&null!==object.zoomControl?message.zoomControl=Boolean(object.zoomControl):message.zoomControl=void 0,void 0!==object.lat&&null!==object.lat?message.lat=Number(object.lat):message.lat=void 0,void 0!==object.lng&&null!==object.lng?message.lng=Number(object.lng):message.lng=void 0,void 0!==object.locationName&&null!==object.locationName?message.locationName=String(object.locationName):message.locationName=void 0,void 0!==object.viewModeControl&&null!==object.viewModeControl?message.viewModeControl=Boolean(object.viewModeControl):message.viewModeControl=void 0,void 0!==object.initialZoom&&null!==object.initialZoom?message.initialZoom=Number(object.initialZoom):message.initialZoom=void 0,void 0!==object.mapType&&null!==object.mapType?message.mapType=function(object){switch(object){case 0:case"ROADMAP":return"ROADMAP";case 1:case"SATELITE":return"SATELITE";case 2:case"HYBRID":return"HYBRID";case 3:case"TERRAIN":return"TERRAIN";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.mapType):message.mapType="ROADMAP",message},toJSON:function(message){var obj={};return void 0!==message.address&&(obj.address=message.address),void 0!==message.draggable&&(obj.draggable=message.draggable),void 0!==message.marker&&(obj.marker=message.marker),void 0!==message.streetViewControl&&(obj.streetViewControl=message.streetViewControl),void 0!==message.zoomControl&&(obj.zoomControl=message.zoomControl),void 0!==message.lat&&(obj.lat=message.lat),void 0!==message.lng&&(obj.lng=message.lng),void 0!==message.locationName&&(obj.locationName=message.locationName),void 0!==message.viewModeControl&&(obj.viewModeControl=message.viewModeControl),void 0!==message.initialZoom&&(obj.initialZoom=message.initialZoom),void 0!==message.mapType&&(obj.mapType=function(object){switch(object){case"ROADMAP":return"ROADMAP";case"SATELITE":return"SATELITE";case"HYBRID":return"HYBRID";case"TERRAIN":return"TERRAIN";default:return"UNKNOWN"}}(message.mapType)),obj}},_assign$7=function(){return(_assign$7=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},basePollData={},PollData={fromJSON:function(object){var message=_assign$7({},basePollData);return void 0!==object.config&&null!==object.config?message.config=PollConfig.fromJSON(object.config):message.config=void 0,void 0!==object.poll&&null!==object.poll?message.poll=Poll.fromJSON(object.poll):message.poll=void 0,void 0!==object.layout&&null!==object.layout?message.layout=PollWidgetLayout.fromJSON(object.layout):message.layout=void 0,void 0!==object.design&&null!==object.design?message.design=PollWidgetDesign.fromJSON(object.design):message.design=void 0,void 0!==object.siteToken&&null!==object.siteToken?message.siteToken=String(object.siteToken):message.siteToken=void 0,message},toJSON:function(message){var obj={};return void 0!==message.config&&(obj.config=message.config?PollConfig.toJSON(message.config):void 0),void 0!==message.poll&&(obj.poll=message.poll?Poll.toJSON(message.poll):void 0),void 0!==message.layout&&(obj.layout=message.layout?PollWidgetLayout.toJSON(message.layout):void 0),void 0!==message.design&&(obj.design=message.design?PollWidgetDesign.toJSON(message.design):void 0),void 0!==message.siteToken&&(obj.siteToken=message.siteToken),obj}},basePollConfig={},PollConfig={fromJSON:function(object){var message=_assign$7({},basePollConfig);return void 0!==object.enableVoteRole&&null!==object.enableVoteRole?message.enableVoteRole=Boolean(object.enableVoteRole):message.enableVoteRole=void 0,message},toJSON:function(message){var obj={};return void 0!==message.enableVoteRole&&(obj.enableVoteRole=message.enableVoteRole),obj}},basePollOption={},PollOption_fromJSON=function(object){var message=_assign$7({},basePollOption);if(message.latestVoters=[],void 0!==object.anonymousCount&&null!==object.anonymousCount?message.anonymousCount=Number(object.anonymousCount):message.anonymousCount=void 0,void 0!==object.count&&null!==object.count?message.count=Number(object.count):message.count=void 0,void 0!==object.optionId&&null!==object.optionId?message.optionId=String(object.optionId):message.optionId=void 0,void 0!==object.latestVoters&&null!==object.latestVoters)for(var _i=0,_a=object.latestVoters;_i<_a.length;_i++){var e=_a[_i];message.latestVoters.push(String(e))}return void 0!==object.mediaId&&null!==object.mediaId?message.mediaId=String(object.mediaId):message.mediaId=void 0,void 0!==object.rating&&null!==object.rating?message.rating=Number(object.rating):message.rating=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,message},basePollSettings={resultsVisibility:"ALWAYS",voteRole:"ALL"},basePollWidgetLayout={},PollWidgetLayout={fromJSON:function(object){var message=_assign$7({},basePollWidgetLayout);return void 0!==object.poll&&null!==object.poll?message.poll=PollWidgetLayout_PollLayout.fromJSON(object.poll):message.poll=void 0,void 0!==object.option&&null!==object.option?message.option=PollWidgetLayout_PollOptionLayout.fromJSON(object.option):message.option=void 0,message},toJSON:function(message){var obj={};return void 0!==message.poll&&(obj.poll=message.poll?PollWidgetLayout_PollLayout.toJSON(message.poll):void 0),void 0!==message.option&&(obj.option=message.option?PollWidgetLayout_PollOptionLayout.toJSON(message.option):void 0),obj}},basePollWidgetLayout_PollLayout={type:"LIST",direction:"LTR"},PollWidgetLayout_PollLayout={fromJSON:function(object){var message=_assign$7({},basePollWidgetLayout_PollLayout);return void 0!==object.type&&null!==object.type?message.type=function(object){switch(object){case 0:case"LIST":return"LIST";case 1:case"GRID":return"GRID";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.type):message.type="LIST",void 0!==object.direction&&null!==object.direction?message.direction=function(object){switch(object){case 0:case"LTR":return"LTR";case 1:case"RTL":return"RTL";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.direction):message.direction="LTR",void 0!==object.enableImage&&null!==object.enableImage?message.enableImage=Boolean(object.enableImage):message.enableImage=void 0,message},toJSON:function(message){var obj={};return void 0!==message.type&&(obj.type=function(object){switch(object){case"LIST":return"LIST";case"GRID":return"GRID";default:return"UNKNOWN"}}(message.type)),void 0!==message.direction&&(obj.direction=function(object){switch(object){case"LTR":return"LTR";case"RTL":return"RTL";default:return"UNKNOWN"}}(message.direction)),void 0!==message.enableImage&&(obj.enableImage=message.enableImage),obj}},basePollWidgetLayout_PollOptionLayout={},PollWidgetLayout_PollOptionLayout={fromJSON:function(object){var message=_assign$7({},basePollWidgetLayout_PollOptionLayout);return void 0!==object.enableImage&&null!==object.enableImage?message.enableImage=Boolean(object.enableImage):message.enableImage=void 0,message},toJSON:function(message){var obj={};return void 0!==message.enableImage&&(obj.enableImage=message.enableImage),obj}},basePoll={},Poll={fromJSON:function(object){var message=_assign$7({},basePoll);if(message.options=[],message.ownVotes=[],void 0!==object.anonymousCount&&null!==object.anonymousCount?message.anonymousCount=Number(object.anonymousCount):message.anonymousCount=void 0,void 0!==object.count&&null!==object.count?message.count=Number(object.count):message.count=void 0,void 0!==object.createdBy&&null!==object.createdBy?message.createdBy=String(object.createdBy):message.createdBy=void 0,void 0!==object.creatorFlag&&null!==object.creatorFlag?message.creatorFlag=Boolean(object.creatorFlag):message.creatorFlag=void 0,void 0!==object.pollId&&null!==object.pollId?message.pollId=String(object.pollId):message.pollId=void 0,void 0!==object.mediaId&&null!==object.mediaId?message.mediaId=String(object.mediaId):message.mediaId=void 0,void 0!==object.options&&null!==object.options)for(var _i=0,_a=object.options;_i<_a.length;_i++){var e=_a[_i];message.options.push(PollOption_fromJSON(e))}if(void 0!==object.ownVotes&&null!==object.ownVotes)for(var _b=0,_c=object.ownVotes;_b<_c.length;_b++)e=_c[_b],message.ownVotes.push(String(e));return void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,void 0!==object.settings&&null!==object.settings?message.settings=function(object){var message=_assign$7({},basePollSettings);return void 0!==object.multipleVotes&&null!==object.multipleVotes?message.multipleVotes=Boolean(object.multipleVotes):message.multipleVotes=void 0,void 0!==object.resultsVisibility&&null!==object.resultsVisibility?message.resultsVisibility=function(object){switch(object){case 0:case"ALWAYS":return"ALWAYS";case 1:case"VOTERS_ONLY":return"VOTERS_ONLY";case 2:case"ONLY_ME":return"ONLY_ME";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.resultsVisibility):message.resultsVisibility="ALWAYS",void 0!==object.voteRole&&null!==object.voteRole?message.voteRole=function(object){switch(object){case 0:case"ALL":return"ALL";case 1:case"SITE_MEMBERS":return"SITE_MEMBERS";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.voteRole):message.voteRole="ALL",void 0!==object.votersDisplay&&null!==object.votersDisplay?message.votersDisplay=Boolean(object.votersDisplay):message.votersDisplay=void 0,void 0!==object.votesDisplay&&null!==object.votesDisplay?message.votesDisplay=Boolean(object.votesDisplay):message.votesDisplay=void 0,message}(object.settings):message.settings=void 0,message},toJSON:function(message){var obj={};return void 0!==message.anonymousCount&&(obj.anonymousCount=message.anonymousCount),void 0!==message.count&&(obj.count=message.count),void 0!==message.createdBy&&(obj.createdBy=message.createdBy),void 0!==message.creatorFlag&&(obj.creatorFlag=message.creatorFlag),void 0!==message.pollId&&(obj.pollId=message.pollId),void 0!==message.mediaId&&(obj.mediaId=message.mediaId),message.options?obj.options=message.options.map((function(e){return e?function(message){var obj={};return void 0!==message.anonymousCount&&(obj.anonymousCount=message.anonymousCount),void 0!==message.count&&(obj.count=message.count),void 0!==message.optionId&&(obj.optionId=message.optionId),message.latestVoters?obj.latestVoters=message.latestVoters.map((function(e){return e})):obj.latestVoters=[],void 0!==message.mediaId&&(obj.mediaId=message.mediaId),void 0!==message.rating&&(obj.rating=message.rating),void 0!==message.title&&(obj.title=message.title),obj}(e):void 0})):obj.options=[],message.ownVotes?obj.ownVotes=message.ownVotes.map((function(e){return e})):obj.ownVotes=[],void 0!==message.title&&(obj.title=message.title),void 0!==message.settings&&(obj.settings=message.settings?function(message){var obj={};return void 0!==message.multipleVotes&&(obj.multipleVotes=message.multipleVotes),void 0!==message.resultsVisibility&&(obj.resultsVisibility=function(object){switch(object){case"ALWAYS":return"ALWAYS";case"VOTERS_ONLY":return"VOTERS_ONLY";case"ONLY_ME":return"ONLY_ME";default:return"UNKNOWN"}}(message.resultsVisibility)),void 0!==message.voteRole&&(obj.voteRole=function(object){switch(object){case"ALL":return"ALL";case"SITE_MEMBERS":return"SITE_MEMBERS";default:return"UNKNOWN"}}(message.voteRole)),void 0!==message.votersDisplay&&(obj.votersDisplay=message.votersDisplay),void 0!==message.votesDisplay&&(obj.votesDisplay=message.votesDisplay),obj}(message.settings):void 0),obj}},basePollWidgetDesign={},PollWidgetDesign={fromJSON:function(object){var message=_assign$7({},basePollWidgetDesign);return void 0!==object.poll&&null!==object.poll?message.poll=PollWidgetDesign_PollDesign.fromJSON(object.poll):message.poll=void 0,void 0!==object.option&&null!==object.option?message.option=PollWidgetDesign_PollOptionDesign.fromJSON(object.option):message.option=void 0,message},toJSON:function(message){var obj={};return void 0!==message.poll&&(obj.poll=message.poll?PollWidgetDesign_PollDesign.toJSON(message.poll):void 0),void 0!==message.option&&(obj.option=message.option?PollWidgetDesign_PollOptionDesign.toJSON(message.option):void 0),obj}},basePollWidgetDesign_PollDesign={backgroundType:"COLOR"},PollWidgetDesign_PollDesign={fromJSON:function(object){var message=_assign$7({},basePollWidgetDesign_PollDesign);return void 0!==object.backgroundType&&null!==object.backgroundType?message.backgroundType=function(object){switch(object){case 0:case"COLOR":return"COLOR";case 1:case"IMAGE":return"IMAGE";case 2:case"GRADIENT":return"GRADIENT";case-1:case"UNRECOGNIZED":default:return"UNRECOGNIZED"}}(object.backgroundType):message.backgroundType="COLOR",void 0!==object.background&&null!==object.background?message.background=String(object.background):message.background=void 0,void 0!==object.borderRadius&&null!==object.borderRadius?message.borderRadius=Number(object.borderRadius):message.borderRadius=void 0,message},toJSON:function(message){var obj={};return void 0!==message.backgroundType&&(obj.backgroundType=function(object){switch(object){case"COLOR":return"COLOR";case"IMAGE":return"IMAGE";case"GRADIENT":return"GRADIENT";default:return"UNKNOWN"}}(message.backgroundType)),void 0!==message.background&&(obj.background=message.background),void 0!==message.borderRadius&&(obj.borderRadius=message.borderRadius),obj}},basePollWidgetDesign_PollOptionDesign={},PollWidgetDesign_PollOptionDesign={fromJSON:function(object){var message=_assign$7({},basePollWidgetDesign_PollOptionDesign);return void 0!==object.borderRadius&&null!==object.borderRadius?message.borderRadius=Number(object.borderRadius):message.borderRadius=void 0,message},toJSON:function(message){var obj={};return void 0!==message.borderRadius&&(obj.borderRadius=message.borderRadius),obj}},_assign$8=function(){return(_assign$8=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},baseVideoData={},VideoData={fromJSON:function(object){var message=_assign$8({},baseVideoData);return void 0!==object.containerData&&null!==object.containerData?message.containerData=PluginContainerData_fromJSON(object.containerData):message.containerData=void 0,void 0!==object.video&&null!==object.video?message.video=Media_fromJSON(object.video):message.video=void 0,void 0!==object.thumbnail&&null!==object.thumbnail?message.thumbnail=Media_fromJSON(object.thumbnail):message.thumbnail=void 0,void 0!==object.disableDownload&&null!==object.disableDownload?message.disableDownload=Boolean(object.disableDownload):message.disableDownload=void 0,void 0!==object.title&&null!==object.title?message.title=String(object.title):message.title=void 0,message},toJSON:function(message){var obj={};return void 0!==message.containerData&&(obj.containerData=message.containerData?PluginContainerData_toJSON(message.containerData):void 0),void 0!==message.video&&(obj.video=message.video?Media_toJSON(message.video):void 0),void 0!==message.thumbnail&&(obj.thumbnail=message.thumbnail?Media_toJSON(message.thumbnail):void 0),void 0!==message.disableDownload&&(obj.disableDownload=message.disableDownload),void 0!==message.title&&(obj.title=message.title),obj}},TO_RICOS_DATA=((_TO_RICOS_DATA={})["wix-draft-plugin-link-button"]=ButtonData,_TO_RICOS_DATA[ACTION_BUTTON_TYPE]=ButtonData,_TO_RICOS_DATA[DIVIDER_TYPE]=DividerData,_TO_RICOS_DATA["wix-draft-plugin-file-upload"]=FileData,_TO_RICOS_DATA["wix-draft-plugin-gallery"]=GalleryData,_TO_RICOS_DATA[GIPHY_TYPE]=GIFData,_TO_RICOS_DATA[HTML_TYPE]=HTMLData,_TO_RICOS_DATA[IMAGE_TYPE]=ImageData,_TO_RICOS_DATA.IMAGE=ImageData,_TO_RICOS_DATA[LINK_PREVIEW_TYPE]=LinkPreviewData,_TO_RICOS_DATA[MAP_TYPE]=MapData,_TO_RICOS_DATA[APP_EMBED_TYPE]=AppEmbedData,_TO_RICOS_DATA[VIDEO_TYPE]=VideoData,_TO_RICOS_DATA["VIDEO-EMBED"]=VideoData,_TO_RICOS_DATA[POLL_TYPE]=PollData,_TO_RICOS_DATA.EMBED=EmbedData,_TO_RICOS_DATA),toUpperCase=function(s){return s.toUpperCase()},toLinkTarget=function(target){return void 0===target&&(target="SELF"),function(a,ab,bc,cd,de,ef,fg,gh,hi,ij,jk,kl,lm,mn,no,op,pq,qr,rs,st){switch(arguments.length){case 1:return a;case 2:return ab(a);case 3:return bc(ab(a));case 4:return cd(bc(ab(a)));case 5:return de(cd(bc(ab(a))));case 6:return ef(de(cd(bc(ab(a)))));case 7:return fg(ef(de(cd(bc(ab(a))))));case 8:return gh(fg(ef(de(cd(bc(ab(a)))))));case 9:return hi(gh(fg(ef(de(cd(bc(ab(a))))))));case 10:return ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))));case 11:return jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))));case 12:return kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))));case 13:return lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))));case 14:return mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))));case 15:return no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))));case 16:return op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))));case 17:return pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))));case 18:return qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))));case 19:return rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))))));case 20:return st(rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))))))}}(target,toUpperCase,(function(s){return s.replace("_","")}))},createLink=function(_ref3){var url=_ref3.url,rel=_ref3.rel,target=_ref3.target,anchor=_ref3.anchor,relValues=(null==rel?void 0:rel.split(" ").filter((function(key){return["nofollow","sponsored","ugc"].includes(key)})).map((function(key){return[key,!0]})))||[];return{anchor:anchor,url:url,rel:relValues.length>0?fromEntries(relValues):void 0,target:toLinkTarget(target)}},hasSpace=/\s/,hasSeparator=/(_|-|\.|:)/,hasCamel=/([a-z][A-Z]|[A-Z][a-z])/,separatorSplitter=/[\W_]+(.|$)/g,camelSplitter=/(.)([A-Z]+)/g,_excluded$4=["id"],convertVideoData$1=function(data){if("string"==typeof data.src){data.video={src:{url:data.src}};var _ref3=data.metadata||{},thumbnail_url=_ref3.thumbnail_url,width=_ref3.width,height=_ref3.height,title=_ref3.title;title&&(data.title=title),data.thumbnail={src:{url:thumbnail_url},width:width,height:height}}else"object"==typeof data.src&&(data.video={src:{id:data.src.pathname}},data.thumbnail={src:{id:data.src.thumbnail.pathname},width:data.src.thumbnail.width,height:data.src.thumbnail.height})},convertDividerData$1=function(data){var _data$type,_data$config,_data$config$size,_data$config2,_data$config2$alignme;Object(lodash.has)(data,"type")&&(data.lineStyle=null===(_data$type=data.type)||void 0===_data$type?void 0:_data$type.toUpperCase()),Object(lodash.has)(data,"config.size")&&(data.width=null===(_data$config=data.config)||void 0===_data$config||null===(_data$config$size=_data$config.size)||void 0===_data$config$size?void 0:_data$config$size.toUpperCase()),Object(lodash.has)(data,"config.alignment")&&(data.alignment=null===(_data$config2=data.config)||void 0===_data$config2||null===(_data$config2$alignme=_data$config2.alignment)||void 0===_data$config2$alignme?void 0:_data$config2$alignme.toUpperCase()),data.containerData={width:{size:"CONTENT"}}},convertImageData$1=function(data){var _data$metadata,_data$metadata2,_ref4=data.src||{},file_name=_ref4.file_name,width=_ref4.width,height=_ref4.height,_ref5=data.config||{},link=_ref5.link,anchor=_ref5.anchor;data.image={src:{id:file_name},width:width,height:height},data.link=(link||anchor)&&createLink(extends_default()({},link,{anchor:anchor})),data.altText=null===(_data$metadata=data.metadata)||void 0===_data$metadata?void 0:_data$metadata.alt,data.caption=null===(_data$metadata2=data.metadata)||void 0===_data$metadata2?void 0:_data$metadata2.caption},convertGIFData$1=function(data){var _ref6=data.gif||{},originalUrl=_ref6.originalUrl,originalMp4=_ref6.originalMp4,stillUrl=_ref6.stillUrl,downsizedUrl=_ref6.downsizedUrl,downsizedSmallMp4=_ref6.downsizedSmallMp4,downsizedStillUrl=_ref6.downsizedStillUrl,height=_ref6.height,width=_ref6.width;data.original={gif:originalUrl,mp4:originalMp4,still:stillUrl},data.downsized={gif:downsizedUrl,mp4:downsizedSmallMp4,still:downsizedStillUrl},data.height=height,data.width=width,delete data.gif},convertPollData$1=function(data){Object(lodash.has)(data,"layout.poll.type")&&(data.layout.poll.type=data.layout.poll.type.toUpperCase()),Object(lodash.has)(data,"layout.poll.direction")&&(data.layout.poll.direction=data.layout.poll.direction.toUpperCase()),Object(lodash.has)(data,"design.poll.backgroundType")&&(data.design.poll.backgroundType=data.design.poll.backgroundType.toUpperCase()),Object(lodash.has)(data,"poll.id")&&(data.poll.pollId=data.poll.id),Object(lodash.has)(data,"poll.options")&&(data.poll.options=data.poll.options.map((function(_ref7){var id=_ref7.id,rest=objectWithoutPropertiesLoose_default()(_ref7,_excluded$4);return extends_default()({optionId:id},rest)})))},convertAppEmbedData$1=function(data){var _html$match,_html$match$,_data$type2,_data$selectedProduct=data.selectedProduct,id=_data$selectedProduct.id,name=_data$selectedProduct.name,imageSrc=_data$selectedProduct.imageSrc,description=_data$selectedProduct.description,pageUrl=_data$selectedProduct.pageUrl,scheduling=_data$selectedProduct.scheduling,location=_data$selectedProduct.location,html=_data$selectedProduct.html,durations=_data$selectedProduct.durations;if(data.url=pageUrl||html&&(data.url=null===(_html$match=html.match(/href="[^"]*/g))||void 0===_html$match||null===(_html$match$=_html$match[0])||void 0===_html$match$?void 0:_html$match$.slice(6)),data.itemId=id,data.name=name,data.imageSrc=imageSrc,"booking"===data.type)data.bookingData={durations:durations||description};else if("event"===data.type){var _description$match,_description$match2;data.eventData={location:location||description&&(null===(_description$match=description.match(/[^|]*$/))||void 0===_description$match?void 0:_description$match[0]),scheduling:scheduling||description&&(null===(_description$match2=description.match(/[^|]+/))||void 0===_description$match2?void 0:_description$match2[0])}}data.type=null===(_data$type2=data.type)||void 0===_data$type2?void 0:_data$type2.toUpperCase()},convertLinkPreviewData$1=function(data){var _data$config3,_data$config4;Object(lodash.has)(data,"thumbnail_url")&&(data.thumbnailUrl=data.thumbnail_url),(null===(_data$config3=data.config)||void 0===_data$config3?void 0:_data$config3.link)&&(data.link=createLink(null===(_data$config4=data.config)||void 0===_data$config4?void 0:_data$config4.link))},convertMentionData$1=function(data){var _data$mention,_data$mention2;data.name=null===(_data$mention=data.mention)||void 0===_data$mention?void 0:_data$mention.name,data.slug=null===(_data$mention2=data.mention)||void 0===_data$mention2?void 0:_data$mention2.slug,delete data.mention},convertFileData$1=function(data){var url=data.url,id=data.id,privacy=data.privacy,src={url:url,id:id,private:void 0!==privacy?"private"===privacy:void 0};data.src=src},convertButtonData$1=function(data,blockType){var _ref8=data.button||{},settings=_ref8.settings,_ref9=_ref8.design||{},borderRadius=_ref9.borderRadius,borderWidth=_ref9.borderWidth,background=_ref9.background,color=_ref9.color,borderColor=_ref9.borderColor,_ref10=settings||{},buttonText=_ref10.buttonText,url=_ref10.url,rel=_ref10.rel,target=_ref10.target;data.styles={borderRadius:borderRadius,borderWidth:borderWidth,backgroundColor:background,textColor:color,borderColor:borderColor},data.type=blockType===ACTION_BUTTON_TYPE?"ACTION":"LINK",data.text=buttonText,url&&(data.link=createLink({url:url,rel:rel,target:target}))},convertHTMLData$1=function(data){var src=data.src;data[data.srcType]=src},convertMapData$1=function(data){var _data$mapSettings=data.mapSettings,isDraggingAllowed=_data$mapSettings.isDraggingAllowed,isMarkerShown=_data$mapSettings.isMarkerShown,isStreetViewControlShown=_data$mapSettings.isStreetViewControlShown,isZoomControlShown=_data$mapSettings.isZoomControlShown,locationDisplayName=_data$mapSettings.locationDisplayName,isViewControlShown=_data$mapSettings.isViewControlShown,zoom=_data$mapSettings.zoom,mode=_data$mapSettings.mode;data.mapSettings.draggable=isDraggingAllowed,data.mapSettings.marker=isMarkerShown,data.mapSettings.streetViewControl=isStreetViewControlShown,data.mapSettings.zoomControl=isZoomControlShown,data.mapSettings.locationName=locationDisplayName,data.mapSettings.initialZoom=zoom,data.mapSettings.mapType=null==mode?void 0:mode.toUpperCase(),Object(lodash.has)(data.mapSettings,"isViewControlShown")&&(data.mapSettings.viewModeControl=isViewControlShown)},convertEmbedData$1=function(data){var _data$config5,_data$config5$link,url=null===(_data$config5=data.config)||void 0===_data$config5||null===(_data$config5$link=_data$config5.link)||void 0===_data$config5$link?void 0:_data$config5$link.url;url&&(data.src=url),data.oembed={type:"rich",thumbnailUrl:data.thumbnail_url,title:data.title,description:data.description,html:data.html}},convertLinkData$1=function(data){data.link=createLink(data)},draftToTiptap=function(draftContent){return toTiptap(fromDraft(draftContent))},draftBlockDataToTiptap=function(blockType,draftBlockData){return toTiptap(function(type,data){var _converters,newData=Object(lodash.cloneDeep)(data),converters=((_converters={})[VIDEO_TYPE]=convertVideoData$1,_converters[DIVIDER_TYPE]=convertDividerData$1,_converters["wix-draft-plugin-file-upload"]=convertFileData$1,_converters[GIPHY_TYPE]=convertGIFData$1,_converters[IMAGE_TYPE]=convertImageData$1,_converters[POLL_TYPE]=convertPollData$1,_converters[APP_EMBED_TYPE]=convertAppEmbedData$1,_converters[LINK_PREVIEW_TYPE]=convertLinkPreviewData$1,_converters.mention=convertMentionData$1,_converters["wix-draft-plugin-link-button"]=convertButtonData$1,_converters[ACTION_BUTTON_TYPE]=convertButtonData$1,_converters[HTML_TYPE]=convertHTMLData$1,_converters[MAP_TYPE]=convertMapData$1,_converters.EMBED=convertEmbedData$1,_converters.LINK=convertLinkData$1,_converters),blockType=type;return type===LINK_PREVIEW_TYPE&&data.html&&(blockType="EMBED"),newData.config&&blockType!==DIVIDER_TYPE&&function(data){var string,_ref=data.config||{},size=_ref.size,alignment=_ref.alignment,width=_ref.width,spoiler=_ref.spoiler,height=_ref.height,_ref2=spoiler||{},enabled=_ref2.enabled,description=_ref2.description,buttonContent=_ref2.buttonContent,newSpoiler=spoiler&&{enabled:enabled||!1,description:description,buttonText:buttonContent};data.containerData={alignment:null==alignment?void 0:alignment.toUpperCase(),spoiler:newSpoiler},"number"==typeof height&&(data.containerData.height={custom:height}),"number"==typeof width?data.containerData.width={custom:width}:size&&(data.containerData.width={size:(string=size,function(string){return function(string){return function(string){return hasSpace.test(string)?string.toLowerCase():hasSeparator.test(string)?(function(string){return string.replace(separatorSplitter,(function(m,next){return next?" "+next:""}))}(string)||string).toLowerCase():hasCamel.test(string)?function(string){return string.replace(camelSplitter,(function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")}))}(string).toLowerCase():string.toLowerCase()}(string).replace(/[\W_]+(.|$)/g,(function(matches,match){return match?" "+match:""})).trim()}(string).replace(/\s/g,"_")}(string).toUpperCase())})}(newData),blockType in converters&&(0,converters[blockType])(newData,blockType),function(data){var pluginDataMethods=TO_RICOS_DATA[blockType];return(null==pluginDataMethods?void 0:pluginDataMethods.fromJSON(data))||data}(newData)}(blockType,draftBlockData))},tiptapToDraft=function(proseContent){return toDraft(fromTiptap(proseContent))},tiptapNodeDataToDraft=function(nodeType,nodeData){return Object(toDraftData.b)(nodeType,fromTiptap(nodeData))},RopeSequence=function(){};RopeSequence.prototype.append=function(other){return other.length?(other=RopeSequence.from(other),!this.length&&other||other.length<200&&this.leafAppend(other)||this.length<200&&other.leafPrepend(this)||this.appendInner(other)):this},RopeSequence.prototype.prepend=function(other){return other.length?RopeSequence.from(other).append(this):this},RopeSequence.prototype.appendInner=function(other){return new Append(this,other)},RopeSequence.prototype.slice=function(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.length),from>=to?RopeSequence.empty:this.sliceInner(Math.max(0,from),Math.min(this.length,to))},RopeSequence.prototype.get=function(i){if(!(i<0||i>=this.length))return this.getInner(i)},RopeSequence.prototype.forEach=function(f,from,to){void 0===from&&(from=0),void 0===to&&(to=this.length),from<=to?this.forEachInner(f,from,to,0):this.forEachInvertedInner(f,from,to,0)},RopeSequence.prototype.map=function(f,from,to){void 0===from&&(from=0),void 0===to&&(to=this.length);var result=[];return this.forEach((function(elt,i){return result.push(f(elt,i))}),from,to),result},RopeSequence.from=function(values){return values instanceof RopeSequence?values:values&&values.length?new Leaf(values):RopeSequence.empty};var Leaf=function(RopeSequence){function Leaf(values){RopeSequence.call(this),this.values=values}RopeSequence&&(Leaf.__proto__=RopeSequence),Leaf.prototype=Object.create(RopeSequence&&RopeSequence.prototype),Leaf.prototype.constructor=Leaf;var prototypeAccessors={length:{configurable:!0},depth:{configurable:!0}};return Leaf.prototype.flatten=function(){return this.values},Leaf.prototype.sliceInner=function(from,to){return 0==from&&to==this.length?this:new Leaf(this.values.slice(from,to))},Leaf.prototype.getInner=function(i){return this.values[i]},Leaf.prototype.forEachInner=function(f,from,to,start){for(var i=from;i<to;i++)if(!1===f(this.values[i],start+i))return!1},Leaf.prototype.forEachInvertedInner=function(f,from,to,start){for(var i=from-1;i>=to;i--)if(!1===f(this.values[i],start+i))return!1},Leaf.prototype.leafAppend=function(other){if(this.length+other.length<=200)return new Leaf(this.values.concat(other.flatten()))},Leaf.prototype.leafPrepend=function(other){if(this.length+other.length<=200)return new Leaf(other.flatten().concat(this.values))},prototypeAccessors.length.get=function(){return this.values.length},prototypeAccessors.depth.get=function(){return 0},Object.defineProperties(Leaf.prototype,prototypeAccessors),Leaf}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(RopeSequence){function Append(left,right){RopeSequence.call(this),this.left=left,this.right=right,this.length=left.length+right.length,this.depth=Math.max(left.depth,right.depth)+1}return RopeSequence&&(Append.__proto__=RopeSequence),Append.prototype=Object.create(RopeSequence&&RopeSequence.prototype),Append.prototype.constructor=Append,Append.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},Append.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},Append.prototype.forEachInner=function(f,from,to,start){var leftLen=this.left.length;return!(from<leftLen&&!1===this.left.forEachInner(f,from,Math.min(to,leftLen),start))&&!(to>leftLen&&!1===this.right.forEachInner(f,Math.max(from-leftLen,0),Math.min(this.length,to)-leftLen,start+leftLen))&&void 0},Append.prototype.forEachInvertedInner=function(f,from,to,start){var leftLen=this.left.length;return!(from>leftLen&&!1===this.right.forEachInvertedInner(f,from-leftLen,Math.max(to,leftLen)-leftLen,start+leftLen))&&!(to<leftLen&&!1===this.left.forEachInvertedInner(f,Math.min(from,leftLen),to,start))&&void 0},Append.prototype.sliceInner=function(from,to){if(0==from&&to==this.length)return this;var leftLen=this.left.length;return to<=leftLen?this.left.slice(from,to):from>=leftLen?this.right.slice(from-leftLen,to-leftLen):this.left.slice(from,leftLen).append(this.right.slice(0,to-leftLen))},Append.prototype.leafAppend=function(other){var inner=this.right.leafAppend(other);if(inner)return new Append(this.left,inner)},Append.prototype.leafPrepend=function(other){var inner=this.left.leafPrepend(other);if(inner)return new Append(inner,this.right)},Append.prototype.appendInner=function(other){return this.left.depth>=Math.max(this.right.depth,other.depth)+1?new Append(this.left,new Append(this.right,other)):new Append(this,other)},Append}(RopeSequence),ropeSequence=RopeSequence,Branch=function(){function Branch(items,eventCount){this.items=items,this.eventCount=eventCount}var _proto=Branch.prototype;return _proto.popEvent=function(state,preserveItems){var _this=this;if(0==this.eventCount)return null;for(var remap,mapFrom,end=this.items.length;;end--)if(this.items.get(end-1).selection){--end;break}preserveItems&&(remap=this.remapping(end,this.items.length),mapFrom=remap.maps.length);var selection,remaining,transform=state.tr,addAfter=[],addBefore=[];return this.items.forEach((function(item,i){if(!item.step)return remap||(remap=_this.remapping(end,i+1),mapFrom=remap.maps.length),mapFrom--,void addBefore.push(item);if(remap){addBefore.push(new Item(item.map));var map,step=item.step.map(remap.slice(mapFrom));step&&transform.maybeStep(step).doc&&(map=transform.mapping.maps[transform.mapping.maps.length-1],addAfter.push(new Item(map,null,null,addAfter.length+addBefore.length))),mapFrom--,map&&remap.appendMap(map,mapFrom)}else transform.maybeStep(item.step);return item.selection?(selection=remap?item.selection.map(remap.slice(mapFrom)):item.selection,remaining=new Branch(_this.items.slice(0,end).append(addBefore.reverse().concat(addAfter)),_this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:remaining,transform:transform,selection:selection}},_proto.addTransform=function(transform,selection,histOptions,preserveItems){for(var newItems=[],eventCount=this.eventCount,oldItems=this.items,lastItem=!preserveItems&&oldItems.length?oldItems.get(oldItems.length-1):null,i=0;i<transform.steps.length;i++){var merged,step=transform.steps[i].invert(transform.docs[i]),item=new Item(transform.mapping.maps[i],step,selection);(merged=lastItem&&lastItem.merge(item))&&(item=merged,i?newItems.pop():oldItems=oldItems.slice(0,oldItems.length-1)),newItems.push(item),selection&&(eventCount++,selection=null),preserveItems||(lastItem=item)}var items,n,cutPoint,overflow=eventCount-histOptions.depth;return overflow>DEPTH_OVERFLOW&&(n=overflow,(items=oldItems).forEach((function(item,i){if(item.selection&&0==n--)return cutPoint=i,!1})),oldItems=items.slice(cutPoint),eventCount-=overflow),new Branch(oldItems.append(newItems),eventCount)},_proto.remapping=function(from,to){var maps=new module_8008f8e9_Mapping;return this.items.forEach((function(item,i){var mirrorPos=null!=item.mirrorOffset&&i-item.mirrorOffset>=from?maps.maps.length-item.mirrorOffset:null;maps.appendMap(item.map,mirrorPos)}),from,to),maps},_proto.addMaps=function(array){return 0==this.eventCount?this:new Branch(this.items.append(array.map((function(map){return new Item(map)}))),this.eventCount)},_proto.rebased=function(rebasedTransform,rebasedCount){if(!this.eventCount)return this;var rebasedItems=[],start=Math.max(0,this.items.length-rebasedCount),mapping=rebasedTransform.mapping,newUntil=rebasedTransform.steps.length,eventCount=this.eventCount;this.items.forEach((function(item){item.selection&&eventCount--}),start);var iRebased=rebasedCount;this.items.forEach((function(item){var pos=mapping.getMirror(--iRebased);if(null!=pos){newUntil=Math.min(newUntil,pos);var map=mapping.maps[pos];if(item.step){var step=rebasedTransform.steps[pos].invert(rebasedTransform.docs[pos]),selection=item.selection&&item.selection.map(mapping.slice(iRebased+1,pos));selection&&eventCount++,rebasedItems.push(new Item(map,step,selection))}else rebasedItems.push(new Item(map))}}),start);for(var newMaps=[],i=rebasedCount;i<newUntil;i++)newMaps.push(new Item(mapping.maps[i]));var branch=new Branch(this.items.slice(0,start).append(newMaps).append(rebasedItems),eventCount);return branch.emptyItemCount()>500&&(branch=branch.compress(this.items.length-rebasedItems.length)),branch},_proto.emptyItemCount=function(){var count=0;return this.items.forEach((function(item){item.step||count++})),count},_proto.compress=function(upto){void 0===upto&&(upto=this.items.length);var remap=this.remapping(0,upto),mapFrom=remap.maps.length,items=[],events=0;return this.items.forEach((function(item,i){if(i>=upto)items.push(item),item.selection&&events++;else if(item.step){var step=item.step.map(remap.slice(mapFrom)),map=step&&step.getMap();if(mapFrom--,map&&remap.appendMap(map,mapFrom),step){var selection=item.selection&&item.selection.map(remap.slice(mapFrom));selection&&events++;var merged,newItem=new Item(map.invert(),step,selection),last=items.length-1;(merged=items.length&&items[last].merge(newItem))?items[last]=merged:items.push(newItem)}}else item.map&&mapFrom--}),this.items.length,0),new Branch(ropeSequence.from(items.reverse()),events)},Branch}();Branch.empty=new Branch(ropeSequence.empty,0);var Item=function(){function Item(map,step,selection,mirrorOffset){this.map=map,this.step=step,this.selection=selection,this.mirrorOffset=mirrorOffset}return Item.prototype.merge=function(other){if(this.step&&other.step&&!other.selection){var step=other.step.merge(this.step);if(step)return new Item(step.getMap().invert(),step,this.selection)}},Item}(),HistoryState=function(done,undone,prevRanges,prevTime){this.done=done,this.undone=undone,this.prevRanges=prevRanges,this.prevTime=prevTime},DEPTH_OVERFLOW=20;function rangesFor(map){var result=[];return map.forEach((function(_from,_to,from,to){return result.push(from,to)})),result}function mapRanges(ranges,mapping){if(!ranges)return null;for(var result=[],i=0;i<ranges.length;i+=2){var from=mapping.map(ranges[i],1),to=mapping.map(ranges[i+1],-1);from<=to&&result.push(from,to)}return result}function histTransaction(history,state,dispatch,redo){var preserveItems=mustPreserveItems(state),histOptions=historyKey.get(state).spec.config,pop=(redo?history.undone:history.done).popEvent(state,preserveItems);if(pop){var selection=pop.selection.resolve(pop.transform.doc),added=(redo?history.done:history.undone).addTransform(pop.transform,state.selection.getBookmark(),histOptions,preserveItems),newHist=new HistoryState(redo?added:pop.remaining,redo?pop.remaining:added,null,0);dispatch(pop.transform.setSelection(selection).setMeta(historyKey,{redo:redo,historyState:newHist}).scrollIntoView())}}var cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(state){var plugins=state.plugins;if(cachedPreserveItemsPlugins!=plugins){cachedPreserveItems=!1,cachedPreserveItemsPlugins=plugins;for(var i=0;i<plugins.length;i++)if(plugins[i].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}var historyKey=new module_8008f8e9_PluginKey("history"),closeHistoryKey=new module_8008f8e9_PluginKey("closeHistory"),stylesWithRTL=extends_default()({},{fontElementMap:"_2oXfa",pluginContainerReadOnly:"OXh_O",pluginContainer:"_1UlcP",flex:"_2Zrm4",hasFocus:"_32sdV",overlay:"_34x7u",noPointerEventsOnFocus:"_237HQ",hideTextSelection:"_20u8Q",hidden:"_3yKsQ",noBorder:"_1kaLM",pluginContainerMobile:"_3ST_6",isImage:"_3IrZ4",anchor:"_2HEXi",horizontalScrollbarWrapper:"_10OFZ",pluginWithHorizontalScrollbar:"_6sRmY",show:"_3zyNq",hide:"_3HiPE",horizontalScrollbar:"_1einO"},{alignLeft:"_1OP8m",textWrapNowrap:"_38iML",alignRight:"_1aaGk",alignCenter:"_1O2_H",sizeFullWidth:"_22Rvh",renderedInTable:"_2RLrM",sizeContent:"_3MfUJ",sizeSmall:"_1YxDs",sizeSmallCenter:"_3JRXG",flex:"_2cI4x"}),getAlignmentClassName=function(styles,alignment,theme){if(!alignment)return"";var key="align"+Object(lodash.upperFirst)(alignment);return classnames_default()(styles[key],theme[key])},getSizeClassName=function(styles,size,theme){if(!size)return"";var key="size"+Object(lodash.upperFirst)(Object(lodash.camelCase)(size));return classnames_default()(styles[key],theme[key])},getFocusClassName=function(styles,theme,isFocused){var _classNames;return classnames_default()(((_classNames={})[styles.hasFocus]=isFocused,_classNames[theme.hasFocus]=isFocused,_classNames[styles.hideTextSelection]=!isFocused,_classNames))},getTextWrapClassName=function(styles,theme,textWrap){if(!textWrap)return"";var key="textWrap"+Object(lodash.upperFirst)(Object(lodash.camelCase)(textWrap));return classnames_default()(styles[key],theme[key])},getPluginContainerClassName=function(styles,theme,isMobile){var _classNames2;return classnames_default()(styles.pluginContainer,theme.pluginContainer,theme.pluginContainerWrapper,((_classNames2={})[styles.pluginContainerMobile]=isMobile,_classNames2[theme.pluginContainerMobile]=isMobile,_classNames2))},RicosNode=function(_ref){var functions,component=_ref.component,tiptapNodeProps=_ref.tiptapNodeProps,ricosTiptapContext=Object(react.useContext)(RicosTiptapContext)||{},nodeViewsHOCs=ricosTiptapContext.nodeViewsHOCs,nodeViewsHOCsByType=nodeViewsHOCs[tiptapNodeProps.node.type.name]||[],nodeViewsHOCsForAll=nodeViewsHOCs["*"]||[],nodeViewsHOCsAllAndByType=[].concat(nodeViewsHOCsForAll,nodeViewsHOCsByType).sort((function(extA,extB){var extAPriority=extA.priority||100,extBPriority=extB.priority||100;return extAPriority>extBPriority?-1:extAPriority<extBPriority?1:0})),ComponentWithNodeHOCs=Object(react.useRef)((functions=nodeViewsHOCsAllAndByType.reverse(),function(data){return functions.reduce((function(value,func){return func(value)}),data)})(component)).current,componentProps=extends_default()({},ricosTiptapContext,{componentData:tiptapNodeProps.node.attrs},tiptapNodeProps);return react_default.a.createElement(NodeViewWrapper,null,react_default.a.createElement(ComponentWithNodeHOCs,Object.assign({},componentProps)))},createRicosExtensionsConfigs=function(ricosExtensions){return Object(lodash.flatten)(Object(lodash.compact)(ricosExtensions.map((function(extension){return extension.tiptapExtensions})))).map((function(_ref){var type=_ref.type,Component=_ref.Component,creator=_ref.createConfig,createComponentDataDefaults=_ref.createComponentDataDefaults;switch(type){case"node":return function(_ref){var Component=_ref.Component,createComponentDataDefaults=_ref.createComponentDataDefaults,config=(0,_ref.createConfig)({mergeAttributes:mergeAttributes}),name=config.name;return extends_default()({group:"block",atom:!0,selectable:!0,draggable:!0,parseHTML:function(){return[{tag:name+"-component"}]},renderHTML:function(_ref2){var HTMLAttributes=_ref2.HTMLAttributes;return[name+"-component",mergeAttributes(HTMLAttributes)]},addNodeView:function(){return function ReactNodeViewRenderer(component,options){return props=>props.editor.contentComponent?new tiptap_react_esm_ReactNodeView(component,props,options):{}}(function(Component){return function(props){return react_default.a.createElement(NodeViewWrapper,{as:"div"},react_default.a.createElement(RicosNode,{component:Component,tiptapNodeProps:props}))}}(Component))},addAttributes:function(){return(null==createComponentDataDefaults?void 0:createComponentDataDefaults(ricosSchema))||{}}},config,{extensionType:"node"})}({Component:Component,createConfig:creator,createComponentDataDefaults:createComponentDataDefaults});case"mark":return function(_ref){var createComponentDataDefaults=_ref.createComponentDataDefaults;return extends_default()({addAttributes:function(){return(null==createComponentDataDefaults?void 0:createComponentDataDefaults(ricosSchema))||{}}},(0,_ref.createConfig)({mergeAttributes:mergeAttributes}),{extensionType:"mark"})}({createConfig:creator,createComponentDataDefaults:createComponentDataDefaults});case"extension":return createRicosGenericExtensionConfig({createConfig:creator,createComponentDataDefaults:createComponentDataDefaults});default:throw Error("Extension type is unknown")}}))},_excluded=["content","extensions","onLoad"],RicosTiptapEditor=function(_ref){var setValue,content=_ref.content,_ref$extensions=_ref.extensions,extensions=void 0===_ref$extensions?[]:_ref$extensions,onLoad=_ref.onLoad,context=objectWithoutPropertiesLoose_default()(_ref,_excluded),_useState2=Object(react.useState)(null),editor=_useState2[0],setEditor=_useState2[1],_useState3=Object(react.useState)([]),nodeViewsHOCs=_useState3[0],setNodeViewsHOCs=_useState3[1],forceUpdate=(setValue=Object(react.useState)(0)[1],function(){return setValue((function(value){return value+1}))}),extensionsConfigs=[createRicosGenericExtensionConfig({createConfig:function(){return{name:"draft",priority:1e5,addNodeViewHOC:function(){return{nodeTypes:["*"],nodeViewHOC:function(Component){return function(props){var componentData=props.componentData,node=props.node,data=tiptapNodeDataToDraft(node.type.name.toUpperCase(),componentData),newProps=extends_default()({},props,{componentData:data});return react_default.a.createElement(Component,Object.assign({},newProps))}}}}}}}),createRicosGenericExtensionConfig({createConfig:function(){return{name:"ricosHistory",priority:1e3,defaultOptions:{depth:100,newGroupDelay:500},addCommands:function(){return{rebase:function(count){return function(_ref){return _ref.tr.setMeta("rebased",count),!0}},silent:function(){return function(_ref2){return _ref2.tr.setMeta("skip",!0),!0}},undo:function(){return function(_ref3){return state=_ref3.state,dispatch=_ref3.dispatch,!(!(hist=historyKey.getState(state))||0==hist.done.eventCount||(dispatch&&histTransaction(hist,state,dispatch,!1),0));var state,dispatch,hist}},redo:function(){return function(_ref4){return state=_ref4.state,dispatch=_ref4.dispatch,!(!(hist=historyKey.getState(state))||0==hist.undone.eventCount||(dispatch&&histTransaction(hist,state,dispatch,!0),0));var state,dispatch,hist}}}},addProseMirrorPlugins:function(){return[(config=this.options,config={depth:config&&config.depth||100,newGroupDelay:config&&config.newGroupDelay||500},new module_8008f8e9_Plugin({key:historyKey,state:{init:function(){return new HistoryState(Branch.empty,Branch.empty,null,0)},apply:function(tr,hist,state){return tr.getMeta("skip")?(console.log({hist:hist}),hist):(console.log({hist:hist}),function(history,state,tr,options){var historyTr=tr.getMeta(historyKey);if(historyTr)return historyTr.historyState;tr.getMeta(closeHistoryKey)&&(history=new HistoryState(history.done,history.undone,null,0));var appended=tr.getMeta("appendedTransaction");if(0==tr.steps.length)return history;if(appended&&appended.getMeta(historyKey))return appended.getMeta(historyKey).redo?new HistoryState(history.done.addTransform(tr,null,options,mustPreserveItems(state)),history.undone,rangesFor(tr.mapping.maps[tr.steps.length-1]),history.prevTime):new HistoryState(history.done,history.undone.addTransform(tr,null,options,mustPreserveItems(state)),null,history.prevTime);if(!1===tr.getMeta("addToHistory")||appended&&!1===appended.getMeta("addToHistory"))return tr.getMeta("rebased")?new HistoryState(history.done.rebased(tr,void 0),history.undone.rebased(tr,void 0),mapRanges(history.prevRanges,tr.mapping),history.prevTime):new HistoryState(history.done.addMaps(tr.mapping.maps),history.undone.addMaps(tr.mapping.maps),mapRanges(history.prevRanges,tr.mapping),history.prevTime);var newGroup=0==history.prevTime||!appended&&(history.prevTime<(tr.time||0)-options.newGroupDelay||!function(transform,prevRanges){if(!prevRanges)return!1;if(!transform.docChanged)return!0;var adjacent=!1;return transform.mapping.maps[0].forEach((function(start,end){for(var i=0;i<prevRanges.length;i+=2)start<=prevRanges[i+1]&&end>=prevRanges[i]&&(adjacent=!0)})),adjacent}(tr,history.prevRanges)),prevRanges=appended?mapRanges(history.prevRanges,tr.mapping):rangesFor(tr.mapping.maps[tr.steps.length-1]);return new HistoryState(history.done.addTransform(tr,newGroup?state.selection.getBookmark():null,options,mustPreserveItems(state)),Branch.empty,prevRanges,tr.time)}(hist,state,tr,config))}},config:config}))];var config},addKeyboardShortcuts:function(){var _this=this;return{"Mod-z":function(){return _this.editor.commands.undo()},"Mod-y":function(){return _this.editor.commands.redo()},"Shift-Mod-z":function(){return _this.editor.commands.redo()}}}}}}),createRicosGenericExtensionConfig({createConfig:function(){return{name:"styles",priority:10,addNodeViewHOC:function(){return{nodeTypes:["*"],nodeViewHOC:function(Component){return function(props){var context=props.context,componentData=props.componentData,isFocused=props.isFocused,isMobile=context.isMobile,componentStyles=function(_ref){var _componentData$config,_componentData$config2,_componentData$config3,componentData=_ref.componentData,theme=_ref.theme,isFocused=_ref.isFocused,isMobile=_ref.isMobile,alignment=null==componentData||null===(_componentData$config=componentData.config)||void 0===_componentData$config?void 0:_componentData$config.alignment,size=null==componentData||null===(_componentData$config2=componentData.config)||void 0===_componentData$config2?void 0:_componentData$config2.size,textWrap=null==componentData||null===(_componentData$config3=componentData.config)||void 0===_componentData$config3?void 0:_componentData$config3.textWrap;return{alignmentClassName:getAlignmentClassName(stylesWithRTL,alignment,theme),sizeClassName:getSizeClassName(stylesWithRTL,size,theme),focusClassName:getFocusClassName(stylesWithRTL,theme,isFocused),textWrapClassName:getTextWrapClassName(stylesWithRTL,theme,textWrap),pluginContainerClassName:getPluginContainerClassName(stylesWithRTL,theme,isMobile)}}({componentData:componentData,theme:context.theme,isFocused:isFocused,isMobile:isMobile});return react_default.a.createElement("div",{className:Object.values(componentStyles).join(" ")},react_default.a.createElement(Component,Object.assign({},props)))}}}}}}}),createRicosGenericExtensionConfig({createConfig:function(){return{name:"focus",priority:20,addNodeViewHOC:function(){return{nodeTypes:["*"],nodeViewHOC:function(Component){return function(props){return react_default.a.createElement(Component,Object.assign({},props,{isFocused:(editor=props.editor,getPos=props.getPos,_useState=Object(react.useState)(!1),isSelected=_useState[0],setSelected=_useState[1],Object(react.useEffect)((function(){var onSelectionUpdate=function(_ref){var selection,editor=_ref.editor;return function(a,ab,bc,cd,de,ef,fg,gh,hi,ij,jk,kl,lm,mn,no,op,pq,qr,rs,st){switch(arguments.length){case 1:return a;case 2:return ab(a);case 3:return bc(ab(a));case 4:return cd(bc(ab(a)));case 5:return de(cd(bc(ab(a))));case 6:return ef(de(cd(bc(ab(a)))));case 7:return fg(ef(de(cd(bc(ab(a))))));case 8:return gh(fg(ef(de(cd(bc(ab(a)))))));case 9:return hi(gh(fg(ef(de(cd(bc(ab(a))))))));case 10:return ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))));case 11:return jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))));case 12:return kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))));case 13:return lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))));case 14:return mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))));case 15:return no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))));case 16:return op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))));case 17:return pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))));case 18:return qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))));case 19:return rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))))));case 20:return st(rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))))))}}(getPos(),(selection=editor.state.selection,function(position){return position>=selection.$from.pos&&position<=selection.$to.pos}),setSelected)};return editor.on("selectionUpdate",onSelectionUpdate),function(){editor.off("selectionUpdate",onSelectionUpdate)}}),[]),isSelected)}));var editor,getPos,_useState,isSelected,setSelected}}}}}}}),createRicosGenericExtensionConfig({createConfig:function(){return{name:"on-node-focus",priority:19,addNodeViewHOC:function(){return{nodeTypes:["*"],nodeViewHOC:function(Component){return function(props){var node=props.node,componentData=props.componentData,context=props.context,isFocused=props.isFocused;return Object(react.useEffect)((function(){isFocused&&context.onAtomicBlockFocus&&context.onAtomicBlockFocus({blockKey:node.attrs.id,type:node.type.name,data:componentData})}),[props.isFocused]),react_default.a.createElement(Component,Object.assign({},props))}}}}}}})];return Object(react.useEffect)((function(){var ricosExtensionsConfigs=createRicosExtensionsConfigs(extensions),allConfigs=[].concat(ricosExtensionsConfigs,extensionsConfigs),tiptapExtensions$1=module_8008f8e9_RicosExtensionManager.extensionsConfigsToTiptapExtensions(allConfigs),nodeViewsHOCs=module_8008f8e9_RicosExtensionManager.extractNodeViewsHOCsFromRicosExtensions(allConfigs);setNodeViewsHOCs(nodeViewsHOCs);var editorInstance=new tiptap_react_esm_Editor({extensions:[].concat(tiptapExtensions,tiptapExtensions$1),content:content,injectCSS:!0});return setEditor(editorInstance),editorInstance.on("transaction",forceUpdate),onLoad(editorInstance),function(){editorInstance.destroy()}}),[]),react_default.a.createElement(RicosTiptapContext.Provider,{value:{nodeViewsHOCs:nodeViewsHOCs,context:extends_default()({},context)}},react_default.a.createElement("div",{dir:""},react_default.a.createElement(EditorContent,{editor:editor})))},Toolbar=function(_ref){var editor=_ref.editor;return editor?react_default.a.createElement("div",null,react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleBold().run()},className:editor.isActive("bold")?"is-active":""},"bold"),react_default.a.createElement("button",{onClick:function(){editor.chain().focus().setImageLoading(!0).setImageUrl("8bb438_1da83d5d8fcd481ba6bf60b40db869c6.jpg").run(),setTimeout((function(){editor.chain().focus().silent().setImageLoading(!1).setImageUrl("8bb438_8583414cdf6544a191e2b8f678ce7b63.jpg").run()}),5e3)},className:editor.isActive("bold")?"is-active":""},"change image"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleItalic().run()},className:editor.isActive("italic")?"is-active":""},"italic"),react_default.a.createElement("button",{onClick:function(){return editor.chain().undoable().focus().toggleItalic().run()},className:editor.isActive("italic")?"is-active":""},"italic silent"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleStrike().run()},className:editor.isActive("strike")?"is-active":""},"strike"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleCode().run()},className:editor.isActive("code")?"is-active":""},"code"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().unsetAllMarks().run()}},"clear marks"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().clearNodes().run()}},"clear nodes"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().setParagraph().run()},className:editor.isActive("paragraph")?"is-active":""},"paragraph"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleHeading({level:1}).run()},className:editor.isActive("heading",{level:1})?"is-active":""},"h1"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleHeading({level:2}).run()},className:editor.isActive("heading",{level:2})?"is-active":""},"h2"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleHeading({level:3}).run()},className:editor.isActive("heading",{level:3})?"is-active":""},"h3"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleHeading({level:4}).run()},className:editor.isActive("heading",{level:4})?"is-active":""},"h4"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleHeading({level:5}).run()},className:editor.isActive("heading",{level:5})?"is-active":""},"h5"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleHeading({level:6}).run()},className:editor.isActive("heading",{level:6})?"is-active":""},"h6"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleBulletList().run()},className:editor.isActive("bulletList")?"is-active":""},"bullet list"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleOrderedList().run()},className:editor.isActive("orderedList")?"is-active":""},"ordered list"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleCodeBlock().run()},className:editor.isActive("codeBlock")?"is-active":""},"code block"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().toggleBlockquote().run()},className:editor.isActive("blockquote")?"is-active":""},"blockquote"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().setHorizontalRule().run()}},"horizontal rule"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().setHardBreak().run()}},"hard break"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().undo().run()}},"undo"),react_default.a.createElement("button",{onClick:function(){return editor.chain().focus().redo().run()}},"redo")):null},module_8008f8e9_RichContentAdapter=function(){function RichContentAdapter(editor){this.editor=editor,this.editor=editor}var _proto=RichContentAdapter.prototype;return _proto.focus=function(){this.editor.commands.focus()},_proto.blur=function(){this.editor.commands.blur()},_proto.getEditorCommands=function(){var _this=this;return extends_default()({},this.editor.commands,{toggleInlineStyle:function(inlineStyle){_this.editor.chain().focus()["toggle"+Object(lodash.capitalize)(inlineStyle)]().run()},insertBlock:function(pluginType,data){if(pluginType===dist_module.L||pluginType===dist_module.j){var attrs=draftBlockDataToTiptap(dist_module.j,data);_this.editor.commands.insertContent({type:dist_module.j.toLowerCase(),attrs:attrs,content:[]})}},findNodeByKey:function(){}})},_proto.getToolbars=function(){var _this2=this;return{MobileToolbar:function(){return react_default.a.createElement(Toolbar,{editor:_this2.editor})},TextToolbar:function(){return react_default.a.createElement(Toolbar,{editor:_this2.editor})}}},_proto.getToolbarProps=function(){return{}},RichContentAdapter}()}}]);